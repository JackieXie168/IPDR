<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: com::xacct::CRANE::collector::CRANELegacyThread Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="../../d8/dee/namespacecom.html">com</a>::<a class="el" href="../../d9/d91/namespacecom_1_1xacct.html">xacct</a>::<a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a>::<a class="el" href="../../de/d74/namespacecom_1_1xacct_1_1_c_r_a_n_e_1_1collector.html">collector</a>::<a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html">CRANELegacyThread</a></div>
<h1>com::xacct::CRANE::collector::CRANELegacyThread Class Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#a0">main</a> (String[] arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#a1">CRANELegacyThread</a> (String[] arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#a2">run</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d0">showStatus</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d1">readConfigurationXML</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d2">configFromFile</a> ()  throws JDOMException, ConfigException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d3">getConfigurationInfoFromTransmitter</a> (<a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a> setupConfig, <a class="el" href="../../d5/d67/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_config.html">ConnectionConfig</a> connectionConfig)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d4">getConfigurationInfoFromTransmitter</a> (<a class="el" href="../../da/d48/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_log.html">CollectorLog</a> progressLog, <a class="el" href="../../d5/d42/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_config_xml.html">ConfigXml</a> setupConfigXml, <a class="el" href="../../d3/d47/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_extended_inet_address.html">ExtendedInetAddress</a> transmitterAddress, int transmitterPort, int transmitterVersionPort, <a class="el" href="../../d3/d47/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_extended_inet_address.html">ExtendedInetAddress</a> collectorAddress, int collectorConnectPortId, int connectTimeout, int reconnectInterval)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d5">handleGetConfigurationException</a> (<a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> progressLog, Exception ex, boolean doStackTrace, <a class="el" href="../../d3/d47/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_extended_inet_address.html">ExtendedInetAddress</a> transmitterAddress, int transmitterPort, String msg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d6">parseInt</a> (String str, String descr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d7">testIpAddress</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d8">showSystemProperties</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d9">testData</a> (<a class="el" href="../../d5/d16/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_data.html">ProtocolData</a> data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d10">testDataShow</a> (byte[] in, String type, long value, byte[] out)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d11">hexByteStr</a> (byte[] in, String byteSep)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d12">hexByteStr</a> (byte i)</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r0">defaultConnectTimeout</a> = <a class="el" href="../../d5/d32/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_constants.html#s11">Constants.DEFAULT_CONNECT_TIMEOUT</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Hard-coded configuration: how long to wait for a response from UDP version negotiation request.  <a href="#r0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r1">defaultReconnectTimeout</a> = <a class="el" href="../../d5/d32/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_constants.html#s13">Constants.DEFAULT_RECONNECT_INTERVAL</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Hard-coded configuration: how long to wait before trying to reconnect to a transmitter.  <a href="#r1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r2">configFileName</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r3">milliSecToRun</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r4">typeOfOutput</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a> = new <a class="el" href="../../da/d48/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_log.html">CollectorLog</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d6/d09/interfacecom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_field_descriptor_factory.html">FieldDescriptorFactory</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r6">fieldFactory</a> = new <a class="el" href="../../d4/d94/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_test_field_descriptor_factory.html">TestFieldDescriptorFactory</a>()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html">CollectorManager</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r7">collectorManager</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d9/d64/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_outputter_factory.html">CollectorOutputterFactory</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r8">outputterFactory</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r9">collectorConfig</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d5/d42/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_config_xml.html">ConfigXml</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r10">configXml</a> = null</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Tester for the collector of data, using the <a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a> protocol. This program takes arguments: <dl compact><dt><b>Version:</b></dt><dd><dl compact><dt><b>Id</b></dt><dd><a class="el" href="../../db/dfe/_c_r_a_n_e_legacy_thread_8java.html">CRANELegacyThread.java</a>,v 1.3 2005/01/30 15:13:41 ilyad Exp </dd></dl>
</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#a0">main</a> </dd></dl>

<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a1" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::CRANELegacyThread"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">com::xacct::CRANE::collector::CRANELegacyThread::CRANELegacyThread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">String[]&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create the test run object. Calls System.exit if things go horribly wrong. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>The arguments from the command line. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00101                                             {
00102         <span class="keywordflow">if</span> (arg.length != 3) {
00103             CollectorLog.printerrln(<span class="stringliteral">"Test &lt;configFile&gt; &lt;secondsToRun&gt;|0 {csv|null|null0|dedup|config}"</span>);
00104             System.exit(1);
00105         }
00106 
00107         <span class="comment">// Get the command-line parameters</span>
00108 
00109         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r2">configFileName</a>     = arg[0];
00110         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r3">milliSecToRun</a>      = <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d6">parseInt</a>(arg[1], <span class="stringliteral">"secondsToRun"</span>) * 1000;
00111         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r4">typeOfOutput</a>       = arg[2].trim();
00112     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="d2" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::configFromFile"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::CRANELegacyThread::configFromFile           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws JDOMException, <a class="el" href="../../d4/d30/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_config_exception.html">ConfigException</a> <code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00230                                                                               {
00231         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.debug(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Configuration from file "</span> + <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r2">configFileName</a>);
00232 
00233         File configFile = <span class="keyword">new</span> File(<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r2">configFileName</a>);
00234         Document configurationDoc = (<span class="keyword">new</span> SAXBuilder(<span class="keyword">false</span><span class="comment">/*true*/</span>)).build(configFile);
00235         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.debug(<span class="keyword">this</span>, <span class="stringliteral">"setConfigurationFromXML"</span>,
00236                   <span class="stringliteral">"doc from file "</span> + configFile +  <span class="stringliteral">": "</span> + configurationDoc);
00237         <span class="keywordflow">if</span> (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.debug()) {
00238             ConfigXml.outputXml(configurationDoc, System.err);
00239         }
00240 
00241         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r10">configXml</a> = <span class="keyword">new</span> ConfigXml(configurationDoc, <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r6">fieldFactory</a>);
00242 
00243         <span class="keyword">this</span>.collectorConfig = <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r10">configXml</a>.getCollectorConfig();
00244         <span class="keywordflow">if</span> (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.debug()) {
00245             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.debug(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"--- configuration from "</span> +
00246                       <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r2">configFileName</a> + <span class="stringliteral">" ---"</span>);
00247             ConfigXml.outputXml(<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r10">configXml</a>.getXml(), System.err);
00248             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.debug(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"collectorConfig: "</span> +
00249                       <span class="keyword">this</span>.<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r9">collectorConfig</a>.toStringLong());
00250         }
00251     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d4" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::getConfigurationInfoFromTransmitter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::CRANELegacyThread::getConfigurationInfoFromTransmitter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../da/d48/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_log.html">CollectorLog</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>progressLog</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d42/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_config_xml.html">ConfigXml</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>setupConfigXml</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d3/d47/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_extended_inet_address.html">ExtendedInetAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>transmitterAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>transmitterPort</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>transmitterVersionPort</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d3/d47/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_extended_inet_address.html">ExtendedInetAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>collectorAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>collectorConnectPortId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>connectTimeout</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>reconnectInterval</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00304                                                                                   {
00305         <span class="keywordflow">try</span> {
00306             CollectorSetupManager manager =
00307                 <span class="keyword">new</span> CollectorSetupManager(collectorAddress,
00308                                           collectorConnectPortId,
00309                                           progressLog,
00310                                           transmitterAddress,
00311                                           transmitterPort,
00312                                           transmitterVersionPort,
00313                                           connectTimeout,
00314                                           reconnectInterval);
00315             Thread managerThread =
00316                 <span class="keyword">new</span> Thread(manager, <span class="stringliteral">"Setup from "</span> +
00317                            transmitterAddress.andPortToString(transmitterPort));
00318             managerThread.start();
00319 
00320             progressLog.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Setup thread started and waiting for result ..."</span>);
00321             managerThread.join();
00322             progressLog.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Finished waiting."</span>);
00323 
00324             <span class="keywordflow">if</span> (manager.finishedWithoutError()) {
00325                 String vendorString = manager.getVendorString();
00326                 ArrayList sessionConfigList = manager.getSessionConfigList();
00327                 <span class="comment">// Just output the values that we received.</span>
00328                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Results from getting transmitter's session/template/field info ..."</span>);
00329                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Vendor string:\n    "</span> + vendorString);
00330                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Sessions: "</span> +
00331                              CollectorUtil.toStringLong(sessionConfigList, <span class="stringliteral">"    "</span>, <span class="stringliteral">"\n"</span>));
00332                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"--- configuration from transmitter ---"</span>);
00333 
00334                 ConnectionConfig setupConnection =
00335                     <span class="keyword">new</span> ConnectionConfig(transmitterAddress,
00336                                          manager.getTransmitterPort(), <span class="comment">// updated by negotiation</span>
00337                                          transmitterVersionPort,
00338                                          manager.getVendorString(),
00339                                          <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r0">defaultConnectTimeout</a>,
00340                                          <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r1">defaultReconnectTimeout</a>,
00341                                          sessionConfigList);
00342                 ArrayList setupConnectionList = <span class="keyword">new</span> ArrayList(1);
00343                 setupConnectionList.add(setupConnection);
00344 
00345                 CollectorConfig setupCollector =
00346                     <span class="keyword">new</span> CollectorConfig(CollectorConfig.VERSION_1,
00347                                         collectorAddress,
00348                                         collectorConnectPortId,
00349                                         1000, <span class="comment">// setupConfig.getAckInterval(),</span>
00350                                         10,   <span class="comment">// setupConfig.getCollectorStartInterval(),</span>
00351                                         setupConnectionList);
00352 
00353                 setupCollector.automapAndEnableAllFields(<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r6">fieldFactory</a>);
00354 
00355                 setupConfigXml.setCollectorConfig(setupCollector,
00356                                                   <span class="stringliteral">"CRANEcollector.xsd"</span>, <span class="comment">// XXX hard-coded XSD name</span>
00357                                                   <span class="stringliteral">"CRANEcollectorConfiguration"</span>); <span class="comment">// XXX hard-coded</span>
00358             } <span class="keywordflow">else</span> { <span class="comment">// failed receiving: output the exception info.</span>
00359                 Exception e = manager.getRunException();
00360                 <span class="keywordtype">boolean</span> doStackTrace = <span class="keyword">true</span>;
00361                 <span class="keywordflow">if</span> (e instanceof ConnectionIOException &amp;&amp;
00362                     (((ConnectionIOException)e).getCause() instanceof ConnectException)) {
00363                     doStackTrace = <span class="keyword">false</span>;
00364                 }
00365                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d5">handleGetConfigurationException</a>(progressLog, e, doStackTrace,
00366                                                 transmitterAddress, transmitterPort,
00367                                                 <span class="stringliteral">"Error reported from connnection thread when getting setup from transmitter"</span>);
00368                 <span class="keywordflow">return</span>; <span class="comment">// System.exit(1);</span>
00369             }
00370         } <span class="keywordflow">catch</span> (ConfigException e) {
00371             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d5">handleGetConfigurationException</a>(progressLog, e, <span class="keyword">true</span>,
00372                                             transmitterAddress, transmitterPort,
00373                                             <span class="stringliteral">"Configuration error getting setup from transmitter"</span>);
00374             <span class="keywordflow">return</span>; <span class="comment">// System.exit(1);</span>
00375 <span class="comment">//      // following commented out because it can't be thrown inside try</span>
00376 <span class="comment">//      } catch (UnknownHostException e) {</span>
00377 <span class="comment">//          handleGetConfigurationException(progressLog, e, true,</span>
00378 <span class="comment">//                                          transmitterAddress, transmitterPort,</span>
00379 <span class="comment">//                                          "Could not resolve address for transmitter");</span>
00380 <span class="comment">//          return; // System.exit(1);</span>
00381         } <span class="keywordflow">catch</span> (InterruptedException e) {
00382             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d5">handleGetConfigurationException</a>(progressLog, e, <span class="keyword">true</span>,
00383                                             transmitterAddress, transmitterPort,
00384                                             <span class="stringliteral">"Interrupted getting setup from transmiter"</span>);
00385             <span class="keywordflow">return</span>; <span class="comment">// System.exit(1);</span>
00386         } <span class="keywordflow">catch</span> (Exception e) {
00387             <span class="comment">// Other failures are possible but shouldn't happen (not a</span>
00388             <span class="comment">// failure of receiving information from the transmitter,</span>
00389             <span class="comment">// but in the configuration, etc.</span>
00390             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d5">handleGetConfigurationException</a>(progressLog, e, <span class="keyword">true</span>,
00391                                             transmitterAddress, transmitterPort,
00392                                             <span class="stringliteral">"Unexpected error when trying to setup from transmitter"</span>);
00393             <span class="keywordflow">return</span>; <span class="comment">// System.exit(1);</span>
00394         }
00395     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d3" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::getConfigurationInfoFromTransmitter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::CRANELegacyThread::getConfigurationInfoFromTransmitter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>setupConfig</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d67/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_config.html">ConnectionConfig</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connectionConfig</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the configuration information from the transmitter. This would be normally used by the ISM's configuration GUI, to set up the output fields. It can use a skeleton configuration, with only the "top level" configuration and conection stuff, ignoring the session, template, and field stuff. <div class="fragment"><pre class="fragment">00260                                                                                               {
00261         CollectorLog progressLog = <span class="keyword">new</span> CollectorLog(<span class="stringliteral">"**setup** "</span>);
00262         ExtendedInetAddress transmitterAddress = connectionConfig.getTransmitterAddress();
00263         <span class="keywordtype">int</span> transmitterPort = connectionConfig.getTransmitterPort();
00264         <span class="keywordtype">int</span> transmitterVersionPort = connectionConfig.getTransmitterVersionPort();
00265         ExtendedInetAddress collectorAddress = setupConfig.getCollectorAddress();
00266         <span class="keywordtype">int</span> collectorConnectPortId = setupConfig.getCollectorConnectPortId();
00267         <span class="keywordtype">int</span> connectTimeout = connectionConfig.getConnectTimeout();
00268         <span class="keywordtype">int</span> reconnectInterval = connectionConfig.getReconnectInterval();
00269         ConfigXml setupConfigXml = <span class="keyword">new</span> ConfigXml();
00270 
00271         progressLog.info(<span class="keyword">this</span>, <span class="stringliteral">"getConfigurationInfoFromTransmitter"</span>,
00272                          <span class="comment">// " Transmitter: " + ExtendedInetAddress.andPortToString(transmitterAddrStr, transmitterPort) +</span>
00273                          <span class="stringliteral">"Collector: "</span> + collectorAddress +
00274                          <span class="stringliteral">" portID: "</span> + collectorConnectPortId +
00275                          <span class="stringliteral">" using connection: "</span> + connectionConfig);
00276 
00277         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d3">getConfigurationInfoFromTransmitter</a>(progressLog,
00278                                             setupConfigXml,
00279                                             transmitterAddress,
00280                                             transmitterPort,
00281                                             transmitterVersionPort,
00282                                             collectorAddress,
00283                                             collectorConnectPortId,
00284                                             connectTimeout,
00285                                             reconnectInterval);
00286 
00287         <span class="keywordflow">if</span> (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info()) {
00288             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>,
00289                      <span class="stringliteral">"--- Configuration read from exporter "</span> +
00290                      transmitterAddress.andPortToString(transmitterPort) +
00291                      <span class="stringliteral">" ---"</span>);
00292             ConfigXml.outputXml(setupConfigXml.getXml(), System.err);
00293         }
00294     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d5" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::handleGetConfigurationException"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::CRANELegacyThread::handleGetConfigurationException           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>progressLog</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>Exception&nbsp;</td>
          <td class="mdname" nowrap> <em>ex</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>boolean&nbsp;</td>
          <td class="mdname" nowrap> <em>doStackTrace</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d3/d47/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_extended_inet_address.html">ExtendedInetAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>transmitterAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>transmitterPort</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>String&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00402                                                                    {
00403         progressLog.error(<span class="keyword">this</span>, <span class="stringliteral">"getConfigurationInfoFromTransmitter"</span>,
00404                           msg + <span class="stringliteral">" "</span> +
00405                           transmitterAddress.andPortToString(transmitterPort) +
00406                           <span class="stringliteral">": "</span> + ex);
00407         <span class="keywordflow">if</span> (doStackTrace) {
00408             CollectorLog.stackTrace(ex);
00409         }
00410         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d0">showStatus</a>();
00411     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d12" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::hexByteStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final String com::xacct::CRANE::collector::CRANELegacyThread::hexByteStr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>i</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Display a byte as a string. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>i</em>&nbsp;</td><td>The value. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>As a hex string. </dd></dl>
<div class="fragment"><pre class="fragment">00581                                             {
00582         <span class="keywordtype">int</span> j = i &amp; 0xff;
00583         <span class="keywordflow">if</span> (j &lt; 16) {
00584             <span class="keywordflow">return</span> <span class="stringliteral">"0"</span> + Integer.toHexString(j);
00585         } <span class="keywordflow">else</span> {
00586             <span class="keywordflow">return</span> Integer.toHexString(j);
00587         }
00588     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d11" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::hexByteStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final String com::xacct::CRANE::collector::CRANELegacyThread::hexByteStr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>in</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>String&nbsp;</td>
          <td class="mdname" nowrap> <em>byteSep</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Display an array of byetes as a string. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>in</em>&nbsp;</td><td>The value (array of bytes). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>byteSep</em>&nbsp;</td><td>What goes between the individual bytes (typically " "). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The resulting string. </dd></dl>
<div class="fragment"><pre class="fragment">00567                                                                 {
00568         String sep = <span class="stringliteral">""</span>;
00569         String result = <span class="stringliteral">""</span>;
00570         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; in.length; i++) {
00571             result += sep + <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d11">hexByteStr</a>(in[i]);
00572             sep = byteSep;
00573         }
00574         <span class="keywordflow">return</span> result;
00575     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::main"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void com::xacct::CRANE::collector::CRANELegacyThread::main           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">String[]&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Entry point for testing <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>arg</em>&nbsp;</td><td>The command-line arguments: <br>
<code><a class="el" href="../../d1/d6b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_test.html">Test</a> <em>configFile</em> <em>secondsToRun</em>|0 {csv|null|null0|dedup|config}</code> <dl>
<dt><em>configFile</em></dt>
<dd>The XML configuration file. If this is "", then a hard-coded configuration, using the transmitter address and port(s) from the arguments. </dd>
<dt><em>secondsToRun</em></dt>
<dd>Run the main thread for this long, then stop. If this value is zero, run "forever". </dd>
<dt><code>csv</code> | <code>null</code></dt>
<dd>If "csv", output all records in a CSV-like format; <br>
if "null", throw away all output (useful for performance testing); <br>
if "null0", throw away all output and also do minimal processing of input (useful for performance testing); <br>
if "dedup" count the occurrences of each sequence number and output a summary at the end. <br>
if "config", don't process data but instead read the configuration information from the transmitter -- only a "skeleton" XML is needed (see below for this). </dd>
</dl>
</td></tr>
  </table>
</dl>
The minimal configuration file is something like this: <code> <br>
&lt;?xml version="1.0" encoding="UTF-8"?&gt; <br>
&lt;CRANEcollectorConfiguration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="CRANEcollector.xsd"&gt; <br>
&nbsp;&nbsp;&lt;Clients&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;Client&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;IP&gt;127.0.0.1&lt;/IP&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Port&gt;15000&lt;/Port&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;VerPort&gt;15000&lt;/VerPort&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;VendorString/&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;CnctTO&gt;5000&lt;/CnctTO&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;CnctRetryTO&gt;2000&lt;/CnctRetryTO&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;RecnctItvl&gt;10000&lt;/RecnctItvl&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;CnctRndtrpTO&gt;2000&lt;/CnctRndtrpTO&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;AckLogItvl&gt;60000&lt;/AckLogItvl&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Desc/&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;Sessions/&gt; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;/Client&gt; <br>
&nbsp;&nbsp;&lt;/Clients&gt; <br>
&nbsp;&nbsp;&lt;Templates/&gt; <br>
&nbsp;&nbsp;&lt;ConfigurationVersion&gt;1&lt;/ConfigurationVersion&gt; <br>
&nbsp;&nbsp;&lt;ServerIPAddress/&gt; <br>
&nbsp;&nbsp;&lt;ServerPort&gt;15001&lt;/ServerPort&gt; <br>
&nbsp;&nbsp;&lt;ServerAckInterval&gt;1000&lt;/ServerAckInterval&gt; <br>
&nbsp;&nbsp;&lt;ServerStartInterval&gt;10&lt;/ServerStartInterval&gt; <br>
&nbsp;&nbsp;&lt;EnableDebugMsg&gt;false&lt;/EnableDebugMsg&gt; <br>
&lt;/CRANEcollectorConfiguration&gt; </code> <div class="fragment"><pre class="fragment">00080                                     {
00081         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#a1">CRANELegacyThread</a> test = <span class="keyword">new</span> <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#a1">CRANELegacyThread</a>(arg);
00082         test.run();
00083     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d6" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::parseInt"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final int com::xacct::CRANE::collector::CRANELegacyThread::parseInt           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">String&nbsp;</td>
          <td class="mdname" nowrap> <em>str</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>String&nbsp;</td>
          <td class="mdname" nowrap> <em>descr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Utility function for parsing a command-line integer: exit on failure. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>str</em>&nbsp;</td><td>The command-line integer (string). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>descr</em>&nbsp;</td><td>Description for an error message. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The value if successful </dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>exit(1)</em>&nbsp;</td><td>on failure. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00420                                                          {
00421         <span class="keywordtype">int</span> result = 0;
00422         str = str.trim();
00423         <span class="keywordflow">try</span> {
00424             result = Integer.parseInt(str);
00425         } <span class="keywordflow">catch</span> (NumberFormatException e) {
00426             CollectorLog.printerrln(<span class="stringliteral">"Test: invalid "</span> + descr + <span class="stringliteral">" ("</span> + str + <span class="stringliteral">"): "</span> + e);
00427             System.exit(1);
00428         }
00429         <span class="keywordflow">return</span> result;
00430     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::readConfigurationXML"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::CRANELegacyThread::readConfigurationXML           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00216                                               {
00217         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.debug(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Configuration file: "</span> + <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r2">configFileName</a>);
00218 
00219         <span class="keywordflow">try</span> {
00220             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d2">configFromFile</a>();
00221         } <span class="keywordflow">catch</span> (Exception e) {
00222             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.fatal(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>,
00223                       <span class="stringliteral">"configuration error (file "</span> + <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r2">configFileName</a> +  <span class="stringliteral">"): "</span> + e);
00224             CollectorLog.stackTrace(e);
00225             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d0">showStatus</a>();
00226             System.exit(1);
00227         }
00228     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::run"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::CRANELegacyThread::run           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00114                             {
00115         <span class="comment">// log.setDebug();</span>
00116         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.setInfo();
00117 
00118         <span class="keywordflow">if</span> (<span class="keyword">false</span>) { <span class="comment">// for testing ... dump all system properties</span>
00119             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d8">showSystemProperties</a>();
00120         }
00121 
00122         <span class="keywordflow">if</span> (<span class="keyword">false</span>) { <span class="comment">// for testing ... check that little- and big-endian data are transformed properly.</span>
00123             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"--- big endian data test ---"</span>);
00124             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d9">testData</a>(<span class="keyword">new</span> ProtocolDataBigEndian());
00125             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"--- little endian data test ---"</span>);
00126             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d9">testData</a>(<span class="keyword">new</span> ProtocolDataLittleEndian());
00127         }
00128 
00129         <span class="keywordflow">if</span> (<span class="keyword">false</span>) { <span class="comment">// for testing ... check that IP addresses are converted properly.</span>
00130             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"--- IP address conversion test ---"</span>);
00131             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d7">testIpAddress</a>();
00132         }
00133 
00134         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d1">readConfigurationXML</a>();
00135 
00136         <span class="keywordflow">if</span> (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.debug()) {
00137             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.debug(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"--- base configuration ---"</span>);
00138             ConfigXml.outputXml(<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r10">configXml</a>.getXml(), System.err);
00139         }
00140 
00141         <span class="keywordtype">boolean</span> getConfigurationFromTransmitter = <span class="keyword">false</span>;
00142 
00143         <span class="comment">// Set up the outputter ...</span>
00144         <span class="keywordflow">if</span> (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r4">typeOfOutput</a>.equals(<span class="stringliteral">"csv"</span>)) {
00145             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r8">outputterFactory</a> = <span class="keyword">new</span> CsvOutputterFactory(System.out,
00146                                                        <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r9">collectorConfig</a>,
00147                                                        CsvOutputter.styleNameEqValue,
00148                                          <span class="stringliteral">", "</span>);
00149         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r4">typeOfOutput</a>.equals(<span class="stringliteral">"null"</span>)) {
00150             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r8">outputterFactory</a> = <span class="keyword">new</span> NullOutputterFactory(System.out);
00151         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r4">typeOfOutput</a>.equals(<span class="stringliteral">"null0"</span>)) {
00152             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r8">outputterFactory</a> = <span class="keyword">new</span> NullOutputterFactory(System.out);
00153         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r4">typeOfOutput</a>.equals(<span class="stringliteral">"dedup"</span>)) {
00154             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r8">outputterFactory</a> = <span class="keyword">new</span> DedupSummaryOutputterFactory(System.out);
00155         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r4">typeOfOutput</a>.equals(<span class="stringliteral">"config"</span>)) {
00156             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r8">outputterFactory</a> = <span class="keyword">new</span> NullOutputterFactory(System.out);
00157             getConfigurationFromTransmitter = <span class="keyword">true</span>;
00158         } <span class="keywordflow">else</span> {
00159             CollectorLog.printerrln(<span class="stringliteral">"CollectorManager ... type of output must be \"csv\", \"null\", or \"dedup\""</span>);
00160             System.exit(1);
00161         }
00162 
00163         <span class="keywordflow">if</span> (getConfigurationFromTransmitter) { <span class="comment">// This would normally be done by configuration GUI</span>
00164             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Getting configuration from "</span> +
00165                      <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r9">collectorConfig</a>.getConnectionConfigListLength() + <span class="stringliteral">" exporter(s)"</span>);
00166             <span class="keywordflow">for</span> (Iterator it = <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r9">collectorConfig</a>.getConnectionConfigList().iterator(); it.hasNext(); ) {
00167                 ConnectionConfig connection = (ConnectionConfig)it.next();
00168                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Getting configuration from "</span> + connection);
00169                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d3">getConfigurationInfoFromTransmitter</a>(<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r9">collectorConfig</a>, connection);
00170             }
00171             <span class="keywordflow">return</span>;
00172         }
00173 
00174         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.debug(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Collector configuration: "</span> + <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r9">collectorConfig</a>.toStringLong());
00175 
00176         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Collector will run for "</span> + (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r3">milliSecToRun</a>/1000) + <span class="stringliteral">" seconds"</span>);
00177 
00178         <span class="comment">// Finally, we've processed the command arguments, so let's</span>
00179         <span class="comment">// start connecting to the transmitters and receiving data.</span>
00180         <span class="keywordflow">try</span> {
00181             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r7">collectorManager</a> = <span class="keyword">new</span> CollectorManager(<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r9">collectorConfig</a>,
00182                                                     <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>,
00183                                                     <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r8">outputterFactory</a>);
00184             <span class="keywordflow">if</span> (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r4">typeOfOutput</a>.equals(<span class="stringliteral">"null0"</span>)) {
00185                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r7">collectorManager</a>.setNullInput();
00186             }
00187             <span class="keywordflow">if</span> (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r3">milliSecToRun</a> == 0) {
00188                 Thread.sleep(Integer.MAX_VALUE);
00189                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Letting collector run for maximum time"</span>);
00190             } <span class="keywordflow">else</span> {
00191                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Letting collector run for "</span> + (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r3">milliSecToRun</a>/1000) + <span class="stringliteral">" seconds"</span>);
00192                 Thread.sleep(<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r3">milliSecToRun</a>);
00193             }
00194         } <span class="keywordflow">catch</span> (InterruptedException e) {
00195             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r7">collectorManager</a>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"finished: "</span> + e);
00196         } <span class="keywordflow">catch</span> (Exception e) {
00197             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.fatal(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>,
00198                       <span class="stringliteral">"CollectorManager error (file "</span> + <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r2">configFileName</a> +  <span class="stringliteral">"): "</span> + e);
00199             CollectorLog.stackTrace(e);
00200             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d0">showStatus</a>();
00201             System.exit(1);
00202         } finally {
00203             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d0">showStatus</a>();
00204             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Stopping the collectors"</span>);
00205             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r7">collectorManager</a>.stopAndWaitForConnectionsToFinish();
00206             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"main"</span>, <span class="stringliteral">"Finished"</span>);
00207         }
00208     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::showStatus"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::CRANELegacyThread::showStatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00210                                     {
00211         <span class="keywordflow">if</span> (<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r7">collectorManager</a> != null) {
00212             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r7">collectorManager</a>.logConnectionStatus(<a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>);
00213         }
00214     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d8" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::showSystemProperties"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::CRANELegacyThread::showSystemProperties           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
For testing, display the Java Virtual Machine's properties. <div class="fragment"><pre class="fragment">00460                                               {
00461         Properties properties = System.getProperties();
00462         System.err.println(<span class="stringliteral">"Properites:"</span>);
00463         <span class="keywordflow">if</span> (<span class="keyword">false</span>) { <span class="comment">// dump in system-defined order and truncating long strings</span>
00464             properties.list(System.err);
00465         } <span class="keywordflow">else</span> { <span class="comment">// dump in alphabetical order and showing long strings</span>
00466             <span class="keywordflow">for</span> (Iterator it = <span class="keyword">new</span> TreeSet(properties.keySet()).iterator(); it.hasNext(); ) {
00467                 Object key = it.next();
00468                 System.err.println(key + <span class="stringliteral">"="</span> + properties.get(key));
00469             }
00470         }
00471         System.err.println(<span class="stringliteral">"end of Properties"</span>);
00472     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d9" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::testData"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::CRANELegacyThread::testData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d16/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_data.html">ProtocolData</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>data</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
For testing, check that big/little-endian extraction functions work properly. This ought to be more automated but isn't yet. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>data</em>&nbsp;</td><td>The conversion class. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>log</em>&nbsp;</td><td>Use this for outputting results. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00479                                                    {
00480         byte [][] bytev = { { (byte)0xff },
00481                             { (byte)0x01 } };
00482         byte [][] shortv = { { (byte)0xff, (byte)0xff },
00483                              { (byte)0x01, (byte)0x02 },
00484                              { (byte)0x80, 0 } };
00485         byte [][] intv = { { (byte)0xff, (byte)0xff, (byte)0xff, (byte)0xff },
00486                            { (byte)0x00, (byte)0x00, (byte)0x01, (byte)0x02 },
00487                            { (byte)0x80, 0, 0, 0 }  };
00488         byte [][] longv = { { (byte)0xff, (byte)0xff, (byte)0xff, (byte)0xff,
00489                               (byte)0xff, (byte)0xff, (byte)0xff, (byte)0xff },
00490                             { (byte)0xff, (byte)0xff, (byte)0xff, (byte)0xff,
00491                               (byte)0xff, (byte)0xff, (byte)0xff, (byte)0xfe },
00492                             { (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
00493                               (byte)0x00, (byte)0x00, (byte)0x00, (byte)0xff },
00494                             { (byte)0x7f, (byte)0xff, (byte)0xff, (byte)0xff,
00495                               (byte)0xff, (byte)0xff, (byte)0xff, (byte)0xff },
00496                             { (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00,
00497                               (byte)0xff, (byte)0xff, (byte)0xff, (byte)0xff },
00498                             { (byte)0x80, 0, 0, 0, 0, 0, 0, 0 } };
00499 
00500         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bytev.length; i++) {
00501             byte [] z = <span class="keyword">new</span> byte[ProtocolData.byteSize];
00502             byte v = data.getByte(bytev[i], 0);
00503             data.putByte(z, 0, v);
00504             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d10">testDataShow</a>(bytev[i],  <span class="stringliteral">"  byte"</span>, v, z);
00505         }
00506         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; bytev.length; i++) {
00507             byte [] z = <span class="keyword">new</span> byte[ProtocolData.unsignedByteSize];
00508             <span class="keywordtype">short</span> v = data.getUnsignedByte(bytev[i], 0);
00509             data.putUnsignedByte(z, 0, v);
00510             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d10">testDataShow</a>(bytev[i],  <span class="stringliteral">" uByte"</span>, v, z);
00511         }
00512         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; shortv.length; i++) {
00513             byte [] z = <span class="keyword">new</span> byte[ProtocolData.shortSize];
00514             <span class="keywordtype">short</span> v = data.getShort(shortv[i], 0);
00515             data.putShort(z, 0, v);
00516             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d10">testDataShow</a>(shortv[i], <span class="stringliteral">" short"</span>, v, z);
00517         }
00518         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; shortv.length; i++) {
00519             byte [] z = <span class="keyword">new</span> byte[ProtocolData.unsignedShortSize];
00520             <span class="keywordtype">int</span> v = data.getUnsignedShort(shortv[i], 0);
00521             data.putUnsignedShort(z, 0, v);
00522             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d10">testDataShow</a>(shortv[i], <span class="stringliteral">"uShort"</span>, v, z);
00523         }
00524         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; intv.length; i++) {
00525             byte [] z = <span class="keyword">new</span> byte[ProtocolData.intSize];
00526             <span class="keywordtype">int</span> v = data.getInt(intv[i], 0);
00527             data.putInt(z, 0, v);
00528             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d10">testDataShow</a>(intv[i],   <span class="stringliteral">"   int"</span>, v, z);
00529         }
00530         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; intv.length; i++) {
00531             byte [] z = <span class="keyword">new</span> byte[ProtocolData.unsignedIntSize];
00532             <span class="keywordtype">long</span> v = data.getUnsignedInt(intv[i], 0);
00533             data.putUnsignedInt(z, 0, v);
00534             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d10">testDataShow</a>(intv[i],   <span class="stringliteral">"  uInt"</span>, v, z);
00535         }
00536         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; longv.length; i++) {
00537             byte [] z = <span class="keyword">new</span> byte[ProtocolData.longSize];
00538             <span class="keywordtype">long</span> v = data.getLong(longv[i], 0);
00539             data.putLong(z, 0, v);
00540             <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d10">testDataShow</a>(longv[i],  <span class="stringliteral">"  long"</span>, v, z);
00541         }
00542     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d10" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::testDataShow"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::CRANELegacyThread::testDataShow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>in</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>String&nbsp;</td>
          <td class="mdname" nowrap> <em>type</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>out</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Helper function: display results of tesing data conversion. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>in</em>&nbsp;</td><td>The input bytes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>type</em>&nbsp;</td><td>Textual description of the data type. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>The result of converting "in". </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>out</em>&nbsp;</td><td>The byte array result of outputting the value. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>log</em>&nbsp;</td><td>For reporting the results. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00552                                                  {
00553         <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"testDataShow"</span>, type + <span class="stringliteral">": "</span> + <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d11">hexByteStr</a>(in, <span class="stringliteral">" "</span>) + <span class="stringliteral">" -&gt; "</span> + value);
00554         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; out.length; i++) {
00555             <span class="keywordflow">if</span> (in[i] != out[i]) {
00556                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"testDataShow"</span>, <span class="stringliteral">"*** in("</span> + <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d11">hexByteStr</a>(in, <span class="stringliteral">" "</span>) + <span class="stringliteral">")"</span> +
00557                              <span class="stringliteral">"!=out("</span> + <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#d11">hexByteStr</a>(out, <span class="stringliteral">" "</span>) + <span class="stringliteral">")"</span>);
00558             }
00559         }
00560     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d7" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::testIpAddress"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::CRANELegacyThread::testIpAddress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Testing function: see whether we handled addresses such as 0.0.0.0, null, 127.0.0.1 properly (you need to inspect the results, because the actual result will depend on things like local host IP address). <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>log</em>&nbsp;</td><td>Report the results here. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00438                                        {
00439         String [] addr = { null, <span class="stringliteral">""</span>,  <span class="stringliteral">" "</span>, <span class="stringliteral">"10.0.0.40"</span>, <span class="stringliteral">"ent450"</span>, <span class="stringliteral">"1.2.3.4"</span>, <span class="stringliteral">"www.yahoo.com"</span>,
00440                            <span class="stringliteral">"0.0.0.0"</span>, <span class="stringliteral">"127.0.0.1"</span>, <span class="stringliteral">"1.2.3.4.5"</span>, <span class="stringliteral">"foo-bar"</span>,
00441                            <span class="stringliteral">"192.168.254.132"</span>, <span class="stringliteral">"64.169.42.200"</span>,
00442                            <span class="stringliteral">"192.168.126.9"</span>, <span class="stringliteral">"192.168.120.16"</span>};
00443         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; addr.length; i++) {
00444             String addrDescr = (addr[i] == null) ? <span class="stringliteral">"(null)"</span> : <span class="stringliteral">"'"</span> + addr[i] + <span class="stringliteral">"'"</span>;
00445             <span class="keywordflow">try</span> {
00446                 ExtendedInetAddress eAddr = <span class="keyword">new</span> ExtendedInetAddress(addr[i]);
00447                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"testIpAddress"</span>,
00448                              addrDescr + <span class="stringliteral">" -&gt;\t"</span> + eAddr +
00449                              <span class="stringliteral">"\t... name("</span> + eAddr.getHostName() +
00450                              <span class="stringliteral">") addr("</span> + eAddr.getHostAddress() + <span class="stringliteral">")"</span>);
00451             } <span class="keywordflow">catch</span> (Exception e) {
00452                 <a class="code" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"testIpAddress"</span>, addrDescr + <span class="stringliteral">" got exception: "</span> + e);
00453             }
00454         }
00455     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="r9" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::collectorConfig"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a> <a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r9">com::xacct::CRANE::collector::CRANELegacyThread::collectorConfig</a> = null<code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r7" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::collectorManager"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html">CollectorManager</a> <a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r7">com::xacct::CRANE::collector::CRANELegacyThread::collectorManager</a> = null<code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::configFileName"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">String <a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r2">com::xacct::CRANE::collector::CRANELegacyThread::configFileName</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r10" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::configXml"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d42/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_config_xml.html">ConfigXml</a> <a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r10">com::xacct::CRANE::collector::CRANELegacyThread::configXml</a> = null<code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::defaultConnectTimeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final int <a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r0">com::xacct::CRANE::collector::CRANELegacyThread::defaultConnectTimeout</a> = <a class="el" href="../../d5/d32/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_constants.html#s11">Constants.DEFAULT_CONNECT_TIMEOUT</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Hard-coded configuration: how long to wait for a response from UDP version negotiation request. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::defaultReconnectTimeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final int <a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r1">com::xacct::CRANE::collector::CRANELegacyThread::defaultReconnectTimeout</a> = <a class="el" href="../../d5/d32/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_constants.html#s13">Constants.DEFAULT_RECONNECT_INTERVAL</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Hard-coded configuration: how long to wait before trying to reconnect to a transmitter. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r6" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::fieldFactory"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d09/interfacecom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_field_descriptor_factory.html">FieldDescriptorFactory</a> <a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r6">com::xacct::CRANE::collector::CRANELegacyThread::fieldFactory</a> = new <a class="el" href="../../d4/d94/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_test_field_descriptor_factory.html">TestFieldDescriptorFactory</a>()<code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r5" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::log"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> <a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r5">com::xacct::CRANE::collector::CRANELegacyThread::log</a> = new <a class="el" href="../../da/d48/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_log.html">CollectorLog</a>()<code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::milliSecToRun"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r3">com::xacct::CRANE::collector::CRANELegacyThread::milliSecToRun</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r8" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::outputterFactory"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d64/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_outputter_factory.html">CollectorOutputterFactory</a> <a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r8">com::xacct::CRANE::collector::CRANELegacyThread::outputterFactory</a> = null<code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r4" doxytag="com::xacct::CRANE::collector::CRANELegacyThread::typeOfOutput"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">String <a class="el" href="../../da/d78/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_c_r_a_n_e_legacy_thread.html#r4">com::xacct::CRANE::collector::CRANELegacyThread::typeOfOutput</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>ipdr/Collector/com/xacct/CRANE/collector/<a class="el" href="../../db/dfe/_c_r_a_n_e_legacy_thread_8java.html">CRANELegacyThread.java</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 09:26:44 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
