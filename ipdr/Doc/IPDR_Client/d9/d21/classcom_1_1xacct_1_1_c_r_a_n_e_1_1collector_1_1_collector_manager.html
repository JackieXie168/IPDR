<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: com::xacct::CRANE::collector::CollectorManager Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="../../d8/dee/namespacecom.html">com</a>::<a class="el" href="../../d9/d91/namespacecom_1_1xacct.html">xacct</a>::<a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a>::<a class="el" href="../../de/d74/namespacecom_1_1xacct_1_1_c_r_a_n_e_1_1collector.html">collector</a>::<a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html">CollectorManager</a></div>
<h1>com::xacct::CRANE::collector::CollectorManager Class Reference</h1><p>Inheritance diagram for com::xacct::CRANE::collector::CollectorManager:
<p><center><img src="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.png" usemap="#com::xacct::CRANE::collector::CollectorManager_map" border="0" alt=""></center>
<map name="com::xacct::CRANE::collector::CollectorManager_map">
<area href="../../da/d42/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_setup_manager.html" alt="com::xacct::CRANE::collector::CollectorSetupManager" shape="rect" coords="0,56,315,80">
</map>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">final <a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a0">getCollectorConfig</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the configuration.  <a href="#a0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">final <a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a1">getLog</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a2">CollectorManager</a> (<a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>, <a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>, <a class="el" href="../../d9/d64/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_outputter_factory.html">CollectorOutputterFactory</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r1">outputterFactory</a>)  throws InterruptedException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a3">setNullInput</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a4">stopConnections</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a5">waitForConnectionsToFinish</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a6">stopAndWaitForConnectionsToFinish</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a7">logConnectionStatus</a> (<a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a8">setDataAckMsgInterval</a> (int valueMillis)</td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#e0">versionStr</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#b0">CollectorManager</a> (<a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor, for use by sub-classes.  <a href="#b0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#b1">initAndStartConnections</a> (<a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>, <a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>, <a class="el" href="../../d9/d64/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_outputter_factory.html">CollectorOutputterFactory</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r1">outputterFactory</a>)  throws InterruptedException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/d31/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_thread.html">ConnectionThread</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#b2">makeConnectionThread</a> (<a class="el" href="../../d5/d67/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_config.html">ConnectionConfig</a> connectionConfig, <a class="el" href="../../d9/d64/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_outputter_factory.html">CollectorOutputterFactory</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r1">outputterFactory</a>, <a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>, int receiveBufferSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/d31/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_thread.html">ConnectionThread</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#b3">getTheOnlyThread</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The configuration (from XML).  <a href="#p0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The log.  <a href="#p1"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/d31/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_thread.html">ConnectionThread</a>[]&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The connection threads.  <a href="#r0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d9/d64/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_outputter_factory.html">CollectorOutputterFactory</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r1">outputterFactory</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The outputter factory.  <a href="#r1"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A collector of data, using the <a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a> protocol. This object simply holds all the data for a collector, plus methods for starting and stopping the various collection threads. The actual running threads are elsewhere. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d1/d31/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_thread.html">ConnectionThread</a></dd></dl>
<dl compact><dt><b>Version:</b></dt><dd><dl compact><dt><b>Id</b></dt><dd>CollectorManager.java,v 1.4 2005/01/30 15:13:42 ilyad Exp </dd></dl>
</dd></dl>

<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="b0" doxytag="com::xacct::CRANE::collector::CollectorManager::CollectorManager"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">com::xacct::CRANE::collector::CollectorManager::CollectorManager           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>log</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor, for use by sub-classes. 
<p>
<div class="fragment"><pre class="fragment">00039                                                {
00040         <span class="keyword">this</span>.collectorConfig      = null;
00041         <span class="keyword">this</span>.connectionThreadList = <span class="keyword">new</span> ConnectionThread[0]; <span class="comment">// none</span>
00042         <span class="keyword">this</span>.log                  = <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>;
00043         <span class="keyword">this</span>.outputterFactory     = null;
00044     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="com::xacct::CRANE::collector::CollectorManager::CollectorManager"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">com::xacct::CRANE::collector::CollectorManager::CollectorManager           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>collectorConfig</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>log</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d64/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_outputter_factory.html">CollectorOutputterFactory</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>outputterFactory</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws InterruptedException <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor which starts all the (per-connection) thread. If you change the configuration, you must create a new <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html">CollectorManager</a>.<p>
XXX This should change in the future, to allow "on the fly" reconfiguration. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>collectorConfig</em>&nbsp;</td><td>The configuration (will not be changed). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>log</em>&nbsp;</td><td>The output log. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outputterFactory</em>&nbsp;</td><td>For outputting the records received from the transmitter(s). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InterruptedException</em>&nbsp;</td><td>If the start-up is interrupted. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>Thread#start </dd></dl>
<div class="fragment"><pre class="fragment">00060                                     {
00061         <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#b1">initAndStartConnections</a>(<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>, <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>, <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r1">outputterFactory</a>);
00062     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a0" doxytag="com::xacct::CRANE::collector::CollectorManager::getCollectorConfig"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final <a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a> com::xacct::CRANE::collector::CollectorManager::getCollectorConfig           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the configuration. 
<p>
<div class="fragment"><pre class="fragment">00026 { <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="com::xacct::CRANE::collector::CollectorManager::getLog"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final <a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> com::xacct::CRANE::collector::CollectorManager::getLog           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00033 { <span class="keywordflow">return</span> <span class="keyword">this</span>.log; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b3" doxytag="com::xacct::CRANE::collector::CollectorManager::getTheOnlyThread"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d31/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_thread.html">ConnectionThread</a> com::xacct::CRANE::collector::CollectorManager::getTheOnlyThread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Helper function: get the (only) thread. This is used by subclasses that start a single thread for one specific request to the transmitter. <dl compact><dt><b>Returns:</b></dt><dd>The thread. </dd></dl>
<div class="fragment"><pre class="fragment">00197                                                   {
00198         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>.length != 1) {
00199             <span class="keywordflow">throw</span> <span class="keyword">new</span> LogicException(<span class="keyword">this</span>, <span class="stringliteral">"getTheOnlyThread"</span>,
00200                                      <span class="stringliteral">"number of threads not 1: "</span> + <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>.length);
00201         }
00202         <span class="keywordflow">return</span> <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[0];
00203     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="com::xacct::CRANE::collector::CollectorManager::initAndStartConnections"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void com::xacct::CRANE::collector::CollectorManager::initAndStartConnections           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>collectorConfig</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>log</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d64/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_outputter_factory.html">CollectorOutputterFactory</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>outputterFactory</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws InterruptedException <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Start all the collector (per-connection) threads. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>outputterFactory</em>&nbsp;</td><td>The class which handles per-record output. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InterruptedException</em>&nbsp;</td><td>If the start-up is interrupted (it can take a while if there are a lot of connection threads and/or if there's a long sleep interval between startups). </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>Thread#start </dd></dl>
<div class="fragment"><pre class="fragment">00074                                 {
00075         <span class="keyword">this</span>.collectorConfig  = <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>;
00076         <span class="keyword">this</span>.log              = <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>;
00077         <span class="keyword">this</span>.outputterFactory = <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r1">outputterFactory</a>;
00078 
00079         <span class="keyword">this</span>.connectionThreadList =
00080             <span class="keyword">new</span> ConnectionThread[<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>.getConnectionConfigListLength()];
00081         <span class="keywordtype">int</span> interval = 0; <span class="comment">// how long to wait between starting threads.</span>
00082         <span class="keywordtype">int</span> receiveBufferSize = 0;
00083 
00084         <span class="comment">// XXX Sort-of hard-coded ...</span>
00085         <span class="comment">// If we have a relatively small number of connections, give them</span>
00086         <span class="comment">// big read sockets.</span>
00087         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>.getConnectionConfigListLength() &lt; 10) {
00088             receiveBufferSize = 256*1024;
00089         }
00090 
00091         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>.getConnectionConfigListLength(); i++) {
00092             <span class="keywordflow">try</span> { <span class="comment">// wait a bit before starting the next one</span>
00093                 Thread.sleep(interval);
00094             } <span class="keywordflow">catch</span> (InterruptedException e) {
00095             <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"initAndStartConnections"</span>,
00096                 <span class="stringliteral">"Interrupted start-up at #"</span> + i +
00097                 <span class="stringliteral">" of "</span> + <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>.getConnectionConfigListLength());
00098                 <span class="keywordflow">throw</span> e;
00099             }
00100             <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"initAndStartConnections"</span>, <span class="stringliteral">"Starting connection #"</span> +
00101                      i + <span class="stringliteral">": "</span> + <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>.getConnectionConfigAt(i));
00102             <span class="comment">// XXX Note that makeConnectionThread might be over-ridden.</span>
00103             <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i] =
00104                 <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#b2">makeConnectionThread</a>(<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>.getConnectionConfigAt(i),
00105                                      <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r1">outputterFactory</a>, <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>, receiveBufferSize);
00106             <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i].start();
00107             interval = <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>.getCollectorStartInterval();
00108         }
00109     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="com::xacct::CRANE::collector::CollectorManager::logConnectionStatus"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void com::xacct::CRANE::collector::CollectorManager::logConnectionStatus           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>log</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Display all the connections' statuses to the log. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>log</em>&nbsp;</td><td>The log for outputting. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00208                                                     {
00209         <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"logThreadStatus"</span>,
00210                  <span class="stringliteral">"Displaying thread status for "</span> + <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>.length + <span class="stringliteral">" connections"</span> +
00211                  <span class="stringliteral">" and "</span> + Thread.activeCount() + <span class="stringliteral">" threads in the thread group for "</span> +
00212                  Thread.currentThread().toString());
00213         Runtime runtime = Runtime.getRuntime();
00214         <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"logThreadStatus"</span>,
00215 <span class="comment">// XXX                 "Processors=" + runtime.availableProcessors() +</span>
00216                  <span class="stringliteral">" freeMem="</span> + runtime.freeMemory() +
00217 <span class="comment">// XXX                " maxMem=" + runtime.maxMemory() +</span>
00218                  <span class="stringliteral">" totalMem="</span> + runtime.totalMemory()
00219             );
00220 
00221         <span class="comment">// XXX dump JVM's properties?</span>
00222 
00223         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>.length; i++) {
00224             <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i] != null) {
00225                 <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i].logThreadStatus(<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>);
00226             }
00227         }
00228 
00229         <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"logThreadStatus"</span>, <span class="stringliteral">"End of thread statuses "</span> +
00230                  <span class="stringliteral">"("</span> + <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>.length + <span class="stringliteral">" threads)"</span>);
00231     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="com::xacct::CRANE::collector::CollectorManager::makeConnectionThread"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d31/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_thread.html">ConnectionThread</a> com::xacct::CRANE::collector::CollectorManager::makeConnectionThread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d67/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_config.html">ConnectionConfig</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connectionConfig</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d64/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_outputter_factory.html">CollectorOutputterFactory</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>outputterFactory</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>log</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>receiveBufferSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a new connection thread. This can be over-ridden by a sub-class. The thread is simply created; it is not started. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>connectionConfig</em>&nbsp;</td><td>The connection's configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outputterFactory</em>&nbsp;</td><td>For outputting records. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>log</em>&nbsp;</td><td>The logger. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A thread for processing the connection. </dd></dl>

<p>
Reimplemented in <a class="el" href="../../da/d42/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_setup_manager.html#b0">com::xacct::CRANE::collector::CollectorSetupManager</a>.<div class="fragment"><pre class="fragment">00131                                                                            {
00132         <span class="keywordflow">if</span> (! (<span class="keyword">this</span> instanceof <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#b0">CollectorManager</a>)) { <span class="comment">// make sure sub-class over-rides this</span>
00133             <span class="keywordflow">throw</span> <span class="keyword">new</span> LogicException(<span class="keyword">this</span>, <span class="stringliteral">"makeConnectionThread"</span>,
00134                                      <span class="stringliteral">"Sub-class of CollectorManager used without its own makeConnectionThread()."</span> +
00135                                      <span class="stringliteral">" class="</span> + <span class="keyword">this</span>.getClass().getName());
00136         }
00137         <span class="keywordflow">return</span> <span class="keyword">new</span> ConnectionThread(<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">collectorConfig</a>,
00138                                     connectionConfig,
00139                                     <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r1">outputterFactory</a>,
00140                                     <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>,
00141                                     receiveBufferSize);
00142     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="com::xacct::CRANE::collector::CollectorManager::setDataAckMsgInterval"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void com::xacct::CRANE::collector::CollectorManager::setDataAckMsgInterval           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>valueMillis</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the data ACK interval for all connections. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>valueMillis</em>&nbsp;</td><td>The interval in milliseconds. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00236                                                        {
00237         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>.length; i++) {
00238             <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i] != null) {
00239                 <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i].setDataAckMsgInterval(valueMillis);
00240             }
00241         }
00242         <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"setDataAckMsgInterval"</span>,
00243                  <span class="stringliteral">"data-ACK message will be output every "</span> + valueMillis/1000.0 + <span class="stringliteral">" seconds"</span>);
00244     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="com::xacct::CRANE::collector::CollectorManager::setNullInput"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void com::xacct::CRANE::collector::CollectorManager::setNullInput           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the thread(s) to do minimal input process (for performance testing). <div class="fragment"><pre class="fragment">00113                                {
00114         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <span class="keyword">this</span>.<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>.length; i++) {
00115             <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i] != null) {
00116                 <span class="keyword">this</span>.connectionThreadList[i].setNullInput();
00117             }
00118         }
00119     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="com::xacct::CRANE::collector::CollectorManager::stopAndWaitForConnectionsToFinish"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void com::xacct::CRANE::collector::CollectorManager::stopAndWaitForConnectionsToFinish           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stop all connections and wait for them to gracefully finish. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a4">stopConnections</a> <p>
<a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a5">waitForConnectionsToFinish</a> </dd></dl>
<div class="fragment"><pre class="fragment">00188                                                     {
00189         <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a4">stopConnections</a>();
00190         <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a5">waitForConnectionsToFinish</a>();
00191     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="com::xacct::CRANE::collector::CollectorManager::stopConnections"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void com::xacct::CRANE::collector::CollectorManager::stopConnections           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stop all the collector threads. This does not interrupt the threads; it depends on <a class="el" href="../../d1/d31/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_thread.html#a7">ConnectionThread.stopProcessing()</a> to do that, if desirable. Also, does not send a STOP message to the transmitter; again, that's the job of <a class="el" href="../../d1/d31/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_thread.html#a7">ConnectionThread.stopProcessing()</a>.<p>
This does not wait for the threads to finish.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d1/d31/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_thread.html#a7">ConnectionThread::stopProcessing</a> <p>
<a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#a5">waitForConnectionsToFinish</a> </dd></dl>
<div class="fragment"><pre class="fragment">00155                                   {
00156         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>.length; i++) {
00157             <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i] != null) {
00158                 <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"stopConnections"</span>, <span class="stringliteral">"Stopping connection #"</span> + i +
00159                          <span class="stringliteral">": "</span> + <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i]);
00160                 <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i] != null) {
00161                     <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i].stopProcessing();
00162                 }
00163             }
00164         }
00165     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e0" doxytag="com::xacct::CRANE::collector::CollectorManager::versionStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static String com::xacct::CRANE::collector::CollectorManager::versionStr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Id</b></dt><dd>CollectorManager.java,v 1.4 2005/01/30 15:13:42 ilyad Exp </dd></dl>

<p>
Reimplemented in <a class="el" href="../../da/d42/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_setup_manager.html#e0">com::xacct::CRANE::collector::CollectorSetupManager</a>.<div class="fragment"><pre class="fragment">00020 { <span class="keywordflow">return</span> <span class="stringliteral">"@(#) $Id: CollectorManager.java,v 1.4 2005/01/30 15:13:42 ilyad Exp $"</span>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="com::xacct::CRANE::collector::CollectorManager::waitForConnectionsToFinish"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void com::xacct::CRANE::collector::CollectorManager::waitForConnectionsToFinish           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Wait for all the collector threads to finish.<p>
<dl compact><dt><b>See also:</b></dt><dd>Thread#join </dd></dl>
<div class="fragment"><pre class="fragment">00171                                              {
00172         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>.length; i++) {
00173             <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i] != null) {
00174                 <span class="keywordflow">try</span> {
00175                     <span class="keywordflow">if</span> (<a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i] != null) {
00176                         <a class="code" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">connectionThreadList</a>[i].join();
00177                     }
00178                 } <span class="keywordflow">catch</span> (InterruptedException e) { }
00179                 <span class="comment">// don't: might need data from threads later connectionThreadList[i] = null;</span>
00180             }
00181         }
00182     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="p0" doxytag="com::xacct::CRANE::collector::CollectorManager::collectorConfig"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p0">com::xacct::CRANE::collector::CollectorManager::collectorConfig</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The configuration (from XML). 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="com::xacct::CRANE::collector::CollectorManager::connectionThreadList"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d31/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_thread.html">ConnectionThread</a> [] <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r0">com::xacct::CRANE::collector::CollectorManager::connectionThreadList</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The connection threads. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p1" doxytag="com::xacct::CRANE::collector::CollectorManager::log"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#p1">com::xacct::CRANE::collector::CollectorManager::log</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The log. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="com::xacct::CRANE::collector::CollectorManager::outputterFactory"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d64/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_outputter_factory.html">CollectorOutputterFactory</a> <a class="el" href="../../d9/d21/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_manager.html#r1">com::xacct::CRANE::collector::CollectorManager::outputterFactory</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The outputter factory. 
<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>ipdr/Collector/com/xacct/CRANE/collector/<a class="el" href="../../dc/d54/com_2xacct_2_c_r_a_n_e_2collector_2_collector_manager_8java.html">CollectorManager.java</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 09:26:42 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
