<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: com::xacct::CRANE::collector::ProtocolMsg Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="../../d8/dee/namespacecom.html">com</a>::<a class="el" href="../../d9/d91/namespacecom_1_1xacct.html">xacct</a>::<a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a>::<a class="el" href="../../de/d74/namespacecom_1_1xacct_1_1_c_r_a_n_e_1_1collector.html">collector</a>::<a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a></div>
<h1>com::xacct::CRANE::collector::ProtocolMsg Class Reference</h1><p>Inheritance diagram for com::xacct::CRANE::collector::ProtocolMsg:
<p><center><img src="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.png" usemap="#com::xacct::CRANE::collector::ProtocolMsg_map" border="0" alt=""></center>
<map name="com::xacct::CRANE::collector::ProtocolMsg_map">
<area href="../../d9/ddf/interfacecom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_identification.html" alt="com::xacct::CRANE::collector::ProtocolMsgIdentification" shape="rect" coords="0,0,402,24">
<area href="../../d5/df1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_c_o_n_n_e_c_t.html" alt="com::xacct::CRANE::collector::ProtocolMsgCONNECT" shape="rect" coords="412,112,814,136">
<area href="../../d7/dc1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a.html" alt="com::xacct::CRANE::collector::ProtocolMsgDATA" shape="rect" coords="412,168,814,192">
<area href="../../d2/d8d/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a___a_c_k.html" alt="com::xacct::CRANE::collector::ProtocolMsgDATA_ACK" shape="rect" coords="412,224,814,248">
<area href="../../d0/d10/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_empty.html" alt="com::xacct::CRANE::collector::ProtocolMsgEmpty" shape="rect" coords="412,280,814,304">
<area href="../../d9/d12/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_e_r_r_o_r.html" alt="com::xacct::CRANE::collector::ProtocolMsgERROR" shape="rect" coords="412,336,814,360">
<area href="../../de/d25/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_f_i_n_a_l___t_m_p_l___d_a_t_a___a_c_k.html" alt="com::xacct::CRANE::collector::ProtocolMsgFINAL_TMPL_DATA_ACK" shape="rect" coords="412,392,814,416">
<area href="../../d0/d45/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s.html" alt="com::xacct::CRANE::collector::ProtocolMsgGET_SESS" shape="rect" coords="412,448,814,472">
<area href="../../da/dd6/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s___r_s_p.html" alt="com::xacct::CRANE::collector::ProtocolMsgGET_SESS_RSP" shape="rect" coords="412,504,814,528">
<area href="../../d9/d3c/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l.html" alt="com::xacct::CRANE::collector::ProtocolMsgGET_TMPL" shape="rect" coords="412,560,814,584">
<area href="../../df/d33/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l___r_s_p.html" alt="com::xacct::CRANE::collector::ProtocolMsgGET_TMPL_RSP" shape="rect" coords="412,616,814,640">
<area href="../../d6/d85/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t.html" alt="com::xacct::CRANE::collector::ProtocolMsgSTART" shape="rect" coords="412,672,814,696">
<area href="../../dc/d72/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___a_c_k.html" alt="com::xacct::CRANE::collector::ProtocolMsgSTART_ACK" shape="rect" coords="412,728,814,752">
<area href="../../d7/d58/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___n_e_g_o_t_i_a_t_e.html" alt="com::xacct::CRANE::collector::ProtocolMsgSTART_NEGOTIATE" shape="rect" coords="412,784,814,808">
<area href="../../df/dd8/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___n_e_g_o_t_i_a_t_e___a_c_k.html" alt="com::xacct::CRANE::collector::ProtocolMsgSTART_NEGOTIATE_ACK" shape="rect" coords="412,840,814,864">
<area href="../../df/d9c/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_t_u_s___r_e_q.html" alt="com::xacct::CRANE::collector::ProtocolMsgSTATUS_REQ" shape="rect" coords="412,896,814,920">
<area href="../../d2/d57/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_t_u_s___r_s_p.html" alt="com::xacct::CRANE::collector::ProtocolMsgSTATUS_RSP" shape="rect" coords="412,952,814,976">
<area href="../../dd/d63/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_o_p.html" alt="com::xacct::CRANE::collector::ProtocolMsgSTOP" shape="rect" coords="412,1008,814,1032">
<area href="../../de/d95/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_o_p___a_c_k.html" alt="com::xacct::CRANE::collector::ProtocolMsgSTOP_ACK" shape="rect" coords="412,1064,814,1088">
<area href="../../df/d92/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_t_m_p_l___d_a_t_a.html" alt="com::xacct::CRANE::collector::ProtocolMsgTMPL_DATA" shape="rect" coords="412,1120,814,1144">
<area href="../../d8/d42/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_t_m_p_l___d_a_t_a___a_c_k.html" alt="com::xacct::CRANE::collector::ProtocolMsgTMPL_DATA_ACK" shape="rect" coords="412,1176,814,1200">
</map>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a0">ProtocolMsg</a> (byte[] msg, int length, int requiredLength)  throws ProtocolMalformedMsgException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a1">set</a> (byte[] msg, int length, int requiredLength)  throws ProtocolMalformedMsgException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a2">ProtocolMsg</a> (byte msgId, byte <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o2">sessionId</a>, int <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o4">msgLength</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">byte&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a3">msgId</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a4">shouldOutputToLog</a> (<a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> log)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a5">sendMsg</a> (<a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html">ConnectionDynamic</a> connection)  throws ConnectionIOException, ProtocolMalformedMsgException, ConfigException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a6">msgName</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a7">toString</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a8">toStringLong</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e0">versionStr</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e1">round32</a> (int value)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e2">readMsg</a> (byte[] buf, <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html">ConnectionDynamic</a> connection, String whatDoing, <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a> responseTo, int timeoutMillisec)  throws ConnectionIOException, ProtocolMalformedMsgException, ConfigException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e3">readMsg</a> (<a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html">ConnectionDynamic</a> connection, String whatDoing, <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a> responseTo, int timeoutMillisec)  throws ConnectionIOException, ProtocolMalformedMsgException, ConfigException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e4">construct</a> (byte[] msg, int length, <a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> log)  throws ProtocolMalformedMsgException, ConfigException, UnknownHostException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e5">construct</a> (byte[] msg, int length, <a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> log, <a class="el" href="../../d7/dc1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a.html">ProtocolMsgDATA</a> msgDATA)  throws ProtocolMalformedMsgException, ConfigException, UnknownHostException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e6">construct</a> (byte[] msg, <a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> log)  throws ProtocolMalformedMsgException, ConfigException, UnknownHostException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e7">dumpHex</a> (byte[] raw, int offset, int length, <a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> log)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Utility: dump a raw message in hex.  <a href="#e7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e8">unimplemented</a> (String className, String function)  throws UnsupportedOperationException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e9">unimplemented</a> (Object o, String function)  throws UnsupportedOperationException </td></tr>

<tr><td colspan="2"><br><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o0">protocolVersion</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The protocol Version.  <a href="#o0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o1">hdrMsgId</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The message id (defines what type of record it is).  <a href="#o1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o2">sessionId</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The session identifier.  <a href="#o2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">byte&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o3">hdrFlags</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight"><a class="el" href="../../d4/daa/struct_message.html">Message</a> header flags (ignored in version 1 of the protocol).  <a href="#o3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o4">msgLength</a></td></tr>

<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static final <a class="el" href="../../d9/da3/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_data_big_endian.html">ProtocolDataBigEndian</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a> = new <a class="el" href="../../d9/da3/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_data_big_endian.html">ProtocolDataBigEndian</a>()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A big-endian data extractor, for convenience.  <a href="#s0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s1">HDR_LENGTH</a> = 8</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The minimum length of a message (header only).  <a href="#s1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static final byte&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s2">PROTOCOL_VERSION</a> = 1</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The version of the <a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a> protocol that we support.  <a href="#s2"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#b0">ProtocolMsg</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#b1">handleIndexOutOfBounds</a> (IndexOutOfBoundsException e, byte[] buf, int length)  throws ProtocolMalformedMsgException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final byte[]&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#b2">trimToLength</a> (byte[] buf, int length)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#b3">setHeader</a> (byte[] msgData)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">abstract byte[]&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#b4">createRawMsg</a> ()  throws UnknownHostException</td></tr>

<tr><td colspan="2"><br><h2>Static Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#f0">verifyLength</a> (<a class="el" href="../../d9/ddf/interfacecom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_identification.html">ProtocolMsgIdentification</a> id, byte[] buf, int bufLength, int requiredLength)  throws ProtocolMalformedMsgException </td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#d0">initZero</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Static Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static final byte[]&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#h0">readRawMsg</a> (<a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html">ConnectionDynamic</a> connection, byte[] buf, int timeoutMillisec)  throws java.io.IOException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#h1">makeErrMsg</a> (String whatDoing, <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a> responseTo)</td></tr>

<tr><td colspan="2"><br><h2>Static Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v0">PROTOCOL_VERSION_OFFSET</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v1">MSGID_OFFSET</a> = 1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v2">SESSION_ID_OFFSET</a> = 3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v3">HDR_FLAGS_OFFSET</a> = 2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v4">MSG_LENGTH_OFFSET</a> = 4</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The Java encapsulation of a <a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a> protocol message.<p>
XXX This does not match what is in the protocol document ... the Session ID and <a class="el" href="../../d4/daa/struct_message.html">Message</a> Flags are reversed. This was a mistake in an earlier version of the code and has been maintained for compatibility with old code. XXX<p>
&lt;xmp&gt; 0 1 2 3 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ | Version |Message ID(MID)| Session ID | <a class="el" href="../../d4/daa/struct_message.html">Message</a> Flags | RFC | Version |Message ID(MID)| <a class="el" href="../../d4/daa/struct_message.html">Message</a> Flags | Session ID | code (errata) +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ | <a class="el" href="../../d4/daa/struct_message.html">Message</a> Length | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ &lt;/xmp&gt;<p>
<dl compact><dt><b>Version:</b></dt><dd><dl compact><dt><b>Id</b></dt><dd>ProtocolMsg.java,v 1.4 2005/01/30 15:13:41 ilyad Exp </dd></dl>
</dd></dl>

<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="com::xacct::CRANE::collector::ProtocolMsg::ProtocolMsg"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">com::xacct::CRANE::collector::ProtocolMsg::ProtocolMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>requiredLength</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../dc/d8b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a> <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Construct from raw bytes <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>The raw message bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>The number of bytes in the message </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>requiredLength</em>&nbsp;</td><td>The required number of bytes in the message </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00042                                              {
00043         <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a1">set</a>(msg, length, requiredLength);
00044     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="com::xacct::CRANE::collector::ProtocolMsg::ProtocolMsg"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">com::xacct::CRANE::collector::ProtocolMsg::ProtocolMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor only for use by "pseudo" messages <div class="fragment"><pre class="fragment">00081                             {
00082         <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#d0">initZero</a>();
00083     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="com::xacct::CRANE::collector::ProtocolMsg::ProtocolMsg"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">com::xacct::CRANE::collector::ProtocolMsg::ProtocolMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte&nbsp;</td>
          <td class="mdname" nowrap> <em>msgId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>byte&nbsp;</td>
          <td class="mdname" nowrap> <em>sessionId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>msgLength</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Construct from values <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msgId</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sessionId</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msgLength</em>&nbsp;</td><td>The number of bytes in the message (including header) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00099                                                                   {
00100         <span class="keyword">this</span>.protocolVersion = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s2">PROTOCOL_VERSION</a>;
00101         <span class="keyword">this</span>.hdrMsgId        = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a3">msgId</a>;
00102         <span class="keyword">this</span>.sessionId       = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o2">sessionId</a>;
00103         <span class="keyword">this</span>.hdrFlags        = 0;
00104         <span class="keyword">this</span>.msgLength       = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o4">msgLength</a>;
00105     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="e6" doxytag="com::xacct::CRANE::collector::ProtocolMsg::construct"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static final <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a> com::xacct::CRANE::collector::ProtocolMsg::construct           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>log</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../dc/d8b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a>, <a class="el" href="../../d4/d30/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_config_exception.html">ConfigException</a>, UnknownHostException <code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Factory method for constructing from raw bytes. This looks into the header and calls the appropriate sub-class <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>the raw bytes </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the Java-ized form of the message </dd></dl>
<div class="fragment"><pre class="fragment">00422                                                                                     {
00423         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e4">construct</a>(msg, msg.length, log);
00424     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e5" doxytag="com::xacct::CRANE::collector::ProtocolMsg::construct"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static final <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a> com::xacct::CRANE::collector::ProtocolMsg::construct           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>log</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d7/dc1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a.html">ProtocolMsgDATA</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>msgDATA</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../dc/d8b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a>, <a class="el" href="../../d4/d30/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_config_exception.html">ConfigException</a>, UnknownHostException <code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Factory method for constructing from raw bytes. This looks into the header and calls the appropriate sub-class <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>the raw bytes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>the number of bytes in the message </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msgDATA</em>&nbsp;</td><td>a pre-allocated DATA object, which can be used if if this is of that type -- null if you want one constructed. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>the Java-ized form of the message </dd></dl>
<div class="fragment"><pre class="fragment">00377                                                                                     {
00378         <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#f0">verifyLength</a>(null, msg, length,  <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s1">HDR_LENGTH</a>);
00379         byte <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o0">protocolVersion</a> = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.getByte(msg, 0);
00380         <span class="keywordflow">if</span> (protocolVersion != <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s2">PROTOCOL_VERSION</a>) {
00381             <span class="keywordflow">throw</span> <span class="keyword">new</span> ProtocolMalformedMsgException(<span class="stringliteral">"Wrong protocol version: "</span> + protocolVersion,
00382                                                     msg, length, 0);
00383         }
00384         byte <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a3">msgId</a> = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.getByte(msg, 1);
00385         <span class="keywordflow">switch</span> (msgId) {
00386         <span class="keywordflow">case</span> ProtocolMsgSTART.MSG_ID               : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgSTART(msg, length);
00387         <span class="keywordflow">case</span> ProtocolMsgSTART_ACK.MSG_ID           : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgSTART_ACK(msg, length);
00388         <span class="keywordflow">case</span> ProtocolMsgSTOP.MSG_ID                : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgSTOP(msg, length);
00389         <span class="keywordflow">case</span> ProtocolMsgSTOP_ACK.MSG_ID            : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgSTOP_ACK(msg, length);
00390         <span class="keywordflow">case</span> ProtocolMsgCONNECT.MSG_ID             : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgCONNECT(msg, length);
00391         <span class="keywordflow">case</span> ProtocolMsgTMPL_DATA.MSG_ID           : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgTMPL_DATA(msg, length, log);
00392         <span class="keywordflow">case</span> ProtocolMsgTMPL_DATA_ACK.MSG_ID       : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgTMPL_DATA_ACK(msg, length);
00393         <span class="keywordflow">case</span> ProtocolMsgFINAL_TMPL_DATA.MSG_ID     : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgFINAL_TMPL_DATA(msg, length, log);
00394         <span class="keywordflow">case</span> ProtocolMsgFINAL_TMPL_DATA_ACK.MSG_ID : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgFINAL_TMPL_DATA_ACK(msg, length);
00395         <span class="keywordflow">case</span> ProtocolMsgGET_SESS.MSG_ID            : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgGET_SESS(msg, length);
00396         <span class="keywordflow">case</span> ProtocolMsgGET_SESS_RSP.MSG_ID        : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgGET_SESS_RSP(msg, length);
00397         <span class="keywordflow">case</span> ProtocolMsgGET_TMPL.MSG_ID            : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgGET_TMPL(msg, length);
00398         <span class="keywordflow">case</span> ProtocolMsgGET_TMPL_RSP.MSG_ID        : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgGET_TMPL_RSP(msg, length, log);
00399         <span class="keywordflow">case</span> ProtocolMsgSTART_NEGOTIATE.MSG_ID     : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgSTART_NEGOTIATE(msg, length);
00400         <span class="keywordflow">case</span> ProtocolMsgSTART_NEGOTIATE_ACK.MSG_ID : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgSTART_NEGOTIATE_ACK(msg, length);
00401         <span class="keywordflow">case</span> ProtocolMsgDATA.MSG_ID                :
00402             <span class="keywordflow">if</span> (msgDATA == null) {
00403                 <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgDATA(msg, length);
00404             } <span class="keywordflow">else</span> {
00405                 <span class="keywordflow">return</span> msgDATA.set(msg, length);
00406             }
00407         <span class="keywordflow">case</span> ProtocolMsgDATA_ACK.MSG_ID            : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgDATA_ACK(msg, length);
00408         <span class="keywordflow">case</span> ProtocolMsgERROR.MSG_ID               : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgERROR(msg, length);
00409         <span class="keywordflow">case</span> ProtocolMsgSTATUS_REQ.MSG_ID          : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgSTATUS_REQ(msg, length);
00410         <span class="keywordflow">case</span> ProtocolMsgSTATUS_RSP.MSG_ID          : <span class="keywordflow">return</span> <span class="keyword">new</span> ProtocolMsgSTATUS_RSP(msg, length);
00411         <span class="keywordflow">default</span>: <span class="keywordflow">throw</span> <span class="keyword">new</span> ProtocolMalformedMsgException(<span class="stringliteral">"Message header invalid msgId="</span> + msgId,
00412                                                          msg, length, 1);
00413         }
00414     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e4" doxytag="com::xacct::CRANE::collector::ProtocolMsg::construct"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static final <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a> com::xacct::CRANE::collector::ProtocolMsg::construct           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>log</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../dc/d8b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a>, <a class="el" href="../../d4/d30/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_config_exception.html">ConfigException</a>, UnknownHostException <code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00361                                                                                     {
00362         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e4">construct</a>(msg, length, log, null);
00363     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b4" doxytag="com::xacct::CRANE::collector::ProtocolMsg::createRawMsg"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">abstract byte [] com::xacct::CRANE::collector::ProtocolMsg::createRawMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws UnknownHostException<code> [protected, pure virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a raw (output) message. This method is normally overridden by a subclass. Do <em>not</em> call this by <code>super.createRawMsg()</code> ... instead, just do <code>setHeader(...</code> to set the result's header. <dl compact><dt><b>Returns:</b></dt><dd>the raw message bytes, for sending </dd></dl>

<p>
Implemented in <a class="el" href="../../d5/df1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_c_o_n_n_e_c_t.html#a4">com::xacct::CRANE::collector::ProtocolMsgCONNECT</a>, <a class="el" href="../../d7/dc1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a.html#a7">com::xacct::CRANE::collector::ProtocolMsgDATA</a>, <a class="el" href="../../d2/d8d/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a___a_c_k.html#a5">com::xacct::CRANE::collector::ProtocolMsgDATA_ACK</a>, <a class="el" href="../../d0/d10/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_empty.html#b0">com::xacct::CRANE::collector::ProtocolMsgEmpty</a>, <a class="el" href="../../d9/d12/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_e_r_r_o_r.html#a4">com::xacct::CRANE::collector::ProtocolMsgERROR</a>, <a class="el" href="../../de/d25/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_f_i_n_a_l___t_m_p_l___d_a_t_a___a_c_k.html#a4">com::xacct::CRANE::collector::ProtocolMsgFINAL_TMPL_DATA_ACK</a>, <a class="el" href="../../d0/d45/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s.html#a4">com::xacct::CRANE::collector::ProtocolMsgGET_SESS</a>, <a class="el" href="../../da/dd6/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s___r_s_p.html#b0">com::xacct::CRANE::collector::ProtocolMsgGET_SESS_RSP</a>, <a class="el" href="../../d9/d3c/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l.html#a4">com::xacct::CRANE::collector::ProtocolMsgGET_TMPL</a>, <a class="el" href="../../df/d33/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l___r_s_p.html#b0">com::xacct::CRANE::collector::ProtocolMsgGET_TMPL_RSP</a>, <a class="el" href="../../d6/d85/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t.html#a4">com::xacct::CRANE::collector::ProtocolMsgSTART</a>, <a class="el" href="../../dc/d72/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___a_c_k.html#a4">com::xacct::CRANE::collector::ProtocolMsgSTART_ACK</a>, <a class="el" href="../../d7/d58/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___n_e_g_o_t_i_a_t_e.html#a4">com::xacct::CRANE::collector::ProtocolMsgSTART_NEGOTIATE</a>, <a class="el" href="../../df/dd8/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___n_e_g_o_t_i_a_t_e___a_c_k.html#a4">com::xacct::CRANE::collector::ProtocolMsgSTART_NEGOTIATE_ACK</a>, <a class="el" href="../../df/d9c/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_t_u_s___r_e_q.html#a4">com::xacct::CRANE::collector::ProtocolMsgSTATUS_REQ</a>, <a class="el" href="../../d2/d57/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_t_u_s___r_s_p.html#b0">com::xacct::CRANE::collector::ProtocolMsgSTATUS_RSP</a>, <a class="el" href="../../dd/d63/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_o_p.html#a4">com::xacct::CRANE::collector::ProtocolMsgSTOP</a>, <a class="el" href="../../de/d95/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_o_p___a_c_k.html#a4">com::xacct::CRANE::collector::ProtocolMsgSTOP_ACK</a>, <a class="el" href="../../df/d92/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_t_m_p_l___d_a_t_a.html#b0">com::xacct::CRANE::collector::ProtocolMsgTMPL_DATA</a>, and <a class="el" href="../../d8/d42/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_t_m_p_l___d_a_t_a___a_c_k.html#b0">com::xacct::CRANE::collector::ProtocolMsgTMPL_DATA_ACK</a>.    </td>
  </tr>
</table>
<a class="anchor" name="e7" doxytag="com::xacct::CRANE::collector::ProtocolMsg::dumpHex"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static final void com::xacct::CRANE::collector::ProtocolMsg::dumpHex           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>raw</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>offset</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>log</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Utility: dump a raw message in hex. 
<p>
<div class="fragment"><pre class="fragment">00482                                                                                           {
00483         CollectorLog.println(<span class="stringliteral">"dumping ..."</span>);
00484         <span class="keyword">final</span> <span class="keywordtype">int</span> stride = 8;
00485         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; length &amp;&amp; i + offset &lt; raw.length; i += stride) {
00486             String line = <span class="stringliteral">""</span>;
00487             <span class="keywordtype">int</span> pos = offset + i;
00488             <span class="keywordflow">if</span> (i &lt; 10)       { line += <span class="stringliteral">"...   "</span> + i; }
00489             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i &lt; 100) { line += <span class="stringliteral">"...  "</span> + i ; }
00490             <span class="keywordflow">else</span>              { line += <span class="stringliteral">"... "</span> + i; }
00491             <span class="keywordflow">if</span> (pos &lt; 10)       { line += <span class="stringliteral">" _   "</span> + pos; }
00492             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pos &lt; 100) { line += <span class="stringliteral">" _  "</span> + pos; }
00493             <span class="keywordflow">else</span>                { line += <span class="stringliteral">" _ "</span> + pos; }
00494             line += <span class="stringliteral">": "</span>;
00495             String chars = <span class="stringliteral">""</span>;
00496             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 8 &amp;&amp; i + j + offset &lt; raw.length; j++) {
00497                 <span class="keywordtype">int</span> v = raw[offset+i+j] &amp; 0xff;
00498                 line += <span class="stringliteral">" "</span> + ((v &lt; 0x10) ? <span class="stringliteral">" "</span> : <span class="stringliteral">""</span>) + Integer.toHexString(v);
00499                 <span class="keywordflow">if</span> (v &gt;= 0x20 &amp;&amp; v &lt;= 0xfe) { chars += (char)v; } <span class="keywordflow">else</span> {chars += <span class="charliteral">'?'</span>; }
00500             }
00501             CollectorLog.println(line + <span class="stringliteral">" ("</span> + chars + <span class="stringliteral">")"</span>);
00502         }
00503     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="com::xacct::CRANE::collector::ProtocolMsg::handleIndexOutOfBounds"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::ProtocolMsg::handleIndexOutOfBounds           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">IndexOutOfBoundsException&nbsp;</td>
          <td class="mdname" nowrap> <em>e</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>length</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../dc/d8b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a> <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Helper method for dealing with out-of-bounds when processing raw data <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>e</em>&nbsp;</td><td>The exception </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>the buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>the length of message as given to the constructor </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Turns</em>&nbsp;</td><td>this into a <a class="el" href="../../dc/d8b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a> </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00115                                              {
00116         CollectorLog.stackTrace(e);
00117         String msg = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a6">msgName</a>() + <span class="stringliteral">" message length of buffer ("</span> + length + <span class="stringliteral">") shorter than message contents"</span>;
00118         <span class="keywordflow">if</span> (buf.length != length) {
00119             msg += <span class="stringliteral">" - with buffer containing "</span> + buf.length + <span class="stringliteral">" bytes"</span>;
00120         }
00121         msg += <span class="stringliteral">" ... "</span> + e;
00122         <span class="keywordflow">throw</span> <span class="keyword">new</span> ProtocolMalformedMsgException(msg, buf, length, 0);
00123     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="com::xacct::CRANE::collector::ProtocolMsg::initZero"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::ProtocolMsg::initZero           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set values to zero <div class="fragment"><pre class="fragment">00086                                   {
00087         <span class="keyword">this</span>.protocolVersion = 0;
00088         <span class="keyword">this</span>.hdrMsgId        = 0;
00089         <span class="keyword">this</span>.sessionId       = 0;
00090         <span class="keyword">this</span>.hdrFlags        = 0;
00091         <span class="keyword">this</span>.msgLength       = 0;
00092     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="h1" doxytag="com::xacct::CRANE::collector::ProtocolMsg::makeErrMsg"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static final String com::xacct::CRANE::collector::ProtocolMsg::makeErrMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">String&nbsp;</td>
          <td class="mdname" nowrap> <em>whatDoing</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>responseTo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, static, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00311                                                                    {
00312         String errMsg = <span class="stringliteral">""</span>;
00313         <span class="keywordflow">if</span> (whatDoing != null) { errMsg += whatDoing; }
00314         <span class="keywordflow">if</span> (responseTo != null) { errMsg += ((errMsg.length() &gt; 0) ? <span class="stringliteral">" - "</span> : <span class="stringliteral">""</span>) + responseTo; }
00315         <span class="keywordflow">return</span> errMsg;
00316     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="com::xacct::CRANE::collector::ProtocolMsg::msgId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">byte com::xacct::CRANE::collector::ProtocolMsg::msgId           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the message id value. Normally, this is overridden by a subclass. 
<p>
Reimplemented in <a class="el" href="../../d5/df1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_c_o_n_n_e_c_t.html#a1">com::xacct::CRANE::collector::ProtocolMsgCONNECT</a>, <a class="el" href="../../d7/dc1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a.html#a1">com::xacct::CRANE::collector::ProtocolMsgDATA</a>, <a class="el" href="../../d2/d8d/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a___a_c_k.html#a1">com::xacct::CRANE::collector::ProtocolMsgDATA_ACK</a>, <a class="el" href="../../d0/d10/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_empty.html#a3">com::xacct::CRANE::collector::ProtocolMsgEmpty</a>, <a class="el" href="../../d9/d12/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_e_r_r_o_r.html#a1">com::xacct::CRANE::collector::ProtocolMsgERROR</a>, <a class="el" href="../../d6/d26/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_f_i_n_a_l___t_m_p_l___d_a_t_a.html#a1">com::xacct::CRANE::collector::ProtocolMsgFINAL_TMPL_DATA</a>, <a class="el" href="../../de/d25/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_f_i_n_a_l___t_m_p_l___d_a_t_a___a_c_k.html#a1">com::xacct::CRANE::collector::ProtocolMsgFINAL_TMPL_DATA_ACK</a>, <a class="el" href="../../d0/d45/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s.html#a1">com::xacct::CRANE::collector::ProtocolMsgGET_SESS</a>, <a class="el" href="../../da/dd6/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s___r_s_p.html#a1">com::xacct::CRANE::collector::ProtocolMsgGET_SESS_RSP</a>, <a class="el" href="../../d9/d3c/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l.html#a1">com::xacct::CRANE::collector::ProtocolMsgGET_TMPL</a>, <a class="el" href="../../df/d33/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l___r_s_p.html#a1">com::xacct::CRANE::collector::ProtocolMsgGET_TMPL_RSP</a>, <a class="el" href="../../d6/d85/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t.html#a1">com::xacct::CRANE::collector::ProtocolMsgSTART</a>, <a class="el" href="../../dc/d72/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___a_c_k.html#a1">com::xacct::CRANE::collector::ProtocolMsgSTART_ACK</a>, <a class="el" href="../../d7/d58/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___n_e_g_o_t_i_a_t_e.html#a1">com::xacct::CRANE::collector::ProtocolMsgSTART_NEGOTIATE</a>, <a class="el" href="../../df/dd8/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___n_e_g_o_t_i_a_t_e___a_c_k.html#a1">com::xacct::CRANE::collector::ProtocolMsgSTART_NEGOTIATE_ACK</a>, <a class="el" href="../../df/d9c/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_t_u_s___r_e_q.html#a1">com::xacct::CRANE::collector::ProtocolMsgSTATUS_REQ</a>, <a class="el" href="../../d2/d57/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_t_u_s___r_s_p.html#a1">com::xacct::CRANE::collector::ProtocolMsgSTATUS_RSP</a>, <a class="el" href="../../dd/d63/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_o_p.html#a1">com::xacct::CRANE::collector::ProtocolMsgSTOP</a>, <a class="el" href="../../de/d95/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_o_p___a_c_k.html#a1">com::xacct::CRANE::collector::ProtocolMsgSTOP_ACK</a>, <a class="el" href="../../df/d92/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_t_m_p_l___d_a_t_a.html#a1">com::xacct::CRANE::collector::ProtocolMsgTMPL_DATA</a>, and <a class="el" href="../../d8/d42/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_t_m_p_l___d_a_t_a___a_c_k.html#a1">com::xacct::CRANE::collector::ProtocolMsgTMPL_DATA_ACK</a>.<div class="fragment"><pre class="fragment">00177 { <span class="keywordflow">return</span> -1; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="com::xacct::CRANE::collector::ProtocolMsg::msgName"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">String com::xacct::CRANE::collector::ProtocolMsg::msgName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Description of the message type (this is over-ridden by sub-classes) <dl compact><dt><b>Returns:</b></dt><dd>The message type, as a string </dd></dl>

<p>
Implements <a class="el" href="../../d9/ddf/interfacecom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_identification.html#a0">com::xacct::CRANE::collector::ProtocolMsgIdentification</a>.
<p>
Reimplemented in <a class="el" href="../../d5/df1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_c_o_n_n_e_c_t.html#a0">com::xacct::CRANE::collector::ProtocolMsgCONNECT</a>, <a class="el" href="../../d7/dc1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a.html#a0">com::xacct::CRANE::collector::ProtocolMsgDATA</a>, <a class="el" href="../../d2/d8d/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a___a_c_k.html#a0">com::xacct::CRANE::collector::ProtocolMsgDATA_ACK</a>, <a class="el" href="../../d0/d10/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_empty.html#a2">com::xacct::CRANE::collector::ProtocolMsgEmpty</a>, <a class="el" href="../../d9/d12/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_e_r_r_o_r.html#a0">com::xacct::CRANE::collector::ProtocolMsgERROR</a>, <a class="el" href="../../d6/d26/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_f_i_n_a_l___t_m_p_l___d_a_t_a.html#a0">com::xacct::CRANE::collector::ProtocolMsgFINAL_TMPL_DATA</a>, <a class="el" href="../../de/d25/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_f_i_n_a_l___t_m_p_l___d_a_t_a___a_c_k.html#a0">com::xacct::CRANE::collector::ProtocolMsgFINAL_TMPL_DATA_ACK</a>, <a class="el" href="../../d0/d45/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s.html#a0">com::xacct::CRANE::collector::ProtocolMsgGET_SESS</a>, <a class="el" href="../../da/dd6/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s___r_s_p.html#a0">com::xacct::CRANE::collector::ProtocolMsgGET_SESS_RSP</a>, <a class="el" href="../../d9/d3c/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l.html#a0">com::xacct::CRANE::collector::ProtocolMsgGET_TMPL</a>, <a class="el" href="../../df/d33/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l___r_s_p.html#a0">com::xacct::CRANE::collector::ProtocolMsgGET_TMPL_RSP</a>, <a class="el" href="../../d6/d85/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t.html#a0">com::xacct::CRANE::collector::ProtocolMsgSTART</a>, <a class="el" href="../../dc/d72/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___a_c_k.html#a0">com::xacct::CRANE::collector::ProtocolMsgSTART_ACK</a>, <a class="el" href="../../d7/d58/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___n_e_g_o_t_i_a_t_e.html#a0">com::xacct::CRANE::collector::ProtocolMsgSTART_NEGOTIATE</a>, <a class="el" href="../../df/dd8/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___n_e_g_o_t_i_a_t_e___a_c_k.html#a0">com::xacct::CRANE::collector::ProtocolMsgSTART_NEGOTIATE_ACK</a>, <a class="el" href="../../df/d9c/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_t_u_s___r_e_q.html#a0">com::xacct::CRANE::collector::ProtocolMsgSTATUS_REQ</a>, <a class="el" href="../../d2/d57/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_t_u_s___r_s_p.html#a0">com::xacct::CRANE::collector::ProtocolMsgSTATUS_RSP</a>, <a class="el" href="../../dd/d63/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_o_p.html#a0">com::xacct::CRANE::collector::ProtocolMsgSTOP</a>, <a class="el" href="../../de/d95/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_o_p___a_c_k.html#a0">com::xacct::CRANE::collector::ProtocolMsgSTOP_ACK</a>, <a class="el" href="../../df/d92/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_t_m_p_l___d_a_t_a.html#a0">com::xacct::CRANE::collector::ProtocolMsgTMPL_DATA</a>, and <a class="el" href="../../d8/d42/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_t_m_p_l___d_a_t_a___a_c_k.html#a0">com::xacct::CRANE::collector::ProtocolMsgTMPL_DATA_ACK</a>.<div class="fragment"><pre class="fragment">00429 { <span class="keywordflow">return</span> <span class="stringliteral">"ProtocolMsg("</span> + <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o1">hdrMsgId</a> + <span class="stringliteral">")"</span>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e3" doxytag="com::xacct::CRANE::collector::ProtocolMsg::readMsg"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static final <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a> com::xacct::CRANE::collector::ProtocolMsg::readMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html">ConnectionDynamic</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>String&nbsp;</td>
          <td class="mdname" nowrap> <em>whatDoing</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>responseTo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>timeoutMillisec</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../df/d89/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_i_o_exception.html">ConnectionIOException</a>, <a class="el" href="../../dc/d8b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a>, <a class="el" href="../../d4/d30/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_config_exception.html">ConfigException</a> <code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00305                                                                                      {
00306         <span class="keywordflow">return</span> <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e2">readMsg</a>(<span class="keyword">new</span> byte[0x8000], <span class="comment">// should be big enough</span>
00307                        connection, whatDoing, responseTo, timeoutMillisec);
00308     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e2" doxytag="com::xacct::CRANE::collector::ProtocolMsg::readMsg"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static final <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a> com::xacct::CRANE::collector::ProtocolMsg::readMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html">ConnectionDynamic</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>String&nbsp;</td>
          <td class="mdname" nowrap> <em>whatDoing</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html">ProtocolMsg</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>responseTo</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>timeoutMillisec</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../df/d89/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_i_o_exception.html">ConnectionIOException</a>, <a class="el" href="../../dc/d8b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a>, <a class="el" href="../../d4/d30/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_config_exception.html">ConfigException</a> <code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read a message from input. This allocates a buffer each time, so it is less efficient than using <a class="el" href="../../">and remembering the buffer between calls.  in The input socket (e.g., new DataInputStream(socket.getInputStream()))  whatDoing A brief description of what this read is for; used to construct a meaningful exception (may be NULL)  responseTo The message to which this is a response (may be NULL)  timeoutMillisec zero for infinite wait  The internal form of the message </a><div class="fragment"><pre class="fragment">00273                                                                                      {
00274 
00275         <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#b0">ProtocolMsg</a> result;
00276 
00277         <span class="keywordflow">try</span> {
00278             buf = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#h0">readRawMsg</a>(connection, buf, timeoutMillisec);
00279             System.out.println(<span class="stringliteral">"ProtocolMsg readMsg buf "</span> + buf);
00280             result = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e4">construct</a>(buf, connection.getLog());
00281             System.out.println(<span class="stringliteral">"ProtocolMsg readMsg result "</span> + result);
00282 
00283             <span class="keywordflow">if</span> (result.shouldOutputToLog(connection.getLog())) {
00284                 connection.getLog().debug(<span class="stringliteral">"ProtocolMsg"</span>, <span class="stringliteral">"readMsg"</span>, <span class="stringliteral">"received from "</span> +
00285                                           connection.addrAndPortToString() +
00286                                           <span class="stringliteral">": "</span> + result.toStringLong());
00287             }
00288         } <span class="keywordflow">catch</span>(java.io.IOException e) {
00289             <span class="keywordflow">if</span> (e instanceof java.io.InterruptedIOException) {
00290                 <span class="comment">// XXX for JDK 1.4: SocketTimeoutException e</span>
00291                 <span class="comment">// XXX for JDK 1.3: e.getMessage().equals("Read timed out")</span>
00292                 result = <span class="keyword">new</span> ProtocolMsgEmpty();
00293             } <span class="keywordflow">else</span> {
00294                 <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(<span class="stringliteral">"I/O error while reading "</span> +
00295                                                 <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#h1">makeErrMsg</a>(whatDoing, responseTo), connection, e);
00296             }
00297         }
00298         <span class="keywordflow">return</span> result;
00299     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="h0" doxytag="com::xacct::CRANE::collector::ProtocolMsg::readRawMsg"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static final byte [] com::xacct::CRANE::collector::ProtocolMsg::readRawMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html">ConnectionDynamic</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>timeoutMillisec</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws java.io.IOException <code> [inline, static, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read an entire raw message, reallocating a buffer if needed. This routine is provided for efficiency; normally, you would use <a class="el" href="../../">This function is thread-safe on "in", which must not be null XXX It is not clear to what degree DataInputStream is buffered. If performance is inadequate, consider using BufferedReader or some other buffered input class.  in The input socket (e.g., new DataInputStream(socket.getInputStream()))  buf The buffer into which the data will be read. This can be zero length initially, if desired; but it is recommended to be larger. It is not guaranteed that the message will be put into this buffer; a separate buffer might be allocated and returned.  The buffer, reallocated larger if necessary.  EOFException is thrown if end-of-file is reached before reading an entire message - if this happens, the contents of the buffer are unpredictable. IOException is thrown for all other I/O errors.  ConnectionDynamic#readFully </a><div class="fragment"><pre class="fragment">00207                                    {
00208         <span class="keywordflow">if</span> (buf.length &lt; <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s1">HDR_LENGTH</a>) {
00209             buf = <span class="keyword">new</span> byte[<a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s1">HDR_LENGTH</a>];
00210         }
00211 
00212         <span class="comment">// The following code assumes that readFully will block</span>
00213         <span class="comment">// until all the message is read and that if it throws an</span>
00214         <span class="comment">// exception, on re-read will get everything again (keeps</span>
00215         <span class="comment">// things in a buffer - see {@link ConnectionDynamic#unread}).</span>
00216         <span class="keyword">synchronized</span>(connection.getInputSynchronizer()) {
00217             <span class="keywordtype">long</span> t1 = System.currentTimeMillis();
00218             <span class="keywordflow">try</span> {
00219                 connection.readFully(buf, 0, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s1">HDR_LENGTH</a>, timeoutMillisec);
00220                 System.out.println(<span class="stringliteral">"In readRawMsg : after connection.readFully 1"</span>);
00221 
00222             } <span class="keywordflow">catch</span> (java.io.InterruptedIOException ex) {
00223                 connection.unread(buf, 0, ex.bytesTransferred);
00224                 ex.bytesTransferred = 0;
00225                 <span class="keywordflow">throw</span> ex;
00226             }
00227 
00228             <span class="keywordtype">int</span> <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o4">msgLength</a> = (int)(<a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.getUnsignedInt(buf, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v4">MSG_LENGTH_OFFSET</a>));
00229             System.out.println(<span class="stringliteral">"In readRawMsg : msgLength"</span> + msgLength);
00230             <span class="keywordflow">if</span> (buf.length &lt; msgLength) {
00231                 byte [] newbuf = <span class="keyword">new</span> byte[msgLength];
00232                 System.arraycopy(buf, 0, newbuf, 0, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s1">HDR_LENGTH</a>);
00233                 buf = newbuf;
00234             }
00235 
00236             <span class="keywordtype">int</span> timeout2;
00237             <span class="keywordflow">if</span> (timeoutMillisec == 0) {
00238                 timeout2 = 0;
00239             } <span class="keywordflow">else</span> {
00240                 timeout2 = timeoutMillisec - (int)(System.currentTimeMillis() - t1);
00241                 <span class="keywordflow">if</span> (timeout2 &lt;= 0) {
00242                     timeout2 = 1; <span class="comment">// a very short timeout</span>
00243                 }
00244             }
00245             <span class="keywordflow">try</span> {
00246                 connection.readFully(buf, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s1">HDR_LENGTH</a>, msgLength - <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s1">HDR_LENGTH</a>, timeout2);
00247                 System.out.println(<span class="stringliteral">"In readRawMsg : after connection.readFully 2"</span>);
00248 
00249             } <span class="keywordflow">catch</span> (java.io.InterruptedIOException ex) {
00250                 connection.unread(buf, 0, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s1">HDR_LENGTH</a> + ex.bytesTransferred);
00251                 ex.bytesTransferred = 0;
00252                 <span class="keywordflow">throw</span> ex;
00253             }
00254         }
00255         <span class="keywordflow">return</span> buf;
00256     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e1" doxytag="com::xacct::CRANE::collector::ProtocolMsg::round32"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static final int com::xacct::CRANE::collector::ProtocolMsg::round32           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>value</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00143                                                {
00144         <span class="keywordflow">return</span> (value + 3) &gt;&gt; 2 &lt;&lt; 2;
00145     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="com::xacct::CRANE::collector::ProtocolMsg::sendMsg"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::ProtocolMsg::sendMsg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html">ConnectionDynamic</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>connection</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../df/d89/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_i_o_exception.html">ConnectionIOException</a>, <a class="el" href="../../dc/d8b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a>, <a class="el" href="../../d4/d30/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_config_exception.html">ConfigException</a> <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write a message to the socket. This method is thread-safe on "out", which must not be null. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>connection</em>&nbsp;</td><td>the connection </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00323                                                                                      {
00324         byte [] msg = null;
00325         <span class="keywordflow">try</span> {
00326             msg = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#b4">createRawMsg</a>();
00327         } <span class="keywordflow">catch</span>(UnknownHostException e) {
00328             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(<span class="stringliteral">"Error while sending "</span> + <span class="keyword">this</span>, connection, e);
00329         }
00330 
00331         <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a4">shouldOutputToLog</a>(connection.getLog())) {
00332             <span class="comment">// XXX</span>
00333             <span class="comment">// We use the @link construct method for display, so that we</span>
00334             <span class="comment">// can be sure that the round-trip conversion works.</span>
00335             <span class="comment">// Otherwise, use @link to_string.</span>
00336             <span class="keywordflow">if</span> (<span class="keyword">false</span>) {
00337                 <span class="keywordflow">try</span> {
00338                     connection.getLog().info(<span class="keyword">this</span>, <span class="stringliteral">"sendMsg"</span>, <span class="stringliteral">"Sending(constructed) to "</span> +
00339                                              connection.addrAndPortToString() + <span class="stringliteral">": "</span> +
00340                                              <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#b0">ProtocolMsg</a>.construct(msg, connection.getLog()));
00341                 } <span class="keywordflow">catch</span> (UnknownHostException e) {
00342                     connection.getLog().info(<span class="keyword">this</span>, <span class="stringliteral">"sendMsg"</span>, <span class="stringliteral">"Sending(couldn't construct: "</span> + e +
00343                                              <span class="stringliteral">") to "</span> + connection.addrAndPortToString() + <span class="stringliteral">": "</span> + <span class="keyword">this</span>);
00344                 }
00345             } <span class="keywordflow">else</span> {
00346                 connection.getLog().debug(<span class="keyword">this</span>, <span class="stringliteral">"send"</span>, <span class="stringliteral">"Sending to "</span> +
00347                                           connection.addrAndPortToString() + <span class="stringliteral">": "</span> + <span class="keyword">this</span>);
00348             }
00349         }
00350         <span class="keywordflow">try</span> {
00351             <span class="keyword">synchronized</span> (connection.getOutputSynchronizer()) {
00352                 connection.write(msg);
00353             }
00354         } <span class="keywordflow">catch</span> (java.io.IOException e) {
00355             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(<span class="stringliteral">"I/O error while sending "</span> + <span class="keyword">this</span>, connection, e);
00356         }
00357     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="com::xacct::CRANE::collector::ProtocolMsg::set"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::ProtocolMsg::set           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>length</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>requiredLength</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../dc/d8b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a> <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00047                                              {
00048         <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#d0">initZero</a>();
00049         <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#f0">verifyLength</a>(<span class="keyword">this</span>, msg, length, requiredLength);
00050 
00051         <span class="keywordflow">try</span> {
00052             <span class="keyword">this</span>.protocolVersion = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.getByte(msg, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v0">PROTOCOL_VERSION_OFFSET</a>);
00053             <span class="keyword">this</span>.hdrMsgId        = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.getByte(msg, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v1">MSGID_OFFSET</a>);
00054             <span class="keyword">this</span>.sessionId       = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.getByte(msg, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v2">SESSION_ID_OFFSET</a>);
00055             <span class="keyword">this</span>.hdrFlags        = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.getByte(msg, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v3">HDR_FLAGS_OFFSET</a>);
00056             <span class="keyword">this</span>.msgLength       = (int)<a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.getUnsignedInt(msg, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v4">MSG_LENGTH_OFFSET</a>);
00057         } <span class="keywordflow">catch</span> (IndexOutOfBoundsException e) {
00058             <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#b1">handleIndexOutOfBounds</a>(e, msg, length);
00059             CollectorLog.stackTrace(e);
00060         }
00061 
00062         <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o0">protocolVersion</a> != <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s2">PROTOCOL_VERSION</a>) {
00063             <span class="keywordflow">throw</span> <span class="keyword">new</span> ProtocolMalformedMsgException(
00064                 <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a6">msgName</a>() + <span class="stringliteral">" protocol version("</span> +
00065                 <span class="keyword">this</span>.<a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o0">protocolVersion</a> + <span class="stringliteral">") not "</span> +
00066                 <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s2">PROTOCOL_VERSION</a>,
00067                 msg, length, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v0">PROTOCOL_VERSION_OFFSET</a>);
00068         }
00069 
00070         <span class="keywordflow">if</span> (length &gt; msg.length) {
00071             <span class="keywordflow">throw</span> <span class="keyword">new</span> ProtocolMalformedMsgException(
00072                 <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a6">msgName</a>() + <span class="stringliteral">" message length ("</span> + length +
00073                 <span class="stringliteral">") greater than bytes.length ("</span> +
00074                 msg.length + <span class="stringliteral">")"</span>,
00075                 msg, length, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v4">MSG_LENGTH_OFFSET</a>);
00076         }
00077     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b3" doxytag="com::xacct::CRANE::collector::ProtocolMsg::setHeader"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::ProtocolMsg::setHeader           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>msgData</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Fill in the header of the message. Typically this is not used directly but is used by sub-classes. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>msgData</em>&nbsp;</td><td>the message bytes to be filled </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msgId</em>&nbsp;</td><td><a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a> protocol header message id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sessionId</em>&nbsp;</td><td><a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a> protocol header session id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msgFlags</em>&nbsp;</td><td><a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a> protocol header flags (normally zero) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msgLength</em>&nbsp;</td><td><a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a> protocol header length (normally msgData.length) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00465                                                     {
00466         <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.putByte(       msgData, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v0">PROTOCOL_VERSION_OFFSET</a>, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s2">PROTOCOL_VERSION</a>);
00467         <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.putByte(       msgData, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v1">MSGID_OFFSET</a>,       <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a3">msgId</a>());
00468         <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.putByte(       msgData, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v2">SESSION_ID_OFFSET</a>,  (byte)<span class="keyword">this</span>.<a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o2">sessionId</a>);
00469         <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.putByte(       msgData, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v3">HDR_FLAGS_OFFSET</a>,   (byte)0);
00470         <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">bigE</a>.putUnsignedInt(msgData, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v4">MSG_LENGTH_OFFSET</a>, <span class="keyword">this</span>.<a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o4">msgLength</a>);
00471     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="com::xacct::CRANE::collector::ProtocolMsg::shouldOutputToLog"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">boolean com::xacct::CRANE::collector::ProtocolMsg::shouldOutputToLog           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>log</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Flag for whether we should we output a log message when sending or receiving. Subclasses may override this (i.e., DATA and DATA_ACK) will to check for "debug" level output. 
<p>
Reimplemented in <a class="el" href="../../d7/dc1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a.html#a2">com::xacct::CRANE::collector::ProtocolMsgDATA</a>, and <a class="el" href="../../d2/d8d/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a___a_c_k.html#a2">com::xacct::CRANE::collector::ProtocolMsgDATA_ACK</a>.<div class="fragment"><pre class="fragment">00183 { <span class="keywordflow">return</span> log.info(); }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="com::xacct::CRANE::collector::ProtocolMsg::toString"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">String com::xacct::CRANE::collector::ProtocolMsg::toString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A human-readable form of the message. This is over-ridden by sub-classes, which typically use this (super.toString()) to get the header part. <dl compact><dt><b>Returns:</b></dt><dd>human-readable display </dd></dl>

<p>
Reimplemented in <a class="el" href="../../d5/df1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_c_o_n_n_e_c_t.html#a5">com::xacct::CRANE::collector::ProtocolMsgCONNECT</a>, <a class="el" href="../../d7/dc1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a.html#a9">com::xacct::CRANE::collector::ProtocolMsgDATA</a>, <a class="el" href="../../d2/d8d/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a___a_c_k.html#a6">com::xacct::CRANE::collector::ProtocolMsgDATA_ACK</a>, <a class="el" href="../../d9/d12/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_e_r_r_o_r.html#a5">com::xacct::CRANE::collector::ProtocolMsgERROR</a>, <a class="el" href="../../de/d25/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_f_i_n_a_l___t_m_p_l___d_a_t_a___a_c_k.html#a5">com::xacct::CRANE::collector::ProtocolMsgFINAL_TMPL_DATA_ACK</a>, <a class="el" href="../../d0/d45/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s.html#a5">com::xacct::CRANE::collector::ProtocolMsgGET_SESS</a>, <a class="el" href="../../da/dd6/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s___r_s_p.html#a3">com::xacct::CRANE::collector::ProtocolMsgGET_SESS_RSP</a>, <a class="el" href="../../d9/d3c/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l.html#a5">com::xacct::CRANE::collector::ProtocolMsgGET_TMPL</a>, <a class="el" href="../../df/d33/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l___r_s_p.html#a3">com::xacct::CRANE::collector::ProtocolMsgGET_TMPL_RSP</a>, <a class="el" href="../../dc/d72/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___a_c_k.html#a5">com::xacct::CRANE::collector::ProtocolMsgSTART_ACK</a>, and <a class="el" href="../../df/d92/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_t_m_p_l___d_a_t_a.html#a3">com::xacct::CRANE::collector::ProtocolMsgTMPL_DATA</a>.<div class="fragment"><pre class="fragment">00436                              {
00437         <span class="keywordflow">return</span> <span class="stringliteral">"msg-"</span> + <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a6">msgName</a>() + <span class="comment">// will get sub-class method for name, if it exists</span>
00438             <span class="stringliteral">"["</span> +
00439             ((<a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o0">protocolVersion</a> == <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s2">PROTOCOL_VERSION</a>) ? <span class="stringliteral">""</span> : <span class="stringliteral">"version="</span> + <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o0">protocolVersion</a> + <span class="stringliteral">" "</span>) +
00440             <span class="stringliteral">"sess="</span> + <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o2">sessionId</a> +
00441             ((<a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o3">hdrFlags</a> != 0) ? <span class="stringliteral">" flags="</span> + <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o3">hdrFlags</a> : <span class="stringliteral">""</span>) +
00442             <span class="stringliteral">"]"</span>;
00443     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="com::xacct::CRANE::collector::ProtocolMsg::toStringLong"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">String com::xacct::CRANE::collector::ProtocolMsg::toStringLong           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A longer human-readable message. Overridden by some sub-classes. <dl compact><dt><b>Returns:</b></dt><dd>human-readable string (long) </dd></dl>

<p>
Reimplemented in <a class="el" href="../../d7/dc1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a.html#a10">com::xacct::CRANE::collector::ProtocolMsgDATA</a>, <a class="el" href="../../d9/d12/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_e_r_r_o_r.html#a6">com::xacct::CRANE::collector::ProtocolMsgERROR</a>, <a class="el" href="../../da/dd6/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s___r_s_p.html#a4">com::xacct::CRANE::collector::ProtocolMsgGET_SESS_RSP</a>, <a class="el" href="../../df/d33/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l___r_s_p.html#a4">com::xacct::CRANE::collector::ProtocolMsgGET_TMPL_RSP</a>, and <a class="el" href="../../df/d92/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_t_m_p_l___d_a_t_a.html#a4">com::xacct::CRANE::collector::ProtocolMsgTMPL_DATA</a>.<div class="fragment"><pre class="fragment">00448                                  {
00449         <span class="keywordflow">return</span> <span class="stringliteral">"msg-"</span> + <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a6">msgName</a>() + <span class="comment">// will get sub-class method for name, if it exists</span>
00450             <span class="stringliteral">"[version="</span> + <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o0">protocolVersion</a> +
00451             <span class="stringliteral">" sess="</span> + <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o2">sessionId</a> +
00452             ((<a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o3">hdrFlags</a> != 0) ? <span class="stringliteral">" flags="</span> + <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o3">hdrFlags</a> : <span class="stringliteral">""</span>) +
00453             <span class="stringliteral">" len="</span> + <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o4">msgLength</a> +
00454             <span class="stringliteral">"]"</span>;
00455     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="com::xacct::CRANE::collector::ProtocolMsg::trimToLength"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final byte [] com::xacct::CRANE::collector::ProtocolMsg::trimToLength           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>length</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Trim a byte vector to a particular length. This is a slightly inefficient routine, mainly for catching errors: it may reallocate the vector in the course of trimming. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>The input vector </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>length</em>&nbsp;</td><td>The length to trim it to </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The original vector, if it was already of that length; an exception if the length is too long; otherwise a new vector of the exact length (with the contents of the input vector). </dd></dl>
<div class="fragment"><pre class="fragment">00158                                                                   {
00159         byte [] result;
00160         <span class="keywordflow">if</span> (length == buf.length) {
00161             result = buf;
00162         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (length &gt; buf.length) {
00163             <span class="keywordflow">throw</span> <span class="keyword">new</span> IndexOutOfBoundsException(
00164                 <span class="stringliteral">"Specified length "</span> + length +
00165                 <span class="stringliteral">" to a byte vector of length "</span> +
00166                 buf.length);
00167         } <span class="keywordflow">else</span> {
00168             result = <span class="keyword">new</span> byte[length];
00169             System.arraycopy(buf, 0, result, 0, length);
00170         }
00171         <span class="keywordflow">return</span> result;
00172     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e9" doxytag="com::xacct::CRANE::collector::ProtocolMsg::unimplemented"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void com::xacct::CRANE::collector::ProtocolMsg::unimplemented           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Object&nbsp;</td>
          <td class="mdname" nowrap> <em>o</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>String&nbsp;</td>
          <td class="mdname" nowrap> <em>function</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws UnsupportedOperationException <code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Output a message about an unimplemented method and throw an appropriate execption. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>o</em>&nbsp;</td><td>The object whose method is unimplemented. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>function</em>&nbsp;</td><td>The name of the function (method). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>UnsupportedOperationException</em>&nbsp;</td><td>Always thrown. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00557                                              {
00558         <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e8">unimplemented</a>(o.getClass().getName(), function);
00559     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e8" doxytag="com::xacct::CRANE::collector::ProtocolMsg::unimplemented"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void com::xacct::CRANE::collector::ProtocolMsg::unimplemented           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">String&nbsp;</td>
          <td class="mdname" nowrap> <em>className</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>String&nbsp;</td>
          <td class="mdname" nowrap> <em>function</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws UnsupportedOperationException <code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Output a message about an unimplemented method and throw an appropriate execption. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>className</em>&nbsp;</td><td>The name of the class. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>function</em>&nbsp;</td><td>The name of the function (method). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>UnsupportedOperationException</em>&nbsp;</td><td>Always thrown. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00546                                              {
00547         <span class="keywordflow">throw</span> <span class="keyword">new</span> UnsupportedOperationException(<span class="stringliteral">"Not implemented ("</span> + className + <span class="stringliteral">"."</span> + function + <span class="stringliteral">")"</span>);
00548     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="f0" doxytag="com::xacct::CRANE::collector::ProtocolMsg::verifyLength"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static final void com::xacct::CRANE::collector::ProtocolMsg::verifyLength           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/ddf/interfacecom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_identification.html">ProtocolMsgIdentification</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>id</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>bufLength</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>requiredLength</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../dc/d8b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a> <code> [inline, static, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Verify the length and throw an exception if wrong <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>id</em>&nbsp;</td><td>the object that provides identification methods (may be null) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>the raw message buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bufLength</em>&nbsp;</td><td>the message buffer length </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>requiredLength</em>&nbsp;</td><td>the minimum size of the message </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="../../dc/d8b/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a></em>&nbsp;</td><td>if bufLength &lt; requiredLength </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00133                                              {
00134         requiredLength = <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#e1">round32</a>(requiredLength);
00135         <span class="keywordflow">if</span> (bufLength &lt; requiredLength) {
00136             <span class="keywordflow">throw</span> <span class="keyword">new</span> ProtocolMalformedMsgException(
00137                 ((<span class="keywordtype">id</span> == null) ? <span class="stringliteral">"???"</span> : <span class="keywordtype">id</span>.<a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#a6">msgName</a>()) +
00138                 <span class="stringliteral">" message too short (must be at least "</span> + requiredLength + <span class="stringliteral">")"</span>,
00139                 buf, bufLength, <a class="code" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v4">MSG_LENGTH_OFFSET</a> + ProtocolData.unsignedIntSize);
00140         }
00141     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e0" doxytag="com::xacct::CRANE::collector::ProtocolMsg::versionStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static String com::xacct::CRANE::collector::ProtocolMsg::versionStr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Id</b></dt><dd>ProtocolMsg.java,v 1.4 2005/01/30 15:13:41 ilyad Exp </dd></dl>

<p>
Reimplemented in <a class="el" href="../../d5/df1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_c_o_n_n_e_c_t.html#e0">com::xacct::CRANE::collector::ProtocolMsgCONNECT</a>, <a class="el" href="../../d7/dc1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a.html#e0">com::xacct::CRANE::collector::ProtocolMsgDATA</a>, <a class="el" href="../../d2/d8d/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_d_a_t_a___a_c_k.html#e0">com::xacct::CRANE::collector::ProtocolMsgDATA_ACK</a>, <a class="el" href="../../d0/d10/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_empty.html#e0">com::xacct::CRANE::collector::ProtocolMsgEmpty</a>, <a class="el" href="../../d9/d12/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_e_r_r_o_r.html#e0">com::xacct::CRANE::collector::ProtocolMsgERROR</a>, <a class="el" href="../../d6/d26/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_f_i_n_a_l___t_m_p_l___d_a_t_a.html#e0">com::xacct::CRANE::collector::ProtocolMsgFINAL_TMPL_DATA</a>, <a class="el" href="../../de/d25/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_f_i_n_a_l___t_m_p_l___d_a_t_a___a_c_k.html#e0">com::xacct::CRANE::collector::ProtocolMsgFINAL_TMPL_DATA_ACK</a>, <a class="el" href="../../d0/d45/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s.html#e0">com::xacct::CRANE::collector::ProtocolMsgGET_SESS</a>, <a class="el" href="../../da/dd6/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s___r_s_p.html#e0">com::xacct::CRANE::collector::ProtocolMsgGET_SESS_RSP</a>, <a class="el" href="../../d9/d3c/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l.html#e0">com::xacct::CRANE::collector::ProtocolMsgGET_TMPL</a>, <a class="el" href="../../df/d33/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___t_m_p_l___r_s_p.html#e0">com::xacct::CRANE::collector::ProtocolMsgGET_TMPL_RSP</a>, <a class="el" href="../../d6/d85/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t.html#e0">com::xacct::CRANE::collector::ProtocolMsgSTART</a>, <a class="el" href="../../dc/d72/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___a_c_k.html#e0">com::xacct::CRANE::collector::ProtocolMsgSTART_ACK</a>, <a class="el" href="../../d7/d58/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___n_e_g_o_t_i_a_t_e.html#e0">com::xacct::CRANE::collector::ProtocolMsgSTART_NEGOTIATE</a>, <a class="el" href="../../df/dd8/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_r_t___n_e_g_o_t_i_a_t_e___a_c_k.html#e0">com::xacct::CRANE::collector::ProtocolMsgSTART_NEGOTIATE_ACK</a>, <a class="el" href="../../df/d9c/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_t_u_s___r_e_q.html#e0">com::xacct::CRANE::collector::ProtocolMsgSTATUS_REQ</a>, <a class="el" href="../../d2/d57/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_a_t_u_s___r_s_p.html#e0">com::xacct::CRANE::collector::ProtocolMsgSTATUS_RSP</a>, <a class="el" href="../../dd/d63/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_o_p.html#e0">com::xacct::CRANE::collector::ProtocolMsgSTOP</a>, <a class="el" href="../../de/d95/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_s_t_o_p___a_c_k.html#e0">com::xacct::CRANE::collector::ProtocolMsgSTOP_ACK</a>, <a class="el" href="../../df/d92/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_t_m_p_l___d_a_t_a.html#e0">com::xacct::CRANE::collector::ProtocolMsgTMPL_DATA</a>, and <a class="el" href="../../d8/d42/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_t_m_p_l___d_a_t_a___a_c_k.html#e0">com::xacct::CRANE::collector::ProtocolMsgTMPL_DATA_ACK</a>.<div class="fragment"><pre class="fragment">00034 { <span class="keywordflow">return</span> <span class="stringliteral">"@(#) $Id: ProtocolMsg.java,v 1.4 2005/01/30 15:13:41 ilyad Exp $"</span>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="s0" doxytag="com::xacct::CRANE::collector::ProtocolMsg::bigE"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final <a class="el" href="../../d9/da3/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_data_big_endian.html">ProtocolDataBigEndian</a> <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s0">com::xacct::CRANE::collector::ProtocolMsg::bigE</a> = new <a class="el" href="../../d9/da3/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_data_big_endian.html">ProtocolDataBigEndian</a>()<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A big-endian data extractor, for convenience. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="v3" doxytag="com::xacct::CRANE::collector::ProtocolMsg::HDR_FLAGS_OFFSET"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final int <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v3">com::xacct::CRANE::collector::ProtocolMsg::HDR_FLAGS_OFFSET</a> = 2<code> [static, private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="s1" doxytag="com::xacct::CRANE::collector::ProtocolMsg::HDR_LENGTH"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final int <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s1">com::xacct::CRANE::collector::ProtocolMsg::HDR_LENGTH</a> = 8<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The minimum length of a message (header only). 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="o3" doxytag="com::xacct::CRANE::collector::ProtocolMsg::hdrFlags"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">byte <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o3">com::xacct::CRANE::collector::ProtocolMsg::hdrFlags</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<a class="el" href="../../d4/daa/struct_message.html">Message</a> header flags (ignored in version 1 of the protocol). 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="o1" doxytag="com::xacct::CRANE::collector::ProtocolMsg::hdrMsgId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">short <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o1">com::xacct::CRANE::collector::ProtocolMsg::hdrMsgId</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The message id (defines what type of record it is). 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="v4" doxytag="com::xacct::CRANE::collector::ProtocolMsg::MSG_LENGTH_OFFSET"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final int <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v4">com::xacct::CRANE::collector::ProtocolMsg::MSG_LENGTH_OFFSET</a> = 4<code> [static, private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="v1" doxytag="com::xacct::CRANE::collector::ProtocolMsg::MSGID_OFFSET"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final int <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v1">com::xacct::CRANE::collector::ProtocolMsg::MSGID_OFFSET</a> = 1<code> [static, private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="o4" doxytag="com::xacct::CRANE::collector::ProtocolMsg::msgLength"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o4">com::xacct::CRANE::collector::ProtocolMsg::msgLength</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<a class="el" href="../../d4/daa/struct_message.html">Message</a> length, from the header. The header shows an unsigned 32 but Java won't let us construct a byte array with a "long", so let's leave this as an "int" (2^31 is a pretty big message in <a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a> anyway!).     </td>
  </tr>
</table>
<a class="anchor" name="s2" doxytag="com::xacct::CRANE::collector::ProtocolMsg::PROTOCOL_VERSION"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final byte <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#s2">com::xacct::CRANE::collector::ProtocolMsg::PROTOCOL_VERSION</a> = 1<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The version of the <a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a> protocol that we support. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="v0" doxytag="com::xacct::CRANE::collector::ProtocolMsg::PROTOCOL_VERSION_OFFSET"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final int <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v0">com::xacct::CRANE::collector::ProtocolMsg::PROTOCOL_VERSION_OFFSET</a> = 0<code> [static, private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="o0" doxytag="com::xacct::CRANE::collector::ProtocolMsg::protocolVersion"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">short <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o0">com::xacct::CRANE::collector::ProtocolMsg::protocolVersion</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The protocol Version. 
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="v2" doxytag="com::xacct::CRANE::collector::ProtocolMsg::SESSION_ID_OFFSET"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final int <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#v2">com::xacct::CRANE::collector::ProtocolMsg::SESSION_ID_OFFSET</a> = 3<code> [static, private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Reimplemented in <a class="el" href="../../da/dd6/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg_g_e_t___s_e_s_s___r_s_p.html#v6">com::xacct::CRANE::collector::ProtocolMsgGET_SESS_RSP</a>.    </td>
  </tr>
</table>
<a class="anchor" name="o2" doxytag="com::xacct::CRANE::collector::ProtocolMsg::sessionId"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">short <a class="el" href="../../d6/d7e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_protocol_msg.html#o2">com::xacct::CRANE::collector::ProtocolMsg::sessionId</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The session identifier. 
<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>ipdr/Collector/com/xacct/CRANE/collector/<a class="el" href="../../d9/ddd/com_2xacct_2_c_r_a_n_e_2collector_2_protocol_msg_8java.html">ProtocolMsg.java</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 09:26:47 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
