<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: org::ipdr::IPDRStateMachine Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="../../db/d96/namespaceorg.html">org</a>::<a class="el" href="../../df/d76/namespaceorg_1_1ipdr.html">ipdr</a>::<a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html">IPDRStateMachine</a></div>
<h1>org::ipdr::IPDRStateMachine Class Reference</h1><p>Inheritance diagram for org::ipdr::IPDRStateMachine:
<p><center><img src="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.png" usemap="#org::ipdr::IPDRStateMachine_map" border="0" alt=""></center>
<map name="org::ipdr::IPDRStateMachine_map">
<area href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html" alt="org::ipdr::ProtocolStateMachine" shape="rect" coords="0,0,189,24">
</map>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a0">IPDRStateMachine</a> (<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a> <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>, <a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>, <a class="el" href="../../d8/d73/interfaceorg_1_1ipdr_1_1api_1_1_outputter.html">Outputter</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p10">outputter</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a1">IPDRStateMachine</a> (<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a> <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>, <a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>, <a class="el" href="../../d8/d73/interfaceorg_1_1ipdr_1_1api_1_1_outputter.html">Outputter</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p10">outputter</a>, <a class="el" href="../../d8/dea/interfaceorg_1_1ipdr_1_1api_1_1_template_negotiator.html">TemplateNegotiator</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p8">negotiator</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a2">IPDRStateMachine</a> (<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a> <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>, <a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>, <a class="el" href="../../d8/d73/interfaceorg_1_1ipdr_1_1api_1_1_outputter.html">Outputter</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p10">outputter</a>, <a class="el" href="../../d8/dea/interfaceorg_1_1ipdr_1_1api_1_1_template_negotiator.html">TemplateNegotiator</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p8">negotiator</a>, <a class="el" href="../../d2/dad/interfaceorg_1_1ipdr_1_1api_1_1_state_machine_listener.html">StateMachineListener</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>, <a class="el" href="../../d4/d39/interfaceorg_1_1ipdr_1_1api_1_1_connection_controller.html">ConnectionController</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p3">controller</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a3">IPDRStateMachine</a> (<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a> <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>, <a class="el" href="../../d0/d08/interfaceorg_1_1ipdr_1_1api_1_1_outputter_factory.html">OutputterFactory</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p11">outputterFactory</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a4">IPDRStateMachine</a> (<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a> <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>, <a class="el" href="../../d0/d08/interfaceorg_1_1ipdr_1_1api_1_1_outputter_factory.html">OutputterFactory</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p11">outputterFactory</a>, <a class="el" href="../../dc/de3/interfaceorg_1_1ipdr_1_1api_1_1_template_negotiator_factory.html">TemplateNegotiatorFactory</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p9">negotiatorFactory</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a5">IPDRStateMachine</a> (<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a> <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>, <a class="el" href="../../d0/d08/interfaceorg_1_1ipdr_1_1api_1_1_outputter_factory.html">OutputterFactory</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p11">outputterFactory</a>, <a class="el" href="../../dc/de3/interfaceorg_1_1ipdr_1_1api_1_1_template_negotiator_factory.html">TemplateNegotiatorFactory</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p9">negotiatorFactory</a>, <a class="el" href="../../d2/dad/interfaceorg_1_1ipdr_1_1api_1_1_state_machine_listener.html">StateMachineListener</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>, <a class="el" href="../../d4/d39/interfaceorg_1_1ipdr_1_1api_1_1_connection_controller.html">ConnectionController</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p3">controller</a>, <a class="el" href="../../d9/d38/interfaceorg_1_1ipdr_1_1_incoming_connection_handler.html">IncomingConnectionHandler</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p2">connectionHandler</a>, <a class="el" href="../../d6/d23/classorg_1_1ipdr_1_1api_1_1_connection_thread.html">ConnectionThread</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p17">thread</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a6">canExit</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a7">cleanup</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a8">collectorKeepAliveTimeout</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a9">completeMachine</a> (<a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>, InetAddress transmitterAddress, int transmitterPort)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a10">connectTimeout</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a11">dataAckTimeout</a> (byte sessionId)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a12">exporterKeepAliveTimeout</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a13">getExporterKeepaliveTimeout</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">InetAddress&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a14">getRealExporterAddress</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">ArrayList&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a15">getSessionList</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a16">getSessionState</a> (byte sessionId)  throws InvalidSessionStateException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a17">initiateDisconnection</a> (short sessionReasonCode, short flowReasonCode, String reasonInfo)  throws ConnectionIOException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a18">mainLoop</a> ()  throws ConfigException, ConnectionIOException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a19">primitiveAcknowledgeTemplate</a> (<a class="el" href="../../db/d66/classorg_1_1ipdr_1_1protocol_1_1_protocol_stream_msg.html">ProtocolStreamMsg</a> message)  throws InvalidSessionStateException, ConnectionIOException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a20">sendStartNegotiation</a> (byte sessionId)  throws InvalidSessionStateException, ConnectionException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a21">setExporterKeepaliveTimeout</a> (long <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p4">exporterKeepaliveTimeout</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a22">setProbingListener</a> (<a class="el" href="../../dd/d40/interfaceorg_1_1ipdr_1_1api_1_1_probing_listener.html">ProbingListener</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r0">probingListener</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a23">startListeningState</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a24">startProtocol</a> ()  throws ConnectionException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a25">stopFlow</a> (byte sessionId)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a26">toString</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a27">getRealExporterPort</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static final short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s0">CONNECTION_ERROR_KEEPALIVE_EXPIRED</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s1">CUSTOM_ERROR_BASE</a> = 255</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s2">EXPORTER_ADDRESS_ERROR_UNKNOWN</a> = <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s1">CUSTOM_ERROR_BASE</a> + 3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s3">FLOW_ERROR</a> = 1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s4">FLOW_NO_ERROR</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s5">NO_ERROR</a> = -1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s6">OUTPUTTER_ERROR</a> = <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s1">CUSTOM_ERROR_BASE</a> + 1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s7">SESSION_ERROR_MESSAGE_DECODE_ERROR</a> = 3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s8">SESSION_ERROR_MESSAGE_INVALID_CAPABILITIES</a> = 1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s9">SESSION_ERROR_MESSAGE_INVALID_STATE</a> = 2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s10">SESSION_ERROR_TERMINATING</a> = 4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static final short&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s11">SESSION_ERROR_UNKNOWN</a> = <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s1">CUSTOM_ERROR_BASE</a> + 2</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b0">doFlowStart</a> ()  throws ConnectionIOException, ConfigException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b1">doFlowStop</a> (byte sessionId, short reasonCode, String reasonInfo)  throws ConnectionException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b2">doInitiateProbe</a> ()  throws ConnectionIOException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b3">endConnection</a> (short reasonCode, String reasonInfo)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b4">endSession</a> (byte sessionId, short reasonCode, String reasonInfo)  throws ConnectionException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b5">handleMessage</a> (<a class="el" href="../../db/d66/classorg_1_1ipdr_1_1protocol_1_1_protocol_stream_msg.html">ProtocolStreamMsg</a> message)  throws ConnectionIOException, ConfigException, ConnectionException,             SessionException, ProtocolMalformedMsgException, OutputterException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b6">sendDataAcknowledge</a> (byte sessionId, short configId, long dataSeqNo)  throws ConnectionIOException,             InvalidSessionStateException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b7">sendDataAcknowledge</a> (<a class="el" href="../../d4/d5d/classorg_1_1ipdr_1_1protocol_1_1_protocol_msg_d_a_t_a.html">ProtocolMsgDATA</a> message)  throws ConnectionIOException, InvalidSessionStateException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a> (<a class="el" href="../../db/d66/classorg_1_1ipdr_1_1protocol_1_1_protocol_stream_msg.html">ProtocolStreamMsg</a> message, <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a> <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>)  throws ConnectionIOException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b9">startSession</a> (byte sessionId)  throws InvalidSessionStateException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b10">validateSessionState</a> (<a class="el" href="../../db/d66/classorg_1_1ipdr_1_1protocol_1_1_protocol_stream_msg.html">ProtocolStreamMsg</a> message)  throws InvalidSessionStateException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b11">validateTemplates</a> (<a class="el" href="../../db/d66/classorg_1_1ipdr_1_1protocol_1_1_protocol_stream_msg.html">ProtocolStreamMsg</a> message)  throws ConfigException     </td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p0">canExit</a> = false</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d9/d38/interfaceorg_1_1ipdr_1_1_incoming_connection_handler.html">IncomingConnectionHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p2">connectionHandler</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d4/d39/interfaceorg_1_1ipdr_1_1api_1_1_connection_controller.html">ConnectionController</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p3">controller</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p4">exporterKeepaliveTimeout</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p5">exporterMultipleSessions</a> = false</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p6">isPassiveConnection</a> = false</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d2/dad/interfaceorg_1_1ipdr_1_1api_1_1_state_machine_listener.html">StateMachineListener</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d8/dea/interfaceorg_1_1ipdr_1_1api_1_1_template_negotiator.html">TemplateNegotiator</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p8">negotiator</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../dc/de3/interfaceorg_1_1ipdr_1_1api_1_1_template_negotiator_factory.html">TemplateNegotiatorFactory</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p9">negotiatorFactory</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d8/d73/interfaceorg_1_1ipdr_1_1api_1_1_outputter.html">Outputter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p10">outputter</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d0/d08/interfaceorg_1_1ipdr_1_1api_1_1_outputter_factory.html">OutputterFactory</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p11">outputterFactory</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">volatile boolean&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p12">pendingStopFlow</a> = false</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">InetAddress&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p13">realExporterAddress</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p14">realExporterPort</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/db4/classorg_1_1ipdr_1_1_i_p_d_r_connection_state.html">IPDRConnectionState</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">ArrayList&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p16">stopFlows</a> = new ArrayList()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d6/d23/classorg_1_1ipdr_1_1api_1_1_connection_thread.html">ConnectionThread</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p17">thread</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">Timer&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p18">timer</a> = new Timer(true)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/dab/classorg_1_1ipdr_1_1utility_1_1_timeout_timer_task.html">TimeoutTimerTask</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a> = new <a class="el" href="../../db/dab/classorg_1_1ipdr_1_1utility_1_1_timeout_timer_task.html">TimeoutTimerTask</a>(this)</td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../dd/d40/interfaceorg_1_1ipdr_1_1api_1_1_probing_listener.html">ProbingListener</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r0">probingListener</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">ArrayList&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r1">sessionProbeResult</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">Hashtable&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r2">unprobedSessions</a> = new Hashtable()</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Implements IPDR state machine 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a0" doxytag="org::ipdr::IPDRStateMachine::IPDRStateMachine"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">org::ipdr::IPDRStateMachine::IPDRStateMachine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d8/d73/interfaceorg_1_1ipdr_1_1api_1_1_outputter.html">Outputter</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>outputter</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes the state machine with given connection, configuration and outputter for an active connection<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>connection</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outputter</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00212     {
00213         <span class="keyword">this</span>.connection = <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>;
00214         <span class="keyword">this</span>.config = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>;
00215         <span class="keyword">this</span>.state = <span class="keyword">new</span> IPDRConnectionState(<span class="keyword">this</span>, IPDRConnectionState.DISCONNECTED,
00216                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p10">outputter</a>);
00217         <span class="keyword">this</span>.timer.scheduleAtFixedRate(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>,
00218                 TimeoutTimerTask.TIMEOUT_INTERVAL,
00219                 TimeoutTimerTask.TIMEOUT_INTERVAL);
00220     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="org::ipdr::IPDRStateMachine::IPDRStateMachine"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">org::ipdr::IPDRStateMachine::IPDRStateMachine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d8/d73/interfaceorg_1_1ipdr_1_1api_1_1_outputter.html">Outputter</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>outputter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d8/dea/interfaceorg_1_1ipdr_1_1api_1_1_template_negotiator.html">TemplateNegotiator</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>negotiator</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes the state machine with given connection, configuration, outputter and template negotiator for an active connection<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>connection</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outputter</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negotiator</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00234     {
00235         <span class="keyword">this</span>(<a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>, <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>, <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p10">outputter</a>);
00236         <span class="keyword">this</span>.negotiator = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p8">negotiator</a>;
00237     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="org::ipdr::IPDRStateMachine::IPDRStateMachine"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">org::ipdr::IPDRStateMachine::IPDRStateMachine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d8/d73/interfaceorg_1_1ipdr_1_1api_1_1_outputter.html">Outputter</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>outputter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d8/dea/interfaceorg_1_1ipdr_1_1api_1_1_template_negotiator.html">TemplateNegotiator</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>negotiator</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d2/dad/interfaceorg_1_1ipdr_1_1api_1_1_state_machine_listener.html">StateMachineListener</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>listener</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/d39/interfaceorg_1_1ipdr_1_1api_1_1_connection_controller.html">ConnectionController</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>controller</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes the state machine with given connection, configuration, outputter, template negotiator and state machine listener for an active connection<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>connection</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outputter</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negotiator</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>listener</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00254     {
00255         <span class="keyword">this</span>(<a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>, <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>, <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p10">outputter</a>, <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p8">negotiator</a>);
00256         <span class="keyword">this</span>.listener = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>;
00257         <span class="keyword">this</span>.controller = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p3">controller</a>;
00258     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="org::ipdr::IPDRStateMachine::IPDRStateMachine"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">org::ipdr::IPDRStateMachine::IPDRStateMachine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d0/d08/interfaceorg_1_1ipdr_1_1api_1_1_outputter_factory.html">OutputterFactory</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>outputterFactory</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes the state machine with given connection and outputter factory for a passive connection<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>connection</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outputterFactory</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00270     {
00271         <span class="keyword">this</span>.connection = <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>;
00272         <span class="keyword">this</span>.outputterFactory = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p11">outputterFactory</a>;
00273         <span class="keyword">this</span>.state = <span class="keyword">new</span> IPDRConnectionState(<span class="keyword">this</span>,IPDRConnectionState.DISCONNECTED);
00274         <span class="keyword">this</span>.timer.scheduleAtFixedRate(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>,
00275                 TimeoutTimerTask.TIMEOUT_INTERVAL,
00276                 TimeoutTimerTask.TIMEOUT_INTERVAL);
00277     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="org::ipdr::IPDRStateMachine::IPDRStateMachine"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">org::ipdr::IPDRStateMachine::IPDRStateMachine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d0/d08/interfaceorg_1_1ipdr_1_1api_1_1_outputter_factory.html">OutputterFactory</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>outputterFactory</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/de3/interfaceorg_1_1ipdr_1_1api_1_1_template_negotiator_factory.html">TemplateNegotiatorFactory</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>negotiatorFactory</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes the state machine with given connection, outputter factory and template negotiator factory for a passive connection<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>connection</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outputterFactory</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negotiatorFactory</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00290     {
00291         <span class="keyword">this</span>(<a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>,<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p11">outputterFactory</a>);
00292         <span class="keyword">this</span>.negotiatorFactory = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p9">negotiatorFactory</a>;
00293     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="org::ipdr::IPDRStateMachine::IPDRStateMachine"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">org::ipdr::IPDRStateMachine::IPDRStateMachine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connection</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d0/d08/interfaceorg_1_1ipdr_1_1api_1_1_outputter_factory.html">OutputterFactory</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>outputterFactory</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/de3/interfaceorg_1_1ipdr_1_1api_1_1_template_negotiator_factory.html">TemplateNegotiatorFactory</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>negotiatorFactory</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d2/dad/interfaceorg_1_1ipdr_1_1api_1_1_state_machine_listener.html">StateMachineListener</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>listener</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/d39/interfaceorg_1_1ipdr_1_1api_1_1_connection_controller.html">ConnectionController</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>controller</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d38/interfaceorg_1_1ipdr_1_1_incoming_connection_handler.html">IncomingConnectionHandler</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connectionHandler</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d6/d23/classorg_1_1ipdr_1_1api_1_1_connection_thread.html">ConnectionThread</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>thread</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initializes the state machine with given connection, outputter factory, template negotiator factory, state machine listener connection controller, incoming connection handler and a connection thread for a passive connection<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>connection</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outputterFactory</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>negotiatorFactory</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>listener</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>connectionController</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>connectionHandler</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>thread</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00316     {
00317         <span class="keyword">this</span>(<a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>, <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p11">outputterFactory</a>, <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p9">negotiatorFactory</a>);
00318         <span class="keyword">this</span>.listener = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>;
00319         <span class="keyword">this</span>.controller = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p3">controller</a>;
00320         
00321         <span class="keyword">this</span>.connectionHandler = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p2">connectionHandler</a>;
00322         <span class="keyword">this</span>.thread = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p17">thread</a>;
00323     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a6" doxytag="org::ipdr::IPDRStateMachine::canExit"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">boolean <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p0">org::ipdr::IPDRStateMachine::canExit</a>           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a4">org.ipdr.ProtocolStateMachine::canExit()</a> </dd></dl>

<p>
Implements <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a4">org::ipdr::ProtocolStateMachine</a>.<div class="fragment"><pre class="fragment">00329     {
00330         <span class="keyword">synchronized</span> (<span class="keyword">this</span>)
00331         {
00332             <span class="keywordflow">return</span> <span class="keyword">this</span>.canExit;
00333         }
00334     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="org::ipdr::IPDRStateMachine::cleanup"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::cleanup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a7">org.ipdr.ProtocolStateMachine::cleanup()</a> </dd></dl>

<p>
Implements <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a7">org::ipdr::ProtocolStateMachine</a>.<div class="fragment"><pre class="fragment">00340     {
00341         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p18">timer</a>.cancel();
00342     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="org::ipdr::IPDRStateMachine::collectorKeepAliveTimeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::collectorKeepAliveTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The method is used by timer facilities to notify the state machine of collector keepalive timeout. KEEPALIVE message is sent upon this method invokation <div class="fragment"><pre class="fragment">00350     {
00351         <span class="keyword">synchronized</span> (<span class="keyword">this</span>)
00352         {
00353             <span class="keywordflow">try</span>
00354             {
00355                 LogManager.debug(<span class="stringliteral">"IPDRProtocolStateMachine"</span>,
00356                         <span class="stringliteral">"keepAliveTimeout"</span>,
00357                         <span class="stringliteral">"Keepalive timeout - sending keepalive"</span>);
00358                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(<span class="keyword">new</span> ProtocolMsgKEEPALIVE(), <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
00359             }
00360             <span class="keywordflow">catch</span> (ConnectionIOException e)
00361             {
00362                 LogManager.error(<span class="keyword">this</span>, <span class="stringliteral">"keepAliveTimeout"</span>,
00363                         <span class="stringliteral">"exception while sending keepalive message:"</span>
00364                                 + e.getMessage());
00365             }
00366         }
00367     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="org::ipdr::IPDRStateMachine::completeMachine"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::completeMachine           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>InetAddress&nbsp;</td>
          <td class="mdname" nowrap> <em>transmitterAddress</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>transmitterPort</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Completes the instantiation of the state machine for an active connection by Creating an outputter and a template nagotiator from their factories<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>transmitterAddress</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>transmitterPort</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00380     {
00381         <span class="keyword">this</span>.config = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>;
00382         <span class="keyword">this</span>.outputter = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p11">outputterFactory</a>.create(transmitterAddress,transmitterPort);
00383         <span class="keyword">this</span>.state.setOutputter(<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p10">outputter</a>);
00384         <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p9">negotiatorFactory</a> != null)
00385         {
00386                 <span class="keyword">this</span>.negotiator = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p9">negotiatorFactory</a>.getInstance(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getExporterConfig());    
00387         }
00388     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="org::ipdr::IPDRStateMachine::connectTimeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::connectTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a1">org.ipdr.ProtocolStateMachine::connectTimeout()</a> </dd></dl>

<p>
Implements <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a1">org::ipdr::ProtocolStateMachine</a>.<div class="fragment"><pre class="fragment">00394     {
00395         <span class="keyword">synchronized</span> (<span class="keyword">this</span>)
00396         {
00397             <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getState() == IPDRConnectionState.CONNECTING)
00398             {
00399                 LogManager.error(<span class="stringliteral">"IPDRProtocolStateMachine"</span>, <span class="stringliteral">"connectTimeout"</span>,
00400                         <span class="stringliteral">"Connection timeout fired"</span>);
00401                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a6">canExit</a> = <span class="keyword">true</span>;
00402             }
00403         }
00404     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="org::ipdr::IPDRStateMachine::dataAckTimeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::dataAckTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>sessionId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a2">org.ipdr.ProtocolStateMachine::dataAckTimeout(byte)</a> </dd></dl>

<p>
Implements <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a2">org::ipdr::ProtocolStateMachine</a>.<div class="fragment"><pre class="fragment">00410     {
00411         <span class="keywordflow">try</span>
00412         {
00413             IPDRSessionState session = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getSession(sessionId);
00414             <span class="keyword">synchronized</span> (<span class="keyword">this</span>)
00415             {
00416                 <span class="keywordflow">if</span> (session.getDataAckCount() != 0)
00417                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b6">sendDataAcknowledge</a>(sessionId, session.getConfigId(),
00418                                 session.getCurrentRecordSequenceNumber());
00419             }
00420         }
00421         <span class="keywordflow">catch</span> (ConnectionIOException e)
00422         {
00423         }
00424         <span class="keywordflow">catch</span> (InvalidSessionStateException e)
00425         {
00426         }
00427     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="org::ipdr::IPDRStateMachine::doFlowStart"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::doFlowStart           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>, <a class="el" href="../../d1/de0/classorg_1_1ipdr_1_1api_1_1configuration_1_1_config_exception.html">ConfigException</a>     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends appropriate FLOW_START messages<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ConfigException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ProtocolMalformedMsgException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00437     {
00438         <span class="keywordtype">boolean</span> allStarted = <span class="keyword">true</span>;
00439         <span class="comment">// the multi-session logic is here.</span>
00440         <span class="comment">// 1. we already have an available connection. we need to see how many</span>
00441         <span class="comment">// sessions are there.</span>
00442         <span class="keywordflow">if</span> (!<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p5">exporterMultipleSessions</a> &amp;&amp; <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getSessionListLength() &gt; 1)
00443         {
00444             LogManager.error(<span class="keyword">this</span>, <span class="stringliteral">"doFlowStart"</span>, <span class="stringliteral">"Multiple sessions "</span>);
00445             <span class="comment">//pick and handle a session</span>
00446             SessionConfigI sessionConfig = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getSessionConfigAt(0);
00447             <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p3">controller</a> != null &amp;&amp; 
00448                     !<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p3">controller</a>.canStartFlow(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getExporterAddress(), <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>, sessionConfig))
00449             {
00450                 <span class="keywordflow">return</span>;
00451             }
00452             <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.hasSession(sessionConfig.getSessionId()))
00453                 <span class="keywordflow">return</span>;
00454             <span class="keyword">this</span>.state.addSession(sessionConfig);
00455             ProtocolMsgFLOW_START message = <span class="keyword">new</span> ProtocolMsgFLOW_START(
00456                     sessionConfig.getSessionId());
00457             
00458             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(message, <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
00459             <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a> != null)
00460                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>.notifyFlowStarted(<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p13">realExporterAddress</a>, <span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p14">realExporterPort</a>,
00461                                 message);
00462         }
00463         <span class="keywordflow">else</span>
00464         {
00465             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getSessionListLength(); i++)
00466             {
00467                 <span class="comment">// start a single session on the connection</span>
00468                 SessionConfigI sessionConfig = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getSessionConfigAt(i);
00469                 <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.hasSession(sessionConfig.getSessionId()))
00470                     <span class="keywordflow">continue</span>;
00471                 
00472                 <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p3">controller</a> != null &amp;&amp; 
00473                         !<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p3">controller</a>.canStartFlow(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getExporterAddress(), <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>, sessionConfig))
00474                 {
00475                     allStarted = <span class="keyword">false</span>;
00476                     <span class="keywordflow">continue</span>;
00477                 }
00478 
00479                 <span class="keyword">this</span>.state.addSession(sessionConfig);
00480                 ProtocolMsgFLOW_START message = <span class="keyword">new</span> ProtocolMsgFLOW_START(
00481                         sessionConfig.getSessionId());
00482 
00483                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(message, <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
00484                 
00485                 <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a> != null)
00486                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>.notifyFlowStarted(<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p13">realExporterAddress</a>, <span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p14">realExporterPort</a>,
00487                             message);
00488             }
00489         }
00490         
00491         <span class="keywordflow">if</span> (allStarted)
00492             <span class="keyword">this</span>.state.toState(IPDRConnectionState.SESSION_INITIATION);
00493     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="org::ipdr::IPDRStateMachine::doFlowStop"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::doFlowStop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte&nbsp;</td>
          <td class="mdname" nowrap> <em>sessionId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>short&nbsp;</td>
          <td class="mdname" nowrap> <em>reasonCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>String&nbsp;</td>
          <td class="mdname" nowrap> <em>reasonInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../d1/dc7/classorg_1_1ipdr_1_1protocol_1_1_connection_exception.html">ConnectionException</a>     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sessionId</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reasonCode</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reasonInfo</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00503     {
00504         ProtocolMsgFLOW_STOP messageFlowStop = <span class="keyword">new</span> ProtocolMsgFLOW_STOP(
00505                 sessionId, <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s3">FLOW_ERROR</a>, reasonInfo);
00506 
00507         <span class="keywordflow">try</span>
00508         {
00509             messageFlowStop.sendMsg(<a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
00510             <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>!= null)
00511                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>.notifyFlowStopped(<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p13">realExporterAddress</a>, <span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p14">realExporterPort</a>, messageFlowStop);
00512         }
00513         <span class="keywordflow">catch</span> (Exception e)
00514         {
00515             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionException(<span class="stringliteral">"Failed to stop session "</span>
00516                     + sessionId + <span class="stringliteral">", Escalating the error"</span>);
00517         }
00518         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.removeSession(sessionId);
00519         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.toState(IPDRConnectionState.CONNECTED);
00520     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="org::ipdr::IPDRStateMachine::doInitiateProbe"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::doInitiateProbe           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
start exporter probing procedure<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00529     {
00530         ProtocolMsgGET_SESSIONS msgGetSessions = <span class="keyword">new</span> ProtocolMsgGET_SESSIONS((<span class="keywordtype">short</span>)0);
00531         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(msgGetSessions, <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
00532     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b3" doxytag="org::ipdr::IPDRStateMachine::endConnection"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::endConnection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">short&nbsp;</td>
          <td class="mdname" nowrap> <em>reasonCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>String&nbsp;</td>
          <td class="mdname" nowrap> <em>reasonInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Ends the connection<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>reasonCode</em>&nbsp;</td><td>reason code </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reasonInfo</em>&nbsp;</td><td>verbal description of the reason </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00543     {
00544         <span class="keyword">synchronized</span> (<span class="keyword">this</span>)
00545         {
00546             <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getState() == IPDRConnectionState.HANDLING_CONNECTION_ERROR)
00547             <span class="comment">// already handling an error</span>
00548                     <span class="keywordflow">return</span>;
00549 
00550             <span class="keywordflow">try</span>
00551             {
00552                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a17">initiateDisconnection</a>(reasonCode, <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s3">FLOW_ERROR</a>, reasonInfo);
00553             }
00554             <span class="keywordflow">catch</span> (ConnectionIOException e)
00555             {
00556                 LogManager.info(<span class="keyword">this</span>, <span class="stringliteral">"endConnection"</span>, e.getMessage());
00557             }
00558         }
00559     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b4" doxytag="org::ipdr::IPDRStateMachine::endSession"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::endSession           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte&nbsp;</td>
          <td class="mdname" nowrap> <em>sessionId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>short&nbsp;</td>
          <td class="mdname" nowrap> <em>reasonCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>String&nbsp;</td>
          <td class="mdname" nowrap> <em>reasonInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../d1/dc7/classorg_1_1ipdr_1_1protocol_1_1_connection_exception.html">ConnectionException</a>     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Ends the given session<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sessionId</em>&nbsp;</td><td>- session id of session to end </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reasonCode</em>&nbsp;</td><td>- reason code </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reasonInfo</em>&nbsp;</td><td>- verbal reason description </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00574     {
00575         <span class="keyword">synchronized</span> (<span class="keyword">this</span>)
00576         {
00577             IPDRSessionState session;
00578             <span class="keywordflow">try</span>
00579             {
00580                 session = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getSession(sessionId);
00581             }
00582             <span class="keywordflow">catch</span> (InvalidSessionStateException e)
00583             {
00584                 <span class="comment">// no such session</span>
00585                 <span class="keywordflow">return</span>;
00586             }
00587 
00588             <span class="keywordflow">if</span> (session.getState() == IPDRSessionState.ERROR)
00589             <span class="comment">// already handling disconnection</span>
00590                     <span class="keywordflow">return</span>;
00591 
00592             ProtocolMsgERROR messageError = <span class="keyword">new</span> ProtocolMsgERROR(sessionId,
00593                     reasonCode, reasonInfo);
00594 
00595             <span class="keywordflow">try</span>
00596             {
00597                 messageError.sendMsg(<a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
00598                 LogManager.error(<span class="keyword">this</span>, <span class="stringliteral">"endSession"</span>,
00599                         <span class="stringliteral">"Session error encountered. code:"</span> + reasonCode
00600                                 + <span class="stringliteral">" reason:"</span> + reasonInfo);
00601             }
00602             <span class="keywordflow">catch</span> (Exception e)
00603             {
00604                 <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionException(<span class="stringliteral">"Failed to stop session "</span>
00605                         + sessionId + <span class="stringliteral">", Escalating the error"</span>);
00606             }
00607 
00608             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b1">doFlowStop</a>(sessionId, reasonCode, reasonInfo);
00609         }
00610     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="org::ipdr::IPDRStateMachine::exporterKeepAliveTimeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::exporterKeepAliveTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The method is used by timer facilities to notify the state machine of exporter keepalive timeout. <div class="fragment"><pre class="fragment">00617     {
00618         <span class="keyword">synchronized</span> (<span class="keyword">this</span>)
00619         {
00620 
00621             LogManager.error(<span class="stringliteral">"IPDRProtocolStateMachine"</span>,
00622                     <span class="stringliteral">"exporterKeepAliveTimeout"</span>,
00623                     <span class="stringliteral">"Exporter keepalive timeout missed"</span>);
00624             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b3">endConnection</a>(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s0">CONNECTION_ERROR_KEEPALIVE_EXPIRED</a>,
00625                     <span class="stringliteral">"Exporter keepalive timeout expired"</span>);
00626         }
00627     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="org::ipdr::IPDRStateMachine::getExporterKeepaliveTimeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">long org::ipdr::IPDRStateMachine::getExporterKeepaliveTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the exporterKeepaliveTimeout.<p>
<dl compact><dt><b>Returns:</b></dt><dd>long </dd></dl>
<div class="fragment"><pre class="fragment">00635     {
00636         <span class="keywordflow">return</span> <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p4">exporterKeepaliveTimeout</a>;
00637     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="org::ipdr::IPDRStateMachine::getRealExporterAddress"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">InetAddress org::ipdr::IPDRStateMachine::getRealExporterAddress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns exporter address as reported by the Exporter <dl compact><dt><b>Returns:</b></dt><dd></dd></dl>
<div class="fragment"><pre class="fragment">00644     {
00645         <span class="keywordflow">return</span> <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p13">realExporterAddress</a>;
00646     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="org::ipdr::IPDRStateMachine::getRealExporterPort"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int org::ipdr::IPDRStateMachine::getRealExporterPort           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Returns:</b></dt><dd>Returns the realExporterPort. </dd></dl>
<div class="fragment"><pre class="fragment">01358     {
01359         <span class="keywordflow">return</span> <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p14">realExporterPort</a>;
01360     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="org::ipdr::IPDRStateMachine::getSessionList"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ArrayList org::ipdr::IPDRStateMachine::getSessionList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a9">org.ipdr.ProtocolStateMachine::getSessionList()</a> </dd></dl>

<p>
Implements <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a9">org::ipdr::ProtocolStateMachine</a>.<div class="fragment"><pre class="fragment">00652     {
00653         <span class="keywordflow">return</span> <span class="keyword">this</span>.state.getSessionIdList();
00654     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="org::ipdr::IPDRStateMachine::getSessionState"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int org::ipdr::IPDRStateMachine::getSessionState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>sessionId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../d3/d6a/classorg_1_1ipdr_1_1protocol_1_1_invalid_session_state_exception.html">InvalidSessionStateException</a>     <code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a10">org.ipdr.ProtocolStateMachine::getSessionState(byte)</a> </dd></dl>

<p>
Implements <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a10">org::ipdr::ProtocolStateMachine</a>.<div class="fragment"><pre class="fragment">00661     {
00662         <span class="keywordflow">return</span> <span class="keyword">this</span>.state.getSessionState(sessionId);
00663     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b5" doxytag="org::ipdr::IPDRStateMachine::handleMessage"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::handleMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/d66/classorg_1_1ipdr_1_1protocol_1_1_protocol_stream_msg.html">ProtocolStreamMsg</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>message</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>, <a class="el" href="../../d1/de0/classorg_1_1ipdr_1_1api_1_1configuration_1_1_config_exception.html">ConfigException</a>, <a class="el" href="../../d1/dc7/classorg_1_1ipdr_1_1protocol_1_1_connection_exception.html">ConnectionException</a>,             <a class="el" href="../../d8/d35/classorg_1_1ipdr_1_1protocol_1_1_session_exception.html">SessionException</a>, <a class="el" href="../../d4/d86/classorg_1_1ipdr_1_1protocol_1_1_protocol_malformed_msg_exception.html">ProtocolMalformedMsgException</a>, <a class="el" href="../../dd/d55/classorg_1_1ipdr_1_1api_1_1_outputter_exception.html">OutputterException</a>     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handle a protocol message. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>message</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ConfigException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ConnectionException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SessionException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ProtocolMalformedMsgException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>OutputterException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00678     {
00679         <span class="keyword">synchronized</span> (<span class="keyword">this</span>)
00680         {
00681             <span class="keywordflow">switch</span> (message.msgId())
00682             {
00683             <span class="keywordflow">case</span> ProtocolMsgCONNECT.MSG_ID:
00684             {
00685                 <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getState() != IPDRConnectionState.DISCONNECTED)
00686                         <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionException();
00687                 ProtocolMsgCONNECT connectMessage = (ProtocolMsgCONNECT) message;
00688                 <span class="keyword">this</span>.exporterMultipleSessions = connectMessage
00689                         .getCapabilitiesMultiSession();
00690                 <span class="keyword">this</span>.exporterKeepaliveTimeout = connectMessage
00691                         .getKeepAliveInterval();
00692                 LogManager.info(<span class="stringliteral">"IPDRStateMachine"</span>, <span class="stringliteral">"handleCONNECT"</span>,
00693                         <span class="stringliteral">"CONNECT received and parsed"</span>);
00694                 
00695                 InetAddress exporterAddress = connectMessage.getInitiatorAddress();
00696                 <span class="keywordtype">int</span> exporterPort = connectMessage.getInitiatorPort();
00697                 
00698                 <span class="keyword">this</span>.realExporterAddress = exporterAddress;
00699                 <span class="keyword">this</span>.realExporterPort = exporterPort;
00700                 ConnectionConfigI connectionConfig = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p2">connectionHandler</a>.exporterAddressKnown(exporterAddress,<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p17">thread</a>);  
00701                 <span class="keywordflow">if</span> (connectionConfig != null)
00702                 {
00703                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a9">completeMachine</a>(connectionConfig,exporterAddress,exporterPort);
00704                 }
00705                 <span class="keywordflow">else</span>
00706                 {
00707                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b3">endConnection</a>(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s2">EXPORTER_ADDRESS_ERROR_UNKNOWN</a>,<span class="stringliteral">"Collector is not configured for the exporter specified in address"</span>);
00708                         <span class="keywordflow">break</span>;
00709                 }
00710                 
00711                 <span class="comment">// now send response</span>
00712                 CollectorConfigI collectorConfig = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getCollectorConfig();
00713 
00714                 ProtocolMsgCONNECT_RESPONSE msg = <span class="keyword">new</span> ProtocolMsgCONNECT_RESPONSE(
00715                         collectorConfig.getCapabilitiesStructures(),
00716                         collectorConfig.getCapabilitiesMultiSession(),
00717                         collectorConfig.getCapabilitesTemplateNegotiation(),
00718                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getKeepAliveInterval(), collectorConfig
00719                                 .getVendorId());
00720 
00721                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(msg, <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
00722                 
00723                 <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a> != null)
00724                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>.notifyConnected(<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p13">realExporterAddress</a>, <span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p14">realExporterPort</a>, msg);
00725                 
00726                 <span class="keyword">this</span>.state.toState(IPDRConnectionState.CONNECTED);
00727                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.setCollectorKeepaliveTimeout(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p4">exporterKeepaliveTimeout</a>);
00728                 
00729                 <span class="keywordflow">break</span>;
00730             }
00731             <span class="keywordflow">case</span> ProtocolMsgCONNECT_RESPONSE.MSG_ID:
00732             {
00733                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.resetConnectTimeout();
00734                 <span class="keyword">this</span>.exporterMultipleSessions = ((ProtocolMsgCONNECT_RESPONSE) message)
00735                         .getCapabilitiesMultiSession();
00736                 <span class="keyword">this</span>.exporterKeepaliveTimeout  = ((ProtocolMsgCONNECT_RESPONSE) message).getKeepAliveInterval();
00737                 <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getState() != IPDRConnectionState.CONNECTING)
00738                         <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionException();
00739                 LogManager.info(<span class="stringliteral">"IPDRStateMachine"</span>, <span class="stringliteral">"handleMessage"</span>,
00740                         <span class="stringliteral">"CONNECT received and parsed"</span>);
00741 
00742                 <span class="keyword">this</span>.realExporterAddress = <span class="keyword">this</span>.connection.getAddress();
00743                 <span class="keyword">this</span>.realExporterPort = <span class="keyword">this</span>.connection.getPort();
00744                 
00745                 <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a> != null)
00746                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>.notifyConnected(<span class="keyword">this</span>.realExporterAddress, <span class="keyword">this</span>.realExporterPort, (ProtocolMsgCONNECT_RESPONSE) message);
00747 
00748                 <span class="keyword">this</span>.state.toState(IPDRConnectionState.CONNECTED);
00749 
00750                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.setCollectorKeepaliveTimeout(exporterKeepaliveTimeout);
00751 
00752                 <span class="keywordflow">break</span>;
00753             }
00754             <span class="keywordflow">case</span> ProtocolMsgMODIFY_TEMPLATE_RESPONSE.MSG_ID:
00755             {
00756                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.resetExporterKeepaliveTimeout();
00757                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b10">validateSessionState</a>(message);
00758                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b11">validateTemplates</a>(message);
00759                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>
00760                         .handleModifyTemplateResponse((ProtocolMsgMODIFY_TEMPLATE_RESPONSE) message);
00761 
00762                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a19">primitiveAcknowledgeTemplate</a>(message);
00763                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.setSessionConfigId(message.getSessionId(),
00764                         ((ProtocolMsgMODIFY_TEMPLATE_RESPONSE) message)
00765                                 .getConfigId());
00766                 
00767                 <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a> != null)
00768                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>.notifyTemplatesNegotiated(<span class="keyword">this</span>.realExporterAddress, <span class="keyword">this</span>.realExporterPort, ((ProtocolMsgMODIFY_TEMPLATE_RESPONSE) message).getSessionId(), ((ProtocolMsgMODIFY_TEMPLATE_RESPONSE) message).getTemplates());
00769 
00770                 <span class="keywordflow">break</span>;
00771             }
00772             <span class="keywordflow">case</span> ProtocolMsgDATA.MSG_ID:
00773             {
00774                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.resetExporterKeepaliveTimeout();
00775                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b10">validateSessionState</a>(message);
00776                 <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getDataAckCount(message.getSessionId())== 0)
00777                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.setDataAckTimeout(message.getSessionId(), <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getSessionAckTimeInterval(message.getSessionId()));
00778 
00779                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.outputDataMessage((ProtocolMsgDATA) message);
00780                 <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getSessionAcknowledge(message.getSessionId()))
00781                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b6">sendDataAcknowledge</a>((ProtocolMsgDATA) message);<span class="comment">// send ack</span>
00782                 <span class="keywordflow">break</span>;
00783             }
00784 
00785             <span class="keywordflow">case</span> ProtocolMsgTEMPLATE_DATA.MSG_ID:
00786             {
00787                 <span class="keywordtype">short</span> configID = ((ProtocolMsgTEMPLATE_DATA) message)
00788                         .getConfigId();
00789 
00790                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.resetExporterKeepaliveTimeout();
00791                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b10">validateSessionState</a>(message);
00792                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b11">validateTemplates</a>(message);
00793                 <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getCollectorConfig()
00794                         .getCapabilitesTemplateNegotiation()
00795                         &amp;&amp; ((ProtocolMsgTEMPLATE_DATA) message).isNegotiable()
00796                         &amp;&amp; <span class="keyword">this</span>.negotiator != null)
00797                 {
00798                     <span class="comment">// initiate template negotiation</span>
00799 
00800                     ArrayList newTemplates = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p8">negotiator</a>
00801                             .negotiateTemplate(
00802                                     ((ProtocolMsgTEMPLATE_DATA) message)
00803                                             .getSessionId(),
00804                                     ((ProtocolMsgTEMPLATE_DATA) message)
00805                                             .getTemplates());
00806 
00807                     <span class="keywordflow">if</span> (newTemplates != null)
00808                     {
00809                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.setSessionConfigId(message.getSessionId(),
00810                                 configID);
00811                         ProtocolMsgMODIFY_TEMPLATE outgoingMessage = <span class="keyword">new</span> ProtocolMsgMODIFY_TEMPLATE(
00812                                 ((ProtocolMsgTEMPLATE_DATA) message)
00813                                         .getSessionId(),
00814                                 ((ProtocolMsgTEMPLATE_DATA) message)
00815                                         .getConfigId(), newTemplates);
00816                         outgoingMessage.sendMsg(<a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
00817 
00818                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.setSessionState(message.getSessionId(),
00819                                 IPDRSessionState.NEGOTIATE_START);
00820                         <span class="comment">// now we wait for the MODIFY_TEMPLATE_RESPONSE to</span>
00821                         <span class="comment">// arrive</span>
00822                     }
00823                     <span class="keywordflow">else</span>
00824                     {
00825                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.setSessionConfigId(message.getSessionId(),
00826                                 configID);
00827                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>
00828                                 .handleTemplateData((ProtocolMsgTEMPLATE_DATA) message);
00829                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a19">primitiveAcknowledgeTemplate</a>(message);
00830                     }
00831                 }
00832                 <span class="keywordflow">else</span>
00833                 {
00834                     <span class="comment">// no template negotiation</span>
00835                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.setSessionConfigId(message.getSessionId(), configID);
00836                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>
00837                             .handleTemplateData((ProtocolMsgTEMPLATE_DATA) message);
00838                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a19">primitiveAcknowledgeTemplate</a>(message);
00839                 }
00840                 <span class="keywordflow">break</span>;
00841             }
00842 
00843             <span class="keywordflow">case</span> ProtocolMsgSESSION_START.MSG_ID:
00844             {
00845                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b10">validateSessionState</a>(message);
00846                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.handleSessionStart(message.getSessionId(),
00847                         (ProtocolMsgSESSION_START) message);
00848                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.setSessionState(message.getSessionId(),
00849                         IPDRSessionState.DATA);
00850                 
00851                 
00852                 <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a> != null)
00853                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>.notifySessionStarted(<span class="keyword">this</span>.realExporterAddress, <span class="keyword">this</span>.realExporterPort, (ProtocolMsgSESSION_START) message);
00854                 <span class="keywordflow">break</span>;
00855             }
00856             <span class="keywordflow">case</span> ProtocolMsgSESSION_STOP.MSG_ID:
00857             {
00858                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b10">validateSessionState</a>(message);
00859                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.setSessionState(message.getSessionId(),
00860                         IPDRSessionState.FLOW_STARTED);
00861                 
00862                 <span class="keyword">this</span>.state.toState(IPDRConnectionState.CONNECTED);
00863                 <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a> != null)
00864                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>.notifySessionStopped(<span class="keyword">this</span>.realExporterAddress, <span class="keyword">this</span>.realExporterPort, (ProtocolMsgSESSION_STOP) message);
00865                 <span class="keywordflow">break</span>;
00866             }
00867             <span class="keywordflow">case</span> ProtocolMsgSTART_NEGOTIATION_REJECT.MSG_ID:
00868             {
00869                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b10">validateSessionState</a>(message);
00870                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.setSessionState(message.getSessionId(),
00871                         IPDRSessionState.DATA);
00872                 <span class="keywordflow">break</span>;
00873             }
00874             <span class="keywordflow">case</span> ProtocolMsgERROR.MSG_ID:
00875             {
00876                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.resetExporterKeepaliveTimeout();
00877                 ProtocolMsgERROR errorMessage = (ProtocolMsgERROR) message;
00878                 <span class="comment">//this.state.toState(IPDRConnectionState.HANDLING_CONNECTION_ERROR);</span>
00879                 LogManager
00880                         .error(<span class="keyword">this</span>, <span class="stringliteral">"handleMessage"</span>, errorMessage.toString());
00881                 <span class="keywordflow">if</span> (errorMessage.getSessionSpecific() &amp;&amp; errorMessage.getErrorCode() == (short)0x04)
00882                     <span class="keywordflow">throw</span> <span class="keyword">new</span> PeerSessionErrorException(errorMessage.getSessionId(), errorMessage.getErrorCode(), errorMessage.getDescription());
00883                 <span class="keywordflow">break</span>;
00884             }
00885             <span class="keywordflow">case</span> ProtocolMsgGET_SESSIONS_RESPONSE.MSG_ID:
00886             {
00887                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.resetExporterKeepaliveTimeout();
00888                 ProtocolMsgGET_SESSIONS_RESPONSE sessMsg = (ProtocolMsgGET_SESSIONS_RESPONSE)message;
00889                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r1">sessionProbeResult</a> = sessMsg.getSessions();
00890                 
00891                 <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r1">sessionProbeResult</a>.size(); i ++)
00892                 {
00893                     ProtocolSessionInfo info = (ProtocolSessionInfo) <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r1">sessionProbeResult</a>.get(i);
00894                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r2">unprobedSessions</a>.put(<span class="keyword">new</span> Byte(info.getSessionId()), info);
00895                     ProtocolMsgGET_TEMPLATES getTmpl = <span class="keyword">new</span> ProtocolMsgGET_TEMPLATES(info.getSessionId(),(short)0);
00896                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(getTmpl, <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
00897                 }
00898                 
00899                 <span class="keywordflow">break</span>;
00900             }
00901             <span class="keywordflow">case</span> ProtocolMsgGET_TEMPLATES_RESPONSE.MSG_ID:
00902             {
00903                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.resetExporterKeepaliveTimeout();
00904                 ProtocolMsgGET_TEMPLATES_RESPONSE tplMsg = (ProtocolMsgGET_TEMPLATES_RESPONSE)message;
00905                 
00906                 ArrayList templates = tplMsg.getTemplates();
00907                 Byte sessionId = <span class="keyword">new</span> Byte(tplMsg.getSessionId());
00908                 ProtocolSessionInfo info = (ProtocolSessionInfo)<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r2">unprobedSessions</a>.get(sessionId);
00909                 <span class="keywordflow">if</span> (info == null)
00910                     <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionException(<span class="stringliteral">"Unexpected or duplicate GET_TEMPLATES response"</span>);
00911                 info.setTemplates(templates);
00912                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r2">unprobedSessions</a>.remove(sessionId);
00913                 <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r2">unprobedSessions</a>.size() == 0)
00914                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r0">probingListener</a>.probedSessions(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getExporterConfig(), <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r1">sessionProbeResult</a>);
00915                 <span class="keywordflow">break</span>;
00916             }
00917             <span class="keywordflow">case</span> ProtocolMsgEmpty.MSG_ID:
00918             {
00919             }
00920             }
00921         }
00922     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="org::ipdr::IPDRStateMachine::initiateDisconnection"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::initiateDisconnection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">short&nbsp;</td>
          <td class="mdname" nowrap> <em>sessionReasonCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>short&nbsp;</td>
          <td class="mdname" nowrap> <em>flowReasonCode</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>String&nbsp;</td>
          <td class="mdname" nowrap> <em>reasonInfo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>     <code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a5">org.ipdr.ProtocolStateMachine::initiateDisconnection</a>(short, short, java.lang.String) </dd></dl>

<p>
Implements <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a5">org::ipdr::ProtocolStateMachine</a>.<div class="fragment"><pre class="fragment">00931     {
00932         <span class="keyword">synchronized</span> (<span class="keyword">this</span>)
00933         {
00934             <span class="keyword">this</span>.canExit = <span class="keyword">true</span>;
00935 
00936             ProtocolMsgFLOW_STOP flowStopMsg = <span class="keyword">new</span> ProtocolMsgFLOW_STOP(
00937                     (byte) 0, flowReasonCode, reasonInfo);
00938             
00939             <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>!=null)
00940                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>.notifyFlowStopped(<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p13">realExporterAddress</a>, <span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p14">realExporterPort</a>, flowStopMsg);
00941 
00942             <span class="comment">// send FLOW_STOP to all active sessions</span>
00943             ArrayList sessionIds = <span class="keyword">this</span>.state.getSessionIdList();
00944             <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; sessionIds.size(); i++)
00945             {
00946                 flowStopMsg
00947                         .setSessionId(((Byte) sessionIds.get(i)).byteValue());
00948 
00949                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(flowStopMsg, <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
00950             }
00951 
00952             <span class="keywordflow">if</span> (sessionReasonCode != <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s5">NO_ERROR</a>)
00953             {
00954                 ProtocolMsgERROR messageError = <span class="keyword">new</span> ProtocolMsgERROR((byte) 0,
00955                         sessionReasonCode, reasonInfo);
00956                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(messageError, <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
00957             }
00958 
00959             ProtocolMsgDISCONNECT disconnectMsg = <span class="keyword">new</span> ProtocolMsgDISCONNECT();
00960             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(disconnectMsg, <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
00961             <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>!=null)
00962                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>.notifyDisconnected(<span class="keyword">this</span>.realExporterAddress, <span class="keyword">this</span>.realExporterPort);
00963         }
00964 
00965     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="org::ipdr::IPDRStateMachine::mainLoop"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::mainLoop           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../d1/de0/classorg_1_1ipdr_1_1api_1_1configuration_1_1_config_exception.html">ConfigException</a>, <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>     <code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a8">org.ipdr.ProtocolStateMachine::mainLoop()</a> </dd></dl>

<p>
Implements <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a8">org::ipdr::ProtocolStateMachine</a>.<div class="fragment"><pre class="fragment">00971     {
00972         <span class="keywordflow">try</span>
00973         {
00974             byte[] buffer = <span class="keyword">new</span> byte[0x8000];
00975             <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p6">isPassiveConnection</a> != <span class="keyword">true</span>) <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a24">startProtocol</a>();
00976             <span class="keywordflow">while</span> (!<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#a6">canExit</a>())
00977             {
00978                 <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getState() == IPDRConnectionState.CONNECTED )
00979                 {
00980                     <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r0">probingListener</a> != null &amp;&amp; <span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r1">sessionProbeResult</a> == null )
00981                     {
00982                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b2">doInitiateProbe</a>();
00983                     }
00984                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b0">doFlowStart</a>();
00985                 }
00986                 
00987                 <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p12">pendingStopFlow</a>)
00988                 {
00989                     <span class="keyword">synchronized</span>(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p16">stopFlows</a>)
00990                     {
00991                             Iterator it = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p16">stopFlows</a>.iterator();
00992                             <span class="keywordflow">while</span> (it.hasNext())
00993                             {
00994                                 Byte sessionId = (Byte)it.next();
00995                                 <span class="keyword">this</span>.doFlowStop( sessionId.byteValue(), <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s10">SESSION_ERROR_TERMINATING</a>, <span class="stringliteral">"Flow stop requested by user"</span>);
00996                             }
00997                             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p16">stopFlows</a>.clear();
00998                             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p12">pendingStopFlow</a> = <span class="keyword">false</span>;
00999                     }
01000                 }
01001                 
01002                 <span class="keywordflow">try</span>
01003                 {
01004                     ProtocolStreamMsg message = ProtocolStreamMsg.readMsg(
01005                             <span class="keyword">this</span>.<a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>, null, null, 100);
01006                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b5">handleMessage</a>(message);
01007                 }
01008                 <span class="keywordflow">catch</span> (PeerSessionErrorException e)
01009                 {
01010                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.removeSession(e.getSessionId());
01011                         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.toState(IPDRConnectionState.CONNECTED);
01012                         <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>!= null)
01013                         {
01014                             ProtocolMsgFLOW_STOP bogusFlowStop = <span class="keyword">new</span> ProtocolMsgFLOW_STOP(e.getSessionId(), <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s3">FLOW_ERROR</a>, e.getMessage());
01015                             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>.notifyFlowStopped(<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p13">realExporterAddress</a>, <span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p14">realExporterPort</a>, bogusFlowStop);
01016                         }
01017                 }
01018                 <span class="keywordflow">catch</span> (InvalidSessionStateException e)
01019                 {
01020                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b4">endSession</a>(e.getSessionId(),
01021                             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s9">SESSION_ERROR_MESSAGE_INVALID_STATE</a>,
01022                             <span class="stringliteral">"Message received is invalid for session state"</span>);
01023                 }
01024                 <span class="keywordflow">catch</span> (InvalidCapabilities e)
01025                 {
01026                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b4">endSession</a>(e.getSessionId(),
01027                             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s8">SESSION_ERROR_MESSAGE_INVALID_CAPABILITIES</a>,
01028                             <span class="stringliteral">"Message is unsuitable for peer capabilities"</span>);
01029                 }
01030                 <span class="keywordflow">catch</span> (SessionException e)
01031                 {
01032                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b4">endSession</a>(e.getSessionId(),
01033                             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s11">SESSION_ERROR_UNKNOWN</a>,
01034                             e.getMessage());
01035                 }
01036             }
01037         }
01038         <span class="keywordflow">catch</span> (ProtocolMalformedMsgException e)
01039         {
01040             <span class="comment">// invalid message - interrupt the connection</span>
01041             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b3">endConnection</a>(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s7">SESSION_ERROR_MESSAGE_DECODE_ERROR</a>,
01042                     <span class="stringliteral">"Corrupted message received"</span>);
01043         }
01044         <span class="keywordflow">catch</span> (ConnectionException e)
01045         {
01046             <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>!=null)
01047                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">listener</a>.notifyDisconnected(<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p13">realExporterAddress</a>, <span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p14">realExporterPort</a>);
01048             <span class="keyword">this</span>.canExit = <span class="keyword">true</span>;
01049 <span class="comment">//            endConnection((short) 0xFF, e.getMessage());</span>
01050         }
01051         <span class="keywordflow">catch</span> (OutputterException e)
01052         {
01053             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b3">endConnection</a>(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s6">OUTPUTTER_ERROR</a>, <span class="stringliteral">"Outputter exception encountered:"</span>
01054                     + e.getMessage());
01055         }
01056     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="org::ipdr::IPDRStateMachine::primitiveAcknowledgeTemplate"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::primitiveAcknowledgeTemplate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/d66/classorg_1_1ipdr_1_1protocol_1_1_protocol_stream_msg.html">ProtocolStreamMsg</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>message</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../d3/d6a/classorg_1_1ipdr_1_1protocol_1_1_invalid_session_state_exception.html">InvalidSessionStateException</a>, <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>     <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The method sends out final template data acknowledge<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>message</em>&nbsp;</td><td>incoming template message </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InvalidSessionStateException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ProtocolMalformedMsgException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ConfigException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01070     {
01071         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.setSessionState(message.getSessionId(),
01072                 IPDRSessionState.NEGOTIATE_FINISH);
01073 
01074         ProtocolMsgFINAL_TEMPLATE_DATA_ACK outgoingMessage = <span class="keyword">new</span> ProtocolMsgFINAL_TEMPLATE_DATA_ACK(
01075                 message.getSessionId());
01076         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(outgoingMessage, <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
01077     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b7" doxytag="org::ipdr::IPDRStateMachine::sendDataAcknowledge"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::sendDataAcknowledge           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d5d/classorg_1_1ipdr_1_1protocol_1_1_protocol_msg_d_a_t_a.html">ProtocolMsgDATA</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>message</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>, <a class="el" href="../../d3/d6a/classorg_1_1ipdr_1_1protocol_1_1_invalid_session_state_exception.html">InvalidSessionStateException</a>     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Acknowledges the provided data message<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>message</em>&nbsp;</td><td>- message to acknowledge </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ProtocolMalformedMsgException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ConfigException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>InvalidSessionStateException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01118     {
01119         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b6">sendDataAcknowledge</a>(message.getSessionId(), message.getConfigId(),
01120                 message.getDataSeqNo());
01121     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b6" doxytag="org::ipdr::IPDRStateMachine::sendDataAcknowledge"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::sendDataAcknowledge           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte&nbsp;</td>
          <td class="mdname" nowrap> <em>sessionId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>short&nbsp;</td>
          <td class="mdname" nowrap> <em>configId</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>long&nbsp;</td>
          <td class="mdname" nowrap> <em>dataSeqNo</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>,             <a class="el" href="../../d3/d6a/classorg_1_1ipdr_1_1protocol_1_1_invalid_session_state_exception.html">InvalidSessionStateException</a>     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Acknowledges data message of a given session with given config id and serial number<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sessionId</em>&nbsp;</td><td>- session id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>configId</em>&nbsp;</td><td>- configuration id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dataSeqNo</em>&nbsp;</td><td>- sequence number of the message to acknowledge </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ProtocolMalformedMsgException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ConfigException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>InvalidSessionStateException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01097     {
01098         ProtocolMsgDATA_ACK outgoingMessage = <span class="keyword">new</span> ProtocolMsgDATA_ACK(
01099                 sessionId, configId, dataSeqNo);
01100         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(outgoingMessage, <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
01101         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.resetSessionAcknowledge(sessionId);
01102         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.setDataAckTimeout(sessionId, <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>
01103                 .getSessionAckTimeInterval(sessionId));
01104     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b8" doxytag="org::ipdr::IPDRStateMachine::sendMessage"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::sendMessage           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/d66/classorg_1_1ipdr_1_1protocol_1_1_protocol_stream_msg.html">ProtocolStreamMsg</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>message</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connection</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends the message over the connection, resetting the outgoing keepalive timeout<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>message</em>&nbsp;</td><td>message to send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>connection</em>&nbsp;</td><td>connection to use </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ProtocolMalformedMsgException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ConfigException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01137     {
01138         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.resetCollectorKeepaliveTimeout();
01139         <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a> != null) message.sendMsg(<a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
01140         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.setCollectorKeepaliveTimeout(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p4">exporterKeepaliveTimeout</a>);
01141     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="org::ipdr::IPDRStateMachine::sendStartNegotiation"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::sendStartNegotiation           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>sessionId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../d3/d6a/classorg_1_1ipdr_1_1protocol_1_1_invalid_session_state_exception.html">InvalidSessionStateException</a>, <a class="el" href="../../d1/dc7/classorg_1_1ipdr_1_1protocol_1_1_connection_exception.html">ConnectionException</a>     <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This method can be used by collector implementations to start negotiation in the middle of an active session<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sessionId</em>&nbsp;</td><td>- session id </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InvalidSessionStateException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ConnectionException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01154     {
01155         <span class="keyword">synchronized</span> (<span class="keyword">this</span>)
01156         {
01157             IPDRSessionState sessionState = <span class="keyword">this</span>.state.getSession(sessionId);
01158             <span class="keywordflow">if</span> (sessionState.getState() != IPDRSessionState.DATA)
01159                     <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidSessionStateException(sessionId,
01160                             <span class="stringliteral">"Session state is invalid for re-negotiation request"</span>);
01161             ProtocolMsgSTART_NEGOTIATION request = <span class="keyword">new</span> ProtocolMsgSTART_NEGOTIATION(
01162                     sessionId);
01163             <span class="keywordflow">try</span>
01164             {
01165                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(request, <span class="keyword">this</span>.<a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
01166 <span class="comment">//                sessionState.setState(IPDRSessionState.RE_NEGOTIATING);</span>
01167             }
01168             <span class="keywordflow">catch</span> (ConnectionIOException e)
01169             {
01170                 LogManager.error(<span class="keyword">this</span>, <span class="stringliteral">"sendStartNegotiation"</span>, e.getMessage());
01171                 <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionException(e);
01172             }
01173         }
01174     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="org::ipdr::IPDRStateMachine::setExporterKeepaliveTimeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::setExporterKeepaliveTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">long&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>exporterKeepaliveTimeout</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the exporterKeepaliveTimeout.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>exporterKeepaliveTimeout</em>&nbsp;</td><td>The exporterKeepaliveTimeout to set </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01183     {
01184         <span class="keyword">this</span>.exporterKeepaliveTimeout = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p4">exporterKeepaliveTimeout</a>;
01185     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="org::ipdr::IPDRStateMachine::setProbingListener"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::setProbingListener           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/d40/interfaceorg_1_1ipdr_1_1api_1_1_probing_listener.html">ProbingListener</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>probingListener</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the probingListener parameter <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>probingListener</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01192     {
01193         <span class="keyword">this</span>.probingListener = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r0">probingListener</a>;
01194     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="org::ipdr::IPDRStateMachine::startListeningState"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::startListeningState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The method starts the protocol in listening state<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InvalidSessionStateException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01203     {
01204         <span class="keyword">this</span>.isPassiveConnection = <span class="keyword">true</span>;
01205         <span class="keyword">this</span>.state.toState(IPDRConnectionState.DISCONNECTED);
01206     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="org::ipdr::IPDRStateMachine::startProtocol"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::startProtocol           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../d1/dc7/classorg_1_1ipdr_1_1protocol_1_1_connection_exception.html">ConnectionException</a>     <code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a0">org.ipdr.ProtocolStateMachine::startProtocol()</a> </dd></dl>

<p>
Implements <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a0">org::ipdr::ProtocolStateMachine</a>.<div class="fragment"><pre class="fragment">01212     {
01213         <span class="keyword">synchronized</span> (<span class="keyword">this</span>)
01214         {
01215             <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getState() != IPDRConnectionState.DISCONNECTED)
01216                     <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionException();
01217                         
01218             CollectorConfigI collectorConfig = <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getCollectorConfig();
01219 
01220             ProtocolMsgCONNECT message = <span class="keyword">new</span> ProtocolMsgCONNECT(collectorConfig
01221                     .getCollectorAddress(), collectorConfig.getLocalPort(),
01222                     collectorConfig.getCapabilitiesStructures(),
01223                     collectorConfig.getCapabilitiesMultiSession(),
01224                     collectorConfig.getCapabilitesTemplateNegotiation(), <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>
01225                             .getKeepAliveInterval(), collectorConfig
01226                             .getVendorId());
01227 
01228             <span class="keywordflow">try</span>
01229             {
01230                 <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#b8">sendMessage</a>(message, <a class="code" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#p0">connection</a>);
01231                 <span class="keyword">this</span>.state.toState(IPDRConnectionState.CONNECTING);
01232             }
01233             <span class="keywordflow">catch</span> (ConnectionIOException e)
01234             {
01235                 <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionException(e);
01236             }
01237             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">timerTask</a>.setConnectTimeout(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getConnectTimeout());
01238         }
01239     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b9" doxytag="org::ipdr::IPDRStateMachine::startSession"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::startSession           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>sessionId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../d3/d6a/classorg_1_1ipdr_1_1protocol_1_1_invalid_session_state_exception.html">InvalidSessionStateException</a>     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The method starts a new session<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sessionId</em>&nbsp;</td><td>session id to start </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InvalidSessionStateException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01250     {
01251         <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.setSessionState(sessionId, IPDRSessionState.DATA);
01252     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="org::ipdr::IPDRStateMachine::stopFlow"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::stopFlow           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>sessionId</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a6">org.ipdr.ProtocolStateMachine::stopFlow(byte)</a> </dd></dl>

<p>
Implements <a class="el" href="../../d9/d7a/classorg_1_1ipdr_1_1_protocol_state_machine.html#a6">org::ipdr::ProtocolStateMachine</a>.<div class="fragment"><pre class="fragment">01258     {
01259         <span class="keyword">synchronized</span>(<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p16">stopFlows</a>)
01260         {
01261             <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p16">stopFlows</a>.add(<span class="keyword">new</span> Byte(sessionId));
01262             <span class="keyword">this</span>.pendingStopFlow = <span class="keyword">true</span>;
01263         }
01264     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="org::ipdr::IPDRStateMachine::toString"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">String org::ipdr::IPDRStateMachine::toString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd>java.lang.Object#toString() </dd></dl>
<div class="fragment"><pre class="fragment">01270     {
01271         <span class="keywordflow">return</span> <span class="stringliteral">"IPDR state machine state:"</span> + <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.toString();
01272     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b10" doxytag="org::ipdr::IPDRStateMachine::validateSessionState"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::validateSessionState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/d66/classorg_1_1ipdr_1_1protocol_1_1_protocol_stream_msg.html">ProtocolStreamMsg</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>message</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../d3/d6a/classorg_1_1ipdr_1_1protocol_1_1_invalid_session_state_exception.html">InvalidSessionStateException</a>     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The method encapsulates the logic for session state validation for incoming messages<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>message</em>&nbsp;</td><td>message to validate </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InvalidSessionStateException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01284     {
01285         <span class="keywordflow">switch</span> (message.msgId())
01286         {
01287         <span class="keywordflow">case</span> ProtocolMsgTEMPLATE_DATA.MSG_ID:
01288             <span class="keywordflow">if</span> (
01289                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getSessionState(message.getSessionId()) != IPDRSessionState.FLOW_STARTED
01290                     &amp;&amp;
01291                     <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getSessionState(message.getSessionId()) != IPDRSessionState.NEGOTIATE_FINISH
01292                     )
01293                     <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidSessionStateException(message
01294                             .getSessionId(),
01295                             <span class="stringliteral">"Session state is invalid for template negotiation"</span>);
01296             <span class="keywordflow">break</span>;
01297         <span class="keywordflow">case</span> ProtocolMsgMODIFY_TEMPLATE_RESPONSE.MSG_ID:
01298             <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getSessionState(message.getSessionId()) != IPDRSessionState.NEGOTIATE_START)
01299                     <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidSessionStateException(message
01300                             .getSessionId(),
01301                             <span class="stringliteral">"Session state is invalid for template negotiation"</span>);
01302             <span class="keywordflow">break</span>;
01303         <span class="keywordflow">case</span> ProtocolMsgDATA.MSG_ID:
01304             <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getSessionState(message.getSessionId()) != IPDRSessionState.DATA )
01305                     <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidSessionStateException(message
01306                             .getSessionId(),
01307                             <span class="stringliteral">"Session state is invalid for data collection"</span>);
01308             <span class="keywordflow">break</span>;
01309         <span class="keywordflow">case</span> ProtocolMsgSESSION_START.MSG_ID:
01310             <span class="keywordflow">if</span> (!((<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getSessionState(message.getSessionId()) == IPDRSessionState.NEGOTIATE_FINISH) || (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>
01311                     .getSessionState(message.getSessionId()) == IPDRSessionState.FLOW_STARTED &amp;&amp; <a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>
01312                     .isTemplatesKnown())))
01313                     <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidSessionStateException(message
01314                             .getSessionId(),
01315                             <span class="stringliteral">"Session state is invalid for session to start"</span>);
01316             <span class="keywordflow">break</span>;
01317         <span class="keywordflow">case</span> ProtocolMsgSESSION_STOP.MSG_ID:
01318             <span class="keywordflow">if</span> (<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">state</a>.getSessionState(message.getSessionId()) != IPDRSessionState.DATA  
01319                     )
01320                     <span class="keywordflow">throw</span> <span class="keyword">new</span> InvalidSessionStateException(message
01321                             .getSessionId(),
01322                             <span class="stringliteral">"Session state is invalid for session stop message"</span>);
01323             <span class="keywordflow">break</span>;
01324         <span class="keywordflow">case</span> ProtocolMsgSTART_NEGOTIATION_REJECT.MSG_ID:
01325             <span class="keywordflow">break</span>;
01326         <span class="keywordflow">case</span> ProtocolMsgERROR.MSG_ID:
01327         <span class="keywordflow">case</span> ProtocolMsgEmpty.MSG_ID:
01328         }
01329     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b11" doxytag="org::ipdr::IPDRStateMachine::validateTemplates"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::IPDRStateMachine::validateTemplates           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/d66/classorg_1_1ipdr_1_1protocol_1_1_protocol_stream_msg.html">ProtocolStreamMsg</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>message</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../d1/de0/classorg_1_1ipdr_1_1api_1_1configuration_1_1_config_exception.html">ConfigException</a>     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The method validates templates by checking whether they are defined in the configuration file. Unknown templates raise an exception<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>message</em>&nbsp;</td><td>- protocol template message to be validated </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConfigException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01341     {
01342         <span class="comment">// obtain template block</span>
01343         <span class="keywordflow">if</span> (!<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getCollectorConfig().isStrictTemplates()) <span class="keywordflow">return</span>;
01344         ProtocolMsgTemplate msg = (ProtocolMsgTemplate) message;
01345         ArrayList templates = msg.getTemplates();
01346         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; templates.size(); i++)
01347         {
01348             TemplateConfig <span class="keyword">template</span> = (TemplateConfig) templates.get(i);
01349             <span class="keywordflow">if</span> (!<span class="keyword">this</span>.<a class="code" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">config</a>.getCollectorConfig().isTemplateDefined(<span class="keyword">template</span>))
01350                     <span class="keywordflow">throw</span> <span class="keyword">new</span> ConfigException(
01351                             <span class="stringliteral">"Template received was not configured properly"</span>);
01352         }
01353     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="p0" doxytag="org::ipdr::IPDRStateMachine::canExit"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">boolean <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p0">org::ipdr::IPDRStateMachine::canExit</a> = false<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Indicates whether the state machine may quit     </td>
  </tr>
</table>
<a class="anchor" name="p1" doxytag="org::ipdr::IPDRStateMachine::config"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p1">org::ipdr::IPDRStateMachine::config</a> = null<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Holds connection configuration     </td>
  </tr>
</table>
<a class="anchor" name="s0" doxytag="org::ipdr::IPDRStateMachine::CONNECTION_ERROR_KEEPALIVE_EXPIRED"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final short <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s0">org::ipdr::IPDRStateMachine::CONNECTION_ERROR_KEEPALIVE_EXPIRED</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p2" doxytag="org::ipdr::IPDRStateMachine::connectionHandler"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d38/interfaceorg_1_1ipdr_1_1_incoming_connection_handler.html">IncomingConnectionHandler</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p2">org::ipdr::IPDRStateMachine::connectionHandler</a> = null<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stores an instance of template negotiator factory     </td>
  </tr>
</table>
<a class="anchor" name="p3" doxytag="org::ipdr::IPDRStateMachine::controller"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d39/interfaceorg_1_1ipdr_1_1api_1_1_connection_controller.html">ConnectionController</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p3">org::ipdr::IPDRStateMachine::controller</a> = null<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Holds state machine listener     </td>
  </tr>
</table>
<a class="anchor" name="s1" doxytag="org::ipdr::IPDRStateMachine::CUSTOM_ERROR_BASE"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final short <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s1">org::ipdr::IPDRStateMachine::CUSTOM_ERROR_BASE</a> = 255<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="s2" doxytag="org::ipdr::IPDRStateMachine::EXPORTER_ADDRESS_ERROR_UNKNOWN"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final short <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s2">org::ipdr::IPDRStateMachine::EXPORTER_ADDRESS_ERROR_UNKNOWN</a> = <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s1">CUSTOM_ERROR_BASE</a> + 3<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p4" doxytag="org::ipdr::IPDRStateMachine::exporterKeepaliveTimeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">long <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p4">org::ipdr::IPDRStateMachine::exporterKeepaliveTimeout</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Holds exporter keepalive timeout     </td>
  </tr>
</table>
<a class="anchor" name="p5" doxytag="org::ipdr::IPDRStateMachine::exporterMultipleSessions"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">boolean <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p5">org::ipdr::IPDRStateMachine::exporterMultipleSessions</a> = false<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Is true whenever the exporter supports multiple sessions     </td>
  </tr>
</table>
<a class="anchor" name="s3" doxytag="org::ipdr::IPDRStateMachine::FLOW_ERROR"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final short <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s3">org::ipdr::IPDRStateMachine::FLOW_ERROR</a> = 1<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="s4" doxytag="org::ipdr::IPDRStateMachine::FLOW_NO_ERROR"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final short <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s4">org::ipdr::IPDRStateMachine::FLOW_NO_ERROR</a> = 0<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p6" doxytag="org::ipdr::IPDRStateMachine::isPassiveConnection"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">boolean <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p6">org::ipdr::IPDRStateMachine::isPassiveConnection</a> = false<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stores the connection thread containing this IPDR state machine     </td>
  </tr>
</table>
<a class="anchor" name="p7" doxytag="org::ipdr::IPDRStateMachine::listener"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/dad/interfaceorg_1_1ipdr_1_1api_1_1_state_machine_listener.html">StateMachineListener</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p7">org::ipdr::IPDRStateMachine::listener</a> = null<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Holds state machine listener     </td>
  </tr>
</table>
<a class="anchor" name="p8" doxytag="org::ipdr::IPDRStateMachine::negotiator"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/dea/interfaceorg_1_1ipdr_1_1api_1_1_template_negotiator.html">TemplateNegotiator</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p8">org::ipdr::IPDRStateMachine::negotiator</a> = null<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Holds template negotiator instance     </td>
  </tr>
</table>
<a class="anchor" name="p9" doxytag="org::ipdr::IPDRStateMachine::negotiatorFactory"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../dc/de3/interfaceorg_1_1ipdr_1_1api_1_1_template_negotiator_factory.html">TemplateNegotiatorFactory</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p9">org::ipdr::IPDRStateMachine::negotiatorFactory</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stores an instance of template negotiator factory     </td>
  </tr>
</table>
<a class="anchor" name="s5" doxytag="org::ipdr::IPDRStateMachine::NO_ERROR"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final short <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s5">org::ipdr::IPDRStateMachine::NO_ERROR</a> = -1<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p10" doxytag="org::ipdr::IPDRStateMachine::outputter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d8/d73/interfaceorg_1_1ipdr_1_1api_1_1_outputter.html">Outputter</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p10">org::ipdr::IPDRStateMachine::outputter</a> = null<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Holds outputter instance     </td>
  </tr>
</table>
<a class="anchor" name="s6" doxytag="org::ipdr::IPDRStateMachine::OUTPUTTER_ERROR"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final short <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s6">org::ipdr::IPDRStateMachine::OUTPUTTER_ERROR</a> = <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s1">CUSTOM_ERROR_BASE</a> + 1<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="p11" doxytag="org::ipdr::IPDRStateMachine::outputterFactory"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d0/d08/interfaceorg_1_1ipdr_1_1api_1_1_outputter_factory.html">OutputterFactory</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p11">org::ipdr::IPDRStateMachine::outputterFactory</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stores an instance of an Outputter factory     </td>
  </tr>
</table>
<a class="anchor" name="p12" doxytag="org::ipdr::IPDRStateMachine::pendingStopFlow"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">volatile boolean <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p12">org::ipdr::IPDRStateMachine::pendingStopFlow</a> = false<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Indicates whether there is a pending flow stop request     </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="org::ipdr::IPDRStateMachine::probingListener"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/d40/interfaceorg_1_1ipdr_1_1api_1_1_probing_listener.html">ProbingListener</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r0">org::ipdr::IPDRStateMachine::probingListener</a> = null<code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Holds ProbingListener instance     </td>
  </tr>
</table>
<a class="anchor" name="p13" doxytag="org::ipdr::IPDRStateMachine::realExporterAddress"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">InetAddress <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p13">org::ipdr::IPDRStateMachine::realExporterAddress</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The real IP address of the connected exporter     </td>
  </tr>
</table>
<a class="anchor" name="p14" doxytag="org::ipdr::IPDRStateMachine::realExporterPort"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p14">org::ipdr::IPDRStateMachine::realExporterPort</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The real port of the connected exporter     </td>
  </tr>
</table>
<a class="anchor" name="s7" doxytag="org::ipdr::IPDRStateMachine::SESSION_ERROR_MESSAGE_DECODE_ERROR"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final short <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s7">org::ipdr::IPDRStateMachine::SESSION_ERROR_MESSAGE_DECODE_ERROR</a> = 3<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="s8" doxytag="org::ipdr::IPDRStateMachine::SESSION_ERROR_MESSAGE_INVALID_CAPABILITIES"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final short <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s8">org::ipdr::IPDRStateMachine::SESSION_ERROR_MESSAGE_INVALID_CAPABILITIES</a> = 1<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="s9" doxytag="org::ipdr::IPDRStateMachine::SESSION_ERROR_MESSAGE_INVALID_STATE"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final short <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s9">org::ipdr::IPDRStateMachine::SESSION_ERROR_MESSAGE_INVALID_STATE</a> = 2<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="s10" doxytag="org::ipdr::IPDRStateMachine::SESSION_ERROR_TERMINATING"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final short <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s10">org::ipdr::IPDRStateMachine::SESSION_ERROR_TERMINATING</a> = 4<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="s11" doxytag="org::ipdr::IPDRStateMachine::SESSION_ERROR_UNKNOWN"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final short <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s11">org::ipdr::IPDRStateMachine::SESSION_ERROR_UNKNOWN</a> = <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#s1">CUSTOM_ERROR_BASE</a> + 2<code> [static]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="org::ipdr::IPDRStateMachine::sessionProbeResult"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ArrayList <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r1">org::ipdr::IPDRStateMachine::sessionProbeResult</a> = null<code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Holds the probed exporter's sessions     </td>
  </tr>
</table>
<a class="anchor" name="p15" doxytag="org::ipdr::IPDRStateMachine::state"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/db4/classorg_1_1ipdr_1_1_i_p_d_r_connection_state.html">IPDRConnectionState</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p15">org::ipdr::IPDRStateMachine::state</a><code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Holds connection state     </td>
  </tr>
</table>
<a class="anchor" name="p16" doxytag="org::ipdr::IPDRStateMachine::stopFlows"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">ArrayList <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p16">org::ipdr::IPDRStateMachine::stopFlows</a> = new ArrayList()<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Contains list of pending flow stop requests     </td>
  </tr>
</table>
<a class="anchor" name="p17" doxytag="org::ipdr::IPDRStateMachine::thread"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/d23/classorg_1_1ipdr_1_1api_1_1_connection_thread.html">ConnectionThread</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p17">org::ipdr::IPDRStateMachine::thread</a> = null<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stores the connection thread containing this IPDR state machine     </td>
  </tr>
</table>
<a class="anchor" name="p18" doxytag="org::ipdr::IPDRStateMachine::timer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Timer <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p18">org::ipdr::IPDRStateMachine::timer</a> = new Timer(true)<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Facilitates all timers required by the state machine     </td>
  </tr>
</table>
<a class="anchor" name="p19" doxytag="org::ipdr::IPDRStateMachine::timerTask"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/dab/classorg_1_1ipdr_1_1utility_1_1_timeout_timer_task.html">TimeoutTimerTask</a> <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#p19">org::ipdr::IPDRStateMachine::timerTask</a> = new <a class="el" href="../../db/dab/classorg_1_1ipdr_1_1utility_1_1_timeout_timer_task.html">TimeoutTimerTask</a>(this)<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Holds timer task for timers     </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="org::ipdr::IPDRStateMachine::unprobedSessions"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Hashtable <a class="el" href="../../df/de8/classorg_1_1ipdr_1_1_i_p_d_r_state_machine.html#r2">org::ipdr::IPDRStateMachine::unprobedSessions</a> = new Hashtable()<code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stores all sessions which were not yet probed for templates     </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>ipdr/Collector/org/ipdr/<a class="el" href="../../d5/d05/_i_p_d_r_state_machine_8java.html">IPDRStateMachine.java</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 09:26:53 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
