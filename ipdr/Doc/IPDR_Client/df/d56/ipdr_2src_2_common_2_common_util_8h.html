<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: ipdr/src/Common/CommonUtil.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="../../dir_000003.html">ipdr</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000010.html">src</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000011.html">Common</a></div>
<h1>CommonUtil.h File Reference</h1><code>#include &lt;<a class="el" href="../../d4/d3a/ipdr_2include_2_i_p_d_r_2_config_8h.html">IPDR/Config.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html">IPDR/Defs.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../de/d8c/ipdr_2include_2_i_p_d_r_2_i_p_d_r_8h.html">IPDR/IPDR.h</a>&gt;</code><br>
<code>#include &lt;time.h&gt;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d56/ipdr_2src_2_common_2_common_util_8h.html#a0">COMMON_UTIL_H_RCSID</a>&nbsp;&nbsp;&nbsp;"@(#) $Id: CommonUtil.h,v 1.9 2005/01/30 15:41:24 guyg Exp $" IPDR_COPYRIGHT_STR</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d56/ipdr_2src_2_common_2_common_util_8h.html#a1">Util_StrDup</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, const char *Source, char **Target)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d56/ipdr_2src_2_common_2_common_util_8h.html#a2">Util_StrDupAndReplace</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, const char *Source, char **Target)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d56/ipdr_2src_2_common_2_common_util_8h.html#a3">Util_Pad32</a> (unsigned int Size)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="CommonUtil.h::COMMON_UTIL_H_RCSID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define COMMON_UTIL_H_RCSID&nbsp;&nbsp;&nbsp;"@(#) $Id: CommonUtil.h,v 1.9 2005/01/30 15:41:24 guyg Exp $" IPDR_COPYRIGHT_STR          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a3" doxytag="CommonUtil.h::Util_Pad32"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int Util_Pad32           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">unsigned int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Size</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Pad a number to the closest 32 bit boundary<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Size</em>&nbsp;</td><td>number to pad</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Padded number </dd></dl>
<div class="fragment"><pre class="fragment">00198 {
00199     <span class="keywordflow">if</span> (Size % 4 == 0)
00200         <span class="keywordflow">return</span> Size;
00201     <span class="keywordflow">return</span> Size + 4 - (Size % 4);
00202 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="CommonUtil.h::Util_StrDup"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Util_StrDup           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Source</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>Target</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Duplicate a string using the platform services.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Source</em>&nbsp;</td><td>source string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Target</em>&nbsp;</td><td>target string (output) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00105 {
00106     <span class="keywordflow">if</span> (Source) {
00107         size_t lenP1 = strlen(Source) + 1;
00108 <span class="preprocessor">#ifdef DEBUG_MEMORY</span>
00109 <span class="preprocessor"></span>        <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status = Object_dm_Allocate(PS, lenP1,
00110                                                  NULL, (<span class="keywordtype">void</span> **) Target,
00111                                                  FileName, LineNum);
00112 <span class="preprocessor">#else</span>
00113 <span class="preprocessor"></span>        <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status = <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a2">Object_Allocate</a>(PS, lenP1,
00114                                               NULL, (<span class="keywordtype">void</span> **) Target);
00115 <span class="preprocessor">#endif</span>
00116 <span class="preprocessor"></span>        <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00117             <span class="keywordflow">return</span> Status;
00118 
00119         memcpy(*Target, Source, lenP1);
00120     } <span class="keywordflow">else</span> {
00121                 <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status = <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a2">Object_Allocate</a>(PS, 1,
00122                                               NULL, (<span class="keywordtype">void</span> **) Target);
00123                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00124             <span class="keywordflow">return</span> Status;
00125                         
00126                 memset(*Target, 0, 1);
00127     }
00128     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00129 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="CommonUtil.h::Util_StrDupAndReplace"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Util_StrDupAndReplace           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Source</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>Target</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Object_Release + StrDup<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Source</em>&nbsp;</td><td>source string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Target</em>&nbsp;</td><td>target string (replaced)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00150 {
00151     <span class="comment">/* The following must be done in the right order. If we first</span>
00152 <span class="comment">       release *Target and then StrDup onto it, we could have a</span>
00153 <span class="comment">       problem if Source happens to be the same as *Target. What we</span>
00154 <span class="comment">       should do is first do a StrDup, then release *Target and</span>
00155 <span class="comment">       finally slap the StrDup'ed thing into *Target.</span>
00156 <span class="comment">    */</span>
00157 
00158     <span class="keywordtype">char</span> *newTargetObj;
00159     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> rc;
00160 
00161     <span class="keywordflow">if</span> (Source == *Target) {
00162         <span class="comment">/* Don't do anything because the source is already there ...</span>
00163 <span class="comment">           we do this test now for efficiency and to avoid repeated</span>
00164 <span class="comment">           memory allocation/deallocation (below). */</span>
00165         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00166     }
00167 
00168     <span class="keywordflow">if</span> (Source == NULL) {
00169         newTargetObj = NULL;
00170         rc = <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00171     } <span class="keywordflow">else</span> {
00172 <span class="preprocessor">#ifdef DEBUG_MEMORY</span>
00173 <span class="preprocessor"></span>        rc =Util_dm_StrDup(PS, Source, &amp;newTargetObj, FileName, LineNum);
00174 <span class="preprocessor">#else</span>
00175 <span class="preprocessor"></span>        rc =<a class="code" href="../../d0/dfd/_for_doxygen_2src_2_common_2_common_util_8c.html#a5">Util_StrDup</a>(PS, Source, &amp;newTargetObj);
00176 <span class="preprocessor">#endif</span>
00177 <span class="preprocessor"></span>    }
00178 
00179 <span class="preprocessor">#ifdef DEBUG_MEMORY</span>
00180 <span class="preprocessor"></span>    (void)Object_dm_Release(PS, *Target, FileName, LineNum);
00181 <span class="preprocessor">#else</span>
00182 <span class="preprocessor"></span>    (void)<a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(PS, *Target);
00183 <span class="preprocessor">#endif</span>
00184 <span class="preprocessor"></span>
00185     *Target = newTargetObj;
00186 
00187     <span class="keywordflow">return</span> rc;
00188 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 09:26:23 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
