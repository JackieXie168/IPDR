<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: Initializing / starting / deleting a client</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<h1>Initializing / starting / deleting a client</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/dd9/group___i_p_d_r__configuration__values.html">Configuration values for inialization (programmatically/MIB)</a></td></tr>

<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a></td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef const char *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga0">IPDR_ParametersHandlerFunc</a> )(const char *Name, void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga1">IPDR_LoadMIBFunc</a> )(<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>, int MIBVersion, void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga2">IPDR_SaveMIBFunc</a> )(<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>, int MIBVersion, void *Arg)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, const char *ExporterName, <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga0">IPDR_ParametersHandlerFunc</a> ParamsHandler, void *ParamsHandlerArg, <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga1">IPDR_LoadMIBFunc</a> LoadMIB, void *LoadMIBArg, <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga2">IPDR_SaveMIBFunc</a> SaveMIB, void *SaveMIBArg, <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> *CH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga4">IPDR_StartExporter</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int IPDR_API_LINKAGE&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga5">IPDR_IsRunning</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga6">IPDR_GetSessionStatistics</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> *Now, <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *Statistics, unsigned long *QueuedOutstandingRecords, unsigned long *QueuedUnacknowledgedRecords)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga7">IPDR_GetCollectorStatisticsAndState</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> CollectorHandle, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> *Now, <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *Statistics, <a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *LastEvent)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga8">IPDR_DeleteExporter</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga9">IPDR_ReconfigExporter</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga10">IPDR_DrainQueue</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> Timeout)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
All operations performed by the IPDR transmitter (client) library operate through a handle to a transmitter (client) entity (<a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga4">IPDR_ExporterHandle</a>). The following sections describe the API for creating, starting and deleting a transmitter (client).<p>
The configuration parameters for the transmitter (client) are kept in a "MIB" (see <a class="el" href="../../d1/d50/group___i_p_d_r___m_i_b.html">IPDR configuration and monitoring data (MIB)</a>, <a class="el" href="../../d9/dee/group___i_p_d_r___m_i_b__related.html">SNMP agent support: MIB-related functions and types</a>, <a class="el" href="../../d4/db0/group___i_p_d_r__transmitter___m_i_b.html">IPDR transmitter (client) MIB overview</a>).<p>
The MIB is initialized to default values using <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga0">IPDR_ParametersHandlerFunc</a>. The MIB is then optionally loaded, possibly overriding these values (you can control this behavior by the way you write the load callback). <hr><h2>Typedef Documentation</h2>
<a class="anchor" name="ga1" doxytag="IPDR.h::IPDR_LoadMIBFunc"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>(* <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga1">IPDR_LoadMIBFunc</a>)(<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>, int MIBVersion, void *Arg)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Callback for loading the MIB.<p>
The function should limit its activity to calls to IPDR_MIBRestoreNodeByName(). <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>MIBVersion</em>&nbsp;</td><td>The MIB version (for matching with the saved MIB). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Arg</em>&nbsp;</td><td>Context value given when callback was registered by calling <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. If this function fails, <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a> will fail with the same return value. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga0" doxytag="IPDR.h::IPDR_ParametersHandlerFunc"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef const char*(* <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga0">IPDR_ParametersHandlerFunc</a>)(const char *Name, void *Arg)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Callback for looking up a parameter value.<p>
The function receives a parameter name and the additional argument (<em>ParamsHandlerArg</em>) and returns the parameter value as a string (below is a list of available parameters). If the function allocates memory for its return value, it must free the memory itself (e.g., on the next call to the parameters handler, or after it calls <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga8">IPDR_DeleteExporter()</a>. If the callback returns NULL, the default value is used. If this function pointer is NULL, the default values will be used. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>The parameter name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Arg</em>&nbsp;</td><td>Context value given when callback was registered by calling <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>C-string with the value; or NULL if the default is to be used. The names correspond to names in the MIB (see <a class="el" href="../../d1/d50/group___i_p_d_r___m_i_b.html">IPDR configuration and monitoring data (MIB)</a>).</dd></dl>
<dl compact><dt><b>See also:</b></dt><dd>IPDR_MIBGet <p>
<a class="el" href="../../d1/d50/group___i_p_d_r___m_i_b.html">IPDR configuration and monitoring data (MIB)</a> <p>
IPDR_MIBGetByName <p>
<a class="el" href="../../d9/dee/group___i_p_d_r___m_i_b__related.html">SNMP agent support: MIB-related functions and types</a> <p>
<a class="el" href="../../d4/db0/group___i_p_d_r__transmitter___m_i_b.html">IPDR transmitter (client) MIB overview</a> <p>
<a class="el" href="../../d1/d50/group___i_p_d_r___m_i_b.html">IPDR configuration and monitoring data (MIB)</a></dd></dl>
This function is currently used only by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a> to set initial MIB values. However, for future compatibility, it is recommended that the <em>Arg</em> parameter contains a pointer to the <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga4">IPDR_ExporterHandle</a> that is being set by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. The handle will be NULL if the MIB has not yet been set up (that is, if IPDR_MIBGetByName() cannot be called).<p>
The following parameters are retrieved by the transmitter (client) using the parameters handler callback. If the parameters handler callback is not given, or if the callback returns NULL, the default values are used.<p>
See <a class="el" href="../../d2/dd9/group___i_p_d_r__configuration__values.html">Configuration values for inialization (programmatically/MIB)</a> for details.     </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="IPDR.h::IPDR_SaveMIBFunc"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>(* <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga2">IPDR_SaveMIBFunc</a>)(<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>, int MIBVersion, void *Arg)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Callback for saving the MIB.<p>
The function will typically walk the MIB and write it to a file, so that it can be loaded by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga1">IPDR_LoadMIBFunc</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>MIBVersion</em>&nbsp;</td><td>The MIB version (for matching with the load). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Arg</em>&nbsp;</td><td>Context value given when callback was registered by calling <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="ga8" doxytag="IPDR.h::IPDR_DeleteExporter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_DeleteExporter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ExporterHandle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Stop and delete a IPDR transmitter (client), and release all resources. Any connections to a collector (server) are broken.<p>
If you get an unexpected response of <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a201">IPDR_ERR_NOT_RUNNING</a>, you must call this function before calling <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>.<p>
This does <em>not</em> verify that all the data waiting in the output queue has been written or acknowledged. To ensure that all data has been acknowledged, use <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga10">IPDR_DrainQueue()</a> or use <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga6">IPDR_GetSessionStatistics()</a> and <a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga1">IPDR_EventCallbackDetailed</a> with the <a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga4a154">IPDR_EVENT_QUEUE_EMPTY</a> event.<p>
This function is <em>not</em> thread-safe; you must ensure that no other IPDR_<em>xxx</em> function is active or called before this function returns.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d5/db3/_exporter_8c.html#a49">IPDR_InitExporter</a> </dd></dl>
<div class="fragment"><pre class="fragment">01859 {
01860     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
01861     <a class="code" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS;
01862 
01863     <span class="keywordflow">if</span> (! E) {
01864         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
01865     }
01866 
01867     PS = <a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>;
01868 
01869     <span class="comment">/* We must *not* grab the lock in this case ... otherwise we get a</span>
01870 <span class="comment">     * deadlock because the main Platform code needs to also grab</span>
01871 <span class="comment">     * locks. However, we want to ensure that any other IPDR_xxx()</span>
01872 <span class="comment">     * function is out of the way (e.g., if there's a IPDR_SendData()</span>
01873 <span class="comment">     * active, let's do our best to let it finish first). */</span>
01874 
01875 <span class="preprocessor">#if defined(SNMP_SUPPORT)</span>
01876 <span class="preprocessor"></span>        Platform_MIB_UnSetExporterHandle(PS);
01877 <span class="preprocessor">#endif</span>
01878 <span class="preprocessor"></span>
01879     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(PS);
01880     <span class="comment">/* There's a very good chance that no IPDR_xxx() function is</span>
01881 <span class="comment">     * operating now (however, the lock is released around the</span>
01882 <span class="comment">     * select(), so we just have to hope that nothing happens there,</span>
01883 <span class="comment">     * which is a pretty good bet. Anyway, we're going down, so we can</span>
01884 <span class="comment">     * absorb a 0.00001% chance of going up in a puff of smoke. */</span>
01885     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(PS);
01886 
01887         <a class="code" href="../../d2/dc9/_platform_8h.html#a3">Platform_Stop</a>(PS);
01888 
01889         <a class="code" href="../../d2/dc9/_platform_8h.html#a8">Platform_UnsetExporterHandle</a>(PS);
01890 
01891     <span class="comment">/* We need to release the lock before freeing the memory. If</span>
01892 <span class="comment">     *  somnebody tries to do something with the platform at this</span>
01893 <span class="comment">     *  point, they'll die in a puff of smoke anyway. But we're</span>
01894 <span class="comment">     *  guaranteed that nobody is using the memory, so it's safe. */</span>
01895 
01896         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, E);
01897 
01898     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01899 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga10" doxytag="IPDR.h::IPDR_DrainQueue"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_DrainQueue           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Timeout</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Wait until all the records in the queue have been sent and acknowledged. Because there is no guarantee that the queue will ever drain (all the collectors (servers) could be disconnected and they won't reconnect), a time limit can also be specified. If the queue did not drain in time, this function returns <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a178">IPDR_ERR_OPERATION_WOULD_BLOCK</a> -- it is always possible that the queue has drained asynchronously so you should also check the <em>QueuedUnacknowledgedRecords</em> value from <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga6">IPDR_GetSessionStatistics()</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Session Handle as returned by <a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga0">IPDR_CreateSession()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Timeout</em>&nbsp;</td><td>Wait at most this long (in milliseconds) for the queue to drain; a value of zero means wait forever. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a178">IPDR_ERR_OPERATION_WOULD_BLOCK</a> <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga8">IPDR_DeleteExporter</a> </dd></dl>
<div class="fragment"><pre class="fragment">01911 {
01912     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
01913     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = SessionHandle;
01914     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> TimeLeft = Timeout;
01915     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> SleepInterval = 1000; <span class="comment">/* 1 second */</span>
01916 
01917     <span class="keywordflow">if</span> (! E || ! S) {
01918         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
01919     }
01920 
01921     <span class="keywordflow">if</span> (! <a class="code" href="../../d2/dc9/_platform_8h.html#a4">Platform_IsRunning</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>)) {
01922         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a201">IPDR_ERR_NOT_RUNNING</a>;
01923     }
01924 
01925         <a class="code" href="../../d5/db3/_exporter_8c.html#a48">Session_SendOutstandingData</a>(E, S);
01926 
01927     <span class="keywordflow">if</span> (Timeout &gt; 0 &amp;&amp; Timeout &lt; SleepInterval) {
01928         SleepInterval = Timeout;
01929     }
01930 
01931     <span class="comment">/* This code is a little crude; we ought to use the platform timer</span>
01932 <span class="comment">     * facilities for more precise counting down; but that's more</span>
01933 <span class="comment">     * complex with callbacks, etc. */</span>
01934 
01935     <span class="keywordflow">while</span> (Timeout == 0 || TimeLeft &gt; 0) {
01936         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01937         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S) == 0 &amp;&amp;
01938             <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UnacknowledgedDataCount(E, S) == 0) {
01939             <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01940             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01941         }
01942         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01943 
01944         <a class="code" href="../../d2/dc9/_platform_8h.html#a56">Platform_SleepMS</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, SleepInterval);
01945         TimeLeft -= SleepInterval;
01946     }
01947         <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;CleanUP(E, S);
01948     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a178">IPDR_ERR_OPERATION_WOULD_BLOCK</a>;
01949 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga7" doxytag="IPDR.h::IPDR_GetCollectorStatisticsAndState"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_GetCollectorStatisticsAndState           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CollectorHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Now</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Statistics</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>LastEvent</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get statistics for a collector (server) within a session and get information about its state. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Session handle returned from <a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga0">IPDR_CreateSession()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CollectorHandle</em>&nbsp;</td><td>The collector handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Now</em>&nbsp;</td><td>(output) the current time (seconds since 1970-01-01T00:00:00Z). Use NULL if you don't want this value. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Statistics</em>&nbsp;</td><td>(output) the statistics for the collector (server). Use NULL if you don't want this value. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>LastEvent</em>&nbsp;</td><td>(output) the last state-change "event" that was triggered; This can be used to get the state and other current information about the collector (server). [Non-state events, such as <a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga4a152">IPDR_EVENT_RECORD_LOST</a>, are ignored.] Use NULL if you don't want this value. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00474 {
00475     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
00476     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = SessionHandle;
00477         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *C = CollectorHandle;
00478     <span class="keywordtype">int</span> Index;
00479     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> zeroStats = { 0, 0, 0, 0 };
00480     <span class="keywordflow">if</span> (Statistics) { *Statistics = zeroStats; }
00481     <span class="keywordflow">if</span> (Now) { * Now = 0; }
00482     <span class="keywordflow">if</span> (LastEvent) { <span class="comment">/* Set a default value in case we don't have a current server (collector) */</span>
00483         <a class="code" href="../../d5/db3/_exporter_8c.html#a98">EventDataInit</a>(LastEvent, <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga4a151">IPDR_EVENT_SERVER_DISCONNECTED</a>, NULL, NULL, NULL);
00484         LastEvent-&gt;Extra.Disconnected.Reason = <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga5a159">IPDR_EVENT_DISCONNECTED_INITIAL</a>;
00485     }
00486     <span class="keywordflow">if</span> (! E || ! S) {
00487         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
00488     }
00489 
00490     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00491 
00492     <span class="keywordflow">if</span> (Now) {
00493         <a class="code" href="../../d2/dc9/_platform_8h.html#a54">Platform_GetTime</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Now);
00494     }
00495 
00496     <span class="keywordflow">for</span> (Index = 0; Index &lt; S-&gt;CollectorSessions.Length; Index++) {
00497         <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = (<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *) S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
00498         <span class="keywordflow">if</span> (CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> == C ) {
00499                         <span class="keywordflow">if</span> (Statistics) {
00500                 *Statistics = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o10">Statistics</a>;
00501             }
00502             <span class="keywordflow">if</span> (LastEvent) {
00503                 *LastEvent = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o13">LastEvent</a>;
00504             }
00505             <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00506             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
00507         }
00508     }
00509     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00510     <a class="code" href="../../d5/db3/_exporter_8c.html#a32">StatisticsInitialize</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, NULL, NULL, Statistics); <span class="comment">/* zero return value */</span>
00511     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a213">IPDR_ERR_COLLECTOR_NOT_IN_SESSION</a>;
00512 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="IPDR.h::IPDR_GetSessionStatistics"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_GetSessionStatistics           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Now</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Statistics</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long *&nbsp;</td>
          <td class="mdname" nowrap> <em>QueuedOutstandingRecords</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long *&nbsp;</td>
          <td class="mdname" nowrap> <em>QueuedUnacknowledgedRecords</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get statistics for a session. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Session handle returned from <a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga0">IPDR_CreateSession()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Now</em>&nbsp;</td><td>(output) the current time (seconds since 1970-01-01T00:00:00Z). Use NULL if you don't want this value. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Statistics</em>&nbsp;</td><td>(output) the statistics for the session. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>QueuedOutstandingRecords</em>&nbsp;</td><td>(output) the number of records currently on the output queue (unsent or unacknowledged). Use NULL if you don't want this value. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>QueuedUnacknowledgedRecords</em>&nbsp;</td><td>(output) the number of records that currently have not been acknowledged. Use NULL if you don't want this value. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00425 {
00426         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
00427     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = SessionHandle;
00428     <span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> zeroStats = { 0, 0, 0, 0 };
00429     <span class="keywordflow">if</span> (Statistics) {
00430         *Statistics = zeroStats;
00431     }
00432     <span class="keywordflow">if</span> (QueuedOutstandingRecords)    { *QueuedOutstandingRecords = 0; }
00433     <span class="keywordflow">if</span> (QueuedUnacknowledgedRecords) { *QueuedUnacknowledgedRecords = 0; }
00434     <span class="keywordflow">if</span> (Now) { *Now = 0; }
00435     <span class="keywordflow">if</span> (! E || ! S) {
00436         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
00437     }
00438 
00439     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00440 
00441     <span class="keywordflow">if</span> (Now) {
00442         <a class="code" href="../../d2/dc9/_platform_8h.html#a54">Platform_GetTime</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Now);
00443     }
00444 
00445     <span class="keywordflow">if</span> (Statistics) {
00446         *Statistics = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o21">Statistics</a>;
00447     }
00448 
00449     <span class="keywordflow">if</span> (QueuedOutstandingRecords) {
00450         *QueuedOutstandingRecords = <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S);
00451     }
00452 
00453     <span class="keywordflow">if</span> (QueuedUnacknowledgedRecords) {
00454         *QueuedUnacknowledgedRecords = <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UnacknowledgedDataCount(E, S);
00455     }
00456 
00457     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00458     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
00459 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="IPDR.h::IPDR_InitExporter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_InitExporter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga0">IPDR_ParametersHandlerFunc</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ParamsHandler</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ParamsHandlerArg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga1">IPDR_LoadMIBFunc</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LoadMIB</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>LoadMIBArg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga2">IPDR_SaveMIBFunc</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SaveMIB</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>SaveMIBArg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize a new transmitter (client) given the platform services and parameters.<p>
The IPDR transmitter (client) initialization process involves passing a function pointer which will be used by the transmitter (client) to retrieve its parameters and a structure that contains function pointer to platform specific handlers. These implement socket, timer, and memory allocation operations. Initial parameters should be set before the transmitter (client) is activated or may be modified by setting different values to the MIB's relevant OIDs. Changing the parameters at run time may cause the connections to be restarted.<p>
The implementation is free to use any method it wishes to store the parameter values. Examples are: <ul>
<li>
As a pre-defined list (the sample code uses this method). </li>
<li>
As an external file which is scanned for values. </li>
<li>
As internal values which are set via a separate command line interface or via SNMP (as part of a MIB). </li>
</ul>
<p>
The <em>ParamsHandlerArg</em> parameter to the parameters handler function contains the necessary context for the implementation to fetch the values.<p>
<dl compact><dt><b>Note:</b></dt><dd></dd></dl>
If any subsequent function returns <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a201">IPDR_ERR_NOT_RUNNING</a>, you must call <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga8">IPDR_DeleteExporter()</a> to clean things up before calling this function again.<p>
It is undefined when the implementation calls the <em>ParamsHandler</em>. It may choose to collect all parameter the values during initialization; if your <em>ParamsHandler</em> changes its values after initialization, you must stop and start the transmitter (client) to make them take effect.<p>
If you wish to give precedence to the values in the MIB, you can get at them with IPDR_MIBGetByName(). You must create the <em>ParamsHandlerArg</em> to contain a pointer to the <em>transmitter</em> (client) handle and test to ensure that the handle is non-NULL before using it (<a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a> will sufficiently instantiate the transmitter (client) to allow MIB lookups.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>handle to a platform services structure supplied by the host application, containing pointers to service functions. The contents of this structure will depend on platform specifics. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ExporterName</em>&nbsp;</td><td>name of the transmitter (client) (used for logging purposes). A copy is made of the string. If this parameter is NULL or zero-length, a default name is supplied. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ParamsHandler</em>&nbsp;</td><td>callback function for initial values of parameters needed by the transmitter (client). Any values set by this callback can be changed before <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga4">IPDR_StartExporter()</a> by using IPDR_MIBSet(). See additional comments with <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga0">IPDR_ParametersHandlerFunc</a>. If this parameter is NULL, default values are used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ParamsHandlerArg</em>&nbsp;</td><td>argument to the <em>ParamsHandler</em> callback function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>LoadMIB</em>&nbsp;</td><td>callback function for initializing the values in the MIB. The function should limit its activity to calls to IPDR_MIBRestoreNodeByName(). If this function fails (returns anything other than <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>), <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a> will fail with the same return value. If this parameter is NULL, nothing is done for loading the MIB. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>LoadMIBArg</em>&nbsp;</td><td>passed to <em>LoadMIB</em>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SaveMIB</em>&nbsp;</td><td>callback function for saving the values in the MIB. If this parameter is NULL, nothing is done for saving the MIB. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SaveMIBArg</em>&nbsp;</td><td>passed to <em>SaveMIB</em>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CH</em>&nbsp;</td><td>(output) handle to the newly created transmitter (client); NULL on failure. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/da7/struct_i_p_d_r___persistence_services.html">IPDR_PersistenceServices</a> <p>
<a class="el" href="../../d9/dee/group___i_p_d_r___m_i_b__related.html">SNMP agent support: MIB-related functions and types</a> <p>
<a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga0">IPDR_ParametersHandlerFunc</a> <p>
<a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga4">IPDR_StartExporter</a> <p>
<a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga5">IPDR_IsRunning</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga5" doxytag="IPDR.h::IPDR_IsRunning"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int IPDR_API_LINKAGE IPDR_IsRunning           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ExporterHandle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Test whether the transmitter (client) is running. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 for not running, 1 for running. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a201">IPDR_ERR_NOT_RUNNING</a> </dd></dl>
<div class="fragment"><pre class="fragment">01843 {
01844     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
01845     <span class="keywordflow">if</span> (! E) {
01846         <span class="keywordflow">return</span> <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
01847     }
01848     <span class="keywordflow">return</span> <a class="code" href="../../d2/dc9/_platform_8h.html#a4">Platform_IsRunning</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01849 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga9" doxytag="IPDR.h::IPDR_ReconfigExporter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_ReconfigExporter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ExporterHandle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">03949 {
03950         <span class="keywordflow">return</span> <a class="code" href="../../d5/db3/_exporter_8c.html#a101">Exporter_Reconfigure</a>(ExporterHandle);
03951 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga4" doxytag="IPDR.h::IPDR_StartExporter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_StartExporter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>ExporterHandle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Start a previously created transmitter (client). After the transmitter (client) has been initialized and sessions and templates have been created, the transmitter (client) can be started. For <em>some</em> implementations of the platform services, this will result in starting a new thread. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga5">IPDR_IsRunning()</a> <p>
<a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a> <p>
<a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga8">IPDR_DeleteExporter()</a> </dd></dl>
<div class="fragment"><pre class="fragment">01735 {
01736     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>*           E = ExporterHandle;
01737     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>         Status;
01738     <a class="code" href="../../db/d5a/struct_chunk_allocator.html">ChunkAllocator</a>      Alloc;
01739         <span class="keywordtype">int</span>                     i, j ;
01740 
01741     <span class="keywordflow">if</span> (! E) {
01742         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
01743     }
01744 
01745     <span class="keywordflow">if</span> (<a class="code" href="../../d2/dc9/_platform_8h.html#a4">Platform_IsRunning</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>)) {
01746         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a206">IPDR_ERR_ALREADY_RUNNING</a>;
01747     }
01748 
01749 
01750     <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;Initialize(E, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o32">QHandlerInitArg</a>);
01751 
01752     <a class="code" href="../../d0/db6/_console_8c.html#a25">Console_Start</a>(&amp; (E-&gt;ConsolePtr));
01753 
01754     <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a15">ChunksManager_GetDefaultChunkAllocator</a>(E-&gt;PS, &amp; Alloc);
01755 
01756     <span class="comment">/* initialize the transport layer */</span>
01757     Status = <a class="code" href="../../d5/d93/_transport_8h.html#a2">TL_InitializePassive</a>(E-&gt;PS, &amp; (E-&gt;ExporterLog), Alloc, E-&gt;LocalAddr,
01758                                   E-&gt;LocalPort,
01759                                   &amp; <a class="code" href="../../d5/db3/_exporter_8c.html#a12">Exporter_DefaultHandlers</a>, E,
01760                                   &amp; (E-&gt;ParamsHandler),
01761                                   &amp; (E-&gt;TransportHandle));
01762     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01763         <span class="keywordflow">return</span> Status;
01764     }
01765 
01766     <span class="comment">/* copy the templates lists to the sessions */</span>
01767     <span class="keywordflow">for</span> (i = 0; i &lt; E-&gt;Sessions.Length; i++) {
01768         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) E-&gt;Sessions.Data[i];
01769 
01770         <span class="keywordflow">for</span> (j = 0; j &lt; S-&gt;Templates.Length; j++) {
01771                 <span class="comment">/* reset all templates associated with the Session */</span>
01772                         <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
01773                         <span class="keywordflow">if</span> (Tmpl != NULL)
01774                                 <a class="code" href="../../dd/d68/_templates_8c.html#a20">Template_Reset</a>(S, Tmpl);
01775                 }
01776         <a class="code" href="../../d5/db3/_exporter_8c.html#a45">Session_CreateNewWorkContext</a>(E, S, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>), <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>);
01777     }
01778 
01779     <span class="comment">/* once the sessions and servers (collectors) are updated, the rest of the</span>
01780 <span class="comment">       tables can be updated once */</span>
01781 
01782     <span class="keywordflow">if</span> (E-&gt;Parameters.StatisticsInterval) {
01783         Status =
01784             <a class="code" href="../../d2/dc9/_platform_8h.html#a11">Platform_RegisterPeriodicTimer</a>(EXPORTER_PLATFORM,
01785                                            <a class="code" href="../../d5/db3/_exporter_8c.html#a36">Exporter_StatisticsReportCallback</a>, E,
01786                                            E-&gt;Parameters.StatisticsInterval,
01787                                            &amp; (E-&gt;StatisticsTimerID));
01788                 <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01789                 {
01790             <span class="keywordflow">return</span> Status;
01791         }
01792     }
01793 
01794         <span class="keywordflow">if</span>(E-&gt;Parameters.AutoconnectInterval)
01795         {
01796                 Status = <a class="code" href="../../d2/dc9/_platform_8h.html#a11">Platform_RegisterPeriodicTimer</a>(EXPORTER_PLATFORM,
01797                                                    <a class="code" href="../../d5/db3/_exporter_8c.html#a25">Exporter_AutoconnectCallback</a>, E,
01798                                                E-&gt;Parameters.AutoconnectInterval,
01799                                                    &amp; (E-&gt;AutoconnectTimerID));
01800                 <span class="keywordflow">if</span>( <a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status) )
01801                 {
01802                         <span class="keywordflow">return</span> Status;
01803                 }
01804         }
01805 
01806     Status = <a class="code" href="../../d5/db3/_exporter_8c.html#a17">Exporter_InitializeProtocolInfo</a>(E);
01807     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01808     {
01809         <span class="keywordflow">return</span> Status;
01810     }
01811 
01812     <span class="comment">/* start the platform services */</span>
01813     Status = <a class="code" href="../../d2/dc9/_platform_8h.html#a2">Platform_Start</a>(EXPORTER_PLATFORM);
01814 
01815     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a17">SUCCESS</a>(Status)) {
01816         E-&gt;Started = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
01817                 <span class="comment">/*IPDR_SleepMS(E, 10*1000);*/</span>
01818     }
01819 
01820         {
01821                 <span class="keywordtype">int</span> Index ;
01822                 <span class="keywordflow">for</span>( Index = 0 ; Index &lt; E-&gt;Sessions.Length ; Index++ )
01823                 {
01824                         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *)E-&gt;Sessions.Data[Index];
01825                         <span class="keywordflow">if</span>( S != NULL )
01826                         {
01827                                 S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
01828                         }
01829                 }
01830         }
01831 
01832     <span class="keywordflow">return</span> Status;
01833 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 22:28:27 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
