<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: For Doxygen/src/Transports/TCP/TCPTransport.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="../../dir_000000.html">For Doxygen</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000003.html">src</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000015.html">Transports</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000016.html">TCP</a></div>
<h1>TCPTransport.h File Reference</h1><code>#include &lt;<a class="el" href="../../d4/d71/_config_8h.html">IPDR/Config.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../df/dde/_defs_8h.html">IPDR/Defs.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d5/d93/_transport_8h.html">Common/Transport.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d3/d80/_parameters_handler_8h.html">Common/ParametersHandler.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../de/d8f/_configuration_names_8h.html">Common/ConfigurationNames.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../db/d10/_chunks_manager_8h.html">Common/ChunksManager.h</a>&gt;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a0">TCP_TRANSPORT_H_RCSID</a>&nbsp;&nbsp;&nbsp;"@(#) $Id: TCPTransport.h,v 1.15 2005/04/21 11:30:58 dmitryk Exp $" IPDR_COPYRIGHT_STR</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">IPDR_tag_TCPConnection</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a1">TCPConnection</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">IPDR_tag_TCPTransport</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a2">TCPTransport</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a3">TCP_InitializePassive</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, <a class="el" href="../../dc/d30/struct_i_p_d_r__tag___log.html">Log</a> *Logger, <a class="el" href="../../db/d5a/struct_chunk_allocator.html">ChunkAllocator</a> RcvAllocator, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> LocalAddr, unsigned short LocalPort, struct <a class="el" href="../../db/dcd/struct_i_p_d_r__tag___connection_handlers.html">IPDR_tag_ConnectionHandlers</a> *DefaultHandlers, void *Arg, <a class="el" href="../../df/d84/struct_parameters_handler.html">ParametersHandler</a> *ParamsHandler, <a class="el" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">Transport</a> *Handle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a4">TCP_Shutdown</a> (<a class="el" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">Transport</a> Handle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a5">TCP_Disconnect</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a6">TCP_HandleDisconnection</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a7">TCP_Connect</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, <a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *Conn)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a8">TCP_GetSockName</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, <a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *Conn)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a9">TCP_CreateConnectionIdle</a> (<a class="el" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">TCPTransport</a> *T, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> LocalAddr, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> RemoteAddr, unsigned short RemotePort, <a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> **Conn)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a10">TCP_Send</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Immediate)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a11">TCP_Receive</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *C, int Timeout, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a12">TCP_ResetConnection</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a13">TCP_SetConnectionHandlers</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C, struct <a class="el" href="../../db/dcd/struct_i_p_d_r__tag___connection_handlers.html">IPDR_tag_ConnectionHandlers</a> *Handlers, void *Args)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a14">TCP_GetConnectionInfo</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> *Addr, unsigned short *Port)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a15">TCP_GetConnectionInfoStr</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a16">TCP_GetReceiveChunksManager</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C, <a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> **Mgr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a17">TCP_GetSendChunksManager</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C, <a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> **Mgr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a18">TCP_Reconfigure</a> (<a class="el" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">Transport</a> Handle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a19">TCP_PrintAddress</a> (<a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr, char *AddressStr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a20">TCP_PrintAddressAndPort</a> (<a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr, unsigned int Port, char *AddressStr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a21">TCP_PrintConnectionRemote</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C, char *AddressStr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a22">TCP_PrintConnectionLocale</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C, char *AddressStr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a23">TCP_PrintConnectionFull</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C, char *AddressStr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html#a24">TCP_ParseAddress</a> (const char *Str)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Header for the IPDR TCP based transport layer, as implemented in Transport/TCP/TCPTransport.c.<p>
Copyright (2005) © Amdocs, All Rights Reserved<p>
This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND either expresses or implied.<p>
<dl compact><dt><b>Id</b></dt><dd><a class="el" href="../../d3/dfd/_t_c_p_transport_8h.html">TCPTransport.h</a>,v 1.15 2005/04/21 11:30:58 dmitryk Exp </dd></dl>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a0" doxytag="TCPTransport.h::TCP_TRANSPORT_H_RCSID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define TCP_TRANSPORT_H_RCSID&nbsp;&nbsp;&nbsp;"@(#) $Id: TCPTransport.h,v 1.15 2005/04/21 11:30:58 dmitryk Exp $" IPDR_COPYRIGHT_STR          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a1" doxytag="TCPTransport.h::TCPConnection"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">IPDR_tag_TCPConnection</a>
 <a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
structure containing information about a connection made using the TCP transport.     </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="TCPTransport.h::TCPTransport"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">IPDR_tag_TCPTransport</a>
 <a class="el" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">TCPTransport</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
structure containing information about IPDR's TCP based transport layer. This is *only* for passive ("accept") sockets.     </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a7" doxytag="TCPTransport.h::TCP_Connect"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_Connect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Conn</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00983 {
00984         <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00985 
00986         Status = <a class="code" href="../../d2/dc9/_platform_8h.html#a42">Platform_Connect</a>(PS, Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o6">FD</a>, Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>, Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o2">RemotePort</a>);
00987         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00988         {
00989            <a class="code" href="../../dd/d28/_log_8c.html#a28">Log_LogPlatformError</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a2">CONNECTION_LOG</a>(Conn), <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>,
00990                              <span class="stringliteral">"TCP_Connect"</span>,
00991                              <span class="stringliteral">"Platform_Connect"</span>);
00992                 <span class="keywordflow">return</span> Status;
00993         }
00994 
00995         Status = <a class="code" href="../../d2/dc9/_platform_8h.html#a43">Platform_GetSockName</a>(PS, Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o6">FD</a>, &amp;(Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o3">LocaleAddr</a>), &amp;(Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o4">LocalePort</a>));
00996         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00997         {
00998            <a class="code" href="../../dd/d28/_log_8c.html#a28">Log_LogPlatformError</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a2">CONNECTION_LOG</a>(Conn), <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>,
00999                              <span class="stringliteral">"TCP_Connect"</span>,
01000                              <span class="stringliteral">"Platform_GetSockName"</span>);
01001                 <span class="keywordflow">return</span> Status;
01002         }
01003 
01004         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> ;
01005 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="TCPTransport.h::TCP_CreateConnectionIdle"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_CreateConnectionIdle           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">TCPTransport</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>T</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LocalAddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>RemoteAddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>RemotePort</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>Conn</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00946 {
00947         <a class="code" href="../../db/d76/struct_i_p_d_r__tag___socket.html">IPDR_SocketHandle</a> NewSocketFD;
00948     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00949 
00950 
00951         Status = <a class="code" href="../../d2/dc9/_platform_8h.html#a39">Platform_CreateTCPSocket</a>(T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o0">PS</a>, &amp; (NewSocketFD));
00952     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00953         {
00954         <a class="code" href="../../dd/d28/_log_8c.html#a28">Log_LogPlatformError</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a1">TRANSPORT_LOG</a>, <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>,
00955                              <span class="stringliteral">"TCP_CreateConnectionIdle"</span>,
00956                              <span class="stringliteral">"Platform_CreateTCPSocket"</span>);
00957         <span class="keywordflow">return</span> Status;
00958     }
00959 
00960         Status = <a class="code" href="../../d2/dc9/_platform_8h.html#a41">Platform_Bind</a>(T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o0">PS</a>, NewSocketFD, LocalAddr, 0);
00961     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
00962         <a class="code" href="../../da/df4/_log_8h.html#a57">Log_LogPlatformSocketError</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a1">TRANSPORT_LOG</a>, <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>,
00963                                    <span class="stringliteral">"TCP_CreateConnectionIdle"</span>,
00964                                    <span class="stringliteral">"Platform_Bind"</span>, LocalAddr, 0, NewSocketFD);
00965         <a class="code" href="../../d2/dc9/_platform_8h.html#a44">Platform_CloseAndInvalidate</a>(T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o0">PS</a>, &amp;T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o6">SocketFD</a>);
00966         <span class="keywordflow">return</span> Status;
00967     }
00968 
00969         Status = <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a14">TCP_CreateConnection</a>(T, NewSocketFD, RemoteAddr, RemotePort, Conn);
00970     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00971         {
00972         <a class="code" href="../../dd/d28/_log_8c.html#a28">Log_LogPlatformError</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a1">TRANSPORT_LOG</a>, <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>,
00973                              <span class="stringliteral">"TCP_CreateConnectionIdle"</span>,
00974                              <span class="stringliteral">"TCP_CreateConnection"</span>);
00975         <span class="keywordflow">return</span> Status;
00976     }
00977 
00978         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> ;
00979 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="TCPTransport.h::TCP_Disconnect"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_Disconnect           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>C</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Disconnects a TCP connection<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>C</em>&nbsp;</td><td>connection to disconnect</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01627 {
01628     <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *C1, *TC = <span class="comment">/*(TCPConnection *)*/</span> C;
01629     <a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">TCPTransport</a> *T = <span class="comment">/*(TCPTransport *)*/</span> TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o13">Transport</a>;
01630 
01631 <span class="preprocessor">#ifdef TRACE_MAINFUNC</span>
01632 <span class="preprocessor"></span>    fprintf(stderr, <span class="stringliteral">"TCP_Disconnect "</span> <a class="code" href="../../d4/d2e/group___i_p_d_r___socket.html#ga0">Platform_SOCKET_FMT</a> <span class="stringliteral">"\n"</span>, <a class="code" href="../../d4/d2e/group___i_p_d_r___socket.html#ga1">Platform_SOCKET_DISPLAY</a>(TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o6">FD</a>)); fflush(stderr);
01633 <span class="preprocessor">#endif</span>
01634 <span class="preprocessor"></span>
01635     <span class="comment">/* We're not checking TC-&gt;InUseCount here ... unlike</span>
01636 <span class="comment">     * TCP_HandleDisconnection() ... this is probably OK because</span>
01637 <span class="comment">     * TCP_Disconnect is called only by client(transmitter)/session</span>
01638 <span class="comment">     * destructors or when we get connections that we don't know</span>
01639 <span class="comment">     * about. */</span>
01640 
01641     TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o19">Disconnected</a> = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
01642 
01643     <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, &amp;TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o18">FlushTimer</a>);
01644 
01645     <a class="code" href="../../d2/dc9/_platform_8h.html#a17">Platform_UnregisterSocketAndClear</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, &amp;TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o7">ReadEventID</a>);
01646     <a class="code" href="../../d2/dc9/_platform_8h.html#a17">Platform_UnregisterSocketAndClear</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, &amp;TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o8">WriteEventID</a>);
01647     <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a1">TRANSPORT_LOG</a>, <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>, <span class="stringliteral">"TCP_Disconnect"</span>,
01648                <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a8">MSG_TCP_CLOSE</a>, <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a40">TCP_GetConnectionInfoStr</a>(TC), <a class="code" href="../../d4/d2e/group___i_p_d_r___socket.html#ga1">Platform_SOCKET_DISPLAY</a>(TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o6">FD</a>));
01649     <a class="code" href="../../d2/dc9/_platform_8h.html#a44">Platform_CloseAndInvalidate</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, &amp;TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o6">FD</a>);
01650 
01651     <span class="comment">/* remove the connection from the connections list */</span>
01652 
01653     C1 = T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o3">Connections</a>;
01654     <span class="keywordflow">if</span> (C1 == TC)
01655         T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o3">Connections</a> = TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o12">NextConnection</a>;
01656     <span class="keywordflow">else</span> {
01657         <span class="keywordflow">while</span> (C1 != NULL) {
01658             <span class="keywordflow">if</span> (C1-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o12">NextConnection</a> == TC) {
01659                 C1-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o12">NextConnection</a> = TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o12">NextConnection</a>;
01660                 break ;
01661             }
01662         C1 = C1-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o12">NextConnection</a>;
01663         }
01664     }
01665 
01666     <span class="keywordflow">if</span> (TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o9">Handlers</a> != NULL)
01667         TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o9">Handlers</a>-&gt;<a class="code" href="../../db/dcd/struct_i_p_d_r__tag___connection_handlers.html#o1">Disconnect</a>(C, TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o10">Arg</a>);
01668 
01669     <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a18">ChunksManager_Destroy</a>(&amp; (TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o14">ReceivedData</a>));
01670     <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a18">ChunksManager_Destroy</a>(&amp; (TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o15">SentData</a>));
01671     <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a18">ChunksManager_Destroy</a>(&amp; (TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o16">SendBuffers</a>));
01672     strncpy(TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o0">eyecatcher</a>, <span class="stringliteral">"Dtcpcon"</span>, <span class="keyword">sizeof</span> TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o0">eyecatcher</a>);
01673     <a class="code" href="../../d2/dc9/_platform_8h.html#a20">Platform_MemoryFree</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, TC);
01674 
01675     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01676 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="TCPTransport.h::TCP_GetConnectionInfo"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_GetConnectionInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short *&nbsp;</td>
          <td class="mdname" nowrap> <em>Port</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get address/port of a connection.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>C</em>&nbsp;</td><td>connection to get info of. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>remote address (output) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Port</em>&nbsp;</td><td>remote port (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01733 {
01734     <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *TC = <span class="comment">/*(TCPConnection *)*/</span> C;
01735     *Addr = TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>;
01736     *Port = TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o2">RemotePort</a>;
01737     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01738 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="TCPTransport.h::TCP_GetConnectionInfoStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char* TCP_GetConnectionInfoStr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>C</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="TCPTransport.h::TCP_GetReceiveChunksManager"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_GetReceiveChunksManager           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>Mgr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="TCPTransport.h::TCP_GetSendChunksManager"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_GetSendChunksManager           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>Mgr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="TCPTransport.h::TCP_GetSockName"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_GetSockName           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Conn</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">01009 {
01010         <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
01011 
01012         Status = <a class="code" href="../../d2/dc9/_platform_8h.html#a43">Platform_GetSockName</a>(PS, Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o6">FD</a>, &amp;(Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o3">LocaleAddr</a>), &amp;(Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o4">LocalePort</a>));
01013         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01014         {
01015            <a class="code" href="../../dd/d28/_log_8c.html#a28">Log_LogPlatformError</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a2">CONNECTION_LOG</a>(Conn), <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>,
01016                              <span class="stringliteral">"TCP_GetSockName"</span>,
01017                              <span class="stringliteral">"Platform_GetSockName"</span>);
01018                 <span class="keywordflow">return</span> Status;
01019         }
01020 
01021         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> ;
01022 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="TCPTransport.h::TCP_HandleDisconnection"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TCP_HandleDisconnection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>C</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="TCPTransport.h::TCP_InitializePassive"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_InitializePassive           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d30/struct_i_p_d_r__tag___log.html">Log</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Logger</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../db/d5a/struct_chunk_allocator.html">ChunkAllocator</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>RcvAllocator</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LocalAddr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>LocalPort</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="../../db/dcd/struct_i_p_d_r__tag___connection_handlers.html">IPDR_tag_ConnectionHandlers</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>DefaultHandlers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Arg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/d84/struct_parameters_handler.html">ParametersHandler</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>ParamsHandler</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">Transport</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Handle</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="TCPTransport.h::TCP_ParseAddress"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> TCP_ParseAddress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const char *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Str</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00085 {
00086     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Bytes[4];
00087     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Res;
00088 
00089         <span class="keywordflow">if</span>( <a class="code" href="../../d9/d0f/_exporter_console_8c.html#a0">Str</a> &amp;&amp; strlen(<a class="code" href="../../d9/d0f/_exporter_console_8c.html#a0">Str</a>) &gt; 0)
00090         sscanf(<a class="code" href="../../d9/d0f/_exporter_console_8c.html#a0">Str</a>, <span class="stringliteral">"%u.%u.%u.%u"</span>, &amp; Bytes[0], &amp; Bytes[1], &amp; Bytes[2], &amp; Bytes[3]);
00091         <span class="keywordflow">else</span>
00092                 Bytes[0] = Bytes[1] = Bytes[2] = Bytes[3] = 0;
00093     Res = (Bytes[0] &lt;&lt; 24) | (Bytes[1] &lt;&lt; 16) | (Bytes[2] &lt;&lt; 8) | Bytes[3];
00094     <span class="keywordflow">return</span> Res;
00095 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="TCPTransport.h::TCP_PrintAddress"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* TCP_PrintAddress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>AddressStr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00098 {
00099     <span class="comment">/* Or use inet_ntoa() */</span>
00100     sprintf(AddressStr, <span class="stringliteral">"%u.%u.%u.%u"</span>,
00101             (Addr&gt;&gt;24) &amp; 0xffu,
00102             (Addr&gt;&gt;16) &amp; 0xffu,
00103             (Addr&gt;&gt; 8) &amp; 0xffu,
00104             (Addr&gt;&gt; 0) &amp; 0xffu);
00105 
00106     <span class="keywordflow">return</span> AddressStr;
00107 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="TCPTransport.h::TCP_PrintAddressAndPort"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* TCP_PrintAddressAndPort           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>Port</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>AddressStr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00110 {
00111     <span class="comment">/* Or use inet_ntoa() */</span>
00112     sprintf(AddressStr, <span class="stringliteral">"%d.%d.%d.%d:%u"</span>,
00113             (Addr&gt;&gt;24) &amp; 0xff,
00114             (Addr&gt;&gt;16) &amp; 0xff,
00115             (Addr&gt;&gt; 8) &amp; 0xff,
00116             (Addr&gt;&gt; 0) &amp; 0xff,
00117             Port);
00118 
00119     <span class="keywordflow">return</span> AddressStr;
00120 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="TCPTransport.h::TCP_PrintConnectionFull"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* TCP_PrintConnectionFull           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>AddressStr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00151 {
00152         <span class="comment">/* Or use inet_ntoa() */</span>
00153     sprintf(AddressStr, <span class="stringliteral">"%d.%d.%d.%d:%u(%d.%d.%d.%d)-&gt;%d.%d.%d.%d:%u"</span>,
00154             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>&gt;&gt;24) &amp; 0xff,
00155             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>&gt;&gt;16) &amp; 0xff,
00156             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>&gt;&gt; 8) &amp; 0xff,
00157             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>&gt;&gt; 0) &amp; 0xff,
00158             C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o2">RemotePort</a>,
00159                         (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o5">DummyAddr</a>&gt;&gt;24) &amp; 0xff,
00160             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o5">DummyAddr</a>&gt;&gt;16) &amp; 0xff,
00161             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o5">DummyAddr</a>&gt;&gt; 8) &amp; 0xff,
00162             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o5">DummyAddr</a>&gt;&gt; 0) &amp; 0xff,
00163                         (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o3">LocaleAddr</a>&gt;&gt;24) &amp; 0xff,
00164             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o3">LocaleAddr</a>&gt;&gt;16) &amp; 0xff,
00165             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o3">LocaleAddr</a>&gt;&gt; 8) &amp; 0xff,
00166             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o3">LocaleAddr</a>&gt;&gt; 0) &amp; 0xff,
00167             C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o4">LocalePort</a>);
00168 
00169     <span class="keywordflow">return</span> AddressStr;
00170 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="TCPTransport.h::TCP_PrintConnectionLocale"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* TCP_PrintConnectionLocale           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>AddressStr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00139 {
00140         <span class="comment">/* Or use inet_ntoa() */</span>
00141     sprintf(AddressStr, <span class="stringliteral">"%d.%d.%d.%d:%u"</span>,
00142             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o3">LocaleAddr</a>&gt;&gt;24) &amp; 0xff,
00143             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o3">LocaleAddr</a>&gt;&gt;16) &amp; 0xff,
00144             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o3">LocaleAddr</a>&gt;&gt; 8) &amp; 0xff,
00145             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o3">LocaleAddr</a>&gt;&gt; 0) &amp; 0xff,
00146             C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o4">LocalePort</a>);
00147 
00148     <span class="keywordflow">return</span> AddressStr;
00149 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="TCPTransport.h::TCP_PrintConnectionRemote"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">char* TCP_PrintConnectionRemote           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>AddressStr</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00123 {
00124         <span class="comment">/* Or use inet_ntoa() */</span>
00125     sprintf(AddressStr, <span class="stringliteral">"%d.%d.%d.%d:%u(%d.%d.%d.%d)"</span>,
00126             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>&gt;&gt;24) &amp; 0xff,
00127             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>&gt;&gt;16) &amp; 0xff,
00128             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>&gt;&gt; 8) &amp; 0xff,
00129             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>&gt;&gt; 0) &amp; 0xff,
00130             C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o2">RemotePort</a>,
00131                         (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o5">DummyAddr</a>&gt;&gt;24) &amp; 0xff,
00132             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o5">DummyAddr</a>&gt;&gt;16) &amp; 0xff,
00133             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o5">DummyAddr</a>&gt;&gt; 8) &amp; 0xff,
00134             (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o5">DummyAddr</a>&gt;&gt; 0) &amp; 0xff);
00135 
00136     <span class="keywordflow">return</span> AddressStr;
00137 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="TCPTransport.h::TCP_Receive"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_Receive           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Timeout</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="TCPTransport.h::TCP_Reconfigure"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_Reconfigure           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">Transport</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>TH</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
reconfigure the transport parameters<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>TH</em>&nbsp;</td><td>transport</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01827 {
01828     <a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">TCPTransport</a> *T = <span class="comment">/*(TCPTransport *)*/</span> TH;
01829     <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *C;
01830 
01831     <span class="keywordflow">if</span> (! T) {
01832         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01833     }
01834 
01835     <span class="keywordflow">for</span> (C = T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o3">Connections</a>; C != NULL; C = C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o12">NextConnection</a>) {
01836         <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a17">ChunksManager_Reconfigure</a>(&amp; (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o14">ReceivedData</a>),
01837                                   <a class="code" href="../../de/d8f/_configuration_names_8h.html#a178">STR_configuration_transport_tcpTransport_dataRcvChunkSize</a>,
01838                                   <a class="code" href="../../de/d8f/_configuration_names_8h.html#a179">STR_configuration_transport_tcpTransport_dataRcvInitialNumChunks</a>,
01839                                   <a class="code" href="../../de/d8f/_configuration_names_8h.html#a180">STR_configuration_transport_tcpTransport_dataRcvMaxMemory</a>,
01840                                   &amp; (T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o10">ParamsHandler</a>));
01841         <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a17">ChunksManager_Reconfigure</a>(&amp; (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o15">SentData</a>),
01842                                   <a class="code" href="../../de/d8f/_configuration_names_8h.html#a181">STR_configuration_transport_tcpTransport_dataSndChunkSize</a>,
01843                                   <a class="code" href="../../de/d8f/_configuration_names_8h.html#a182">STR_configuration_transport_tcpTransport_dataSndInitialNumChunks</a>,
01844                                   <a class="code" href="../../de/d8f/_configuration_names_8h.html#a183">STR_configuration_transport_tcpTransport_dataSndMaxMemory</a>,
01845                                   &amp; (T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o10">ParamsHandler</a>));
01846         <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a17">ChunksManager_Reconfigure</a>(&amp; (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o16">SendBuffers</a>),
01847                                   <a class="code" href="../../de/d8f/_configuration_names_8h.html#a184">STR_configuration_transport_tcpTransport_sendBuffersChunkSize</a>,
01848                                   <a class="code" href="../../de/d8f/_configuration_names_8h.html#a185">STR_configuration_transport_tcpTransport_sendBuffersInitialNumChunks</a>,
01849                                   <a class="code" href="../../de/d8f/_configuration_names_8h.html#a186">STR_configuration_transport_tcpTransport_sendBuffersMaxMemory</a>,
01850                                   &amp; (T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o10">ParamsHandler</a>));
01851     }
01852 
01853     <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a24">TCP_InitializeParameters</a>(T);
01854 
01855     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01856 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="TCPTransport.h::TCP_ResetConnection"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_ResetConnection           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>C</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Empties any internal buffers used for sending data on the connection<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>C</em>&nbsp;</td><td>connection to change handlers of.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01687 {
01688     <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *TC = <span class="comment">/*(TCPConnection *)*/</span> C;
01689     <a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">TCPTransport</a> *T = <span class="comment">/*(TCPTransport *)*/</span> TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o13">Transport</a>;
01690 
01691     <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a31">ChunksManager_FreeAllChunks</a>(&amp; (TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o15">SentData</a>));
01692     <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a31">ChunksManager_FreeAllChunks</a>(&amp; (TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o16">SendBuffers</a>));
01693 
01694     <a class="code" href="../../d2/dc9/_platform_8h.html#a17">Platform_UnregisterSocketAndClear</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, &amp;TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o8">WriteEventID</a>);
01695 
01696     <span class="comment">/* This clears only outgoing data ... don't unregister TC-&gt;ReadEventID */</span>
01697 
01698     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01699 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="TCPTransport.h::TCP_Send"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_Send           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Immediate</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends a buffer through a TCP connection (the write operation is non blocking and any data which can't be written will be queued).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>C</em>&nbsp;</td><td>connection to send through </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>buffer to send </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Immediate</em>&nbsp;</td><td>whether or not to send immediately or try to combine into a larger buffer (recommend this should be TRUE because underlying TCP stack should try to combine (waiting up to 200ms).</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise.</dd></dl>
--TC-&gt;InUseCount;<p>
--TC-&gt;InUseCount;<p>
--TC-&gt;InUseCount;<p>
--TC-&gt;InUseCount;<p>
--TC-&gt;InUseCount;<p>
--TC-&gt;InUseCount;<p>
--TC-&gt;InUseCount;<p>
--TC-&gt;InUseCount; <div class="fragment"><pre class="fragment">01358 {
01359     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
01360     MessageHeader Header;
01361     <a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> SBH;
01362     <a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html">TCPSendBuffer</a> *SB;
01363     <span class="keywordtype">int</span> BufferLength;
01364 
01365     <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *TC = <span class="comment">/*(TCPConnection *)*/</span> C;
01366 
01367         memcpy(&amp;Header, BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>,<span class="keyword">sizeof</span>(MessageHeader));
01368     BufferLength = <a class="code" href="../../df/dde/_defs_8h.html#a12">IPDR_NTOHL</a>(Header.MessageLength);
01369 
01370     <span class="comment">/*** ++TC-&gt;InUseCount; ***/</span>
01371 
01372     <a class="code" href="../../da/df4/_log_8h.html#a31">Log_Write3</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a2">CONNECTION_LOG</a>(TC), <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>, <span class="stringliteral">"TCP_Send"</span>,
01373                <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a6">MSG_TCP_SEND</a>,
01374                <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a40">TCP_GetConnectionInfoStr</a>(TC),
01375                BufferLength, <a class="code" href="../../d4/d2e/group___i_p_d_r___socket.html#ga1">Platform_SOCKET_DISPLAY</a>(TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o6">FD</a>));
01376 
01377     <span class="comment">/* check if the current list of send buffers is empty, if it is, create</span>
01378 <span class="comment">       a new SendBuffer and set it to point to the current buffer */</span>
01379     <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a33">ChunksManager_GetLastBuffer</a>(&amp; (TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o16">SendBuffers</a>),
01380                                 <span class="keyword">sizeof</span>(<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html">TCPSendBuffer</a>), &amp; SBH);
01381     <span class="keywordflow">if</span> (<a class="code" href="../../db/d10/_chunks_manager_8h.html#a2">BUFFER_IS_NULL</a>(SBH)) {
01382         Status = <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a19">ChunksManager_AllocateBuffer</a>(&amp; (TC-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o16">SendBuffers</a>),
01383                                               <span class="keyword">sizeof</span>(<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html">TCPSendBuffer</a>),
01384                                               &amp; SBH);
01385         <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01386             <span class="comment">/* XXX should signal error event */</span>
01387             <a class="code" href="../../da/df4/_log_8h.html#a31">Log_Write3</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a2">CONNECTION_LOG</a>(TC), <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>, <span class="stringliteral">"TCP_Send[1]"</span>,
01388                        <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a10">MSG_TCP_ALLOC_SENDBUFFER_FAILED</a>,
01389                        <span class="keyword">sizeof</span>(<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html">TCPSendBuffer</a>),
01390                        <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a40">TCP_GetConnectionInfoStr</a>(TC), <a class="code" href="../../d4/d2e/group___i_p_d_r___socket.html#ga1">Platform_SOCKET_DISPLAY</a>(TC-&gt;FD));
01392             <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a27">TCP_HandleDisconnection</a>(TC);
01393             <span class="keywordflow">return</span> Status;
01394         }
01395         SB = (TCPSendBuffer *) SBH.<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>;
01396         SB-&gt;<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html#o0">StartBuffer</a> = *BH;
01397         SB-&gt;<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html#o1">Size</a> = BufferLength;
01398         <a class="code" href="../../da/df4/_log_8h.html#a19">Log_OutputStr3</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a2">CONNECTION_LOG</a>(TC), <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>, <span class="stringliteral">"TCP_Send"</span>,
01399                        <span class="stringliteral">"buffer-null: SB-&gt;Size(%u) SB-&gt;StartBuffer.Data=0x%p, Immediate=%d"</span>,
01400                        SB-&gt;<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html#o1">Size</a>, SB-&gt;<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html#o0">StartBuffer</a>.<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>, Immediate);
01401 
01402         <span class="keywordflow">if</span> (! Immediate) {
01404             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01405         }
01406     } <span class="keywordflow">else</span> {
01407         SB = (TCPSendBuffer *) SBH.<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>;
01408         <a class="code" href="../../da/df4/_log_8h.html#a19">Log_OutputStr3</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a2">CONNECTION_LOG</a>(TC), <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>, <span class="stringliteral">"TCP_Send"</span>,
01409                        <span class="stringliteral">"buffer-non-null: SB-&gt;Size(%u) SB-&gt;StartBuffer.Data=0x%p, Immediate=%d"</span>,
01410                        SB-&gt;<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html#o1">Size</a>, SB-&gt;<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html#o0">StartBuffer</a>.<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>, Immediate);
01411             <span class="keywordflow">if</span> (SB-&gt;<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html#o0">StartBuffer</a>.<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a> + SB-&gt;<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html#o1">Size</a> == BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>) {
01412                 SB-&gt;<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html#o1">Size</a> += BufferLength;
01413                 <span class="keywordflow">if</span> (! Immediate) {
01415                     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01416                 }
01417             } <span class="keywordflow">else</span> {
01418                 <span class="keywordflow">if</span> (! Immediate &amp;&amp; TC-&gt;WriteEventID == NULL) {
01419                     Status = <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a11">TCP_SendBuffers</a>(TC);
01420                     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01421                         <span class="comment">/* assume that SendBuffers has already logged the error */</span>
01423                         <span class="keywordflow">return</span> Status;
01424                     }
01425                 }
01426 
01427                 Status = <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a19">ChunksManager_AllocateBuffer</a>(&amp; (TC-&gt;SendBuffers),
01428                                                       <span class="keyword">sizeof</span>(TCPSendBuffer),
01429                                                       &amp; SBH);
01430                 <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01431                     <span class="comment">/* XXX should signal error event */</span>
01432                     <a class="code" href="../../da/df4/_log_8h.html#a31">Log_Write3</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a2">CONNECTION_LOG</a>(TC), <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>, <span class="stringliteral">"TCP_Send[2]"</span>,
01433                                <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a10">MSG_TCP_ALLOC_SENDBUFFER_FAILED</a>,
01434                                <span class="keyword">sizeof</span>(TCPSendBuffer),
01435                                <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a40">TCP_GetConnectionInfoStr</a>(TC), <a class="code" href="../../d4/d2e/group___i_p_d_r___socket.html#ga1">Platform_SOCKET_DISPLAY</a>(TC-&gt;FD));
01437                     <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a27">TCP_HandleDisconnection</a>(TC);
01438                     <span class="keywordflow">return</span> Status;
01439                 }
01440                 SB = (TCPSendBuffer *) SBH.<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>;
01441                 SB-&gt;<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html#o0">StartBuffer</a> = *BH;
01442                 SB-&gt;<a class="code" href="../../d3/db2/struct_t_c_p_send_buffer.html#o1">Size</a> = BufferLength;
01443 
01444                 <span class="keywordflow">if</span> (! Immediate) {
01446                     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01447                 }
01448             }
01449     }
01450 
01451     <span class="comment">/* if there is already a write callback registered (due to a previous</span>
01452 <span class="comment">       blocking write, do nothing) and return since the callback will later</span>
01453 <span class="comment">       be invoked and the data will be sent */</span>
01454 
01455     <span class="keywordflow">if</span> (TC-&gt;WriteEventID != NULL) {
01456         <a class="code" href="../../da/df4/_log_8h.html#a18">Log_OutputStr2</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a2">CONNECTION_LOG</a>(TC), <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>, <span class="stringliteral">"TCP_Send"</span>,
01457                        <span class="stringliteral">"Already has write callback (%p) %.125s"</span>, TC-&gt;WriteEventID, <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a40">TCP_GetConnectionInfoStr</a>(TC));
01459         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01460     }
01461 
01463     <span class="keywordflow">return</span> <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a11">TCP_SendBuffers</a>(TC);
01464 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="TCPTransport.h::TCP_SetConnectionHandlers"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_SetConnectionHandlers           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="../../db/dcd/struct_i_p_d_r__tag___connection_handlers.html">IPDR_tag_ConnectionHandlers</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Handlers</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Args</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="TCPTransport.h::TCP_Shutdown"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> TCP_Shutdown           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">Transport</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Handle</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Shutdown a transport.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Handle</em>&nbsp;</td><td>transport handle</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01301 {
01302     <a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html">TCPTransport</a> *T = <span class="comment">/*(TCPTransport *)*/</span> Handle;
01303     <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *C1, *C;
01304 
01305     <span class="keywordflow">if</span> (T == NULL) {
01306         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01307     }
01308 
01309     C = <span class="comment">/*(TCPConnection *)*/</span> T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o3">Connections</a>;
01310 
01311     <span class="comment">/* Note: no check is done for C-&gt;InUseCount ... this code should</span>
01312 <span class="comment">       only be used when doing a final cleanup. */</span>
01313 
01314     <span class="keywordflow">while</span> (C != NULL) {
01315         C1 = C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o12">NextConnection</a>;
01316         <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a1">TRANSPORT_LOG</a>, <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>, <span class="stringliteral">"TCP_Shutdown"</span>,
01317                    <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a8">MSG_TCP_CLOSE</a>, <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a40">TCP_GetConnectionInfoStr</a>(C), <a class="code" href="../../d4/d2e/group___i_p_d_r___socket.html#ga1">Platform_SOCKET_DISPLAY</a>(C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o6">FD</a>));
01318         <a class="code" href="../../d2/dc9/_platform_8h.html#a17">Platform_UnregisterSocketAndClear</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, &amp;C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o7">ReadEventID</a>);
01319         <a class="code" href="../../d2/dc9/_platform_8h.html#a17">Platform_UnregisterSocketAndClear</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, &amp;C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o8">WriteEventID</a>);
01320         <a class="code" href="../../d2/dc9/_platform_8h.html#a44">Platform_CloseAndInvalidate</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, &amp;C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o6">FD</a>);
01321         <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a18">ChunksManager_Destroy</a>(&amp; (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o14">ReceivedData</a>));
01322         <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a18">ChunksManager_Destroy</a>(&amp; (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o15">SentData</a>));
01323         <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a18">ChunksManager_Destroy</a>(&amp; (C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o16">SendBuffers</a>));
01324         strncpy(C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o0">eyecatcher</a>, <span class="stringliteral">"Dtcpcon"</span>, <span class="keyword">sizeof</span> C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o0">eyecatcher</a>);
01325         <a class="code" href="../../d2/dc9/_platform_8h.html#a20">Platform_MemoryFree</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, C);
01326         C = C1;
01327     }
01328 
01329     <a class="code" href="../../d2/dc9/_platform_8h.html#a17">Platform_UnregisterSocketAndClear</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, &amp;T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o7">AcceptEventID</a>);
01330     <span class="keywordflow">if</span> (<a class="code" href="../../dc/d2f/group___i_p_d_r__transitional__typedefs.html#ga2">IPDR_IsValidSocket</a>(T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o6">SocketFD</a>)) {
01331         <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(TRANSPORT_LOG, <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>, <span class="stringliteral">"TCP_Shutdown"</span>,
01332                    <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a8">MSG_TCP_CLOSE</a>, <span class="stringliteral">"accept-socket"</span>, <a class="code" href="../../d4/d2e/group___i_p_d_r___socket.html#ga1">Platform_SOCKET_DISPLAY</a>(T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o6">SocketFD</a>));
01333         <a class="code" href="../../d2/dc9/_platform_8h.html#a44">Platform_CloseAndInvalidate</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, &amp;T-&gt;<a class="code" href="../../d5/d51/struct_i_p_d_r__tag___t_c_p_transport.html#o6">SocketFD</a>);
01334     }
01335 
01336     <a class="code" href="../../d2/dc9/_platform_8h.html#a20">Platform_MemoryFree</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, T);
01337 
01338     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01339 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 22:28:24 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
