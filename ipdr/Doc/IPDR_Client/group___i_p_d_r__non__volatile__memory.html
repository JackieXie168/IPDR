<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Non-volatile (persistent) memory services</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>Non-volatile (persistent) memory services<br>
<small>
[<a class="el" href="group___i_p_d_r__platform.html">Platform abstraction</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_i_p_d_r___persistence_services.html">IPDR_PersistenceServices</a></td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_p_d_r__non__volatile__memory.html#ga0">IPDR_PersistentStore_t</a> )(<a class="el" href="struct_i_p_d_r__tag___platform_arg.html">IPDR_PlatformArg</a> P, const char *UnitName, const char *Buffer, unsigned int BufferLength)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___i_p_d_r__non__volatile__memory.html#ga1">IPDR_PersistentRetrieve_t</a> )(<a class="el" href="struct_i_p_d_r__tag___platform_arg.html">IPDR_PlatformArg</a> P, const char *UnitName, char **Buffer, unsigned int *BufferLength)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<dl compact><dt><b>Note:</b></dt><dd>Non-volatile memory is not currently used. It was originally defined as a way of dumping the persistent parts of the MIB. See <a class="el" href="group___i_p_d_r___m_i_b__related.html">SNMP agent support: MIB-related functions and types</a> for more details on how to save and restore the MIB data.</dd></dl>
If you do not with to support this, you can provide functions which return <a class="el" href="group___i_p_d_r__general__typedefs.html#gga15a189">IPDR_ERR_PERSISTENCE_ERROR</a>.<p>
The host application may supply the library a set of functions for using non-volatile memory. The interface to this memory assumes the ability to use multiple, named units of information simultaneously.<p>
The library uses this memory to store configuration information, such as the list of collectors (servers) and the current configuration of templates (enabled or disabled keys). Data records are not stored in non-volatile memory, so it is accessed only occasionally.<p>
The transmitter (client) should be able to work properly even when its configuration cannot be stored in persistent memory. (This requires manual configuration of collectors (servers), at least, after re-starting the transmitter (client).)<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="group___i_p_d_r___m_i_b__related.html">SNMP agent support: MIB-related functions and types</a> </dd></dl>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="ga1" doxytag="IPDR.h::IPDR_PersistentRetrieve_t"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef <a class="el" href="group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>(* <a class="el" href="group___i_p_d_r__non__volatile__memory.html#ga1">IPDR_PersistentRetrieve_t</a>)(<a class="el" href="struct_i_p_d_r__tag___platform_arg.html">IPDR_PlatformArg</a> P, const char *UnitName, char **Buffer, unsigned int *BufferLength)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve data from non-volatile (persistent) memory. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>P</em>&nbsp;</td><td>The context argument when calling platform function, as passed to <a class="el" href="group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>UnitName</em>&nbsp;</td><td>The name of the unit of memory to retrieve, typically a file name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Buffer</em>&nbsp;</td><td>(output) A pointer to a buffer that can be freed using the <a class="el" href="group___i_p_d_r__memory__services.html#ga2">IPDR_MemoryFree_t</a>. This functionstores the retrieved information in this buffer. The IPDR transmitter (client) will use <a class="el" href="group___i_p_d_r__memory__services.html#ga2">IPDR_MemoryFree_t</a> to free this. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BufferLength</em>&nbsp;</td><td>(output) The number of bytes retrieved. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="group___i_p_d_r__general__typedefs.html#gga15a176">IPDR_OK</a> on success; <a class="el" href="group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="ga0" doxytag="IPDR.h::IPDR_PersistentStore_t"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef <a class="el" href="group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>(* <a class="el" href="group___i_p_d_r__non__volatile__memory.html#ga0">IPDR_PersistentStore_t</a>)(<a class="el" href="struct_i_p_d_r__tag___platform_arg.html">IPDR_PlatformArg</a> P, const char *UnitName, const char *Buffer, unsigned int BufferLength)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Store data into non-volatile (persistent) memory. The function must allow a named unit of memory to be replaced by another unit with the same <em>UnitName</em> but with a different <em>BufferLength</em>. This can happen during re-configuration. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>UnitName</em>&nbsp;</td><td>The name of the unit of memory to store, typically a file name. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Buffer</em>&nbsp;</td><td>Pointer to the data to be stored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BufferLength</em>&nbsp;</td><td>Number of bytes to store; if 0 then delete the data from non-volatile memory. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>P</em>&nbsp;</td><td>The context argument when calling platform function, as passed to <a class="el" href="group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="group___i_p_d_r__general__typedefs.html#gga15a176">IPDR_OK</a> on success; <a class="el" href="group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon May 30 15:54:42 2005 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
