<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: ForDoxygen/src/Exporter/Templates.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="../../dir_000000.html">ForDoxygen</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000008.html">src</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000012.html">Exporter</a></div>
<h1>Templates.c File Reference</h1><code>#include &lt;<a class="el" href="../../d4/d3a/ipdr_2include_2_i_p_d_r_2_config_8h.html">IPDR/Config.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../dc/d6d/ipdr_2src_2_exporter_2_templates_8h.html">Exporter/Templates.h</a>&gt;</code><br>
<code>#include &lt;stddef.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d6/dbc/ipdr_2src_2_common_2_protocol_8h.html">Common/Protocol.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../df/d5f/ipdr_2src_2_common_2_memory_management_8h.html">Common/MemoryManagement.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../df/d56/ipdr_2src_2_common_2_common_util_8h.html">Common/CommonUtil.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../dc/d2e/ipdr_2src_2_exporter_2_exporter_msgs_8h.html">Exporter/ExporterMsgs.h</a>&gt;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef int(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a2">KeyLengthFunc</a> )(const void *)</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a3">GetFixedLengthKeysSize</a> (int baseType)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../db/d88/ipdr_2src_2_exporter_2_templates_8c.html#a2">KeyLengthFunc</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a4">GetKeyLengthFunc</a> (int baseType)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a5">Template_CopyTemplate</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> **NewTmpl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a6">Template_GetStringLength</a> (const void *Addr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a7">Template_IsModified</a> (<a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl, int NumKeys, const KeyBlock *KB, <a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> *IsModified)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a8">Template_ModifyTemplate</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl, int NumKeys, const KeyBlock *KB, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> **NewTmpl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a9">Template_BuildMixedFixedLengthRecord</a> (<a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *CMgr, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *T, const void *Data, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, unsigned long *RecordSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a10">Template_BuildFuncFixedLengthRecord</a> (<a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *CMgr, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *T, const void *Data, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, unsigned long *RecordSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a11">Template_BuildOffsetFixedLengthRecord</a> (<a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *CMgr, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *T, const void *Data, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, unsigned long *RecordSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a12">Template_BuildMixedVarLengthRecord</a> (<a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *CMgr, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *T, const void *Data, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, unsigned long *RecordSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a13">Template_BuildFuncVarLengthRecord</a> (<a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *CMgr, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *T, const void *Data, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, unsigned long *RecordSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a14">Template_BuildOffsetVarLengthRecord</a> (<a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *CMgr, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *T, const void *Data, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, unsigned long *RecordSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a15">Templates_Initialize</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a16">Key_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a17">Template_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a18">Template_AddKey</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *T, int KeyID, int KeyTypeID, const char *Name, const char *Label, const char *Help, unsigned int Enabled, unsigned int AccessType, void *ExtraData, <a class="el" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga20">IPDR_KeyAccessor</a> KeyAccessor)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a19">Template_Create</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, int TemplateID, const char *SchemaName, const char *TypeName, int NumKeys, <a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> StatusFlag, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> **T)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a20">Template_Reset</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *T)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a21">IsEnabled</a> (const KeyBlock *K)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a0">Templates_rcsid</a> [] = "@(#) $Id: Templates.c,v 1.32 2005/03/29 09:46:07 dmitryk Exp $"</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a1">Templates_h_rcsid</a> [] = TEMPLATES_H_RCSID</td></tr>

</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a2" doxytag="Templates.c::KeyLengthFunc"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef int(* <a class="el" href="../../db/d88/ipdr_2src_2_exporter_2_templates_8c.html#a2">KeyLengthFunc</a>)(const void *)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a3" doxytag="Templates.c::GetFixedLengthKeysSize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int GetFixedLengthKeysSize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>baseType</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns size of fixed length template field <div class="fragment"><pre class="fragment">00876 {
00877         <span class="keywordflow">switch</span>(baseType)
00878         {
00879                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a129">XDR_TYPE_INT</a>:
00880                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a130">XDR_TYPE_UINT</a>:
00881                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a133">XDR_TYPE_FLOAT</a>:
00882                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a145">XDR_TYPE_IPV4ADDR</a>:
00883                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a143">XDR_TYPE_DATETIME</a>:
00884                         <span class="keywordflow">return</span> 4 ;
00885                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a131">XDR_TYPE_LONG</a>:
00886                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a132">XDR_TYPE_ULONG</a>:
00887                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a134">XDR_TYPE_DOUBLE</a>:
00888                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a148">XDR_TYPE_TIMEUSEC</a>:
00889                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a144">XDR_TYPE_TIMEMSEC</a>:
00890                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a149">XDR_TYPE_MACADDR</a>:
00891                         <span class="keywordflow">return</span> 8;
00892                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a138">XDR_TYPE_BOOLEAN</a>:
00893                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a139">XDR_TYPE_BYTE</a>:
00894                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a140">XDR_TYPE_UBYTE</a>:
00895                         <span class="keywordflow">return</span> 1;
00896                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a141">XDR_TYPE_SHORT</a>:
00897                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a142">XDR_TYPE_USHORT</a>:
00898                         <span class="keywordflow">return</span> 2;
00899                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a146">XDR_TYPE_IPV6ADDR</a>:
00900                         <span class="keywordflow">return</span> 16;
00901                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a147">XDR_TYPE_UUID</a>:
00902                         <span class="keywordflow">return</span> 20;
00903         }
00904         <span class="keywordflow">return</span> 0;
00905 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="Templates.c::GetKeyLengthFunc"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../db/d88/ipdr_2src_2_exporter_2_templates_8c.html#a2">KeyLengthFunc</a> GetKeyLengthFunc           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>baseType</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns function for calculating variable type lenght <div class="fragment"><pre class="fragment">00911 {
00912         <span class="keywordflow">switch</span>(baseType)
00913         {
00914                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a135">XDR_TYPE_BASE64</a>:
00915                 <span class="comment">/*case XDR_TYPE_HEXBINARY:*/</span> <span class="comment">/* -somehow they have the same number */</span>
00916                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a137">XDR_TYPE_STRING</a>:
00917                         <span class="keywordflow">return</span> <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a6">Template_GetStringLength</a>;
00918         }
00919     <span class="keywordflow">return</span> NULL;
00920 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="Templates.c::IsEnabled"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int IsEnabled           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const KeyBlock *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>K</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Gets the enabled value of Key block as it comes from protocol<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>K</em>&nbsp;</td><td>Key Block (field descriptor)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a> if enabled, <a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a> otherwise </dd></dl>
<div class="fragment"><pre class="fragment">01252 {
01253         <span class="keywordflow">return</span> <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>;
01254 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="Templates.c::Key_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Key_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete a key <dl compact><dt><b>Note:</b></dt><dd>not static --- used by MemoryManagement.c</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Obj</em>&nbsp;</td><td>object reference </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00931 {
00932     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Obj;
00933 
00934     <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(PS, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>);
00935     <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(PS, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o3">Label</a>);
00936     <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(PS, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o4">Help</a>);
00937 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="Templates.c::Template_AddKey"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Template_AddKey           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>T</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>KeyID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>KeyTypeID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Label</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Help</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>Enabled</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>AccessType</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ExtraData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga20">IPDR_KeyAccessor</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>KeyAccessor</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add a key to a template.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>T</em>&nbsp;</td><td>template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>KeyID</em>&nbsp;</td><td>key identifier </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>KeyTypeID</em>&nbsp;</td><td>key type identifier </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>key name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Label</em>&nbsp;</td><td>key label </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Help</em>&nbsp;</td><td>key help string </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Enabled</em>&nbsp;</td><td>key is enabled </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>AccessType</em>&nbsp;</td><td>accessor type (ACCESS_BY_OFFSET or by FUNCTION) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ExtraData</em>&nbsp;</td><td>additional data attached to key </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>KeyAccessor</em>&nbsp;</td><td>either accessor function of offset</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00986 {
00987     <span class="keywordtype">int</span> Status, Index;
00988     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K;
00989     <span class="keywordtype">int</span> j;
00990         
00991         <span class="keywordflow">if</span>( KeyID == 0 || KeyTypeID == 0 || Name == NULL )
00992         {
00993                 <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a6">SESSION_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a169">IPDR_LEVEL_ERROR</a>,                           <span class="stringliteral">"Template_AddKey"</span>,
00994                                         <span class="stringliteral">"INVALID KEY DATA &lt;%d&gt;"</span>,
00995                                         T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a>);
00996                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a180">IPDR_ERR</a>;
00997         }       
00998 
00999     <span class="comment">/* Check for duplicate within this template. Keys must be unique a</span>
01000 <span class="comment">     * template but need not be unique across templates. */</span>
01001 
01002     <span class="keywordflow">for</span> (j = 0; j &lt; T-&gt;Keys.Length; j++) {
01003         <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a>* Kx = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
01004                 <span class="keywordflow">if</span> (Kx == NULL || Kx-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a> == KeyID || 
01005                         0 == strcmp(Kx-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>, Name) <span class="comment">/*||</span>
01006 <span class="comment">                        0 == strcmp(Kx-&gt;Label, Label)*/</span>) {
01007                         <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a38">Log_Write10</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a6">SESSION_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a169">IPDR_LEVEL_ERROR</a>, <span class="stringliteral">"Template_AddKey"</span>,
01008                                                 <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a44">MSG_EXPORTER_DUPLICATE_KEY</a>,
01009                                                 T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a>, T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>,
01010                                                 KeyID, KeyTypeID, Name, Label==NULL?<span class="stringliteral">""</span>:Label,
01011                                                 Kx-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a>, Kx-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>, Kx-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>, Kx-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o3">Label</a>==NULL?<span class="stringliteral">""</span>:Kx-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o3">Label</a>);
01012                         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a199">IPDR_ERR_KEY_ALREADY_EXISTS</a>;
01013                 }
01014     }
01015 
01016     Status = <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a2">Object_Allocate</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a>), <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a16">Key_Destructor</a>, (<span class="keywordtype">void</span> **) &amp; K);
01017     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01018         <span class="keywordflow">return</span> Status;
01019 
01020     Status = <a class="code" href="../../d0/dfd/_for_doxygen_2src_2_common_2_common_util_8c.html#a5">Util_StrDup</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>, Name, &amp; (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>));
01021     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01022         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(SESSION_PLATFORM, K);
01023         <span class="keywordflow">return</span> Status;
01024     }
01025 
01026     Status = <a class="code" href="../../d0/dfd/_for_doxygen_2src_2_common_2_common_util_8c.html#a5">Util_StrDup</a>(SESSION_PLATFORM, Label, &amp; (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o3">Label</a>));
01027     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01028         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(SESSION_PLATFORM, K);
01029         <span class="keywordflow">return</span> Status;
01030     }
01031 
01032     Status = <a class="code" href="../../d0/dfd/_for_doxygen_2src_2_common_2_common_util_8c.html#a5">Util_StrDup</a>(SESSION_PLATFORM, Help, &amp; (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o4">Help</a>));
01033     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01034         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(SESSION_PLATFORM, K);
01035         <span class="keywordflow">return</span> Status;
01036     }
01037 
01038     K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a> = KeyID;
01039     K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a> = KeyTypeID;
01040     K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o6">AccessType</a> = AccessType;
01041     K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o7">ExtraData</a> = ExtraData;
01042     K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a> = Enabled;
01043     K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a> = KeyAccessor;
01044     K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a> = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a3">GetFixedLengthKeysSize</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>);
01045 
01046     Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(SESSION_PLATFORM, &amp; (T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>), K, &amp; Index);
01047     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01048         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(SESSION_PLATFORM, K);
01049         <span class="keywordflow">return</span> Status;
01050     }
01051 
01052     <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a36">Log_Write8</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a6">SESSION_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a172">IPDR_LEVEL_DEBUG</a>, <span class="stringliteral">"Template_AddKey"</span>,
01053                <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a14">MSG_EXPORTER_CREATE_KEY</a>,
01054                T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a>, T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a> == NULL ? <span class="stringliteral">""</span> : T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>,
01055                KeyID, KeyTypeID, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a> == NULL ? <span class="stringliteral">""</span> : K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>, <span class="stringliteral">""</span>,
01056                <span class="stringliteral">""</span>, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>);
01057 
01058     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
01059 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="Templates.c::Template_BuildFuncFixedLengthRecord"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Template_BuildFuncFixedLengthRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CMgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>T</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long *&nbsp;</td>
          <td class="mdname" nowrap> <em>RecordSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Generate a record using a template containing only accessors with all fixed length keys.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CMgr</em>&nbsp;</td><td>chunks manager </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>associated session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>T</em>&nbsp;</td><td>template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Data</em>&nbsp;</td><td>data to generate record from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>generated record (output) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RecordSize</em>&nbsp;</td><td>size of the genreated record (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise.</dd></dl>
((XDR_UINT*)Ptr) = htonl(*((XDR_UINT*)Ptr));<p>
((XDR_ULONG*)Ptr) = htonll(*((XDR_ULONG*)Ptr));<p>
((XDR_USHORT*)Ptr) = htons(*((XDR_USHORT*)Ptr)); <div class="fragment"><pre class="fragment">00396 {
00397     <span class="keywordtype">int</span> i;
00398         <span class="keyword">const</span> <span class="keywordtype">void</span> *Value;
00399     <span class="keywordtype">char</span> *Ptr;
00400     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K;
00401     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00402 
00403     Status =  <a class="code" href="../../d5/d9f/_for_doxygen_2src_2_common_2_chunks_manager_8c.html#a19">ChunksManager_AllocateBuffer</a>(CMgr, T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o7">FixedLengthSize</a>, BH);
00404     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00405         <span class="keywordflow">return</span> Status;
00406 
00407     *RecordSize = T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o7">FixedLengthSize</a>;
00408 
00409     Ptr = BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a> + <span class="keyword">sizeof</span>(DataMessage);
00410     <span class="keywordflow">for</span> (i = 0; i &lt; T-&gt;Keys.Length; i++) {
00411         K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
00412         <span class="keywordflow">if</span> (!K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>)
00413             <span class="keywordflow">continue</span>;
00414         ((<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga0">IPDR_KeyAccessor</a>) K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>)(Data, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o7">ExtraData</a>, &amp; Value);
00415                 <span class="comment">/*memcpy(Ptr, Value, K-&gt;ValueLength);*/</span>
00416                 <span class="keywordflow">switch</span>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>){
00417                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a129">XDR_TYPE_INT</a>:
00418                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a130">XDR_TYPE_UINT</a>:
00419                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a133">XDR_TYPE_FLOAT</a>:
00420                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a143">XDR_TYPE_DATETIME</a>:
00421                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a145">XDR_TYPE_IPV4ADDR</a>:
00422                                 {
00423                                         <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga3">XDR_UINT</a> tv = 0;
00424                                         memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00425                                         tv = htonl(tv);
00426                                         memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00427                                 }
00429                                 <span class="keywordflow">break</span>;
00430                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a131">XDR_TYPE_LONG</a>:
00431                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a132">XDR_TYPE_ULONG</a>:
00432                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a134">XDR_TYPE_DOUBLE</a>:
00433                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a148">XDR_TYPE_TIMEUSEC</a>:
00434                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a144">XDR_TYPE_TIMEMSEC</a>:
00435                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a149">XDR_TYPE_MACADDR</a>:
00436                                 {
00437                                         <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga5">XDR_ULONG</a> tv = 0;
00438                                         memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00439                                         tv = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a7">htonll</a>(tv);
00440                                         memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00441                                 }
00443                                 <span class="keywordflow">break</span>;
00444                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a141">XDR_TYPE_SHORT</a>:
00445                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a142">XDR_TYPE_USHORT</a>:
00446                                 {
00447                                         <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga12">XDR_USHORT</a> tv = 0;
00448                                         memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00449                                         tv = htons(tv);
00450                                         memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00451                                 }
00453                                 <span class="keywordflow">break</span>;
00454                         <span class="keywordflow">default</span>:
00455                                 {
00456                                         memcpy(Ptr, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00457                                 }
00458                                 <span class="keywordflow">break</span>;
00459                 };
00460         Ptr += K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>;
00461     }
00462 
00463     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00464 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="Templates.c::Template_BuildFuncVarLengthRecord"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Template_BuildFuncVarLengthRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CMgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>T</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long *&nbsp;</td>
          <td class="mdname" nowrap> <em>RecordSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Generate a record using a template containing accessors and variable length keys.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CMgr</em>&nbsp;</td><td>chunks manager </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>associated session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>T</em>&nbsp;</td><td>template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Data</em>&nbsp;</td><td>data to generate record from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>generated record (output) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RecordSize</em>&nbsp;</td><td>size of the genreated record (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise.</dd></dl>
((XDR_UINT*)Ptr) = htonl(*((XDR_UINT*)Ptr));<p>
((XDR_ULONG*)Ptr) = htonll(*((XDR_ULONG*)Ptr));<p>
((XDR_USHORT*)Ptr) = htons(*((XDR_USHORT*)Ptr));<p>
((XDR_INT*)Ptr) = htonl(*((XDR_INT*)Ptr)); <div class="fragment"><pre class="fragment">00649 {
00650     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, KeyLength;
00651     <span class="keyword">const</span> <span class="keywordtype">void</span> *Value;
00652     <span class="keywordtype">char</span> *Ptr;
00653     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K;
00654     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00655         <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a2">KeyLengthFunc</a>   getKeyLengthCB ;
00656 
00657     *RecordSize = T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o7">FixedLengthSize</a>;
00658 
00659     <span class="comment">/* calculate the record size */</span>
00660     <span class="keywordflow">for</span> (i = 0; i &lt; T-&gt;VariableLengthKeys.Length; i++) {
00661         K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o4">VariableLengthKeys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
00662         <span class="keywordflow">if</span> (!K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>)
00663             <span class="keywordflow">continue</span>;
00664         ((<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga0">IPDR_KeyAccessor</a>) K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>)(Data, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o7">ExtraData</a>, &amp; Value);
00665                 getKeyLengthCB = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a4">GetKeyLengthFunc</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>);
00666         *RecordSize += getKeyLengthCB(Value);
00667     }
00668 
00669     Status = <a class="code" href="../../d5/d9f/_for_doxygen_2src_2_common_2_chunks_manager_8c.html#a19">ChunksManager_AllocateBuffer</a>(CMgr, (*RecordSize), BH);
00670     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00671         <span class="keywordflow">return</span> Status;
00672 
00673     Ptr = BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a> + <span class="keyword">sizeof</span>(DataMessage);
00674     <span class="keywordflow">for</span> (i = 0; i &lt; T-&gt;Keys.Length; i++) {
00675         K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
00676         <span class="keywordflow">if</span> (!K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>)
00677             <span class="keywordflow">continue</span>;
00678         ((<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga0">IPDR_KeyAccessor</a>) K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>)(Data, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o7">ExtraData</a>, &amp; Value);
00679         <span class="keywordflow">if</span> (<a class="code" href="../../d2/dda/_for_doxygen_2src_2_common_2_protocol_8h.html#a13">IPDR_IS_FIXED_LENGTH</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>)) {
00680                         <span class="comment">/*memcpy(Ptr, Value, K-&gt;ValueLength);*/</span>
00681                         <span class="keywordflow">switch</span>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>){
00682                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a129">XDR_TYPE_INT</a>:
00683                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a130">XDR_TYPE_UINT</a>:
00684                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a133">XDR_TYPE_FLOAT</a>:
00685                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a143">XDR_TYPE_DATETIME</a>:
00686                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a145">XDR_TYPE_IPV4ADDR</a>:
00687                                         {
00688                                                 <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga3">XDR_UINT</a> tv = 0;
00689                                                 memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00690                                                 tv = htonl(tv);
00691                                                 memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00692                                         }
00694                                         <span class="keywordflow">break</span>;
00695                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a131">XDR_TYPE_LONG</a>:
00696                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a132">XDR_TYPE_ULONG</a>:
00697                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a134">XDR_TYPE_DOUBLE</a>:
00698                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a148">XDR_TYPE_TIMEUSEC</a>:
00699                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a144">XDR_TYPE_TIMEMSEC</a>:
00700                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a149">XDR_TYPE_MACADDR</a>:
00701                                         {
00702                                                 <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga5">XDR_ULONG</a> tv = 0;
00703                                                 memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00704                                                 tv = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a7">htonll</a>(tv);
00705                                                 memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00706                                         }
00708                                         <span class="keywordflow">break</span>;
00709                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a141">XDR_TYPE_SHORT</a>:
00710                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a142">XDR_TYPE_USHORT</a>:
00711                                         {
00712                                                 <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga12">XDR_USHORT</a> tv = 0;
00713                                                 memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00714                                                 tv = htons(tv);
00715                                                 memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00716                                         }
00718                                         <span class="keywordflow">break</span>;
00719                                 <span class="keywordflow">default</span>:
00720                                         {
00721                                                 memcpy(Ptr, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00722                                         }
00723                                         <span class="keywordflow">break</span>;
00724                         };
00725             Ptr += K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>;
00726         } <span class="keywordflow">else</span> {
00727                         getKeyLengthCB = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a4">GetKeyLengthFunc</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>);
00728             KeyLength = getKeyLengthCB(Value);
00729             memcpy(Ptr, Value, KeyLength);
00730                         <span class="keywordflow">if</span>(KeyLength &gt;= <span class="keyword">sizeof</span>(<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga2">XDR_INT</a>))
00731                         {
00732                                 <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga2">XDR_INT</a> tv = 0;
00733                                 memcpy(&amp;tv, Ptr, <span class="keyword">sizeof</span>(<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga2">XDR_INT</a>));
00734                                 tv = htonl(tv);
00735                                 memcpy(Ptr, &amp;tv, <span class="keyword">sizeof</span>(<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga2">XDR_INT</a>));
00737                         }
00738             Ptr += KeyLength;
00739         }
00740     }
00741 
00742     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00743 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="Templates.c::Template_BuildMixedFixedLengthRecord"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Template_BuildMixedFixedLengthRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CMgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>T</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long *&nbsp;</td>
          <td class="mdname" nowrap> <em>RecordSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Generate a record using a template containing both accessors and offsets, with all fixed length keys<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CMgr</em>&nbsp;</td><td>chunks manager </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>associated session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>T</em>&nbsp;</td><td>template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Data</em>&nbsp;</td><td>data to generate record from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>generated record (output) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RecordSize</em>&nbsp;</td><td>size of the genreated record (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise.</dd></dl>
((XDR_UINT*)Ptr) = htonl(*((XDR_UINT*)Ptr));<p>
((XDR_ULONG*)Ptr) = htonll(*((XDR_ULONG*)Ptr));<p>
((XDR_USHORT*)Ptr) = htons(*((XDR_USHORT*)Ptr)); <div class="fragment"><pre class="fragment">00302 {
00303     <span class="keywordtype">int</span> i;
00304     <span class="keyword">const</span> <span class="keywordtype">void</span> *Value;
00305     <span class="keywordtype">char</span> *Ptr;
00306     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K;
00307     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00308 
00309     Status =  <a class="code" href="../../d5/d9f/_for_doxygen_2src_2_common_2_chunks_manager_8c.html#a19">ChunksManager_AllocateBuffer</a>(CMgr, T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o7">FixedLengthSize</a>, BH);
00310     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00311         <span class="keywordflow">return</span> Status;
00312 
00313     *RecordSize = T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o7">FixedLengthSize</a>;
00314 
00315     Ptr = BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a> + <span class="keyword">sizeof</span>(DataMessage);
00316     <span class="keywordflow">for</span> (i = 0; i &lt; T-&gt;Keys.Length; i++) {
00317         K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
00318         <span class="keywordflow">if</span> (!K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>)
00319             <span class="keywordflow">continue</span>;
00320         <span class="keywordflow">if</span> (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o6">AccessType</a> == <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga42">IPDR_ACCESS_BY_FUNCTION</a>)
00321             ((<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga0">IPDR_KeyAccessor</a>) K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>)(Data, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o7">ExtraData</a>, &amp; Value);
00322         <span class="keywordflow">else</span>
00323             Value = (<span class="keyword">const</span> <span class="keywordtype">char</span> *) Data + (<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga1">IPDR_Offset</a>) K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>;
00324 
00325                 <span class="comment">/*memcpy(Ptr, Value, K-&gt;ValueLength);*/</span>
00326                 <span class="keywordflow">switch</span>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>){
00327                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a129">XDR_TYPE_INT</a>:
00328                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a130">XDR_TYPE_UINT</a>:
00329                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a133">XDR_TYPE_FLOAT</a>:
00330                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a143">XDR_TYPE_DATETIME</a>:
00331                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a145">XDR_TYPE_IPV4ADDR</a>:
00332                                 {
00333                                         <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga3">XDR_UINT</a> tv = 0;
00334                                         memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00335                                         tv = htonl(tv);
00336                                         memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00337                                 }
00339                                 <span class="keywordflow">break</span>;
00340                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a131">XDR_TYPE_LONG</a>:
00341                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a132">XDR_TYPE_ULONG</a>:
00342                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a134">XDR_TYPE_DOUBLE</a>:
00343                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a148">XDR_TYPE_TIMEUSEC</a>:
00344                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a144">XDR_TYPE_TIMEMSEC</a>:
00345                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a149">XDR_TYPE_MACADDR</a>:
00346                                 {
00347                                         <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga5">XDR_ULONG</a> tv = 0;
00348                                         memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00349                                         tv = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a7">htonll</a>(tv);
00350                                         memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00351                                 }
00353                                 <span class="keywordflow">break</span>;
00354                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a141">XDR_TYPE_SHORT</a>:
00355                         <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a142">XDR_TYPE_USHORT</a>:
00356                                 {
00357                                         <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga12">XDR_USHORT</a> tv = 0;
00358                                         memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00359                                         tv = htons(tv);
00360                                         memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00361                                 }
00363                                 <span class="keywordflow">break</span>;
00364                         <span class="keywordflow">default</span>:
00365                                 {
00366                                         memcpy(Ptr, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00367                                 }
00368                                 <span class="keywordflow">break</span>;
00369                 };
00370         Ptr += K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>;
00371     }
00372 
00373     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00374 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="Templates.c::Template_BuildMixedVarLengthRecord"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Template_BuildMixedVarLengthRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CMgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>T</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long *&nbsp;</td>
          <td class="mdname" nowrap> <em>RecordSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Generate a record using a template containing both offsets and accessors and variable length keys.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CMgr</em>&nbsp;</td><td>chunks manager </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>associated session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>T</em>&nbsp;</td><td>template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Data</em>&nbsp;</td><td>data to generate record from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>generated record (output) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RecordSize</em>&nbsp;</td><td>size of the genreated record (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise.</dd></dl>
((XDR_UINT*)Ptr) = htonl(*((XDR_UINT*)Ptr));<p>
((XDR_ULONG*)Ptr) = htonll(*((XDR_ULONG*)Ptr));<p>
((XDR_USHORT*)Ptr) = htons(*((XDR_USHORT*)Ptr));<p>
((XDR_INT*)Ptr) = htonl(*((XDR_INT*)Ptr)); <div class="fragment"><pre class="fragment">00527 {
00528     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, KeyLength;
00529     <span class="keyword">const</span> <span class="keywordtype">void</span> *Value;
00530     <span class="keywordtype">char</span> *Ptr;
00531     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K;
00532     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00533         <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a2">KeyLengthFunc</a>   getKeyLengthCB ;
00534 
00535     *RecordSize = T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o7">FixedLengthSize</a>;
00536 
00537     <span class="comment">/* calculate the record size */</span>
00538     <span class="keywordflow">for</span> (i = 0; i &lt; T-&gt;VariableLengthKeys.Length; i++) {
00539         K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o4">VariableLengthKeys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
00540         <span class="keywordflow">if</span> (!K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>)
00541             <span class="keywordflow">continue</span>;
00542         <span class="keywordflow">if</span> (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o6">AccessType</a> == <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga42">IPDR_ACCESS_BY_FUNCTION</a>)
00543             ((<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga0">IPDR_KeyAccessor</a>) K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>)(Data, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o7">ExtraData</a>, &amp; Value);
00544         <span class="keywordflow">else</span>
00545             Value = (<span class="keyword">const</span> <span class="keywordtype">char</span> *) Data + (<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga1">IPDR_Offset</a>) K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>;
00546                 getKeyLengthCB = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a4">GetKeyLengthFunc</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>);
00547         *RecordSize += getKeyLengthCB(Value);
00548     }
00549 
00550     Status = <a class="code" href="../../d5/d9f/_for_doxygen_2src_2_common_2_chunks_manager_8c.html#a19">ChunksManager_AllocateBuffer</a>(CMgr, (*RecordSize), BH);
00551     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00552         <span class="keywordflow">return</span> Status;
00553 
00554     Ptr = BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a> + <span class="keyword">sizeof</span>(DataMessage);
00555     <span class="keywordflow">for</span> (i = 0; i &lt; T-&gt;Keys.Length; i++) {
00556         K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
00557         <span class="keywordflow">if</span> (!K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>)
00558             <span class="keywordflow">continue</span>;
00559         <span class="keywordflow">if</span> (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o6">AccessType</a> == <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga42">IPDR_ACCESS_BY_FUNCTION</a>)
00560             ((<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga0">IPDR_KeyAccessor</a>) K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>)(Data, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o7">ExtraData</a>, &amp; Value);
00561         <span class="keywordflow">else</span>
00562             Value = (<span class="keyword">const</span> <span class="keywordtype">char</span> *) Data + (<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga1">IPDR_Offset</a>) K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>;
00563         <span class="keywordflow">if</span> (<a class="code" href="../../d2/dda/_for_doxygen_2src_2_common_2_protocol_8h.html#a13">IPDR_IS_FIXED_LENGTH</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>)) {
00564                         <span class="comment">/*memcpy(Ptr, Value, K-&gt;ValueLength);*/</span>
00565                         <span class="keywordflow">switch</span>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>){
00566                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a129">XDR_TYPE_INT</a>:
00567                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a130">XDR_TYPE_UINT</a>:
00568                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a133">XDR_TYPE_FLOAT</a>:
00569                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a143">XDR_TYPE_DATETIME</a>:
00570                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a145">XDR_TYPE_IPV4ADDR</a>:
00571                                         {
00572                                                 <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga3">XDR_UINT</a> tv = 0;
00573                                                 memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00574                                                 tv = htonl(tv);
00575                                                 memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00576                                         }
00578                                         <span class="keywordflow">break</span>;
00579                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a131">XDR_TYPE_LONG</a>:
00580                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a132">XDR_TYPE_ULONG</a>:
00581                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a134">XDR_TYPE_DOUBLE</a>:
00582                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a148">XDR_TYPE_TIMEUSEC</a>:
00583                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a144">XDR_TYPE_TIMEMSEC</a>:
00584                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a149">XDR_TYPE_MACADDR</a>:
00585                                         {
00586                                                 <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga5">XDR_ULONG</a> tv = 0;
00587                                                 memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00588                                                 tv = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a7">htonll</a>(tv);
00589                                                 memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00590                                         }
00592                                         <span class="keywordflow">break</span>;
00593                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a141">XDR_TYPE_SHORT</a>:
00594                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a142">XDR_TYPE_USHORT</a>:
00595                                         {
00596                                                 <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga12">XDR_USHORT</a> tv = 0;
00597                                                 memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00598                                                 tv = htons(tv);
00599                                                 memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00600                                         }
00602                                         <span class="keywordflow">break</span>;
00603                                 <span class="keywordflow">default</span>:
00604                                         {
00605                                                 memcpy(Ptr, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00606                                         }
00607                                         <span class="keywordflow">break</span>;
00608                         };
00609             Ptr += K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>;
00610         } <span class="keywordflow">else</span> {
00611                         getKeyLengthCB = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a4">GetKeyLengthFunc</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>);
00612             KeyLength = getKeyLengthCB(Value);
00613             memcpy(Ptr, Value, KeyLength);
00614                         <span class="keywordflow">if</span>(KeyLength &gt;= <span class="keyword">sizeof</span>(<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga2">XDR_INT</a>))
00615                         {
00616                                 <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga2">XDR_INT</a> tv = 0;
00617                                 memcpy(&amp;tv, Ptr, <span class="keyword">sizeof</span>(<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga2">XDR_INT</a>));
00618                                 tv = htonl(tv);
00619                                 memcpy(Ptr, &amp;tv, <span class="keyword">sizeof</span>(<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga2">XDR_INT</a>));
00621                         }
00622             Ptr += KeyLength;
00623         }
00624     }
00625 
00626     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00627 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="Templates.c::Template_BuildOffsetFixedLengthRecord"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Template_BuildOffsetFixedLengthRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CMgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>T</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long *&nbsp;</td>
          <td class="mdname" nowrap> <em>RecordSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Generate a record using a template containing only offsets with all fixed length keys.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CMgr</em>&nbsp;</td><td>chunks manager </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>associated session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>T</em>&nbsp;</td><td>template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Data</em>&nbsp;</td><td>data to generate record from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>generated record (output) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RecordSize</em>&nbsp;</td><td>size of the genreated record (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00486 {
00487     <span class="keywordtype">int</span> i;
00488     <span class="keywordtype">char</span> *Ptr;
00489     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00490 
00491     Status =  <a class="code" href="../../d5/d9f/_for_doxygen_2src_2_common_2_chunks_manager_8c.html#a19">ChunksManager_AllocateBuffer</a>(CMgr, T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o7">FixedLengthSize</a>, BH);
00492     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00493         <span class="keywordflow">return</span> Status;
00494 
00495     *RecordSize = T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o7">FixedLengthSize</a>;
00496 
00497     Ptr = BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a> + <span class="keyword">sizeof</span>(DataMessage);
00498     <span class="keywordflow">for</span> (i = 0; i &lt; T-&gt;NumRegions; i++) {
00499         memcpy(Ptr, (<span class="keyword">const</span> <span class="keywordtype">char</span> *) Data + T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o0">Offset</a>,
00500                T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o1">Length</a>);
00501         Ptr += T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o1">Length</a>;
00502     }
00503 
00504     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00505 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="Templates.c::Template_BuildOffsetVarLengthRecord"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Template_BuildOffsetVarLengthRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CMgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>T</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long *&nbsp;</td>
          <td class="mdname" nowrap> <em>RecordSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Generate a record using a template containing offsets and variable length keys.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CMgr</em>&nbsp;</td><td>chunks manager </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>associated session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>T</em>&nbsp;</td><td>template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Data</em>&nbsp;</td><td>data to generate record from </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>generated record (output) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RecordSize</em>&nbsp;</td><td>size of the genreated record (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise.</dd></dl>
((XDR_UINT*)Ptr) = htonl(*((XDR_UINT*)Ptr));<p>
((XDR_ULONG*)Ptr) = htonll(*((XDR_ULONG*)Ptr));<p>
((XDR_USHORT*)Ptr) = htons(*((XDR_USHORT*)Ptr));<p>
((XDR_INT*)Ptr) = htonl(*((XDR_INT*)Ptr)); <div class="fragment"><pre class="fragment">00765 {
00766     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, KeyLength;
00767     <span class="keyword">const</span> <span class="keywordtype">char</span> *Value;
00768     <span class="keywordtype">char</span> *Ptr;
00769     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K;
00770         <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a2">KeyLengthFunc</a>   getKeyLengthCB ;
00771     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00772 
00773     *RecordSize = T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o7">FixedLengthSize</a>;
00774 
00775     <span class="comment">/* calculate the record size */</span>
00776     <span class="keywordflow">for</span> (i = 0; i &lt; T-&gt;VariableLengthKeys.Length; i++) {
00777                 K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o4">VariableLengthKeys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
00778         <span class="keywordflow">if</span> (!K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>)
00779             <span class="keywordflow">continue</span>;
00780         Value = (<span class="keyword">const</span> <span class="keywordtype">char</span> *) Data + (<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga1">IPDR_Offset</a>) K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>;
00781         getKeyLengthCB = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a4">GetKeyLengthFunc</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>);
00782         *RecordSize += getKeyLengthCB(Value);
00783     }
00784 
00785     Status =  <a class="code" href="../../d5/d9f/_for_doxygen_2src_2_common_2_chunks_manager_8c.html#a19">ChunksManager_AllocateBuffer</a>(CMgr, (*RecordSize), BH);
00786     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00787         <span class="keywordflow">return</span> Status;
00788 
00789     Ptr = BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a> + <span class="keyword">sizeof</span>(DataMessage);
00790     <span class="keywordflow">for</span> (i = 0; i &lt; T-&gt;Keys.Length; i++) {
00791         K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
00792         <span class="keywordflow">if</span> (!K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>)
00793             <span class="keywordflow">continue</span>;
00794         Value = (<span class="keyword">const</span> <span class="keywordtype">char</span> *) Data + (<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga1">IPDR_Offset</a>) K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>;
00795         <span class="keywordflow">if</span> (<a class="code" href="../../d2/dda/_for_doxygen_2src_2_common_2_protocol_8h.html#a13">IPDR_IS_FIXED_LENGTH</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>)) {
00796                         <span class="comment">/*memcpy(Ptr, Value, K-&gt;ValueLength);*/</span>
00797                         <span class="keywordflow">switch</span>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>){
00798                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a129">XDR_TYPE_INT</a>:
00799                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a130">XDR_TYPE_UINT</a>:
00800                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a133">XDR_TYPE_FLOAT</a>:
00801                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a143">XDR_TYPE_DATETIME</a>:
00802                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a145">XDR_TYPE_IPV4ADDR</a>:
00803                                         {
00804                                                 <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga3">XDR_UINT</a> tv = 0;
00805                                                 memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00806                                                 tv = htonl(tv);
00807                                                 memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00808                                         }
00810                                         <span class="keywordflow">break</span>;
00811                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a131">XDR_TYPE_LONG</a>:
00812                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a132">XDR_TYPE_ULONG</a>:
00813                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a134">XDR_TYPE_DOUBLE</a>:
00814                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a148">XDR_TYPE_TIMEUSEC</a>:
00815                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a144">XDR_TYPE_TIMEMSEC</a>:
00816                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a149">XDR_TYPE_MACADDR</a>:
00817                                         {
00818                                                 <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga5">XDR_ULONG</a> tv = 0;
00819                                                 memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00820                                                 tv = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a7">htonll</a>(tv);
00821                                                 memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00822                                         }
00824                                         <span class="keywordflow">break</span>;
00825                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a141">XDR_TYPE_SHORT</a>:
00826                                 <span class="keywordflow">case</span> <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga67a142">XDR_TYPE_USHORT</a>:
00827                                         {
00828                                                 <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga12">XDR_USHORT</a> tv = 0;
00829                                                 memcpy(&amp;tv, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00830                                                 tv = htons(tv);
00831                                                 memcpy(Ptr, &amp;tv, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00832                                         }
00834                                         <span class="keywordflow">break</span>;
00835                                 <span class="keywordflow">default</span>:
00836                                         {
00837                                                 memcpy(Ptr, Value, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>);
00838                                         }
00839                                         <span class="keywordflow">break</span>;
00840                         };
00841             Ptr += K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>;
00842         } <span class="keywordflow">else</span> {
00843                         getKeyLengthCB = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a4">GetKeyLengthFunc</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>);
00844                 KeyLength = getKeyLengthCB(Value);
00845             memcpy(Ptr, Value, KeyLength);
00846                         <span class="keywordflow">if</span>(KeyLength &gt;= <span class="keyword">sizeof</span>(<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga2">XDR_INT</a>))
00847                         {
00848                                 <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga2">XDR_INT</a> tv = 0;
00849                                 memcpy(&amp;tv, Ptr, <span class="keyword">sizeof</span>(<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga2">XDR_INT</a>));
00850                                 tv = htonl(tv);
00851                                 memcpy(Ptr, &amp;tv, <span class="keyword">sizeof</span>(<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga2">XDR_INT</a>));
00853                         }
00854             Ptr += KeyLength;
00855         }
00856     }
00857 
00858     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00859 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="Templates.c::Template_CopyTemplate"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Template_CopyTemplate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Tmpl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>NewTmpl</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a copy of the template (the new template will reference the same keys as the old one, and the ref count of the keys will be increased).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Tmpl</em>&nbsp;</td><td>original template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NewTmpl</em>&nbsp;</td><td>new template (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00164 {
00165     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00166     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *T;
00167 
00168     Status = <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a2">Object_Allocate</a>(PS, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a>), <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a17">Template_Destructor</a>,
00169                              (<span class="keywordtype">void</span> **) &amp; T);
00170     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00171         <span class="keywordflow">return</span> Status;
00172 
00173     <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a4">Object_Duplicate</a>(PS, Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>);
00174     <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a4">Object_Duplicate</a>(PS, Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o2">TypeName</a>);
00175     T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>;
00176     T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o2">TypeName</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o2">TypeName</a>;
00177     T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a>;
00178 
00179     Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a14">DynamicArray_Copy</a>(PS, &amp; (Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>), &amp; (T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>));
00180     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
00181         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(PS, T);
00182         <span class="keywordflow">return</span> Status;
00183     }
00184 
00185     *NewTmpl = T;
00186     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00187 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="Templates.c::Template_Create"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Template_Create           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>TemplateID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>SchemaName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>TypeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>NumKeys</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>StatusFlag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>T</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Generate a new template.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TemplateID</em>&nbsp;</td><td>template identifier </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SchemaName</em>&nbsp;</td><td>template schema name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TypeName</em>&nbsp;</td><td>template type name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumKeys</em>&nbsp;</td><td>initial number of keys </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>StatusFlag</em>&nbsp;</td><td>the "T" flag for the template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>T</em>&nbsp;</td><td>newly generated template (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01078 {
01079     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl;
01080 
01081     <span class="keywordtype">int</span> Status = <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a2">Object_Allocate</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a>),
01082                                  <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a17">Template_Destructor</a>, (<span class="keywordtype">void</span> **) &amp; Tmpl);
01083     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01084         <span class="keywordflow">return</span> Status;
01085 
01086     Status = <a class="code" href="../../d0/dfd/_for_doxygen_2src_2_common_2_common_util_8c.html#a5">Util_StrDup</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>, SchemaName, &amp; (Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>));
01087     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01088         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(SESSION_PLATFORM, Tmpl);
01089         <span class="keywordflow">return</span> Status;
01090     }
01091 
01092     Status = <a class="code" href="../../d0/dfd/_for_doxygen_2src_2_common_2_common_util_8c.html#a5">Util_StrDup</a>(SESSION_PLATFORM, TypeName, &amp; (Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o2">TypeName</a>));
01093     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01094         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(SESSION_PLATFORM, Tmpl);
01095         <span class="keywordflow">return</span> Status;
01096     }
01097 
01098     Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a2">DynamicArray_Create</a>(SESSION_PLATFORM, &amp; (Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>), NumKeys);
01099     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01100         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(SESSION_PLATFORM, Tmpl);
01101         <span class="keywordflow">return</span> Status;
01102     }
01103 
01104     Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a> = NULL;
01105     Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a> = TemplateID;
01106     Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o10">StatusFlag</a> = StatusFlag;
01107 
01108     <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a6">SESSION_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a172">IPDR_LEVEL_DEBUG</a>, <span class="stringliteral">"Template_Create"</span>,
01109                <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a13">MSG_EXPORTER_CREATE_TEMPLATE</a>,
01110                Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a>, Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>?Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>:<span class="stringliteral">"NULL"</span>);
01111 
01112     *T = Tmpl;
01113     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
01114 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="Templates.c::Template_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Template_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete a template. <dl compact><dt><b>Note:</b></dt><dd>not static --- used by MemoryManagement.c</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Obj</em>&nbsp;</td><td>object reference </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00948 {
00949     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *T = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Obj;
00950 
00951     <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(PS, T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>);
00952     <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(PS, T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o2">TypeName</a>);
00953     <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>));
00954     <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o4">VariableLengthKeys</a>));
00955 
00956     <span class="keywordflow">if</span> (T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>)
00957         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a20">Platform_MemoryFree</a>(PS, T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>);
00958 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="Templates.c::Template_GetStringLength"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static int Template_GetStringLength           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Addr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the length of a string key.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>value address</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Key length </dd></dl>
<div class="fragment"><pre class="fragment">00051 {
00052         <span class="keywordflow">if</span>(Addr == NULL)
00053                 <span class="keywordflow">return</span> -1 ;
00054     <span class="keywordflow">return</span> *((<span class="keyword">const</span> <span class="keywordtype">int</span> *) Addr) + <span class="keyword">sizeof</span>(int);
00055 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="Templates.c::Template_IsModified"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Template_IsModified           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Tmpl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>NumKeys</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const KeyBlock *&nbsp;</td>
          <td class="mdname" nowrap> <em>KB</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>IsModified</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks if a template is modified given a a KeyStateVector (a bit vector containing key states (enabled / disabled)<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Tmpl</em>&nbsp;</td><td>template to check </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumKeys</em>&nbsp;</td><td>number of keys </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>KB</em>&nbsp;</td><td>array of key blocks containing updated attributes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>IsModified</em>&nbsp;</td><td>true if the template is modified (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00123 {
00124     <span class="keywordtype">int</span> i, j;
00125     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> FieldID;
00126     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> Enabled;
00127     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K;
00128 
00129     *IsModified = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a>;
00130 
00131     <span class="keywordflow">for</span> (i = 0; i &lt; NumKeys; i++) {
00132         Enabled = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a21">IsEnabled</a>(&amp;KB[i]);
00133         FieldID = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a12">IPDR_NTOHL</a>(KB[i].FieldID);
00134         <span class="keywordflow">for</span> (j = 0; j &lt; Tmpl-&gt;Keys.Length; j++) {
00135             K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
00136             <span class="keywordflow">if</span> (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a> == FieldID) {
00137                 <span class="keywordflow">if</span> (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a> != Enabled) {
00138                     *IsModified = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>;
00139                     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00140                 }
00141                 break ;
00142             }
00143         }
00144     }
00145 
00146     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00147 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="Templates.c::Template_ModifyTemplate"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Template_ModifyTemplate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Tmpl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>NumKeys</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const KeyBlock *&nbsp;</td>
          <td class="mdname" nowrap> <em>KB</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>NewTmpl</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Given a key state vector and a template, create a new template based on the original one with the key state vector applied.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Tmpl</em>&nbsp;</td><td>original template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumKeys</em>&nbsp;</td><td>number of keys in vector </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>KB</em>&nbsp;</td><td>array of key blocks containing updated attributes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NewTmpl</em>&nbsp;</td><td>newly generated template (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00207 {
00208     <span class="keywordtype">int</span> i, j;
00209     <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> FieldID, Enabled;
00210     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00211     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *T;
00212 
00213     T = Tmpl;
00214 
00215     <span class="keywordflow">for</span> (i = 0; i &lt; NumKeys; i++) {
00216         <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K = NULL;
00217         FieldID = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a12">IPDR_NTOHL</a>(KB[i].FieldID);
00218         Enabled = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a21">IsEnabled</a>(&amp;KB[i]);
00219         <span class="keywordflow">for</span> (j = 0; j &lt; Tmpl-&gt;Keys.Length; j++) {
00220             K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
00221             <span class="keywordflow">if</span> (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a> == FieldID)
00222                 <span class="keywordflow">break</span>;
00223         }
00224         <span class="keywordflow">if</span> (! K) {
00225             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a197">IPDR_ERR_TEMPLATE_NOT_FOUND</a>;
00226         }
00227         <span class="keywordflow">if</span> (j == Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>)
00228             <span class="keywordflow">continue</span>;
00229 
00230         <span class="keywordflow">if</span> (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a> != Enabled) {
00231             <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *NewKey;
00232             <span class="keywordflow">if</span> (T == Tmpl) {
00233                 Status = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a5">Template_CopyTemplate</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>, Tmpl, &amp; T);
00234                 <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00235                     <span class="keywordflow">return</span> Status;
00236             }
00237 
00238             Status = <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a2">Object_Allocate</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a>), <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a16">Key_Destructor</a>,
00239                                      (<span class="keywordtype">void</span> **) &amp; NewKey);
00240             <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
00241                 <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(SESSION_PLATFORM, T);
00242                 <span class="keywordflow">return</span> Status;
00243             }
00244 
00245             <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a4">Object_Duplicate</a>(SESSION_PLATFORM, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>);
00246             <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a4">Object_Duplicate</a>(SESSION_PLATFORM, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o3">Label</a>);
00247             <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a4">Object_Duplicate</a>(SESSION_PLATFORM, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o4">Help</a>);
00248 
00249             NewKey-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a>;
00250             NewKey-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>;
00251             NewKey-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>;
00252             NewKey-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o3">Label</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o3">Label</a>;
00253             NewKey-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o4">Help</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o4">Help</a>;
00254             NewKey-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a> = Enabled;
00255             NewKey-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o6">AccessType</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o6">AccessType</a>;
00256             NewKey-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o7">ExtraData</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o7">ExtraData</a>;
00257             NewKey-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>;
00258 
00259             <span class="comment">/* release the previous key */</span>
00260             <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(SESSION_PLATFORM, K);
00261 
00262             T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j] = NewKey;
00263         }
00264     }
00265 
00266     <span class="comment">/* in case no changes occured, use the same template */</span>
00267     <span class="keywordflow">if</span> (T == Tmpl)
00268         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a4">Object_Duplicate</a>(SESSION_PLATFORM, T);
00269     <span class="keywordflow">else</span> {
00270         Status = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a20">Template_Reset</a>(S, T);
00271         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
00272             <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(SESSION_PLATFORM, T);
00273             <span class="keywordflow">return</span> Status;
00274         }
00275     }
00276 
00277     *NewTmpl = T;
00278     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00279 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="Templates.c::Template_Reset"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Template_Reset           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>T</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reset the internal template info after keys have been added.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>T</em>&nbsp;</td><td>template</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01126 {
01127     <span class="keywordtype">int</span> Index, i, j, Status, NumRegions, KeyIndex;
01128     <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> OffsetAccessors = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a>;
01129     <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> FunctionAccessors = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a>;
01130     <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> FixedLength = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>;
01131     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K;
01132     <a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html">Region</a> TempRegion;
01133 
01134     Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a3">DynamicArray_Reset</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>,
01135                                 &amp;(T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o4">VariableLengthKeys</a>), T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>);
01136     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01137         <span class="keywordflow">return</span> Status;
01138 
01139     <span class="keywordflow">if</span> (T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>) {
01140         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a20">Platform_MemoryFree</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>, T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>);
01141         T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a> = NULL;
01142     }
01143 
01144     <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a30">Platform_Check_MEMORYALLOCATEVEC</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>, T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>, T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>, {});
01145 
01146     NumRegions = 0;
01147 
01148     T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o7">FixedLengthSize</a> = 0;
01149     T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o9">Enabled</a> = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a>;
01150 
01151     <span class="comment">/* determine the template type and the fixed length size */</span>
01152 
01153     <span class="keywordflow">for</span> (i = 0; i &lt; T-&gt;Keys.Length; i++) {
01154         K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
01155         if (K != NULL &amp;&amp; K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>) {
01156             T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o9">Enabled</a> = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>;
01157             if (<a class="code" href="../../d2/dda/_for_doxygen_2src_2_common_2_protocol_8h.html#a13">IPDR_IS_FIXED_LENGTH</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>)) {
01158                 K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a> = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a3">GetFixedLengthKeysSize</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>);
01159                 T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o7">FixedLengthSize</a> += K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>;
01160             } <span class="keywordflow">else</span> {
01161                 <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a4">Object_Duplicate</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>, K);
01162                 <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>,
01163                                            &amp; (T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o4">VariableLengthKeys</a>), K, &amp; Index);
01164                 FixedLength = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a>;
01165             }
01166             <span class="keywordflow">if</span> (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o6">AccessType</a> == <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga42">IPDR_ACCESS_BY_FUNCTION</a>)
01167                 FunctionAccessors = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>;
01168             <span class="keywordflow">else</span> {
01169                 OffsetAccessors = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>;
01170                 <span class="keywordflow">if</span> (<a class="code" href="../../d2/dda/_for_doxygen_2src_2_common_2_protocol_8h.html#a13">IPDR_IS_FIXED_LENGTH</a>(K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>)) {
01171                     T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[NumRegions].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o0">Offset</a> = (<a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga1">IPDR_Offset</a>) K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>;
01172                     T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[NumRegions].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o1">Length</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o9">ValueLength</a>;
01173                     T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[NumRegions].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o2">KeyIndex</a> = i;
01174                     NumRegions++;
01175                 }
01176             }
01177         }
01178     }
01179 
01180     <span class="comment">/* select the record building function */</span>
01181 
01182     T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o7">FixedLengthSize</a> += <span class="keyword">sizeof</span>(DataMessage);
01183 
01184     <span class="keywordflow">if</span> (FixedLength) {
01185         <span class="keywordflow">if</span> (FunctionAccessors &amp;&amp; OffsetAccessors)
01186             T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o8">BuildFunc</a> = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a9">Template_BuildMixedFixedLengthRecord</a>;
01187         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FunctionAccessors)
01188             T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o8">BuildFunc</a> = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a10">Template_BuildFuncFixedLengthRecord</a>;
01189         <span class="keywordflow">else</span>
01190             T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o8">BuildFunc</a> = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a11">Template_BuildOffsetFixedLengthRecord</a>;
01191     } <span class="keywordflow">else</span> {
01192         <span class="keywordflow">if</span> (FunctionAccessors &amp;&amp; OffsetAccessors)
01193             T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o8">BuildFunc</a> = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a12">Template_BuildMixedVarLengthRecord</a>;
01194         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (FunctionAccessors)
01195             T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o8">BuildFunc</a> = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a13">Template_BuildFuncVarLengthRecord</a>;
01196         <span class="keywordflow">else</span>
01197             T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o8">BuildFunc</a> = <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a14">Template_BuildOffsetVarLengthRecord</a>;
01198     }
01199 
01200     <span class="comment">/* sort the regions array by offset to optimize keys order */</span>
01201 
01202     <span class="comment">/* each region can be copied by a single memcpy(), which makes</span>
01203 <span class="comment">     * things a bit more efficient. */</span>
01204 
01205     <span class="keywordflow">for</span> (i = 0; i &lt; NumRegions; i++) {
01206         <span class="keywordflow">for</span> (j = i + 1; j &lt; NumRegions; j++) {
01207             <span class="keywordflow">if</span> (T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o0">Offset</a> &gt; T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[j].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o0">Offset</a>) {
01208 
01209                 K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o2">KeyIndex</a>];
01210                 T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o2">KeyIndex</a>] =
01211                     T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[j].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o2">KeyIndex</a>];
01212                 T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[j].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o2">KeyIndex</a>] = K;
01213 
01214                 TempRegion = T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i];
01215                 T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i] = T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[j];
01216                 T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[j] = TempRegion;
01217 
01218                 KeyIndex = T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o2">KeyIndex</a>;
01219                 T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o2">KeyIndex</a> = T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[j].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o2">KeyIndex</a>;
01220                 T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[j].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o2">KeyIndex</a> = KeyIndex;
01221             }
01222         }
01223     }
01224 
01225     <span class="comment">/* merge regions */</span>
01226 
01227     j = 0;
01228     <span class="keywordflow">for</span> (i = 1; i &lt; NumRegions; i++) {
01229         <span class="keywordflow">if</span> (T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[j].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o0">Offset</a> + T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[j].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o1">Length</a> ==
01230             T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o0">Offset</a>)
01231             T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[j].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o1">Length</a> += T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o1">Length</a>;
01232         <span class="keywordflow">else</span> {
01233             j++;
01234             T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[j].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o1">Length</a> = T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o1">Length</a>;
01235             T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[j].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o0">Offset</a> = T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o5">CopyRegions</a>[i].<a class="code" href="../../d7/d1e/struct_i_p_d_r__tag___region.html#o0">Offset</a>;
01236         }
01237     }
01238     T-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o6">NumRegions</a> = j + 1;
01239 
01240     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
01241 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="Templates.c::Templates_Initialize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Templates_Initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize global template related data structures.<p>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00868 {
00869         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
00870 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a1" doxytag="Templates.c::Templates_h_rcsid"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char <a class="el" href="../../db/d88/ipdr_2src_2_exporter_2_templates_8c.html#a1">Templates_h_rcsid</a>[] = TEMPLATES_H_RCSID          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="Templates.c::Templates_rcsid"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char <a class="el" href="../../db/d88/ipdr_2src_2_exporter_2_templates_8c.html#a0">Templates_rcsid</a>[] = "@(#) $Id: Templates.c,v 1.32 2005/03/29 09:46:07 dmitryk Exp $"          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 09:26:30 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
