<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: Sessions</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<h1>Sessions</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d18/struct_i_p_d_r___collector.html">IPDR_Collector</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga0">IPDR_CreateSession</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *Name, unsigned char ID, const char *Description, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> *SH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga1">IPDR_DeleteSession</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga2">IPDR_GetSession</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, unsigned char ID, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> *SH, const char **Name, const char **Description)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga3">IPDR_GetSessionsList</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, int *NumSessions, unsigned char **Sessions)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga4">IPDR_AddCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *Name, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr, unsigned short Port, unsigned short NumberOfActive)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga5">IPDR_CreateCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *Name, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr, unsigned short Port, unsigned short NumberOfActive, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> *CH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga6">IPDR_GetCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *Name, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> *CH, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> *Addr, unsigned short *Port, unsigned short *NumberOfActive)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga7">IPDR_AssocCollectorSession</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> CollectorHandle, int Priority)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga8">IPDR_RemoveCollectorFromSession</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> CollectorHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga9">IPDR_RemoveCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> CollectorHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga10">IPDR_GetCollectorList</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, unsigned int *NumCollectors, <a class="el" href="../../d3/d18/struct_i_p_d_r___collector.html">IPDR_Collector</a> **Collectors)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga11">IPDR_GetCollectorInSessionList</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, unsigned int *NumCollectors, <a class="el" href="../../d3/d18/struct_i_p_d_r___collector.html">IPDR_Collector</a> **Collectors)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga12">IPDR_StartSession</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Negotiate)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga13">IPDR_StopSession</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, enum <a class="el" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga33">IPDR_SessionStopReason</a> Reason, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> Timeout)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga14">IPDR_SetSessionNegotiable</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Negotiable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga15">IPDR_SetDocumentID</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, char *DocumentID)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A session is established to allow formatted records to be sent to one or more redundant collectors (servers). Records contain data organized into templates, which are referred to via keys that can be enabled and disabled. See section <a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html">Templates and keys</a>.<p>
Multiple sessions can be created by the host application, for example to direct different types of data to different collectors (servers). Conversely, a transmitter (client) can send the same information to several collectors (servers) within a single session, for redundancy or load balancing purposes. (Load balancing will be fully supported in a future version.) In addition, templates are shared between sessions - the client can transmit data formatted by any template in any session.<p>
A session has one or more collectors (servers) associated with it. When <a class="el" href="../../dc/d8d/group___i_p_d_r__data__delivery.html#ga0">IPDR_SendData()</a> is called, the record is sent to each session (unless template negotiation has turned off the sending for that session; the template negotiation is controlled by the collector). Each session has at most one active collector (server); an attempt is made to send the record to the active collector (server), with failover to alternate collectors (servers) if that fails. When the record has been acknowledged for all sessions, it is removed from the internal queue.<p>
The state of sessions (i.e. the set of sessions and their associated collectors (servers)) can optionally be stored in non-volatile memory (see <a class="el" href="../../df/dcc/group___i_p_d_r__non__volatile__memory.html">Non-volatile (persistent) memory services</a>, <a class="el" href="../../d1/d50/group___i_p_d_r___m_i_b.html">IPDR configuration and monitoring data (MIB)</a>, <a class="el" href="../../d9/dee/group___i_p_d_r___m_i_b__related.html">SNMP agent support: MIB-related functions and types</a>, and the <code>configurationCommandString</code> in <a class="el" href="../../d4/db0/group___i_p_d_r__transmitter___m_i_b.html">IPDR transmitter (client) MIB overview</a>). Parameter values can also be set via the parameters handler function (see <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html">Initializing / starting / deleting a client</a> and <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga0">IPDR_ParametersHandlerFunc</a>). <hr><h2>Function Documentation</h2>
<a class="anchor" name="ga4" doxytag="IPDR.h::IPDR_AddCollector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_AddCollector           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>Port</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>NumberOfActive</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add a collector to a collectors list, so that data can be sent to it.<p>
collectors are assigned a priority level regarding the specific session. Data is always sent to the active collector with the highest priority (if two collectors (servers) have the same priority, it is undefined which will be chosen to be active). Zero is highest priority. See also <a class="el" href="../../d8/d1a/group___i_p_d_r__alternate__collectors.html">Alternate collectors (servers) policy</a>.<p>
collectors can be added dynamically. Data will be sent to a collector (server) as soon as a (transport layer) connection has been established and the collector (server) has indicated that it is ready to receive data by sending a START message and there is no higher priority collector (server) active.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to an exporter previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>Name of collector (an internal copy is made of this string). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>IP address of the collector. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Port</em>&nbsp;</td><td>Port number of the collector - used only in case than Exporter connecting to the collector </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumberOfActive</em>&nbsp;</td><td>- number of connection Exporter need to create. If value of this parameter is 0, the Exporter will not attempt to connect to the Collector </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">02293 {
02294     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
02295 
02296         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o20">IsInsideCallback</a>)
02297                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a212">IPDR_ERR_API_CALL_FROM_CALLBACK</a> ;
02298 
02299         <span class="keywordflow">return</span> <a class="code" href="../../d5/db3/_exporter_8c.html#a114">Exporter_AddCollectorInternal</a>(E, Name, Addr, Port, NumberOfActive, <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>, NULL);
02300 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga7" doxytag="IPDR.h::IPDR_AssocCollectorSession"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_AssocCollectorSession           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CollectorHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Priority</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Associates a collector to session<p>
Collectors are assigned a priority level in specific session. Data is always sent to the active collector (server) with the highest priority (if two collectors (servers) have the same priority, it is undefined which will be chosen to be active). Zero is highest priority. See also <a class="el" href="../../d8/d1a/group___i_p_d_r__alternate__collectors.html">Alternate collectors (servers) policy</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Handle to session to add collector to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CollectorHandle</em>&nbsp;</td><td>Handle to collector </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Priority</em>&nbsp;</td><td>collector's (server's) priority (0 - highest priority; behavior undefined for negative values). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">02350 {
02351         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>* E = ExporterHandle;
02352         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>* S = SessionHandle;
02353         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>* C = CollectorHandle ;
02354 
02355         <span class="keywordflow">return</span> <a class="code" href="../../d5/db3/_exporter_8c.html#a115">Exporter_AssocCollectorSession_Internal</a>(E,S,C,Priority);
02356 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga5" doxytag="IPDR.h::IPDR_CreateCollector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_CreateCollector           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>Port</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>NumberOfActive</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a collector to a collectors list, so that data can be sent to it.<p>
collectors are assigned a priority level regarding the specific session. Data is always sent to the active collector with the highest priority (if two collectors (servers) have the same priority, it is undefined which will be chosen to be active). Zero is highest priority. See also <a class="el" href="../../d8/d1a/group___i_p_d_r__alternate__collectors.html">Alternate collectors (servers) policy</a>.<p>
collectors can be added dynamically. Data will be sent to a collector (server) as soon as a (transport layer) connection has been established and the collector (server) has indicated that it is ready to receive data by sending a START message and there is no higher priority collector (server) active.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to an exporter previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>Name of collector (an internal copy is made of this string). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>IP address of the collector. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Port</em>&nbsp;</td><td>Port number of the collector - used only in case than Exporter connecting to the collector </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumberOfActive</em>&nbsp;</td><td>- number of connection Exporter need to create. If value of this parameter is 0, the Exporter will not attempt to connect to the Collector </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CH</em>&nbsp;</td><td>pointer to CollectorHandle will receive new created collecotr </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">02273 {
02274     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
02275 
02276         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o20">IsInsideCallback</a>)
02277                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a212">IPDR_ERR_API_CALL_FROM_CALLBACK</a> ;
02278 
02279         <span class="keywordflow">return</span> <a class="code" href="../../d5/db3/_exporter_8c.html#a114">Exporter_AddCollectorInternal</a>(E, Name, Addr, Port, NumberOfActive, <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>, CH);
02280 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga0" doxytag="IPDR.h::IPDR_CreateSession"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_CreateSession           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char&nbsp;</td>
          <td class="mdname" nowrap> <em>ID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Description</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>SH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a new session on the transmitter (client).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>session name (an internal copy is made of this string). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ID</em>&nbsp;</td><td>Session ID. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Description</em>&nbsp;</td><td>session description (an internal copy is made of this string). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SH</em>&nbsp;</td><td>(output) handle to the newly created session. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a191">IPDR_ERR_SESSION_ALREADY_EXISTS</a>, or <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01962 {
01963     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
01964 
01965     <span class="keywordflow">return</span> <a class="code" href="../../d5/db3/_exporter_8c.html#a112">Exporter_CreateSessionInternal</a>(E, Name, ID, Description, SH);
01966 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="IPDR.h::IPDR_DeleteSession"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_DeleteSession           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete a previously created session and release all resources associated with it.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Handle to session as returned by <a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga0">IPDR_CreateSession()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a192">IPDR_ERR_UNABLE_TO_FIND_SESSION</a>, or <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01977 {
01978     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
01979     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>* S = SessionHandle;
01980 
01981     <span class="keywordflow">return</span> <a class="code" href="../../d5/db3/_exporter_8c.html#a18">Exporter_DeleteSessionInternal</a>(E, S);
01982 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga6" doxytag="IPDR.h::IPDR_GetCollector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_GetCollector           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short *&nbsp;</td>
          <td class="mdname" nowrap> <em>Port</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short *&nbsp;</td>
          <td class="mdname" nowrap> <em>NumberOfActive</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the handle to a collector given the collecor's name.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a exporter previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>Collector Name to find. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CH</em>&nbsp;</td><td>(output) Handle to the collector as returned by <a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga4">IPDR_AddCollector()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>(output) IP Address of the Collector </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Port</em>&nbsp;</td><td>(output)_IP Port of the Collector </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumberOfActive</em>&nbsp;</td><td>(output)_number of active connections as specified by <a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga4">IPDR_AddCollector()</a> </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a195">IPDR_ERR_COLLECTOR_NOT_FOUND</a> or <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">02309 {
02310     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
02311         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll;
02312     <span class="keywordtype">int</span> Index;
02313 
02314     <span class="keywordflow">if</span> (! E || !Name || !CH) {
02315         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
02316     }
02317 
02318     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02319 
02320         <span class="keywordflow">for</span> (Index = 0; Index &lt; E-&gt;Collectors.Length; Index++)
02321         {
02322         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
02323         <span class="keywordflow">if</span> (strcmp(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>, Name) == 0)
02324                 {
02325                         *CH = Coll;
02326                         <span class="keywordflow">if</span>(Addr) *Addr = Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>;
02327                         <span class="keywordflow">if</span>(Port) *Port = Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o5">Port</a>;
02328                         <span class="keywordflow">if</span>(NumberOfActive) *NumberOfActive = Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o6">NumOfConnections</a>;
02329                         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02330                         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
02331         }
02332     }
02333 
02334     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02335         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a195">IPDR_ERR_COLLECTOR_NOT_FOUND</a>;
02336 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga11" doxytag="IPDR.h::IPDR_GetCollectorInSessionList"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_GetCollectorInSessionList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int *&nbsp;</td>
          <td class="mdname" nowrap> <em>NumCollectors</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d3/d18/struct_i_p_d_r___collector.html">IPDR_Collector</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>Collectors</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the current list of collectors (servers) configured for a given session.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Handle to session to retrieve collector(s) (server(s)) from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumCollectors</em>&nbsp;</td><td>(output) number of collectors (servers). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Collectors</em>&nbsp;</td><td>(output) array of collector (server) structures, which is allocated internally and remains valid until the session is deleted by a call to <a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga1">IPDR_DeleteSession()</a> or <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga8">IPDR_DeleteExporter()</a>; or until another call to IPDR_GetServersList() is done. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a192">IPDR_ERR_UNABLE_TO_FIND_SESSION</a> or <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">03184 {
03185     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
03186     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>* S = SessionHandle;
03187     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
03188 
03189     <span class="keywordflow">if</span> (! E || ! S) {
03190         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
03191     }
03192 
03193     <span class="keywordflow">if</span> (NumCollectors){ *NumCollectors = 0; }
03194     <span class="keywordflow">if</span> (Collectors){ *Collectors = NULL; }
03195 
03196     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03197 
03198     <span class="keywordflow">for</span> (i = 0; i &lt; S-&gt;CCollectorsLength; i++)
03199         {
03200         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o1">CCollectors</a>[i].<a class="code" href="../../d3/d18/struct_i_p_d_r___collector.html#o0">Name</a> = NULL;
03201     }
03202 
03203     <a class="code" href="../../d2/dc9/_platform_8h.html#a20">Platform_MemoryFree</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o1">CCollectors</a>);
03204 
03205     <a class="code" href="../../d2/dc9/_platform_8h.html#a30">Platform_Check_MEMORYALLOCATEVEC</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o1">CCollectors</a>,
03206     {
03207                 S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o2">CCollectorsLength</a> = 0;
03208         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o1">CCollectors</a>= NULL;
03209         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03210     });
03211 
03212     <span class="keywordflow">for</span> (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o2">CCollectorsLength</a> = 0; S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o2">CCollectorsLength</a> &lt; S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>; S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o2">CCollectorsLength</a>++)
03213         {
03214                 <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = (<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *)S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o2">CCollectorsLength</a>];
03215         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *C = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a>;
03216                 <span class="keywordflow">if</span>(C == NULL)
03217                         <span class="keywordflow">continue</span>;
03218         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o1">CCollectors</a>[S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o2">CCollectorsLength</a>].<a class="code" href="../../d3/d18/struct_i_p_d_r___collector.html#o0">Name</a> = C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>;
03219         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o1">CCollectors</a>[S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o2">CCollectorsLength</a>].<a class="code" href="../../d3/d18/struct_i_p_d_r___collector.html#o1">Addr</a> = C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>;
03220         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o1">CCollectors</a>[S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o2">CCollectorsLength</a>].<a class="code" href="../../d3/d18/struct_i_p_d_r___collector.html#o2">Port</a> = C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o5">Port</a>;
03221         }
03222 
03223     <span class="keywordflow">if</span> (NumCollectors){ *NumCollectors = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o2">CCollectorsLength</a>; }
03224     <span class="keywordflow">if</span> (Collectors){ *Collectors = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o1">CCollectors</a>; }
03225 
03226     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03227     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03228 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga10" doxytag="IPDR.h::IPDR_GetCollectorList"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_GetCollectorList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int *&nbsp;</td>
          <td class="mdname" nowrap> <em>NumCollectors</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d3/d18/struct_i_p_d_r___collector.html">IPDR_Collector</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>Collectors</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve the current list of collectors<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumCollectors</em>&nbsp;</td><td>(output) number of collectors (servers). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Collectors</em>&nbsp;</td><td>(output) array of collector handles, which is allocated internally and remains valid until the session is deleted by a call to <a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga1">IPDR_DeleteSession()</a> or <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga8">IPDR_DeleteExporter()</a>; or until another call to IPDR_GetServersList() is done. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a192">IPDR_ERR_UNABLE_TO_FIND_SESSION</a> or <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">03239 {
03240 
03241     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
03242         <span class="keywordtype">int</span> i;
03243 
03244         <span class="keywordflow">if</span> (! E || ! NumCollectors || !Collectors)
03245         {
03246         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
03247     }
03248 
03249         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03250 
03251         (*NumCollectors) = E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a> ;
03252 
03253         <a class="code" href="../../d2/dc9/_platform_8h.html#a20">Platform_MemoryFree</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o35">CCollectors</a>);
03254 
03255         <a class="code" href="../../d2/dc9/_platform_8h.html#a30">Platform_Check_MEMORYALLOCATEVEC</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, (*NumCollectors), E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o35">CCollectors</a>,
03256         {
03257                 E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o35">CCollectors</a>= NULL;
03258                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03259         });
03260 
03261         <span class="keywordflow">for</span> (i = 0; i &lt; E-&gt;Collectors.Length; i++) {
03262                 <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *C = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03263 
03264                 E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o35">CCollectors</a>[i].<a class="code" href="../../d3/d18/struct_i_p_d_r___collector.html#o0">Name</a> = C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>;
03265                 E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o35">CCollectors</a>[i].<a class="code" href="../../d3/d18/struct_i_p_d_r___collector.html#o1">Addr</a> = C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>;
03266                 E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o35">CCollectors</a>[i].<a class="code" href="../../d3/d18/struct_i_p_d_r___collector.html#o2">Port</a> = C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o5">Port</a>;
03267         }
03268 
03269     (*Collectors) = E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o35">CCollectors</a>;
03270         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03271     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03272 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga2" doxytag="IPDR.h::IPDR_GetSession"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_GetSession           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char&nbsp;</td>
          <td class="mdname" nowrap> <em>ID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>SH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char **&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char **&nbsp;</td>
          <td class="mdname" nowrap> <em>Description</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the handle to a session given the session's ID.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ID</em>&nbsp;</td><td>Session ID to find. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SH</em>&nbsp;</td><td>(output) Handle to the session as returned by <a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga0">IPDR_CreateSession()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>(output) Name of the session as provided to <a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga0">IPDR_CreateSession()</a>. This parameter can be NULL if you don't want the value. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Description</em>&nbsp;</td><td>(output) Description of the session as provided to <a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga0">IPDR_CreateSession()</a>. This parameter can be NULL if you don't want the value. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a192">IPDR_ERR_UNABLE_TO_FIND_SESSION</a> or <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">02402 {
02403     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
02404     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S1;
02405     <span class="keywordtype">int</span> i;
02406 
02407     <span class="keywordflow">if</span> (! E) {
02408         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
02409     }
02410 
02411     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02412 
02413     <span class="keywordflow">for</span> (i = 0; i &lt; E-&gt;Sessions.Length; i++) {
02414         S1 = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
02415         <span class="keywordflow">if</span> (S1-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a> == ID) {
02416             <span class="keywordflow">if</span> (SH) { *SH = S1; }
02417             <span class="keywordflow">if</span> (Name) { *Name = S1-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>; }
02418             <span class="keywordflow">if</span> (Description) { *Description = S1-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o18">Description</a>; }
02419             <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02420             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
02421         }
02422     }
02423 
02424     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02425     <span class="keywordflow">if</span> (SH) { *SH = NULL; }
02426     <span class="keywordflow">if</span> (Name) { *Name = NULL; }
02427     <span class="keywordflow">if</span> (Description) { * Description = NULL; }
02428 
02429     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a192">IPDR_ERR_UNABLE_TO_FIND_SESSION</a>;
02430 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga3" doxytag="IPDR.h::IPDR_GetSessionsList"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_GetSessionsList           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>NumSessions</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char **&nbsp;</td>
          <td class="mdname" nowrap> <em>Sessions</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get a list of all the session IDs.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumSessions</em>&nbsp;</td><td>(output) number of sessions. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Sessions</em>&nbsp;</td><td>(output) array of collector (server) IDs, which is allocated internally and remains valid until the transmitter (client) is deleted by a call to <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga8">IPDR_DeleteExporter()</a>; or until another call to <a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga3">IPDR_GetSessionsList()</a>. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">03141 {
03142     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
03143     <span class="keywordtype">int</span> i;
03144 
03145     <span class="keywordflow">if</span> (! E) {
03146         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
03147     }
03148 
03149     <span class="keywordflow">if</span> (NumSessions) { *NumSessions = 0; }
03150     <span class="keywordflow">if</span> (Sessions)    { *Sessions = NULL; }
03151 
03152     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03153 
03154     <a class="code" href="../../d2/dc9/_platform_8h.html#a20">Platform_MemoryFree</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o34">CSessions</a>);
03155     <a class="code" href="../../d2/dc9/_platform_8h.html#a30">Platform_Check_MEMORYALLOCATEVEC</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o34">CSessions</a>,
03156     {
03157         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o34">CSessions</a> = NULL;
03158         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03159     });
03160 
03161     <span class="keywordflow">for</span> (i = 0; i &lt; E-&gt;Sessions.Length; i++) {
03162         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03163         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o34">CSessions</a>[i] = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>;
03164     }
03165 
03166     <span class="keywordflow">if</span> (NumSessions) { *NumSessions = i; }
03167     <span class="keywordflow">if</span> (Sessions)    { *Sessions = E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o34">CSessions</a>; }
03168 
03169     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03170 
03171     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03172 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga9" doxytag="IPDR.h::IPDR_RemoveCollector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_RemoveCollector           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CollectorHandle</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove a previously added collector (server).<p>
collectors (servers) can be deleted dynamically, causing lower priority collectors (servers) to be activated. Removal of a collector (server) causes immediate disconnection, potentially losing acknowledgments from the collector (server) and duplicate transmission to the alternate collector (server).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CollectorHandle</em>&nbsp;</td><td>Handle to the Collector </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a191">IPDR_ERR_SESSION_ALREADY_EXISTS</a> or <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">02383 {
02384     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
02385         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>* C = CollectorHandle;
02386 
02387         <span class="keywordflow">return</span> <a class="code" href="../../d5/db3/_exporter_8c.html#a19">Exporter_RemoveCollectorInternal</a>(E, C);
02388 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga8" doxytag="IPDR.h::IPDR_RemoveCollectorFromSession"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_RemoveCollectorFromSession           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CollectorHandle</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove a previously added collector (server).<p>
collectors (servers) can be deleted dynamically, causing lower priority collectors (servers) to be activated. Removal of a collector (server) causes immediate disconnection, potentially losing acknowledgments from the collector (server) and duplicate transmission to the alternate collector (server).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Handle to session to remove collector (server) from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CollectorHandle</em>&nbsp;</td><td>Handle to the Collector </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a191">IPDR_ERR_SESSION_ALREADY_EXISTS</a> or <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">02367 {
02368         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>* E = ExporterHandle;
02369         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>* S = SessionHandle;
02370         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>* C = CollectorHandle ;
02371 
02372         <span class="keywordflow">return</span> <a class="code" href="../../d5/db3/_exporter_8c.html#a20">Exporter_RemoveCollectorFromSession_Internal</a>(E,S,C);
02373 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga15" doxytag="IPDR.h::IPDR_SetDocumentID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_SetDocumentID           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>DocumentID</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Allows to set the document id to be send along with next SESSION START message This function will succeed only in case that the appropriate Session is not Active and Session data queue is empty.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Handle to session to retrieve collector(s) (server(s)) from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>DocumentID</em>&nbsp;</td><td>document id (UUID) to be used within the Session </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a192">IPDR_ERR_UNABLE_TO_FIND_SESSION</a>, #IPDR_ERR_QUEUE_NOT_EMPTY or #IPDR_ERR_SESSION_ACTIVE otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01991 {
01992         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>* S = SessionHandle;
01993         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>* E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
01994 
01995         <span class="keywordflow">if</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a> != NULL || S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
01996         {
01997                 <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
01998                            <span class="stringliteral">"IPDR_SetDocumentID"</span>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a73">MSG_EXPORTER_ACTIVE_COLLECTOR_EXISTS</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>);
01999                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a214">IPDR_ERR_SESSION_IS_RUNNING</a>;
02000         }
02001         memset(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o5">DocumentID</a>, 0, <span class="keyword">sizeof</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o5">DocumentID</a>));
02002         memcpy(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o5">DocumentID</a>, DocumentID, <span class="keyword">sizeof</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o5">DocumentID</a>));
02003         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o6">DSN</a> = 0;
02004         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
02005 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga14" doxytag="IPDR.h::IPDR_SetSessionNegotiable"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_SetSessionNegotiable           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Negotiable</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Allows specify if the templates will be negotiated in this session at closest opportunity.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Handle to session to retrieve collector(s) (server(s)) from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Negotiable</em>&nbsp;</td><td>true is the templates must be negotiated, false otherwise </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success </dd></dl>
<div class="fragment"><pre class="fragment">02015 {
02016         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>* S = SessionHandle;
02017         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
02018 
02019         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02020 
02021         <span class="keywordflow">if</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a> != NULL || S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
02022         {
02023                 <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
02024                            <span class="stringliteral">"IPDR_SetSessionNegotiable"</span>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a73">MSG_EXPORTER_ACTIVE_COLLECTOR_EXISTS</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>);
02025                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02026                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a214">IPDR_ERR_SESSION_IS_RUNNING</a>;
02027         }
02028 
02029         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o11">Negotiable</a> = Negotiable ;
02030 
02031         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02032         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
02033 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga12" doxytag="IPDR.h::IPDR_StartSession"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_StartSession           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Negotiate</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Allows to start the current session in order to renegotiate templates or set another document ID. This function will return error if the session is not in appropriate state to be started<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Handle to session to retrieve collector(s) (server(s)) from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Negotiate</em>&nbsp;</td><td>If this parameter is true, the templates will be renegotiated </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a192">IPDR_ERR_UNABLE_TO_FIND_SESSION</a>, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> or #IPDR_ERR_SESSION_NOTREADY otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">02043 {
02044         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = SessionHandle;
02045         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
02046 
02047         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
02048 
02049         <span class="keywordflow">if</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a> != NULL)
02050         {
02051                 <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
02052                            <span class="stringliteral">"IPDR_StartSession"</span>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a73">MSG_EXPORTER_ACTIVE_COLLECTOR_EXISTS</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>);
02053                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a176">IPDR_ERR_SESSION_LOGICALLY_RUN</a>;
02054         }
02055 
02056         <span class="keywordflow">return</span> <a class="code" href="../../dd/d44/_exporter_protocol_8c.html#a70">ExporterProtocol_SelectCollector</a>( E, S, Negotiate, NULL);
02057 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga13" doxytag="IPDR.h::IPDR_StopSession"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_StopSession           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>enum <a class="el" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga33">IPDR_SessionStopReason</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Reason</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Timeout</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Allows to stop the current session in order to renegotiate templates or set another document ID. This function will return error if the session is not active. The function will attempt to drain the message queue, using specified timeout, in order to prevent messages with prior document id to be sent<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Handle to session to retrieve collector(s) (server(s)) from. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Reason</em>&nbsp;</td><td>reason of session termination to be sent to the collector. Only allowed values </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Timeout</em>&nbsp;</td><td>timeout for using whendraining a queue of this parameter are <a class="el" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga33a126">IPDR_STOP_REASON_ENDOFDOCUMENT</a> and <a class="el" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga33a127">IPDR_STOP_REASON_TEMPLATEUPDATED</a> </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a192">IPDR_ERR_UNABLE_TO_FIND_SESSION</a>, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> or #IPDR_ERR_SESSION_NOTACTIVE otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">02068 {
02069         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = SessionHandle;
02070         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
02071         <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = NULL;
02072         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *C = NULL;
02073         <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> Conn = NULL;
02074         <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
02075 
02076         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02077 
02078         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
02079 
02080         <span class="keywordflow">if</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a> == NULL)
02081         {
02082                 <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
02083                            <span class="stringliteral">"IPDR_StopSession"</span>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a74">MSG_EXPORTER_NO_ACTIVE_COLLECTOR</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>);
02084 
02085                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02086 
02087                 <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;CleanUP(E, S);
02088                 
02089                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a177">IPDR_ERR_SESSION_LOGICALLY_STOPED</a>;
02090         }
02091 
02092         CS = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a>;
02093 
02094         <span class="keywordflow">if</span>(     CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> == NULL ||
02095                 CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a> == NULL ||
02096                 CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> == NULL)
02097         {
02098                 <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
02099                            <span class="stringliteral">"IPDR_StopSession"</span>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a74">MSG_EXPORTER_NO_ACTIVE_COLLECTOR</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>);
02100                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02101 
02102                 <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;CleanUP(E, S);
02103                 
02104                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a177">IPDR_ERR_SESSION_LOGICALLY_STOPED</a>;
02105         }
02106 
02107         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02108         Status = <a class="code" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga10">IPDR_DrainQueue</a>(E, S, Timeout);
02109         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02110         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
02111         {
02112                 <a class="code" href="../../da/df4/_log_8h.html#a28">Log_Write</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
02113                            <span class="stringliteral">"IPDR_StopSession"</span>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a75">MSG_EXPORTER_QUEUE_NOT_DRAINED</a>);
02114         }
02115         <span class="comment">/*TODO: create reason codes and descriptions for session stop */</span>
02116         C = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a>;
02117         <span class="keywordflow">if</span>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a> != NULL &amp;&amp; CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>  != NULL)
02118         {
02119                 Conn = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>;
02120 
02121                 Status = <a class="code" href="../../dd/d44/_exporter_protocol_8c.html#a60">ExporterProtocol_SendSessionStop</a>(E, S, C, Conn, Reason, <span class="stringliteral">"API CALL"</span>);
02122                 <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
02123                         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>;
02124                 <span class="keywordflow">else</span>
02125                         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a52a26">IPDR_CS_READY</a>;
02126         }
02127         <span class="keywordflow">else</span>
02128         {
02129                 CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>;
02130         }
02131 
02132         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a> = NULL;
02133 
02134         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02135         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
02136 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 22:28:26 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
