<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: org::ipdr::ConnectionDynamic Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="../../db/d96/namespaceorg.html">org</a>::<a class="el" href="../../df/d76/namespaceorg_1_1ipdr.html">ipdr</a>::<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a></div>
<h1>org::ipdr::ConnectionDynamic Class Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">final <a class="el" href="../../db/df5/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_collector_config_i.html">CollectorConfigI</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a0">getCollectorConfig</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final <a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a1">getConnectionConfig</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a2">ConnectionDynamic</a> (<a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a> <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>)  throws ConnectionIOException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a3">close</a> ()  throws ConnectionIOException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a4">write</a> (byte[] b)  throws IOException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a5">readFully</a> (byte[] b, int off, int len, int <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r3">timeout</a>)  throws IOException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a6">unread</a> (byte[] b, int off, int len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">Object&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a7">getInputSynchronizer</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">Object&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a8">getOutputSynchronizer</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a9">toString</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a10">addrAndPortToString</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">InetAddress&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a11">getAddress</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a12">getPort</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static ServerSocket&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#e0">makeServerSocket</a> (<a class="el" href="../../db/df5/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_collector_config_i.html">CollectorConfigI</a> <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">collectorConfig</a>)  throws ConnectionIOException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#e1">makeListeningInstance</a> (ServerSocket serverSocket, <a class="el" href="../../db/df5/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_collector_config_i.html">CollectorConfigI</a> <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">collectorConfig</a>)  throws ConnectionIOException     </td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#b0">ConnectionDynamic</a> (Socket <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a>, <a class="el" href="../../db/df5/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_collector_config_i.html">CollectorConfigI</a> <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">collectorConfig</a>)  throws ConnectionIOException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#b1">setSoTimeout</a> (int <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r3">timeout</a>)  throws SocketException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#b2">read</a> (byte[] b, int off, int len)  throws IOException     </td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">byte[]&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a> = 0</td></tr>

<tr><td colspan="2"><br><h2>Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#t0">extraAlloc</a> = 1000</td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#d0">connectTCP</a> ()  throws ConnectionIOException     </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#d1">prepareSocket</a> ()  throws SocketException, IOException     </td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Socket&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">InputStream&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r1">in</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">OutputStream&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r2">out</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r3">timeout</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/df5/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_collector_config_i.html">CollectorConfigI</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">collectorConfig</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Encapsulation of a single connection from a session. Holds the socket, input and output streams, and any related information. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a2" doxytag="org::ipdr::ConnectionDynamic::ConnectionDynamic"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">org::ipdr::ConnectionDynamic::ConnectionDynamic           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>connectionConfig</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>     <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a connection and make the connection to the other end.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>connectionConfig</em>&nbsp;</td><td>The connection's configuration. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00080     {
00081         <span class="keyword">this</span>.connectionConfig = <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>;
00082         <span class="keyword">this</span>.collectorConfig = <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>.getCollectorConfig();
00083         <span class="keyword">this</span>.connectTCP();
00084     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="org::ipdr::ConnectionDynamic::ConnectionDynamic"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">org::ipdr::ConnectionDynamic::ConnectionDynamic           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">Socket&nbsp;</td>
          <td class="mdname" nowrap> <em>socket</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../db/df5/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_collector_config_i.html">CollectorConfigI</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>collectorConfig</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This constructor is used by makeListeningInstance to instantiate <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a> with an incoming socket<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>socket</em>&nbsp;</td><td>- socket to use for the data connection </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>collectorConfig</em>&nbsp;</td><td>- collector configuration </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00166     {
00167         <span class="keyword">this</span>.socket = <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a>;
00168         <span class="keyword">this</span>.collectorConfig = <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">collectorConfig</a>;
00169         <span class="keywordflow">try</span>
00170         {
00171             <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#d1">prepareSocket</a>();
00172         }
00173         <span class="keywordflow">catch</span> (UnknownHostException e)
00174         {
00175             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(
00176                     <span class="stringliteral">"could not get a host name when connecting via TCP"</span>,
00177                     <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>, e);
00178         }
00179         <span class="keywordflow">catch</span> (ConnectException e)
00180         {
00181             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(<span class="stringliteral">"could not connect via TCP"</span>,
00182                     <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>, e);
00183         }
00184         <span class="keywordflow">catch</span> (IOException e)
00185         {
00186             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(
00187                     <span class="stringliteral">"got I/O error while connecting via TCP"</span>, <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>,
00188                     e);
00189         }
00190     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a10" doxytag="org::ipdr::ConnectionDynamic::addrAndPortToString"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final String org::ipdr::ConnectionDynamic::addrAndPortToString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the address and port as a printable string.<p>
<dl compact><dt><b>Returns:</b></dt><dd>A string in the form "IPAddress:port" </dd></dl>
<div class="fragment"><pre class="fragment">00620     {
00621         <span class="keywordflow">return</span> <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a11">getAddress</a>().toString() + <span class="stringliteral">":"</span> + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a12">getPort</a>();
00622     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="org::ipdr::ConnectionDynamic::close"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void org::ipdr::ConnectionDynamic::close           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>     <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Close the socket connection and ensure everything is sent. (With the usual caveat about solinger and friends.)<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td>If the close doesn't go properly. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00277     {
00278         <span class="keywordflow">try</span>
00279         {
00280             <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r2">out</a>.flush();
00281             <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r2">out</a>.close();
00282             <span class="keywordflow">if</span> (<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a> == null)
00283             {
00284                 LogManager.warn(<span class="keyword">this</span>, <span class="stringliteral">"close"</span>, <span class="stringliteral">"socket is null"</span>);
00285             }
00286             <span class="keywordflow">else</span>
00287             {
00288                 <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a>.close();
00289             }
00290             <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r1">in</a>.close();
00291             LogManager.info(<span class="keyword">this</span>, <span class="stringliteral">"close"</span>, <span class="stringliteral">"socket is closed"</span>);
00292         }
00293         <span class="keywordflow">catch</span> (IOException e)
00294         {
00295             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(
00296                     <span class="stringliteral">"Error while closing TCP connection"</span>, <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>, e);
00297         }
00298     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="org::ipdr::ConnectionDynamic::connectTCP"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void org::ipdr::ConnectionDynamic::connectTCP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>     <code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Connect to transmitter via TCP (transmitterAddress:transmitterPort are "global" to this method), waiting up to connectionConfig.getConnectTimeout seconds<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td>most I/O exceptions are caught with the reason preserved in the ConnectionIOException.getCause(). </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00202     {
00203         LogManager.debug(<span class="keyword">this</span>, <span class="stringliteral">"connectTcp"</span>, <span class="stringliteral">"Trying TCP connection to "</span>
00204                 + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>.getExporterAndPortString() + <span class="stringliteral">" from "</span>
00205                 + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a0">getCollectorConfig</a>().getCollectorAddress());
00206         <span class="keywordflow">try</span>
00207         {
00208             <span class="keyword">this</span>.socket = <span class="keyword">new</span> Socket(<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>.getExporterAddress(),
00209                     <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>.getExporterPort());
00210             <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#d1">prepareSocket</a>();
00211         }
00212         <span class="keywordflow">catch</span> (UnknownHostException e)
00213         {
00214             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(
00215                     <span class="stringliteral">"could not get a host name when connecting via TCP"</span>,
00216                     <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>, e);
00217         }
00218         <span class="keywordflow">catch</span> (ConnectException e)
00219         {
00220             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(<span class="stringliteral">"could not connect via TCP"</span>,
00221                     <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>, e);
00222         }
00223         <span class="keywordflow">catch</span> (IOException e)
00224         {
00225             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(
00226                     <span class="stringliteral">"got I/O error while connecting via TCP"</span>, <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>,
00227                     e);
00228         }
00229     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="org::ipdr::ConnectionDynamic::getAddress"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">InetAddress org::ipdr::ConnectionDynamic::getAddress           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the ip address as an InetAddress object<p>
<dl compact><dt><b>Returns:</b></dt><dd>InetAddress or null if the socket is null </dd></dl>
<div class="fragment"><pre class="fragment">00630     {
00631         <span class="keywordflow">if</span> (<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a> != null)
00632             <span class="keywordflow">return</span> <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a>.getInetAddress();
00633         <span class="keywordflow">return</span> null;
00634     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="org::ipdr::ConnectionDynamic::getCollectorConfig"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final <a class="el" href="../../db/df5/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_collector_config_i.html">CollectorConfigI</a> org::ipdr::ConnectionDynamic::getCollectorConfig           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Returns:</b></dt><dd>Collector configuration context </dd></dl>
<div class="fragment"><pre class="fragment">00052     {
00053         <span class="keywordflow">return</span> <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">collectorConfig</a>;
00054     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="org::ipdr::ConnectionDynamic::getConnectionConfig"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final <a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a> org::ipdr::ConnectionDynamic::getConnectionConfig           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Returns:</b></dt><dd>Connection configuration </dd></dl>
<div class="fragment"><pre class="fragment">00068     {
00069         <span class="keywordflow">return</span> <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>;
00070     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="org::ipdr::ConnectionDynamic::getInputSynchronizer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Object org::ipdr::ConnectionDynamic::getInputSynchronizer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
An object to use for synchronizing on inputs. This might be needed if you do an intial <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a5">readFully</a>to get a header, followed by another <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a5">readFully</a>to get the rest of the message.<p>
<dl compact><dt><b>Returns:</b></dt><dd>The synchronization object. </dd></dl>
<div class="fragment"><pre class="fragment">00571     {
00572         <span class="keywordflow">return</span> <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r1">in</a>;
00573     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="org::ipdr::ConnectionDynamic::getOutputSynchronizer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Object org::ipdr::ConnectionDynamic::getOutputSynchronizer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
An object to use for synchronizing on outputs.<p>
<dl compact><dt><b>Returns:</b></dt><dd>The synchronization object. </dd></dl>
<div class="fragment"><pre class="fragment">00581     {
00582         <span class="keywordflow">return</span> <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r2">out</a>;
00583     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="org::ipdr::ConnectionDynamic::getPort"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int org::ipdr::ConnectionDynamic::getPort           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the remote port<p>
<dl compact><dt><b>Returns:</b></dt><dd>remote port or 0 if the socket is null </dd></dl>
<div class="fragment"><pre class="fragment">00642     {
00643         <span class="keywordflow">if</span> (<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a> != null)
00644             <span class="keywordflow">return</span> <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a>.getPort();
00645         <span class="keywordflow">return</span> 0;
00646     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e1" doxytag="org::ipdr::ConnectionDynamic::makeListeningInstance"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a> org::ipdr::ConnectionDynamic::makeListeningInstance           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">ServerSocket&nbsp;</td>
          <td class="mdname" nowrap> <em>serverSocket</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../db/df5/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_collector_config_i.html">CollectorConfigI</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>collectorConfig</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>     <code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Creates a new instance of <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a>, which listens on the given server socket for incoming TCP connections The method throws an exception if no connection was made during AcceptTimeout seconds<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>serverSocket</em>&nbsp;</td><td>- server socket to accept connections on </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>collectorConfig</em>&nbsp;</td><td>- collector configuration </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html">ConnectionDynamic</a> instance </dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00134     {
00135         <span class="keywordflow">try</span>
00136         {
00137             <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a2">ConnectionDynamic</a>(serverSocket.accept(), <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">collectorConfig</a>);
00138         }
00139         <span class="keywordflow">catch</span> (SocketTimeoutException ste)
00140         {
00141             LogManager.debug(<span class="stringliteral">"ConnectionDynamic"</span>, <span class="stringliteral">"makeListeningInstance"</span>,
00142                     <span class="stringliteral">"Accept timeout fired"</span>);
00143             <span class="keywordflow">return</span> null;
00144         }
00145         <span class="keywordflow">catch</span> (IOException iex)
00146         {
00147             LogManager.error(<span class="stringliteral">"ConnectionDynamic"</span>, <span class="stringliteral">"makeListeningInstance"</span>, iex
00148                     .getMessage());
00149             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(
00150                     <span class="stringliteral">"got I/O error while listening to TCP"</span>, iex);
00151         }
00152     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e0" doxytag="org::ipdr::ConnectionDynamic::makeServerSocket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static ServerSocket org::ipdr::ConnectionDynamic::makeServerSocket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/df5/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_collector_config_i.html">CollectorConfigI</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>collectorConfig</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../dd/d78/classorg_1_1ipdr_1_1api_1_1_connection_i_o_exception.html">ConnectionIOException</a>     <code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Make a ServerSocket on the port defined in the collector configuration object<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>collectorConfig</em>&nbsp;</td><td>- collector configuration </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>listening (server) socket </dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ConnectionIOException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00097     {
00098         <span class="keywordflow">try</span>
00099         {
00100             LogManager.debug(<span class="stringliteral">"ServerSocket"</span>, <span class="stringliteral">"listenTCP"</span>, <span class="stringliteral">"Listening on "</span>
00101                     + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">collectorConfig</a>.getLocalPort());
00102             ServerSocket serverSocket = <span class="keyword">new</span> ServerSocket(<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">collectorConfig</a>
00103                     .getLocalPort(), <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">collectorConfig</a>.getBacklogSize(),
00104                     <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">collectorConfig</a>.getCollectorAddress());
00105             serverSocket
00106                     .setSoTimeout(<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">collectorConfig</a>.getAcceptTimeout() * 1000);
00107 
00108             <span class="keywordflow">return</span> serverSocket;
00109         }
00110         <span class="keywordflow">catch</span> (IOException iex)
00111         {
00112             LogManager.error(<span class="stringliteral">"ConnectionDynamic"</span>, <span class="stringliteral">"makeServerSocket"</span>, iex
00113                     .getMessage());
00114             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(
00115                     <span class="stringliteral">"got I/O error while listening to TCP"</span>, iex);
00116         }
00117     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d1" doxytag="org::ipdr::ConnectionDynamic::prepareSocket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::ConnectionDynamic::prepareSocket           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws SocketException, IOException     <code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets various socket parameters for the current socket<p>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>SocketException</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td></td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00238     {
00239         <span class="keywordflow">if</span> (<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a0">getCollectorConfig</a>().getReceiveBufferSize() &gt; 0)
00240         {
00241             <span class="keyword">this</span>.socket.setReceiveBufferSize(<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a0">getCollectorConfig</a>()
00242                     .getReceiveBufferSize());
00243         }
00244         <span class="keywordflow">try</span>
00245         {
00246             <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a>.setSoLinger(<span class="keyword">true</span>, 5);
00247         }
00248         <span class="keywordflow">catch</span> (SocketException e)
00249         {
00250             LogManager.warn(<span class="keyword">this</span>, <span class="stringliteral">"receiveConfig"</span>, <span class="stringliteral">"setSoLinger exception: "</span>
00251                     + e);
00252         }
00253         <span class="keyword">this</span>.socket.setTcpNoDelay(<span class="keyword">true</span>);
00254         <span class="keywordflow">try</span>
00255         {
00256             <span class="keyword">this</span>.socket.setKeepAlive(<span class="keyword">true</span>);
00257         }
00258         <span class="keywordflow">catch</span> (SocketException ex)
00259         {
00260             LogManager.warn(<span class="keyword">this</span>, <span class="stringliteral">"receiveConfig"</span>,
00261                     <span class="stringliteral">"Cannot set TCP keep-alive on "</span> + <span class="keyword">this</span>.<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a> + <span class="stringliteral">": "</span> + ex);
00262         }
00263         <span class="keyword">this</span>.in = <span class="keyword">this</span>.socket.getInputStream();
00264         <span class="keyword">this</span>.out = <span class="keyword">this</span>.socket.getOutputStream();
00265         LogManager.info(<span class="keyword">this</span>, <span class="stringliteral">"receiveConfig"</span>, <span class="stringliteral">"Successful TCP connection to "</span>
00266                 + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a>.getInetAddress() + <span class="stringliteral">" from "</span> + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a>.getPort());
00267     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b2" doxytag="org::ipdr::ConnectionDynamic::read"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int org::ipdr::ConnectionDynamic::read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws IOException     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read bytes from the input stream.<p>
If you want to read in multiple chunks (e.g., a header, then the body), you should use <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a7">getInputSynchronizer</a>to ensure that another thread doesn't interfere.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>array of bytes to be filled. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>off</em>&nbsp;</td><td>offset within the array to start filling. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>maximum number of bytes to read. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>number of bytes actually read. </dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td>if something goes wrong (or a timeout). </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>PushbackInputStream#read <p>
<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a7">getInputSynchronizer</a> </dd></dl>
<div class="fragment"><pre class="fragment">00524     {
00525         <span class="comment">// The following code is stolen shamelessly from</span>
00526         <span class="comment">// PushbackInputStream.read().</span>
00527         <span class="keywordflow">if</span> (len == 0)
00528         {
00529             <span class="keywordflow">return</span> 0;
00530         }
00531         <span class="keywordtype">int</span> avail = (<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a> == null) ? 0 : <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a>.length - <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a>;
00532         <span class="keywordflow">if</span> (avail &gt; 0)
00533         {
00534             <span class="keywordflow">if</span> (len &lt; avail)
00535             {
00536                 avail = len;
00537             }
00538             System.arraycopy(<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a>, <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a>, b, off, avail);
00539             <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a> += avail;
00540             off += avail;
00541             len -= avail;
00542         }
00543         <span class="keywordflow">if</span> (len &gt; 0)
00544         {
00545             <span class="keywordflow">try</span>
00546             {
00547                 len = <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r1">in</a>.read(b, off, len);
00548             }
00549             <span class="keywordflow">catch</span> (InterruptedIOException e)
00550             {
00551                 e.bytesTransferred += avail;
00552                 <span class="keywordflow">throw</span> e;
00553             }
00554             <span class="keywordflow">if</span> (len == -1)
00555             {
00556                 <span class="keywordflow">return</span> avail == 0 ? -1 : avail;
00557             }
00558             <span class="keywordflow">return</span> avail + len;
00559         }
00560         <span class="keywordflow">return</span> avail;
00561     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="org::ipdr::ConnectionDynamic::readFully"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void org::ipdr::ConnectionDynamic::readFully           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>timeout</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws IOException     <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read a specified number of bytes.<p>
See the general contract of the <code>readFully</code> method of <code>DataInput</code>.<p>
Bytes for this operation are read from the contained input stream.<p>
If you want to read in multiple chunks (e.g., a header, then the body), you should use <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a7">getInputSynchronizer</a>to ensure that another thread doesn't interfere.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>the buffer into which the data is read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>off</em>&nbsp;</td><td>the start offset of the data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>the number of bytes to read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>timeout in milliseconds. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>EOFException</em>&nbsp;</td><td>if this input stream reaches the end before reading all the bytes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td>if an I/O error occurs. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>InterruptedIOException</em>&nbsp;</td><td>if the timeout is exceeded; in this case the bytesTransferred vaule will have the number of bytes that were read into the buffer (b) before the exception. A value of zero should not be interpreted as meaning that nothing was read; the implementation of this method may choose to save the bytes in a separate (invisible) buffer. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>java.io.FilterInputStream#in <p>
java.io.DataInput#readFully <p>
<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a7">getInputSynchronizer</a> </dd></dl>
<div class="fragment"><pre class="fragment">00377     {
00378         <span class="keywordtype">int</span> rb = 0; <span class="comment">// # of bytes that were read</span>
00379         <span class="keywordtype">long</span> t1 = System.currentTimeMillis();
00380         <span class="keywordflow">while</span> (rb &lt; len)
00381         {
00382             <span class="keywordflow">try</span>
00383             {
00384                 <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#b1">setSoTimeout</a>(<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r3">timeout</a>);
00385                 <span class="keywordtype">int</span> rbOnce = <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#b2">read</a>(b, off + rb, len - rb);
00386                 <span class="keywordflow">if</span> (rbOnce &lt; 0)
00387                 {
00388                     <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a6">unread</a>(b, off, rb);
00389                     <span class="comment">// Not sure that we should push back the bytes</span>
00390                     <span class="comment">// read so far or no; but there shouldn't be</span>
00391                     <span class="comment">// another read anyway. Unfortunately, there's no</span>
00392                     <span class="comment">// way to report the number of bytes read so far</span>
00393                     <span class="comment">// (although we could subclass EOFException to</span>
00394                     <span class="comment">// provide this).</span>
00395                     <span class="keywordflow">throw</span> <span class="keyword">new</span> EOFException(<span class="stringliteral">"Unexpected end-of-stream on "</span> + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r1">in</a>);
00396                 }
00397                 <span class="keywordflow">else</span>
00398                 {
00399                     rb += rbOnce;
00400                 }
00401             }
00402             <span class="keywordflow">catch</span> (InterruptedIOException ex)
00403             {
00404                 <span class="comment">// There are two choices of how to proceed: just</span>
00405                 <span class="comment">// report the bytes that weren't transferred, or push</span>
00406                 <span class="comment">// them all back and report that nothing was</span>
00407                 <span class="comment">// transferred. We choose to report all the bytes that</span>
00408                 <span class="comment">// were transferred because that doesn't require</span>
00409                 <span class="comment">// extending our pushback buffer, although chances are</span>
00410                 <span class="comment">// the caller wil call unread() to do this anyway.</span>
00411                 <span class="keywordflow">if</span> (<span class="keyword">true</span>)
00412                 {
00413                     ex.bytesTransferred += rb;
00414                 }
00415                 <span class="keywordflow">else</span>
00416                 {
00417                     <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a6">unread</a>(b, off, rb + ex.bytesTransferred);
00418                     ex.bytesTransferred = 0;
00419                 }
00420                 <span class="keywordflow">throw</span> ex;
00421             }
00422             <span class="keywordflow">if</span> (<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r3">timeout</a> &gt; 0 &amp;&amp; rb &lt; len)
00423             {
00424                 <span class="keywordtype">long</span> t2 = System.currentTimeMillis();
00425                 <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r3">timeout</a> -= (int) (t2 - t1);
00426                 t1 = t2;
00427                 <span class="keywordflow">if</span> (<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r3">timeout</a> &lt;= 0)
00428                 {
00429                     <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r3">timeout</a> = 1;
00430                 }
00431             }
00432             
00433         }
00434     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="org::ipdr::ConnectionDynamic::setSoTimeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void org::ipdr::ConnectionDynamic::setSoTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>timeout</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws SocketException     <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the socket timeout for read. This operates on a cached value, for efficiency (only calling socket.setSoTimeout when there's a changed).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>miliseconds to wait before interrupting the read. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>SocketException</em>&nbsp;</td><td>If it's not supported. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a7">getInputSynchronizer</a> </dd></dl>
<div class="fragment"><pre class="fragment">00311     {
00312         <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r3">timeout</a> != <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r3">timeout</a>)
00313         {
00314             <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a>.setSoTimeout(<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r3">timeout</a>);
00315             <span class="keyword">this</span>.timeout = timeout;
00316         }
00317     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="org::ipdr::ConnectionDynamic::toString"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final String org::ipdr::ConnectionDynamic::toString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>See also:</b></dt><dd>java.lang.Object#toString() </dd></dl>
<div class="fragment"><pre class="fragment">00589     {
00590         String extra = <span class="stringliteral">""</span>;
00591         <span class="keywordflow">if</span> (<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a> == null)
00592         {
00593             extra = <span class="stringliteral">", noSocket"</span>;
00594         }
00595         <span class="keywordflow">else</span>
00596         {
00597             <span class="keywordflow">try</span>
00598             {
00599                 extra = <span class="stringliteral">", linger="</span> + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a>.getSoLinger() + <span class="stringliteral">", noDelay="</span>
00600                         + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a>.getTcpNoDelay() + <span class="stringliteral">", keepalive="</span>
00601                         + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a>.getKeepAlive();
00602             }
00603             <span class="keywordflow">catch</span> (SocketException e)
00604             {
00605                 extra = <span class="stringliteral">", socket="</span> + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">socket</a> + <span class="stringliteral">", exception: "</span> + e;
00606             }
00607         }
00608         String configStr = <span class="stringliteral">""</span>;
00609         <span class="keywordflow">if</span> (<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a> != null)
00610             configStr = <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">connectionConfig</a>.toString();
00611         <span class="keywordflow">return</span> configStr + extra;
00612     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="org::ipdr::ConnectionDynamic::unread"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void org::ipdr::ConnectionDynamic::unread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Push back bytes to be read again.<p>
If you are reading in multiple chunks (e.g., a header, then the body), you should use <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a7">getInputSynchronizer</a>to ensure that another thread doesn't interfere.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>Bytes to push back. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>off</em>&nbsp;</td><td>Offset with b of the bytes to be pushed back. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to be pushed back. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>PushbackInputStream#unread <p>
<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a> <p>
<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a> <p>
<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#t0">extraAlloc</a> <p>
<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a7">getInputSynchronizer</a> </dd></dl>
<div class="fragment"><pre class="fragment">00480     {
00481         <span class="keywordflow">if</span> (len == 0)
00482         {
00483             <span class="keywordflow">return</span>;
00484         }
00485         <span class="keywordflow">if</span> (<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a> == null)
00486         {
00487             <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a> = <span class="keyword">new</span> byte[len + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#t0">extraAlloc</a>];
00488             <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a> = <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a>.length;
00489         }
00490         <span class="keywordflow">else</span>
00491             <span class="keywordflow">if</span> (len &gt; <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a>)
00492             {
00493                 <span class="keywordtype">int</span> add = len - <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a> + <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#t0">extraAlloc</a>;
00494                 byte[] newUnreadBuf = <span class="keyword">new</span> byte[<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a>.length + add];
00495                 System.arraycopy(<a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a>, <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a>, newUnreadBuf, <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a>
00496                         + add, unreadBuf.length - <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a>);
00497                 unreadBuf = newUnreadBuf;
00498                 <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a> += add;
00499             }
00500         <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a> -= len;
00501         System.arraycopy(b, off, <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a>, <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a>, len);
00502     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="org::ipdr::ConnectionDynamic::write"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void org::ipdr::ConnectionDynamic::write           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>b</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws IOException     <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write an array of bytes to the socket.<p>
If you want to write in multiple chunks (e.g., a header, then the body), you should use <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a7">getInputSynchronizer</a>to ensure that another thread doesn't interfere.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>The bytes. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td>If the write fails. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>OutputStream#write <p>
<a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#a8">getOutputSynchronizer</a> </dd></dl>
<div class="fragment"><pre class="fragment">00334     {
00335         <a class="code" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r2">out</a>.write(b);
00336     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="r5" doxytag="org::ipdr::ConnectionDynamic::collectorConfig"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/df5/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_collector_config_i.html">CollectorConfigI</a> <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r5">org::ipdr::ConnectionDynamic::collectorConfig</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Holds collector's configuration     </td>
  </tr>
</table>
<a class="anchor" name="r4" doxytag="org::ipdr::ConnectionDynamic::connectionConfig"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/d6c/interfaceorg_1_1ipdr_1_1api_1_1configuration_1_1_connection_config_i.html">ConnectionConfigI</a> <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r4">org::ipdr::ConnectionDynamic::connectionConfig</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Holds configuration of the current connection     </td>
  </tr>
</table>
<a class="anchor" name="t0" doxytag="org::ipdr::ConnectionDynamic::extraAlloc"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#t0">org::ipdr::ConnectionDynamic::extraAlloc</a> = 1000<code> [static, protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Amount to increase the pushback buffer beyond what is needed (to avoid repetitive small re-allocations).<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="org::ipdr::ConnectionDynamic::in"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">InputStream <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r1">org::ipdr::ConnectionDynamic::in</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
socket.getInputStream().     </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="org::ipdr::ConnectionDynamic::out"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">OutputStream <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r2">org::ipdr::ConnectionDynamic::out</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
socket.getOutputStream().     </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="org::ipdr::ConnectionDynamic::socket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Socket <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r0">org::ipdr::ConnectionDynamic::socket</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The connection socket.     </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="org::ipdr::ConnectionDynamic::timeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#r3">org::ipdr::ConnectionDynamic::timeout</a> = 0<code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The last time-out value (0 means infinite timeout). This is kept as a class value, so that we can avoid unneeded calls to socket.setSoTimeout().<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#b1">setSoTimeout</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="p0" doxytag="org::ipdr::ConnectionDynamic::unreadBuf"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">byte [] <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">org::ipdr::ConnectionDynamic::unreadBuf</a> = null<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The pushback buffer (we can't use PushbackStream because it requires a single fixed allocation and we don't know in general how much pushback will be needed).<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">unreadPos</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="p1" doxytag="org::ipdr::ConnectionDynamic::unreadPos"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p1">org::ipdr::ConnectionDynamic::unreadPos</a> = 0<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The position within the pushback buffer from which the next byte will be read. When the buffer is empty, <code>pos</code> is equal to <code>buf.length</code>; when the buffer is full, <code>pos</code> is equal to zero.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../dc/d3c/classorg_1_1ipdr_1_1_connection_dynamic.html#p0">unreadBuf</a> </dd></dl>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>ipdr/Collector/org/ipdr/<a class="el" href="../../d9/d3a/org_2ipdr_2_connection_dynamic_8java.html">ConnectionDynamic.java</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 09:26:52 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
