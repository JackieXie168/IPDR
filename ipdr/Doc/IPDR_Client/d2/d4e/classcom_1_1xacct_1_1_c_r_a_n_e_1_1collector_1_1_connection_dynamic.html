<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: com::xacct::CRANE::collector::ConnectionDynamic Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="../../d8/dee/namespacecom.html">com</a>::<a class="el" href="../../d9/d91/namespacecom_1_1xacct.html">xacct</a>::<a class="el" href="../../d4/d73/namespacecom_1_1xacct_1_1_c_r_a_n_e.html">CRANE</a>::<a class="el" href="../../de/d74/namespacecom_1_1xacct_1_1_c_r_a_n_e_1_1collector.html">collector</a>::<a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html">ConnectionDynamic</a></div>
<h1>com::xacct::CRANE::collector::ConnectionDynamic Class Reference</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a0">getLog</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final <a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a1">getCollectorConfig</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final <a class="el" href="../../d5/d67/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_config.html">ConnectionConfig</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a2">getConnectionConfig</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a3">ConnectionDynamic</a> (<a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a> <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r5">collectorConfig</a>, <a class="el" href="../../d5/d67/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_config.html">ConnectionConfig</a> <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>, <a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r3">log</a>, int receiveBufferSize)  throws ConnectionIOException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a4">close</a> ()  throws ConnectionIOException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a5">write</a> (byte[] b)  throws IOException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a6">readFully</a> (byte[] b, int off, int len, int <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r4">timeout</a>)  throws IOException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a7">unread</a> (byte[] b, int off, int len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">Object&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a8">getInputSynchronizer</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">Object&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a9">getOutputSynchronizer</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a10">toString</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">final String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a11">addrAndPortToString</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static String&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#e0">versionStr</a> ()</td></tr>

<tr><td colspan="2"><br><h2>Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#b0">setSoTimeout</a> (int <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r4">timeout</a>)  throws SocketException </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#b1">read</a> (byte[] b, int off, int len)  throws IOException </td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">byte[]&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a> = null</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a> = 0</td></tr>

<tr><td colspan="2"><br><h2>Static Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#t0">extraAlloc</a> = 1000</td></tr>

<tr><td colspan="2"><br><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">final void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#d0">connectTCP</a> (<a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r3">log</a>, int receiveBufferSize)  throws ConnectionIOException </td></tr>

<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">Socket&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">socket</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">InputStream&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r1">in</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">OutputStream&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r2">out</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r3">log</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r4">timeout</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r5">collectorConfig</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d5/d67/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_config.html">ConnectionConfig</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Encapsulation of a single connection from a session. Holds the socket, input and output streams, and any related information.<p>
<dl compact><dt><b>Version:</b></dt><dd><dl compact><dt><b>Id</b></dt><dd>ConnectionDynamic.java,v 1.4 2005/01/30 15:13:41 ilyad Exp </dd></dl>
</dd></dl>

<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="a3" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::ConnectionDynamic"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">com::xacct::CRANE::collector::ConnectionDynamic::ConnectionDynamic           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>collectorConfig</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d67/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_config.html">ConnectionConfig</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>connectionConfig</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>log</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>receiveBufferSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../df/d89/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_i_o_exception.html">ConnectionIOException</a> <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a connection and make the connection to the other end. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>collectorConfig</em>&nbsp;</td><td>The collector context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>connectionConfig</em>&nbsp;</td><td>The connection's configuration. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>log</em>&nbsp;</td><td>Where to write log messages. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>receiveBufferSize</em>&nbsp;</td><td>The receive buffer size (0 means use default). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="../../df/d89/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_i_o_exception.html">ConnectionIOException</a></em>&nbsp;</td><td>If something goes wrong with the connection setup. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00068                                      {
00069         <span class="keyword">this</span>.connectionConfig = <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>;
00070         <span class="keyword">this</span>.collectorConfig = <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r5">collectorConfig</a>;
00071         <span class="keyword">this</span>.log = <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r3">log</a>;
00072 
00073         <span class="keyword">this</span>.connectTCP(<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r3">log</a>, receiveBufferSize);
00074     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="a11" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::addrAndPortToString"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final String com::xacct::CRANE::collector::ConnectionDynamic::addrAndPortToString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the address and port as a printable string. <dl compact><dt><b>Returns:</b></dt><dd>A string in the form "IPAddress:port" </dd></dl>
<div class="fragment"><pre class="fragment">00451                                               {
00452         <span class="keywordflow">return</span> <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>.getTransmitterAddress().andPortToString(<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>.getTransmitterPort());
00453     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::close"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::ConnectionDynamic::close           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws <a class="el" href="../../df/d89/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_i_o_exception.html">ConnectionIOException</a> <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Close the socket connection and ensure everything is sent. (With the usual caveat about solinger and friends.) <dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="../../df/d89/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_i_o_exception.html">ConnectionIOException</a></em>&nbsp;</td><td>If the close doesn't go properly. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00172                                                            {
00173         <span class="keywordflow">try</span> {
00174             <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r2">out</a>.flush();
00175             <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r2">out</a>.close();
00176             <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">socket</a> == null) {
00177                 <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r3">log</a>.warn(<span class="keyword">this</span>, <span class="stringliteral">"close"</span>, <span class="stringliteral">"socket is null"</span>);
00178             } <span class="keywordflow">else</span> {
00179                 <span class="comment">// socket.shutdownOutput(); // already done by out.close(): should flush all data out.</span>
00180                 <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">socket</a>.close();
00181             }
00182             <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r1">in</a>.close();
00183         } <span class="keywordflow">catch</span> (IOException e) {
00184             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(<span class="stringliteral">"Error while closing TCP connection"</span>,
00185                                             <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>, e);
00186         }
00187     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="d0" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::connectTCP"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::ConnectionDynamic::connectTCP           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>log</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>receiveBufferSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws <a class="el" href="../../df/d89/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_i_o_exception.html">ConnectionIOException</a> <code> [inline, private]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Connect to transmitter via TCP (transmitterAddress:transmitterPort are "global" to this method), waiting up to connectionConfig.connectTimeout milliseconds <dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="../../df/d89/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_i_o_exception.html">ConnectionIOException</a></em>&nbsp;</td><td>most I/O exceptions are caught with the reason preserved in the <a class="el" href="../../df/d89/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_i_o_exception.html#a2">ConnectionIOException.getCause()</a>. </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00085                                      {
00086 
00087         <span class="comment">// We might want to put a timeout on the connection.</span>
00088         <span class="comment">// XXX</span>
00089         <span class="comment">// With JDK 1.4, we could just do:</span>
00090         <span class="comment">// socket = new Socket();</span>
00091         <span class="comment">// socket.connect(new InetSocketAddress(connectionConfig.getTransmitterAddress(), connectionConfig.getTransmitterPort()),</span>
00092         <span class="comment">//                connectionConfig.connectTimeout);</span>
00093         <span class="comment">// With JDK 1.3, we would need to set a separate timer thread; when the sleep</span>
00094         <span class="comment">// sleep() times out, if no connection has been made, interrupt the main thread.</span>
00095 
00096         <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r3">log</a>.debug(<span class="keyword">this</span>, <span class="stringliteral">"connectTcp"</span>, <span class="stringliteral">"Trying TCP connection to "</span> +
00097                   <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>.transmitterAndPortString() +
00098                   <span class="stringliteral">" from "</span> + <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r5">collectorConfig</a>.getCollectorAddress());
00099 
00100         <span class="keywordflow">try</span> {
00101             <span class="comment">// Normally collector = local host, so the following will</span>
00102             <span class="comment">// usually be the same as:</span>
00103             <span class="comment">// socket = new Socket(connectionConfig.getTransmitterAddress(),</span>
00104             <span class="comment">//                     connectionConfig.getTransmitterPort())</span>
00105             <span class="comment">// But we want to be sure that things happen the way we want on</span>
00106             <span class="comment">// multi-homed systems, if the collector address is given.</span>
00107             <span class="comment">//</span>
00108             <span class="comment">// Note that port == 0 lets the system pick a port (this</span>
00109             <span class="comment">// is semi-documented in JDK API doc).</span>
00110             <span class="comment">//</span>
00111             <span class="comment">// We cannot use the "create and connect" constructor because that would</span>
00112             <span class="comment">// cause a problem with receive buffers &gt; 64K. Instead, we do things</span>
00113             <span class="comment">// in steps. Except that that requires 1.4.</span>
00114             <span class="comment">// XXX JDK 1.4: Use the connect-with-timeout version;</span>
00115 
00116             <span class="comment">// XXX When we get JDK 1.4, use newSocket();</span>
00117             <span class="comment">//      (setReuseAddress(true) not needed)</span>
00118             <span class="comment">//     setReceiveBufferSize</span>
00119             <span class="comment">//     connect, using port=0 for local</span>
00120 
00121             <span class="keyword">this</span>.socket = <span class="keyword">new</span> Socket(<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>.getTransmitterAddress().get(),
00122                    <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>.getTransmitterPort(),
00123                    <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r5">collectorConfig</a>.getCollectorAddress().get(), 0);
00124 
00125             <span class="keywordflow">if</span> (receiveBufferSize &gt; 0) {
00126                 <span class="keyword">this</span>.socket.setReceiveBufferSize(receiveBufferSize);
00127             }
00128 
00129             <span class="keywordflow">try</span> {
00130                 <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">socket</a>.setSoLinger(<span class="keyword">true</span>, 5); <span class="comment">// XXX This delay should be a parameter</span>
00131                 <span class="comment">// The SoLinger doesn't seem to have proper effect.</span>
00132             } <span class="keywordflow">catch</span> (SocketException e) {
00133                 <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r3">log</a>.warn(<span class="keyword">this</span>, <span class="stringliteral">"receiveConfig"</span>, <span class="stringliteral">"setSoLinger exception: "</span> + e);
00134             }
00135 
00136 
00137             <span class="comment">// socket.setSoTimeout(...); // if we care about blocking on input or output [we don't]</span>
00138 
00139             <span class="keyword">this</span>.socket.setTcpNoDelay(<span class="keyword">true</span>);
00140             <span class="keywordflow">try</span> {
00141                 <span class="keyword">this</span>.socket.setKeepAlive(<span class="keyword">true</span>);
00142             } <span class="keywordflow">catch</span> (SocketException ex) {
00143                 <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r3">log</a>.warn(<span class="keyword">this</span>, <span class="stringliteral">"receiveConfig"</span>, <span class="stringliteral">"Cannot set TCP keep-alive on "</span> +
00144                          <span class="keyword">this</span>.<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">socket</a> + <span class="stringliteral">": "</span> + ex);
00145             }
00146 
00147             <span class="comment">// we have our own implementation of pushback, so don't use Sun's,</span>
00148             <span class="comment">// which would be called like this:</span>
00149             <span class="comment">// this.in = new PushbackInputStream(this.socket.getInputStream(), 1000);</span>
00150             <span class="keyword">this</span>.in = <span class="keyword">this</span>.socket.getInputStream();
00151             <span class="keyword">this</span>.out = <span class="keyword">this</span>.socket.getOutputStream();
00152             <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r3">log</a>.info(<span class="keyword">this</span>, <span class="stringliteral">"receiveConfig"</span>, <span class="stringliteral">"Successful TCP connection to "</span> +
00153                      <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>.transmitterAndPortString() +
00154                      <span class="stringliteral">" from "</span> + <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r5">collectorConfig</a>.getCollectorAddress() +
00155                      <span class="stringliteral">" on socket "</span> + <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">socket</a>);
00156         } <span class="keywordflow">catch</span> (UnknownHostException e) {
00157             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(<span class="stringliteral">"could not get a host name when connecting via TCP"</span>,
00158                                             <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>, e);
00159         } <span class="keywordflow">catch</span> (ConnectException e) {
00160             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(<span class="stringliteral">"could not connect via TCP"</span>, <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>, e);
00161 
00162         } <span class="keywordflow">catch</span> (IOException e) {
00163             <span class="keywordflow">throw</span> <span class="keyword">new</span> ConnectionIOException(<span class="stringliteral">"got I/O error while connecting via TCP"</span>, <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>, e);
00164 
00165         }
00166     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::getCollectorConfig"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final <a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a> com::xacct::CRANE::collector::ConnectionDynamic::getCollectorConfig           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The collector context. <div class="fragment"><pre class="fragment">00052 { <span class="keywordflow">return</span> <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r5">collectorConfig</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::getConnectionConfig"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final <a class="el" href="../../d5/d67/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_config.html">ConnectionConfig</a> com::xacct::CRANE::collector::ConnectionDynamic::getConnectionConfig           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00055 { <span class="keywordflow">return</span> <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::getInputSynchronizer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Object com::xacct::CRANE::collector::ConnectionDynamic::getInputSynchronizer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
An object to use for synchronizing on inputs. This might be needed if you do an intial <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a6">readFully</a> to get a header, followed by another <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a6">readFully</a> to get the rest of the message.<p>
<dl compact><dt><b>Returns:</b></dt><dd>The synchronization object. </dd></dl>
<div class="fragment"><pre class="fragment">00424 { <span class="keywordflow">return</span> <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r1">in</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::getLog"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> com::xacct::CRANE::collector::ConnectionDynamic::getLog           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Where to write log messages. <div class="fragment"><pre class="fragment">00040 { <span class="keywordflow">return</span> <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r3">log</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::getOutputSynchronizer"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Object com::xacct::CRANE::collector::ConnectionDynamic::getOutputSynchronizer           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
An object to use for synchronizing on outputs.<p>
<dl compact><dt><b>Returns:</b></dt><dd>The synchronization object. </dd></dl>
<div class="fragment"><pre class="fragment">00430 { <span class="keywordflow">return</span> <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r2">out</a>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b1" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::read"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int com::xacct::CRANE::collector::ConnectionDynamic::read           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws IOException <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read bytes from the input stream.<p>
If you want to read in multiple chunks (e.g., a header, then the body), you should use <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a8">getInputSynchronizer</a> to ensure that another thread doesn't interfere. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>array of bytes to be filled. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>off</em>&nbsp;</td><td>offset within the array to start filling. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>maximum number of bytes to read. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>number of bytes actually read. </dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td>if something goes wrong (or a timeout). </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>PushbackInputStream#read <p>
<a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a8">getInputSynchronizer</a> </dd></dl>
<div class="fragment"><pre class="fragment">00389                                                                       {
00390         <span class="comment">// The following code is stolen shamelessly from</span>
00391         <span class="comment">// PushbackInputStream.read().</span>
00392 
00393         <span class="keywordflow">if</span> (len == 0) {
00394             <span class="keywordflow">return</span> 0;
00395         }
00396 
00397         <span class="keywordtype">int</span> avail = (<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a> == null) ? 0 : <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a>.length - <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a>;
00398         <span class="keywordflow">if</span> (avail &gt; 0) {
00399             <span class="keywordflow">if</span> (len &lt; avail) {
00400                 avail = len;
00401             }
00402             System.arraycopy(<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a>, <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a>, b, off, avail);
00403             <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a> += avail;
00404             off += avail;
00405             len -= avail;
00406         }
00407         <span class="keywordflow">if</span> (len &gt; 0) {
00408             len = <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r1">in</a>.read(b, off, len);
00409             <span class="keywordflow">if</span> (len == -1) {
00410                 <span class="keywordflow">return</span> avail == 0 ? -1 : avail;
00411             }
00412             <span class="keywordflow">return</span> avail + len;
00413         }
00414         <span class="keywordflow">return</span> avail;
00415     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::readFully"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::ConnectionDynamic::readFully           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>timeout</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2">  throws IOException <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Read a specified number of bytes.<p>
See the general contract of the <code>readFully</code> method of <code>DataInput</code>.<p>
Bytes for this operation are read from the contained input stream.<p>
If you want to read in multiple chunks (e.g., a header, then the body), you should use <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a8">getInputSynchronizer</a> to ensure that another thread doesn't interfere.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>the buffer into which the data is read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>off</em>&nbsp;</td><td>the start offset of the data. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>the number of bytes to read. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>timeout in milliseconds. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>EOFException</em>&nbsp;</td><td>if this input stream reaches the end before reading all the bytes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td>if an I/O error occurs. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>InterruptedIOException</em>&nbsp;</td><td>if the timeout is exceeded; in this case the bytesTransferred vaule will have the number of bytes that were read into the buffer (b) before the exception. A value of zero should not be interpreted as meaning that nothing was read; the implementation of this method may choose to save the bytes in a separate (invisible) buffer. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>java.io.FilterInputStream#in <p>
java.io.DataInput#readFully <p>
<a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a8">getInputSynchronizer</a> </dd></dl>
<div class="fragment"><pre class="fragment">00252                            {
00253 
00254         <span class="comment">// Here is the JRE code for readFully. Note that it can throw</span>
00255         <span class="comment">// an exception before it returns:</span>
00256 
00257         <span class="comment">// public final void readFully(byte b[], int off, int len) throws IOException {</span>
00258         <span class="comment">//      if (len &lt; 0)</span>
00259         <span class="comment">//          throw new IndexOutOfBoundsException();</span>
00260         <span class="comment">//      InputStream in = this.in;</span>
00261         <span class="comment">//      int n = 0;</span>
00262         <span class="comment">//      while (n &lt; len) {</span>
00263         <span class="comment">//          int count = in.read(b, off + n, len - n);</span>
00264         <span class="comment">//          if (count &lt; 0)</span>
00265         <span class="comment">//              throw new EOFException();</span>
00266         <span class="comment">//          n += count;</span>
00267         <span class="comment">//      }</span>
00268         <span class="comment">// }</span>
00269 
00270         <span class="comment">// So, it's important to keep the following logic because we</span>
00271         <span class="comment">// don't want to time out on a socket while reading.  If we</span>
00272         <span class="comment">// get nothing on it, that's ok, but if there's SOMETHING, we</span>
00273         <span class="comment">// have to make sure it is of size len</span>
00274 
00275         <span class="keywordtype">int</span> rb = 0; <span class="comment">// # of bytes that were read</span>
00276         <span class="keywordtype">long</span> t1 = System.currentTimeMillis();
00277 
00278         <span class="keywordflow">while</span> (rb &lt; len) {
00279             <span class="keywordflow">try</span> {
00280                 <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#b0">setSoTimeout</a>(<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r4">timeout</a>);
00281                 <span class="keywordtype">int</span> rbOnce = <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#b1">read</a>(b, off + rb, len - rb);
00282                 <span class="keywordflow">if</span> (rbOnce &lt; 0) {
00283                     <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a7">unread</a>(b, off, rb);
00284                     <span class="comment">// Not sure that we should push back the bytes</span>
00285                     <span class="comment">// read so far or no; but there shouldn't be</span>
00286                     <span class="comment">// another read anyway. Unfortunately, there's no</span>
00287                     <span class="comment">// way to report the number of bytes read so far</span>
00288                     <span class="comment">// (although we could subclass EOFException to</span>
00289                     <span class="comment">// provide this).</span>
00290                     <span class="keywordflow">throw</span> <span class="keyword">new</span> EOFException(<span class="stringliteral">"Unexpected end-of-stream on "</span> + <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r1">in</a>);
00291                 } <span class="keywordflow">else</span> {
00292                     rb += rbOnce;
00293                 }
00294             } <span class="keywordflow">catch</span> (InterruptedIOException ex) {
00295                 <span class="comment">// There are two choices of how to proceed: just</span>
00296                 <span class="comment">// report the bytes that weren't transferred, or push</span>
00297                 <span class="comment">// them all back and report that nothing was</span>
00298                 <span class="comment">// transferred. We choose to report all the bytes that</span>
00299                 <span class="comment">// were transferred because that doesn't require</span>
00300                 <span class="comment">// extending our pushback buffer, although chances are</span>
00301                 <span class="comment">// the caller wil call unread() to do this anyway.</span>
00302                 <span class="keywordflow">if</span> (<span class="keyword">true</span>) {
00303                     ex.bytesTransferred += rb;
00304                 } <span class="keywordflow">else</span> {
00305                     <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a7">unread</a>(b, off, rb + ex.bytesTransferred);
00306                     ex.bytesTransferred = 0;
00307                 }
00308                 <span class="keywordflow">throw</span> ex;
00309             }
00310             <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r4">timeout</a> &gt; 0 &amp;&amp; rb &lt; len) {
00311                 <span class="keywordtype">long</span> t2 = System.currentTimeMillis();
00312                 <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r4">timeout</a> -= (int)(t2 - t1);
00313                 t1 = t2;
00314                 <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r4">timeout</a> &lt;= 0) {
00315                     <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r4">timeout</a> = 1;
00316                 }
00317             }
00318         }
00319     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="b0" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::setSoTimeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::ConnectionDynamic::setSoTimeout           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>timeout</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws SocketException <code> [inline, protected]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the socket timeout for read. This operates on a cached value, for efficiency (only calling socket.setSoTimeout when there's a changed). <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td>miliseconds to wait before interrupting the read. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>SocketException</em>&nbsp;</td><td>If it's not supported. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a8">getInputSynchronizer</a> </dd></dl>
<div class="fragment"><pre class="fragment">00196                                                                           {
00197         <span class="keywordflow">if</span> (<span class="keyword">this</span>.<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r4">timeout</a> != <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r4">timeout</a>) {
00198             <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">socket</a>.setSoTimeout(<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r4">timeout</a>);
00199             <span class="keyword">this</span>.timeout = timeout;
00200         }
00201     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::toString"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final String com::xacct::CRANE::collector::ConnectionDynamic::toString           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00432                                    {
00433         String extra = <span class="stringliteral">""</span>;
00434         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">socket</a> == null) {
00435             extra = <span class="stringliteral">", noSocket"</span>;
00436         } <span class="keywordflow">else</span> {
00437             <span class="keywordflow">try</span> {
00438                 extra = <span class="stringliteral">", linger="</span> + <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">socket</a>.getSoLinger() +
00439                     <span class="stringliteral">", noDelay="</span> + <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">socket</a>.getTcpNoDelay() +
00440                     <span class="stringliteral">", keepalive="</span> + <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">socket</a>.getKeepAlive();
00441             } <span class="keywordflow">catch</span> (SocketException e) {
00442                 extra = <span class="stringliteral">", socket="</span> + <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">socket</a> + <span class="stringliteral">", exception: "</span> + e;
00443             }
00444         }
00445         <span class="keywordflow">return</span> <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">connectionConfig</a>.toString() + extra;
00446     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::unread"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">final void com::xacct::CRANE::collector::ConnectionDynamic::unread           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname" nowrap> <em>b</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>len</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Push back bytes to be read again.<p>
If you are reading in multiple chunks (e.g., a header, then the body), you should use <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a8">getInputSynchronizer</a> to ensure that another thread doesn't interfere. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>Bytes to push back. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>off</em>&nbsp;</td><td>Offset with b of the bytes to be pushed back. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>Number of bytes to be pushed back. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>PushbackInputStream#unread <p>
<a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a> <p>
<a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a> <p>
<a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#t0">extraAlloc</a> <p>
<a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a8">getInputSynchronizer</a> </dd></dl>
<div class="fragment"><pre class="fragment">00356                                                          {
00357         <span class="keywordflow">if</span> (len == 0) {
00358             <span class="keywordflow">return</span>;
00359         }
00360         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a> == null) {
00361             <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a> = <span class="keyword">new</span> byte[len + <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#t0">extraAlloc</a>];
00362             <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a> = <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a>.length;
00363         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (len &gt; <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a>) {
00364             <span class="keywordtype">int</span> add = len - <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a> + <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#t0">extraAlloc</a>;
00365             byte [] newUnreadBuf = <span class="keyword">new</span> byte[<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a>.length + add];
00366             System.arraycopy(<a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a>, <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a>,
00367                              newUnreadBuf, <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a> + add,
00368                              unreadBuf.length - <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a>);
00369             unreadBuf = newUnreadBuf;
00370             <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a> += add;
00371         }
00372         <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a> -= len;
00373         System.arraycopy(b, off, <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a>, <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a>, len);
00374     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="e0" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::versionStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static String com::xacct::CRANE::collector::ConnectionDynamic::versionStr           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Id</b></dt><dd>ConnectionDynamic.java,v 1.4 2005/01/30 15:13:41 ilyad Exp </dd></dl>
<div class="fragment"><pre class="fragment">00028 { <span class="keywordflow">return</span> <span class="stringliteral">"@(#) $Id: ConnectionDynamic.java,v 1.4 2005/01/30 15:13:41 ilyad Exp $"</span>; }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::write"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void com::xacct::CRANE::collector::ConnectionDynamic::write           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">byte[]&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>b</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>  throws IOException <code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Write an array of bytes to the socket.<p>
If you want to write in multiple chunks (e.g., a header, then the body), you should use <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a8">getInputSynchronizer</a> to ensure that another thread doesn't interfere. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>b</em>&nbsp;</td><td>The bytes. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td>If the write fails. </td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd>OutputStream#write <p>
<a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#a9">getOutputSynchronizer</a> </dd></dl>
<div class="fragment"><pre class="fragment">00213                                                    {
00214         <a class="code" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r2">out</a>.write(b);
00215     }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Field Documentation</h2>
<a class="anchor" name="r5" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::collectorConfig"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/da1/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_collector_config.html">CollectorConfig</a> <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r5">com::xacct::CRANE::collector::ConnectionDynamic::collectorConfig</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r6" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::connectionConfig"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d5/d67/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_config.html">ConnectionConfig</a> <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r6">com::xacct::CRANE::collector::ConnectionDynamic::connectionConfig</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="t0" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::extraAlloc"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#t0">com::xacct::CRANE::collector::ConnectionDynamic::extraAlloc</a> = 1000<code> [static, protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Amount to increase the pushback buffer beyond what is needed (to avoid repetitive small re-allocations). <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="r1" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::in"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">InputStream <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r1">com::xacct::CRANE::collector::ConnectionDynamic::in</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
socket.getInputStream().     </td>
  </tr>
</table>
<a class="anchor" name="r3" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::log"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d2/d43/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_log_handler.html">LogHandler</a> <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r3">com::xacct::CRANE::collector::ConnectionDynamic::log</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="r2" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::out"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">OutputStream <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r2">com::xacct::CRANE::collector::ConnectionDynamic::out</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
socket.getOutputStream().     </td>
  </tr>
</table>
<a class="anchor" name="r0" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::socket"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">Socket <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r0">com::xacct::CRANE::collector::ConnectionDynamic::socket</a><code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The connection socket.     </td>
  </tr>
</table>
<a class="anchor" name="r4" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::timeout"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#r4">com::xacct::CRANE::collector::ConnectionDynamic::timeout</a> = 0<code> [private]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The last time-out value (0 means infinite timeout). This is kept as a class value, so that we can avoid unneeded calls to socket.setSoTimeout(). <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#b0">setSoTimeout</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="p0" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::unreadBuf"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">byte [] <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">com::xacct::CRANE::collector::ConnectionDynamic::unreadBuf</a> = null<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The pushback buffer (we can't use PushbackStream because it requires a single fixed allocation and we don't know in general how much pushback will be needed). <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">unreadPos</a> </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="p1" doxytag="com::xacct::CRANE::collector::ConnectionDynamic::unreadPos"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p1">com::xacct::CRANE::collector::ConnectionDynamic::unreadPos</a> = 0<code> [protected]</code>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The position within the pushback buffer from which the next byte will be read. When the buffer is empty, <code>pos</code> is equal to <code>buf.length</code>; when the buffer is full, <code>pos</code> is equal to zero. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d2/d4e/classcom_1_1xacct_1_1_c_r_a_n_e_1_1collector_1_1_connection_dynamic.html#p0">unreadBuf</a> </dd></dl>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>ipdr/Collector/com/xacct/CRANE/collector/<a class="el" href="../../d1/dca/com_2xacct_2_c_r_a_n_e_2collector_2_connection_dynamic_8java.html">ConnectionDynamic.java</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 09:26:43 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
