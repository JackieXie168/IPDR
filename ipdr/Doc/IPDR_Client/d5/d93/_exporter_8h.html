<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: For Doxygen/src/Exporter/Exporter.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="../../dir_000000.html">For Doxygen</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000003.html">src</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000006.html">Exporter</a></div>
<h1>Exporter.h File Reference</h1><code>#include &lt;<a class="el" href="../../d4/d71/_config_8h.html">IPDR/Config.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../df/dde/_defs_8h.html">IPDR/Defs.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../da/d39/_i_p_d_r_8h.html">IPDR/IPDR.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d8/d16/_memory_management_8h.html">Common/MemoryManagement.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d5/d93/_transport_8h.html">Common/Transport.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d2/da7/_dynamic_array_8h.html">Common/DynamicArray.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d3/d6e/_console_8h.html">Common/Console.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d3/d80/_parameters_handler_8h.html">Common/ParametersHandler.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../db/d10/_chunks_manager_8h.html">Common/ChunksManager.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../db/d1e/_protocol_8h.html">Common/Protocol.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../de/d8f/_configuration_names_8h.html">Common/ConfigurationNames.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d1/dc1/_templates_8h.html">Exporter/Templates.h</a>&gt;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a0">EXPORTER_H_RCSID</a>&nbsp;&nbsp;&nbsp;"@(#) $Id: Exporter.h,v 1.55 2005/04/21 12:09:09 dmitryk Exp $" IPDR_COPYRIGHT_STR</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>&nbsp;&nbsp;&nbsp;(E-&gt;PS)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a2">EXPORTER_TRANSPORT</a>&nbsp;&nbsp;&nbsp;(E-&gt;TransportHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../db/da6/struct_i_p_d_r__tag___queue_handler.html">QueueHandler</a> *) E-&gt;QHandler)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>&nbsp;&nbsp;&nbsp;(&amp;(E-&gt;ExporterLog))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>&nbsp;&nbsp;&nbsp;(S-&gt;ExporterPtr-&gt;PS)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a6">SESSION_LOG</a>&nbsp;&nbsp;&nbsp;(&amp;(S-&gt;ExporterPtr-&gt;ExporterLog))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a7">PRIORITY_MAX</a>&nbsp;&nbsp;&nbsp;2147483647</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a8">GetCSStateStr</a>(CSState)&nbsp;&nbsp;&nbsp;(((CSState) &gt;= IPDR_CS_DISCONNECTED &amp;&amp; (CSState) &lt;= IPDR_CS_ACTIVE) ? <a class="el" href="../../d5/d93/_exporter_8h.html#a12">ServerStateStr</a>[CSState] : "unknown-state")</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a9">GetServerStateStr</a>(State)&nbsp;&nbsp;&nbsp;(((State) &gt;= IPDR_SERVER_DISCONNECTED &amp;&amp; (State) &lt;= IPDR_SERVER_UNPAUSED) ? <a class="el" href="../../d5/d93/_exporter_8h.html#a12">ServerStateStr</a>[State] : "unknown-state")</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a10">CollectorCapabilities</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d3/d7e/struct_exporter_capabilities.html">ExporterCapabilities</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a11">MAX_EVENT_MSG_LEN</a>&nbsp;&nbsp;&nbsp;512</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">IPDR_tag_TransmissionContext</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a14">TransmissionContext</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_tag_Collector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a15">Collector</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDR_tag_Connection</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a16">IPDRConnection</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">IPDR_tag_CollectorSession</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a17">CollectorSession</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_tag_Session</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a18">Session</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_tag_Exporter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a19">Exporter</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../db/da6/struct_i_p_d_r__tag___queue_handler.html">IPDR_tag_QueueHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a20">QueueHandler</a></td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a51">ConnectionState</a> { <a class="el" href="../../d5/d93/_exporter_8h.html#a51a21">IPDR_CONNECTION_DISCONNECTED</a> =  0, 
<a class="el" href="../../d5/d93/_exporter_8h.html#a51a22">IPDR_CONNECTION_WAITRESPONSE</a> =  1, 
<a class="el" href="../../d5/d93/_exporter_8h.html#a51a23">IPDR_CONNECTION_CONNECTED</a> =  2
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a52">CollectorSessionState</a> { <a class="el" href="../../d5/d93/_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a> =  0, 
<a class="el" href="../../d5/d93/_exporter_8h.html#a52a25">IPDR_CS_INITIATION</a> =  2, 
<a class="el" href="../../d5/d93/_exporter_8h.html#a52a26">IPDR_CS_READY</a> =  3, 
<a class="el" href="../../d5/d93/_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a> =  4
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a28">Session_SelectActiveCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a29">Session_SendOutstandingData</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a30">Session_HandleTemplateChanges</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, int NumChanges, unsigned char *TCBs, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Force, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> CopyFromExporter, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Negotiable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a31">EventDataInit</a> (<a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *, enum <a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga4">IPDR_Event_t</a>, <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a32">Exporter_TriggerEvent</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga6">IPDR_DebugLevel</a> LoggingLevel, const <a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *EventData, <a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS, const char *Msg,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a33">Exporter_Reconfigure</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a34">Exporter_BuildRecord</a> (<a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *CMgr, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, struct <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">IPDR_tag_Template</a> *Tmpl, const void *Data, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, unsigned long *RecordSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a35">Exporter_SendRecord</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Immediate, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> duplicate)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a36">Exporter_PrepareToSend</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a37">Exporter_CreateSessionInternal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, const char *Name, unsigned char ID, const char *Description, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> *SH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a38">IPDR_GetTemplateInternal</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, int TemplateID, char **SchemaName, char **TypeName, int *NumKeys, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> *TH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a39">Exporter_AddCollectorInternal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, const char *Name, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr, unsigned short Port, unsigned short NumberOfActive, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> isDummy, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> *CH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a40">Exporter_AssocCollectorSession_Internal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *C, unsigned short Priority)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a41">Exporter_TriggeTemplateChangedCallback</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a42">Exporter_AddIPDRConnectionToCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll, <a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a43">TransmissionContext_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a44">Exporter_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a45">Session_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a46">Collector_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a47">CollectorSession_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a48">Connection_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a49">Exporter_WindowSizeTimerCallback</a> (void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a50">Exporter_GetCapabilities</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a12">ServerStateStr</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/dcd/struct_i_p_d_r__tag___connection_handlers.html">ConnectionHandlers</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d93/_exporter_8h.html#a13">Exporter_DefaultHandlers</a></td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Header file containing the main client (transmitter) data structures, and for functions defined in Exporter/Exporter.c.<p>
Copyright (2005) © Amdocs, All Rights Reserved<p>
This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND either expresses or implied.<p>
<dl compact><dt><b>Id</b></dt><dd><a class="el" href="../../d5/d93/_exporter_8h.html">Exporter.h</a>,v 1.55 2005/04/21 12:09:09 dmitryk Exp </dd></dl>
<p>
The file contains definitions of the <a class="el" href="../../d5/d93/_exporter_8h.html#a14">TransmissionContext</a>, <a class="el" href="../../d5/d93/_exporter_8h.html#a18">Session</a>, #Server, <a class="el" href="../../d5/d93/_exporter_8h.html#a19">Exporter</a>, <a class="el" href="../../d5/d93/_exporter_8h.html#a20">QueueHandler</a> data structures. <hr><h2>Define Documentation</h2>
<a class="anchor" name="a10" doxytag="Exporter.h::CollectorCapabilities"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define CollectorCapabilities&nbsp;&nbsp;&nbsp;<a class="el" href="../../d3/d7e/struct_exporter_capabilities.html">ExporterCapabilities</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="Exporter.h::EXPORTER_H_RCSID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define EXPORTER_H_RCSID&nbsp;&nbsp;&nbsp;"@(#) $Id: Exporter.h,v 1.55 2005/04/21 12:09:09 dmitryk Exp $" IPDR_COPYRIGHT_STR          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="Exporter.h::EXPORTER_LOG"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define EXPORTER_LOG&nbsp;&nbsp;&nbsp;(&amp;(E-&gt;ExporterLog))          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="Exporter.h::EXPORTER_PLATFORM"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define EXPORTER_PLATFORM&nbsp;&nbsp;&nbsp;(E-&gt;PS)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="Exporter.h::EXPORTER_QHANDLER"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define EXPORTER_QHANDLER&nbsp;&nbsp;&nbsp;((<a class="el" href="../../db/da6/struct_i_p_d_r__tag___queue_handler.html">QueueHandler</a> *) E-&gt;QHandler)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="Exporter.h::EXPORTER_TRANSPORT"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define EXPORTER_TRANSPORT&nbsp;&nbsp;&nbsp;(E-&gt;TransportHandle)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="Exporter.h::GetCSStateStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define GetCSStateStr          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CSState&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(((CSState) &gt;= IPDR_CS_DISCONNECTED &amp;&amp; (CSState) &lt;= IPDR_CS_ACTIVE) ? <a class="el" href="../../d5/d93/_exporter_8h.html#a12">ServerStateStr</a>[CSState] : "unknown-state")</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the string for a particular state.     </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="Exporter.h::GetServerStateStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define GetServerStateStr          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">State&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(((State) &gt;= IPDR_SERVER_DISCONNECTED &amp;&amp; (State) &lt;= IPDR_SERVER_UNPAUSED) ? <a class="el" href="../../d5/d93/_exporter_8h.html#a12">ServerStateStr</a>[State] : "unknown-state")</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="Exporter.h::MAX_EVENT_MSG_LEN"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MAX_EVENT_MSG_LEN&nbsp;&nbsp;&nbsp;512          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="Exporter.h::PRIORITY_MAX"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define PRIORITY_MAX&nbsp;&nbsp;&nbsp;2147483647          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="Exporter.h::SESSION_LOG"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define SESSION_LOG&nbsp;&nbsp;&nbsp;(&amp;(S-&gt;ExporterPtr-&gt;ExporterLog))          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="Exporter.h::SESSION_PLATFORM"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define SESSION_PLATFORM&nbsp;&nbsp;&nbsp;(S-&gt;ExporterPtr-&gt;PS)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a15" doxytag="Exporter.h::Collector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_tag_Collector</a>
 <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Structure containing information about a collector.     </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="Exporter.h::CollectorSession"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">IPDR_tag_CollectorSession</a>
 <a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Structure containing information about a server (collector).     </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="Exporter.h::Exporter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_tag_Exporter</a>
 <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Structure containing information about a IPDR exporter. Its purpose is to contain the fields specified above for use of     </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="Exporter.h::IPDRConnection"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDR_tag_Connection</a>
 <a class="el" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Structure containing information about a ipdr connection.     </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="Exporter.h::QueueHandler"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../db/da6/struct_i_p_d_r__tag___queue_handler.html">IPDR_tag_QueueHandler</a>
 <a class="el" href="../../db/da6/struct_i_p_d_r__tag___queue_handler.html">QueueHandler</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Structure containing callbacks for handling data queueing (actual implemtation may vary depending on the queuing model).     </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="Exporter.h::Session"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_tag_Session</a>
 <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Structure containing a set of redundent servers (collectors) plus a list of transmission contexts used to queue records. It represents Session entity as specified by IPDR-SP protocol     </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="Exporter.h::TransmissionContext"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">IPDR_tag_TransmissionContext</a>
 <a class="el" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Contains a specific templates configuration plus data attached to the context by the queue handler (for example a volatile queue).     </td>
  </tr>
</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="a52" doxytag="Exporter.h::CollectorSessionState"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="../../d5/d93/_exporter_8h.html#a52">CollectorSessionState</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="a52a24" doxytag="IPDR_CS_DISCONNECTED"></a>IPDR_CS_DISCONNECTED</em>&nbsp;</td><td>
Initial </td></tr>
<tr><td valign="top"><em><a class="anchor" name="a52a25" doxytag="IPDR_CS_INITIATION"></a>IPDR_CS_INITIATION</em>&nbsp;</td><td>
Got flow start, sending template data </td></tr>
<tr><td valign="top"><em><a class="anchor" name="a52a26" doxytag="IPDR_CS_READY"></a>IPDR_CS_READY</em>&nbsp;</td><td>
Not active, but ready to have session </td></tr>
<tr><td valign="top"><em><a class="anchor" name="a52a27" doxytag="IPDR_CS_ACTIVE"></a>IPDR_CS_ACTIVE</em>&nbsp;</td><td>
In active session </td></tr>
</table>
</dl>
<div class="fragment"><pre class="fragment">00092 {
00093         <a class="code" href="../../d5/d93/_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>    = 0,    
00094         <a class="code" href="../../d5/d93/_exporter_8h.html#a52a25">IPDR_CS_INITIATION</a>              = 2,    
00095         <a class="code" href="../../d5/d93/_exporter_8h.html#a52a26">IPDR_CS_READY</a>                   = 3,    
00096         <a class="code" href="../../d5/d93/_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a>                  = 4             
00097 };
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="Exporter.h::ConnectionState"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="../../d5/d93/_exporter_8h.html#a51">ConnectionState</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Connection State <dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="a51a21" doxytag="IPDR_CONNECTION_DISCONNECTED"></a>IPDR_CONNECTION_DISCONNECTED</em>&nbsp;</td><td>
Initial state </td></tr>
<tr><td valign="top"><em><a class="anchor" name="a51a22" doxytag="IPDR_CONNECTION_WAITRESPONSE"></a>IPDR_CONNECTION_WAITRESPONSE</em>&nbsp;</td><td>
Connection is waiting for connect response message </td></tr>
<tr><td valign="top"><em><a class="anchor" name="a51a23" doxytag="IPDR_CONNECTION_CONNECTED"></a>IPDR_CONNECTION_CONNECTED</em>&nbsp;</td><td>
Connected </td></tr>
</table>
</dl>
<div class="fragment"><pre class="fragment">00085                      {
00086         <a class="code" href="../../d5/d93/_exporter_8h.html#a51a21">IPDR_CONNECTION_DISCONNECTED</a>    = 0,    
00087         <a class="code" href="../../d5/d93/_exporter_8h.html#a51a22">IPDR_CONNECTION_WAITRESPONSE</a>    = 1,    
00088         <a class="code" href="../../d5/d93/_exporter_8h.html#a51a23">IPDR_CONNECTION_CONNECTED</a>               = 2             
00089 };
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a46" doxytag="Exporter.h::Collector_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Collector_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00844 {
00845         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *C = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *)Obj;
00846 
00847         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o8">ExporterPtr</a>;
00848         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll;
00849         <span class="keywordtype">int</span> Index;
00850 
00851         strncpy(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>, <span class="stringliteral">"Dcollector"</span>, <span class="keyword">sizeof</span> C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>);
00852 
00853         <span class="comment">/* Remove the Collector from Exporter's Collector list */</span>
00854         <span class="keywordflow">for</span> (Index = 0; Index &lt; E-&gt;Collectors.Length; Index++)
00855         {
00856         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
00857         <span class="keywordflow">if</span> (Coll != NULL &amp;&amp; Coll == C &amp;&amp; Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a> == C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a> &amp;&amp; strcmp(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>) == 0)
00858                 {
00859                         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>), Index);
00860         }
00861     }
00862         
00863         <span class="keywordflow">for</span> (Index = 0; Index &lt; E-&gt;DummyCollectors.Length; Index++)
00864         {
00865         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o15">DummyCollectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
00866         <span class="keywordflow">if</span> (Coll == C)
00867                 {
00868                         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o15">DummyCollectors</a>), Index);
00869         }
00870     }
00871 
00872         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>));
00873         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>));
00874 
00875         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>);
00876 
00877         strncpy(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>, <span class="stringliteral">"Xcollector"</span>, <span class="keyword">sizeof</span> C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>);
00878 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="Exporter.h::CollectorSession_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void CollectorSession_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00917 {
00918         <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>*       CS = (<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *)Obj;
00919         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>*                        S = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a> ;
00920         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>*                       E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
00921         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>*                      C = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> ;
00922         <span class="keywordtype">int</span>                                     Index ;
00923 
00924 
00925         strncpy(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>, <span class="stringliteral">"Dcollsess"</span>, <span class="keyword">sizeof</span> CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>);
00926 
00927         <span class="keywordflow">if</span>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o8">TmplDataTimer</a> != NULL)
00928         <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o8">TmplDataTimer</a>);
00929 
00930         <span class="keywordflow">if</span>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a> != NULL)
00931         <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a>);
00932 
00933         <span class="comment">/* Remove the CollectorSession from Exporter's Collector list */</span>
00934         <span class="keywordflow">for</span> (Index = 0; Index &lt; E-&gt;CollectorSessions.Length; Index++)
00935                 <span class="keywordflow">if</span>( CS == E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index] )
00936                         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>), Index);
00937 
00938         <span class="comment">/* Remove the Collector Session from its  session */</span>
00939         <span class="keywordflow">for</span> (Index = 0; Index &lt; S-&gt;CollectorSessions.Length; Index++)
00940                 <span class="keywordflow">if</span>( CS == S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index] )
00941                         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>), Index);
00942 
00943         <span class="comment">/* Remove the Collector Session from its Collector */</span>
00944         <span class="keywordflow">for</span> (Index = 0; Index &lt; C-&gt;CollectorSessions.Length; Index++)
00945                 <span class="keywordflow">if</span>( CS == C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index] )
00946                         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>), Index);
00947 
00948         strncpy(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>, <span class="stringliteral">"Xcollsess"</span>, <span class="keyword">sizeof</span> CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>);
00949 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="Exporter.h::Connection_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Connection_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00883 {
00884         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *C = (<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *)Obj;
00885         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o10">ExporterPtr</a>;
00886 
00887         strncpy(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>, <span class="stringliteral">"Dconnect"</span>, <span class="keyword">sizeof</span>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>));
00888         
00889         <span class="keywordflow">if</span>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o7">KeepAliveOUTTimerID</a> != NULL)
00890         {
00891                 <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o7">KeepAliveOUTTimerID</a>);
00892                 C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o7">KeepAliveOUTTimerID</a> = NULL;
00893         }
00894         
00895         <span class="keywordflow">if</span>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o6">KeepAliveINTimerID</a> != NULL)
00896         {
00897                 <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o6">KeepAliveINTimerID</a>);
00898                 C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o6">KeepAliveINTimerID</a> = NULL;
00899         }
00900 
00901         <span class="keywordflow">if</span>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> != NULL)
00902         {
00903                 <a class="code" href="../../d5/d93/_transport_8h.html#a24">TL_HandleDisconnection</a>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>);
00904                 <span class="comment">/*Platform_SleepMS(PS, 1000);*/</span>
00905         }
00906         
00907         C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> = NULL ;
00908         C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o4">Owner</a> = NULL ;
00909         C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o10">ExporterPtr</a> = NULL ;
00910 
00911         C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o1">State</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a51a21">IPDR_CONNECTION_DISCONNECTED</a> ;
00912 
00913         strncpy(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>, <span class="stringliteral">"Xconnect"</span>, <span class="keyword">sizeof</span> C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>);
00914 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="Exporter.h::EventDataInit"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void EventDataInit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>EventData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>enum <a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga4">IPDR_Event_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>EventID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Sess</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize an event structure.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>EventData</em>&nbsp;</td><td>structure to update </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>EventID</em>&nbsp;</td><td>ID to put into it </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer) (may be NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CS</em>&nbsp;</td><td>Collector Session handle (pointer) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Sess</em>&nbsp;</td><td>session (may be NULL) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">03568 {
03569     EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o0">EventID</a>                     = EventID;
03570     <span class="keywordflow">if</span> (CS) {
03571         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o1">IC</a>                  = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>;
03572     } <span class="keywordflow">else</span> {
03573         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o1">IC</a>                  = NULL;
03574     }
03575     <span class="keywordflow">if</span> (E &amp;&amp; Sess) {
03576         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o2">OutstandingDataCount</a>    = <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, Sess);
03577         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o3">UnacknowledgedDataCount</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UnacknowledgedDataCount(E, Sess);
03578     } <span class="keywordflow">else</span> {
03579         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o2">OutstandingDataCount</a>    = 0;
03580         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o3">UnacknowledgedDataCount</a> = 0;
03581     }
03582     <span class="keywordflow">if</span> (Sess) {
03583         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o4">SessionID</a>               = Sess-&gt;ID;
03584         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o5">SessionName</a>             = Sess-&gt;Name;
03585         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o6">SessionDescription</a>      = Sess-&gt;Description;
03586     } <span class="keywordflow">else</span> {
03587         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o4">SessionID</a>               = 0;
03588         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o5">SessionName</a>             = <span class="stringliteral">""</span>;
03589         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o6">SessionDescription</a>      = <span class="stringliteral">""</span>;
03590     }
03591 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="Exporter.h::Exporter_AddCollectorInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_AddCollectorInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>Port</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>NumberOfActive</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>isDummy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add a collector to a list of servers (collectors) list. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga4">IPDR_AddCollector</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>handle to a previously created exporter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>name of server (collector) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>IP address of the server (collector) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Port</em>&nbsp;</td><td>port number of the server (collector) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumberOfActive</em>&nbsp;</td><td>number of active collectors to allow</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04430 {
04431     <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>*          Coll;
04432     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>         Status;
04433         <span class="keywordtype">int</span>                     Index;
04434     <a class="code" href="../../d5/d93/_transport_8h.html#a28">TL_PABuf</a>            paBuf;
04435 
04436     <span class="keywordflow">if</span> (!Name) {
04437         Name = <span class="stringliteral">""</span>;
04438     }
04439 
04440         <span class="keywordflow">if</span>(CH) *CH = NULL ;
04441 
04442     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04443 
04444         <span class="keywordflow">for</span> (Index = 0; isDummy == <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a> &amp;&amp; Index &lt; E-&gt;Collectors.Length; Index++) {
04445         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
04446         <span class="keywordflow">if</span> (Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a> == Addr || strcmp(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>, Name) == 0) {
04447                         <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04448                        <span class="stringliteral">"Exporter_AddCollectorInternal"</span>, <span class="stringliteral">"Collector '%s' already exists"</span>, Name);
04449 
04450                         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04451             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a194">IPDR_ERR_COLLECTOR_ALREADY_EXISTS</a>;
04452         }
04453     }
04454 
04455     Status = <a class="code" href="../../d5/d55/_memory_management_8c.html#a2">Object_Allocate</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>),
04456                              <a class="code" href="../../d5/db3/_exporter_8c.html#a40">Collector_Destructor</a>,
04457                              (<span class="keywordtype">void</span> **) &amp; Coll);
04458     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04459         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04460         <span class="keywordflow">return</span> Status;
04461     }
04462 
04463         Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a2">DynamicArray_Create</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>),
04464                                  <a class="code" href="../../d5/db3/_exporter_8c.html#a3">INITIAL_COLLECTOR_CONNECTIONS_ARRAY_CAPACITY</a>);
04465 
04466         <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04467         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
04468         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04469         <span class="keywordflow">return</span> Status;
04470     }
04471 
04472         Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a2">DynamicArray_Create</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>),
04473                                  <a class="code" href="../../d5/db3/_exporter_8c.html#a4">INITIAL_COLLECTOR_COLLECTORSESSIONS_ARRAY_CAPACITY</a>);
04474 
04475         <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04476         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
04477         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04478         <span class="keywordflow">return</span> Status;
04479     }
04480 
04481     strncpy(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>, <span class="stringliteral">"COLLECTOR"</span>, <span class="keyword">sizeof</span>(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>));
04482     {
04483         <span class="keywordtype">char</span>* tmpName;
04484         Status = <a class="code" href="../../d5/db5/_common_util_8c.html#a5">Util_StrDup</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Name, &amp;tmpName);
04485         Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a> = tmpName;
04486     }
04487     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04488         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
04489         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04490         <span class="keywordflow">return</span> Status;
04491     }
04492 
04493     Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a> = Addr;
04494     Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o5">Port</a> = Port;
04495     Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o6">NumOfConnections</a> = NumberOfActive;
04496         Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o8">ExporterPtr</a> = E;
04497         Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o9">isDummy</a> = isDummy ;
04498 
04499         <span class="keywordflow">for</span>(Index = 0; Index &lt; NumberOfActive; Index++)
04500         {
04501                 Status = <a class="code" href="../../d5/db3/_exporter_8c.html#a43">Exporter_AddIPDRConnectionToCollector</a>( E, Coll, NULL );
04502                 <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
04503                 {
04504                         <a class="code" href="../../da/df4/_log_8h.html#a28">Log_Write</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
04505                    <span class="stringliteral">"Exporter_AddCollectorInternal"</span>, <span class="stringliteral">"Failed To Add IPDRConnection To Collector"</span>);
04506                 }
04507         }
04508         
04509         <span class="keywordflow">if</span>(<a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a> == isDummy)
04510         {
04511                 Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a12">DynamicArray_AddElement</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, 
04512                                                                         &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o15">DummyCollectors</a>), Coll,
04513                                                                         &amp; Index);
04514         }
04515     <span class="keywordflow">else</span>
04516         {
04517                 Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a12">DynamicArray_AddElement</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, 
04518                                                                         &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>), Coll,
04519                                                                         &amp; Index);
04520         }
04521     
04522         <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04523         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
04524         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04525         <span class="keywordflow">return</span> Status;
04526     }
04527 
04528 
04529     <a class="code" href="../../da/df4/_log_8h.html#a32">Log_Write4</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04530                <span class="stringliteral">"Exporter_AddCollectorInternal"</span>,
04531                <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a11">MSG_EXPORTER_ADD_SERVER</a>, Name,
04532                <a class="code" href="../../d5/d93/_transport_8h.html#a16">TL_PrintAddressAndPort</a>(Addr, Port, paBuf),
04533                NumberOfActive,(<a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>==isDummy)?<span class="stringliteral">"Dummy"</span>:<span class="stringliteral">"Real"</span>);
04534 
04535         <span class="keywordflow">if</span>(CH) *CH = Coll ;
04536 
04537     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04538     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04539 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="Exporter.h::Exporter_AddIPDRConnectionToCollector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_AddIPDRConnectionToCollector           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Coll</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00954 {
00955         <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00956         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC;
00957         <span class="keywordtype">int</span> Index ;
00958         
00959         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00960 
00961 
00962         Status = <a class="code" href="../../d5/d55/_memory_management_8c.html#a2">Object_Allocate</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a>),
00963                                         <a class="code" href="../../d5/db3/_exporter_8c.html#a41">Connection_Destructor</a>,
00964                                         (<span class="keywordtype">void</span> **) &amp; IC);
00965         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00966         {
00967                 <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
00968                            <span class="stringliteral">"Exporter_ConnectCallback"</span>, <span class="stringliteral">"Object_Allocate Error, Status: %d"</span>,
00969                            Status);
00970                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00971                 <span class="keywordflow">return</span> Status ;
00972         }
00973 
00974         strncpy(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>, <span class="stringliteral">"CONNEC"</span>, <span class="keyword">sizeof</span>(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>));
00975         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o1">State</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a51a21">IPDR_CONNECTION_DISCONNECTED</a> ;
00976         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o2">Autoconnect</a> = (Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o6">NumOfConnections</a> == 0)?<a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>:<a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
00977         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> = C;
00978         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o4">Owner</a> = Coll;
00979         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o5">ConnectResponseTimerID</a> = NULL;
00980         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o6">KeepAliveINTimerID</a> = NULL;
00981         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o7">KeepAliveOUTTimerID</a> = NULL;
00982         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o8">RemoteKeepAliveInterval</a> = (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o4">KeepAliveInterval</a>)+500;
00983         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o9">isDummy</a> = Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o9">isDummy</a> ;
00984         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o10">ExporterPtr</a> = E;
00985 
00986         <span class="keywordflow">if</span>(C != NULL)
00987                 C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o11">Owner</a> = IC;
00988 
00989         Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, &amp;(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>), IC, &amp;Index);
00990         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00991         {
00992                 <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
00993                            <span class="stringliteral">"Exporter_ConnectCallback"</span>, <span class="stringliteral">"DynamicArray_AppendElement Error, Status: %d"</span>,
00994                            Status);
00995                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00996                 <span class="keywordflow">return</span> Status ;
00997         }
00998         
00999         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01000 
01001         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01002 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="Exporter.h::Exporter_AssocCollectorSession_Internal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_AssocCollectorSession_Internal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>Priority</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Associates collector with the session <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga7">IPDR_AssocCollectorSession</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>- Exporter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>- Session to associate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>C</em>&nbsp;</td><td>- Collector to associate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Priority</em>&nbsp;</td><td>- Priority to associate</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04557 {
04558         <span class="keywordtype">int</span>                             Index, SIndex, CIndex ;
04559     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>                 Status;
04560         <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>*       CS = NULL ;
04561         <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>*       lookForCS = NULL ;
04562         <a class="code" href="../../d5/d93/_transport_8h.html#a28">TL_PABuf</a>                        paBuf;
04563 
04564         <span class="keywordflow">if</span> ( !E || !S || !C ) {
04565         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
04566     }
04567 
04568         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04569 
04570         <span class="keywordflow">if</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
04571         {
04572                 <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
04573                                 <span class="stringliteral">"Exporter_AssocCollectorSession_Internal"</span>,
04574                                 <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a121">MSG_EXPORTER_SESSION_MUST_STOP2</a>,
04575                                 S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>);
04576                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04577                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a214">IPDR_ERR_SESSION_IS_RUNNING</a>;
04578         }
04579 
04580 
04581         <span class="keywordflow">for</span>(Index = 0;Index &lt; E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a> ; Index++)
04582         {
04583                 lookForCS = E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
04584 
04585                 <span class="keywordflow">if</span>( (lookForCS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a> == S) &amp;&amp; (lookForCS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> == C) )
04586                 {
04587                         CS = lookForCS;
04588                 }
04589         }
04590 
04591         <span class="comment">/* Association exists, just change priority*/</span>
04592         <span class="keywordflow">if</span>( CS != NULL )
04593         {
04594                 <a class="code" href="../../da/df4/_log_8h.html#a32">Log_Write4</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04595                <span class="stringliteral">"Exporter_AssocCollectorSession_Internal"</span>,
04596                <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a31">MSG_EXPORTER_ASSOC_COLL_SESSION</a>,
04597                            C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>,
04598                <a class="code" href="../../d5/d93/_transport_8h.html#a15">TL_PrintAddress</a>(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>, paBuf),
04599                            S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>,
04600                Priority);
04601                 CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o6">Priority</a> = Priority;
04602                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04603                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a179">IPDR_ERR_COLLECTORSESSION_REASSOC</a>;
04604         }
04605 
04606         <span class="comment">/* Association does not exists yet. Need to make a new one*/</span>
04607         Status = <a class="code" href="../../d5/d55/_memory_management_8c.html#a2">Object_Allocate</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>),
04608                                                         <a class="code" href="../../d5/db3/_exporter_8c.html#a42">CollectorSession_Destructor</a>,
04609                                                         (<span class="keywordtype">void</span> **) &amp; CS);
04610         <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04611                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04612                 <span class="keywordflow">return</span> Status;
04613         }
04614 
04615         strncpy(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>, <span class="stringliteral">"COLLSESS"</span>, <span class="keyword">sizeof</span>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>));
04616 
04617         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>;
04618         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o2">ExporterPtr</a> = E;
04619         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a> = S;
04620         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> = C;
04621         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a> = NULL;
04622         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o6">Priority</a> = Priority;
04623 
04624     <span class="comment">/*</span>
04625 <span class="comment">        TODO:</span>
04626 <span class="comment">        TmplDataTimer;</span>
04627 <span class="comment">    WindowSizeTimer;</span>
04628 <span class="comment">          IPDR_Statistics Statistics;</span>
04629 <span class="comment">    IPDR_Time PrevStatisticsTime;</span>
04630 <span class="comment">            IPDR_Statistics PrevStatistics;</span>
04631 <span class="comment">            IPDR_EventData LastEvent;*/</span>
04632 
04633 
04634         Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>), CS, &amp;Index);
04635     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04636         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, CS);
04637         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04638         <span class="keywordflow">return</span> Status;
04639     }
04640 
04641 
04642     Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>), CS, &amp;SIndex);
04643     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04644                 <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, CS);
04645         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04646         <span class="keywordflow">return</span> Status;
04647     }
04648 
04649     Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>), CS, &amp;CIndex);
04650     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04651                 <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, CS);
04652         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04653         <span class="keywordflow">return</span> Status;
04654     }
04655 
04656         <a class="code" href="../../da/df4/_log_8h.html#a32">Log_Write4</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04657                <span class="stringliteral">"Exporter_AssocCollectorSession_Internal"</span>,
04658                <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a31">MSG_EXPORTER_ASSOC_COLL_SESSION</a>,
04659                            C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>,
04660                <a class="code" href="../../d5/d93/_transport_8h.html#a15">TL_PrintAddress</a>(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>, paBuf),
04661                            S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>,
04662                Priority);
04663 
04664 <span class="preprocessor">#ifdef NOTDONEYET</span>
04665 <span class="preprocessor"></span>    ExporterMIB_UpdateTemplates(S);
04666 <span class="preprocessor">#endif</span>
04667 <span class="preprocessor"></span>    <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04668 
04669         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04670 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="Exporter.h::Exporter_BuildRecord"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_BuildRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CMgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">IPDR_tag_Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Tmpl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long *&nbsp;</td>
          <td class="mdname" nowrap> <em>RecordSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Given a chunks manager, session, template and raw data construct a new record in the chunks manager.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CMgr</em>&nbsp;</td><td>chunks manager. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>session handle (pointer). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Tmpl</em>&nbsp;</td><td>template. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Data</em>&nbsp;</td><td>the data to be output (as described by the template) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>buffer handle referencing the new record (output) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RecordSize</em>&nbsp;</td><td>size of generated record (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04083 {
04084     DataMessage *Header;
04085 
04086     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o8">BuildFunc</a>(CMgr, S, (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Tmpl,
04087                                           Data, BH, RecordSize);
04088     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
04089         <span class="keywordflow">return</span> Status;
04090 
04091     Header = (DataMessage *) BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>;
04092     <a class="code" href="../../dd/d44/_exporter_protocol_8c.html#a40">ExporterProtocol_FillHeader</a>(S, BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>, <a class="code" href="../../db/d1e/_protocol_8h.html#a39">IPDR_MSG_DATA</a>, (*RecordSize));
04093 
04094     <a class="code" href="../../df/dde/_defs_8h.html#a8">IPDR_SET_HTONS</a>(Header-&gt;TemplateID, Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a>);
04095         <a class="code" href="../../df/dde/_defs_8h.html#a8">IPDR_SET_HTONS</a>(Header-&gt;ConfigurationID, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o3">ConfigurationID</a>);
04096     <a class="code" href="../../df/dde/_defs_8h.html#a10">IPDR_SET_HTONLL</a>(Header-&gt;sequenceNum, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o6">DSN</a>);
04097         <a class="code" href="../../df/dde/_defs_8h.html#a9">IPDR_SET_HTONL</a>(Header-&gt;dataLength, (*RecordSize) - <span class="keyword">sizeof</span>(DataMessage));
04098     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04099 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="Exporter.h::Exporter_CreateSessionInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_CreateSessionInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char&nbsp;</td>
          <td class="mdname" nowrap> <em>ID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Description</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>SH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="Exporter.h::Exporter_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Exporter_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete resources associated with a client. <dl compact><dt><b>Note:</b></dt><dd>not static --- used by <a class="el" href="../../d5/d55/_memory_management_8c.html">MemoryManagement.c</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Obj</em>&nbsp;</td><td>object to delete </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00773 {
00774 
00775     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = (<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *) Obj;
00776 
00777     strncpy(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o0">eyecatcher</a>, <span class="stringliteral">"Dclient"</span>, <span class="keyword">sizeof</span> E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o0">eyecatcher</a>);
00778 
00779     <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o3">VendorString</a>);
00780     <a class="code" href="../../d2/dc9/_platform_8h.html#a20">Platform_MemoryFree</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o34">CSessions</a>);
00781 
00782     <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(PS, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o17">StatisticsTimerID</a>);
00783         <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(PS, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o18">AutoconnectTimerID</a>);
00784 
00785     <a class="code" href="../../d2/dc9/_platform_8h.html#a17">Platform_UnregisterSocketAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o10">ProtocolInfoEvent</a>);
00786     <a class="code" href="../../d2/dc9/_platform_8h.html#a44">Platform_CloseAndInvalidate</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o9">ProtocolInfoSocket</a>);
00787 
00788     <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;Destroy(E);
00789 
00790         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>));
00791         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>));
00792         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>));
00793         <a class="code" href="../../d0/db6/_console_8c.html#a26">Console_Delete</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o12">ConsolePtr</a>));
00794 
00795     <a class="code" href="../../d5/d93/_transport_8h.html#a4">TL_Shutdown</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o11">TransportHandle</a>);
00796 
00797     <span class="comment">/* Templates_Finalize ... not needed and no such thing */</span>
00798     <a class="code" href="../../dd/d28/_log_8c.html#a22">Log_Disable</a>(&amp; E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>);
00799     <span class="comment">/* TCPMsgs_Remove     ... not needed */</span>
00800     <span class="comment">/* CommonMsgs_Remove  ... not needed */</span>
00801     <span class="comment">/* ExporterMsgs_Remove  ... not needed */</span>
00802 
00803     <a class="code" href="../../dd/d28/_log_8c.html#a15">Log_Finalize</a>(&amp; E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>);
00804     strncpy(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o0">eyecatcher</a>, <span class="stringliteral">"Xclient"</span>, <span class="keyword">sizeof</span> E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o0">eyecatcher</a>);
00805 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="Exporter.h::Exporter_GetCapabilities"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int Exporter_GetCapabilities           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>E</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">03955 {
03956         <span class="keywordtype">int</span>  exporterCapabilities = 0;
03957         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o2">StructureSupport</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
03958                 exporterCapabilities = exporterCapabilities | 0x1u ;
03959         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o0">MultiSession</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
03960                 exporterCapabilities = exporterCapabilities | 0x2u ;
03961         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o1">TemplateNegotiation</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
03962                 exporterCapabilities = exporterCapabilities | 0x4u ;
03963         <span class="keywordflow">return</span> exporterCapabilities ;
03964 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="Exporter.h::Exporter_PrepareToSend"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_PrepareToSend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called before sending a record in order to validate the window size.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter hadle (pointer) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>session handle (pointer).</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise.</dd></dl>
Srv-&gt;Conn || <div class="fragment"><pre class="fragment">04114 {
04115     <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS;
04116     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>;
04117 
04118     <span class="keywordflow">if</span> (TC == NULL)
04119         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a205">IPDR_ERR_NO_ACTIVE_COLLECTOR</a>;
04120 
04121     CS = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a>;
04122     <span class="keywordflow">if</span> (CS == NULL || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> != <a class="code" href="../../d5/d93/_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a>) {
04123         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a205">IPDR_ERR_NO_ACTIVE_COLLECTOR</a>;
04124     }
04125 
04126     <span class="comment">/* The following if statement is wrong ... it sets the timeout</span>
04127 <span class="comment">       only when we exceed the window. But we should have the timer</span>
04128 <span class="comment">       going for all records, using the window to stop sending</span>
04129 <span class="comment">       anything more unless we have an acknowledgment. Instead, the</span>
04130 <span class="comment">       code is now in Exporter_SendRecord(). */</span>
04131 
04132     <span class="comment">/* if (EXPORTER_QHANDLER-&gt;OutstandingDataCount(C, S) &gt;</span>
04133 <span class="comment">       C-&gt;Parameters.WindowSize &amp;&amp;</span>
04134 <span class="comment">       Srv-&gt;WindowSizeTimer == NULL) {</span>
04135 <span class="comment">    */</span>
04136 
04137     <span class="comment">/* There is no good reason to check for window size ... the TCP buffer</span>
04138 <span class="comment">       will almost always fill up sooner unless something is awfully wrong</span>
04139 <span class="comment">       with the receiver (the TCP layer is ACKing but the collector can't</span>
04140 <span class="comment">       handle the records. So, don't bother doing this test. */</span>
04141 
04142 <span class="preprocessor">#if defined(USE_WINDOWSIZE)</span>
04143 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S) &gt;= E-&gt;Parameters.WindowSize) {
04144         <span class="comment">/* Window is full ... don't send anything.  Note that this isn't</span>
04145 <span class="comment">           an error in the normal sense ... it's just our way of</span>
04146 <span class="comment">           indicating the window is full and we're not sending anything</span>
04147 <span class="comment">           more. */</span>
04148                 <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04149                            <span class="stringliteral">"Exporter_PrepareToSend"</span>, <span class="stringliteral">"Sent Packets &lt;%lu&gt; and WindowSize is &lt;%li&gt; wait for next try..."</span> , <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S), E-&gt;Parameters.WindowSize);
04150         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a180">IPDR_ERR</a>;
04151     }
04152 <span class="preprocessor">#endif</span>
04153 <span class="preprocessor"></span>
04154     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04155 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="Exporter.h::Exporter_Reconfigure"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_Reconfigure           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>E</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handle reconfiguration of the client (transmitter) due to changes in parameters (this may close the current connections open by the client (transmitter) to server (collector)s and open connections to the console).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer) to reconfigure</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">03792 {
03793     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S;
03794         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll;
03795         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC;
03796     <span class="keywordtype">int</span> i, j;
03797     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr;
03798     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> Port;
03799     <a class="code" href="../../db/d5a/struct_chunk_allocator.html">ChunkAllocator</a> Alloc;
03800     <span class="keyword">const</span> <span class="keywordtype">char</span> *LocalAddr;
03801         <a class="code" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> transportRestarted = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
03802 
03803     <span class="keywordflow">if</span> (! E) {
03804         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03805     }
03806 
03807         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03808         
03809 <span class="preprocessor">#if defined(SNMP_SUPPORT)</span>
03810 <span class="preprocessor"></span>        Platform_MIB_UnSetExporterHandle(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>);
03811 <span class="preprocessor">#endif</span>
03812 <span class="preprocessor"></span>
03813         <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o17">StatisticsTimerID</a>));
03814         <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o18">AutoconnectTimerID</a>));
03815 
03816     <span class="comment">/* reconfigure the console */</span>
03817     <a class="code" href="../../d0/db6/_console_8c.html#a24">Console_Reconfigure</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o12">ConsolePtr</a>), &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>));
03818 
03819     <span class="comment">/* reconfigure the transport layer - (used to reconfigure memory usage) */</span>
03820     <a class="code" href="../../d5/d93/_transport_8h.html#a23">TL_Reconfigure</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a2">EXPORTER_TRANSPORT</a>);
03821 
03822     <span class="comment">/* check if the client port / address have changed and recreate</span>
03823 <span class="comment">       the transport layer if needed */</span>
03824 
03825     LocalAddr = <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a15">ParametersHandler_GetStringParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
03826                                                  <a class="code" href="../../de/d8f/_configuration_names_8h.html#a142">STR_configuration_exporterAddress</a>);
03827     <span class="keywordflow">if</span> (LocalAddr == NULL || strlen(LocalAddr) == 0)
03828         Addr = <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga14">IPDR_DEFAULT_ADDRESS</a>;
03829     <span class="keywordflow">else</span>
03830         Addr = <a class="code" href="../../d5/d93/_transport_8h.html#a17">TL_ParseAddress</a>(LocalAddr);
03831 
03832     Port =
03833         (<span class="keywordtype">unsigned</span> short) <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
03834                                                        <a class="code" href="../../de/d8f/_configuration_names_8h.html#a143">STR_configuration_exporterPort</a>);
03835 
03836     <span class="keywordflow">if</span> (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o5">LocalAddr</a> != Addr || E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o6">LocalPort</a> != Port) {
03837 
03838                 transportRestarted = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a> ;
03839         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o5">LocalAddr</a> = Addr;
03840         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o6">LocalPort</a> = Port;
03841                 
03842                 <span class="keywordflow">for</span> ( i = 0 ; i &lt; E-&gt;Sessions.Length ; i++ )
03843                 {
03844                         S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *)E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03845                         <span class="keywordflow">if</span>(S != NULL)
03846                         {
03847                                 <a class="code" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga13">IPDR_StopSession</a>(S, <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga33a122">IPDR_STOP_REASON_EXIT</a>, 1000);
03848                         }
03849                 }
03850                 <span class="keywordflow">for</span> ( i = 0 ; i &lt; E-&gt;DummyCollectors.Length ; i++ )
03851                 {
03852                         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *)E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o15">DummyCollectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03853                         <span class="keywordflow">if</span>(Coll != NULL)
03854                         {
03855                                 <span class="keywordflow">for</span> ( j = 0 ; j &lt; Coll-&gt;IPDRConnections.Length ; j++ )
03856                                 {
03857                                         IC = (<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *)Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
03858                                         <span class="keywordflow">if</span>(IC &amp;&amp; IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>)
03859                                         {
03860                                                 <a class="code" href="../../d5/d93/_transport_8h.html#a24">TL_HandleDisconnection</a>(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>);
03861                                         }
03862                                 }
03863                         }
03864                 }
03865                 <span class="keywordflow">for</span> ( i = 0 ; i &lt; E-&gt;Collectors.Length ; i++ )
03866                 {
03867                         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *)E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03868                         <span class="keywordflow">if</span>(Coll != NULL)
03869                         {
03870                                 <span class="keywordflow">for</span> ( j = 0 ; j &lt; Coll-&gt;IPDRConnections.Length ; j++ )
03871                                 {
03872                                         IC = (<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *)Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
03873                                         <span class="keywordflow">if</span>(IC &amp;&amp; IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>)
03874                                         {
03875                                                 <a class="code" href="../../d5/d93/_transport_8h.html#a24">TL_HandleDisconnection</a>(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>);
03876                                         }
03877                                 }
03878                         }
03879                 }
03880 
03881         <span class="comment">/* shutdown the current client's transport layer */</span>
03882         <a class="code" href="../../d5/d93/_transport_8h.html#a4">TL_Shutdown</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a2">EXPORTER_TRANSPORT</a>);
03883 
03884         <span class="comment">/* recreate a new transport layer */</span>
03885         <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a15">ChunksManager_GetDefaultChunkAllocator</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, &amp; Alloc);
03886 
03887         <span class="comment">/* initialize the transport layer */</span>
03888         <span class="comment">/* We don't check the return code because what can we do</span>
03889 <span class="comment">           anyway if it's bad? But this is not good style ... */</span>
03890         (void)<a class="code" href="../../d5/d93/_transport_8h.html#a2">TL_InitializePassive</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>), Alloc, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o5">LocalAddr</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o6">LocalPort</a>,
03891                                    &amp; <a class="code" href="../../d5/db3/_exporter_8c.html#a12">Exporter_DefaultHandlers</a>, E,
03892                                    &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
03893                                    &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o11">TransportHandle</a>));
03894         }
03895 
03896     <span class="comment">/* reinitialize the client parameters */</span>
03897     <a class="code" href="../../d5/db3/_exporter_8c.html#a29">Exporter_InitializeParameters</a>(E);
03898 
03899         <a class="code" href="../../d5/db3/_exporter_8c.html#a27">Exporter_InitDebugLevels</a>(E);
03900 
03901     <span class="comment">/* reconfigure the current queues */</span>
03902     <span class="keywordflow">for</span> (i = 0; i &lt; E-&gt;Sessions.Length; i++) {
03903         S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03904         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>) {
03905             <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;Reconfigure(E, S);
03906         }
03907     }
03908 
03909         <span class="keywordflow">if</span> (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o2">StatisticsInterval</a>)
03910         {
03911                 <a class="code" href="../../d2/dc9/_platform_8h.html#a11">Platform_RegisterPeriodicTimer</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
03912                                                                         <a class="code" href="../../d5/db3/_exporter_8c.html#a36">Exporter_StatisticsReportCallback</a>, E,
03913                                                                         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o2">StatisticsInterval</a>,
03914                                                                         &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o17">StatisticsTimerID</a>));
03915     }
03916 
03917         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o5">AutoconnectInterval</a>)
03918         {
03919                 <a class="code" href="../../d2/dc9/_platform_8h.html#a11">Platform_RegisterPeriodicTimer</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
03920                                                                         <a class="code" href="../../d5/db3/_exporter_8c.html#a25">Exporter_AutoconnectCallback</a>, E,
03921                                                                         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o5">AutoconnectInterval</a>,
03922                                                                         &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o18">AutoconnectTimerID</a>));
03923         }
03924 
03925 <span class="preprocessor">#if defined(SNMP_SUPPORT)</span>
03926 <span class="preprocessor"></span>        Platform_MIB_SetExporterHandle(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, E);
03927 <span class="preprocessor">#endif</span>
03928 <span class="preprocessor"></span>
03929         <span class="keywordflow">if</span>(transportRestarted == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
03930         {
03931                 <span class="keywordflow">for</span> ( i = 0 ; i &lt; E-&gt;Sessions.Length ; i++ )
03932                 {
03933                         S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *)E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03934                         <span class="keywordflow">if</span>(S != NULL)
03935                         {
03936                                 <a class="code" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga12">IPDR_StartSession</a>( S, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o11">Negotiable</a> );
03937                         }
03938                 }
03939         }
03940 
03941         
03942         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03943         
03944     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03945 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="Exporter.h::Exporter_SendRecord"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_SendRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Immediate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>duplicate</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send a record to the currently active server.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>session handle (pointer). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>buffer handle referencing the record. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Immediate</em>&nbsp;</td><td>whether or not to send this immediately or try to delay it to get more into the buffer (recommended to leave this as TRUE because if we're outputting to TCP, the TCP stack will typically delay 200ms anyway).</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04177 {
04178     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
04179     <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a>;
04180 
04181     <span class="keywordflow">if</span> (CS == NULL
04182                 || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a> == NULL
04183                 || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> == NULL
04184                 || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> != <a class="code" href="../../d5/d93/_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a>) {
04185         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a205">IPDR_ERR_NO_ACTIVE_COLLECTOR</a>;
04186     }
04187 
04188         ((DataMessage *) BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>)-&gt;Flags = 0;
04189 
04190     <span class="keywordflow">if</span> (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o7">SyncNeeded</a>)
04191         ((DataMessage *) BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>)-&gt;Flags |= <a class="code" href="../../db/d1e/_protocol_8h.html#a16">IPDR_SYNC_FLAG</a>;
04192     <span class="keywordflow">if</span> (duplicate)
04193         ((DataMessage *) BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>)-&gt;Flags |= <a class="code" href="../../db/d1e/_protocol_8h.html#a17">IPDR_DUPLICATE_FLAG</a>;
04194 
04195     <span class="keywordflow">switch</span> (((MessageHeader*)(BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>))-&gt;MessageID) {
04196     <span class="keywordflow">case</span> <a class="code" href="../../db/d1e/_protocol_8h.html#a39">IPDR_MSG_DATA</a>:
04197         <span class="comment">/* Register a timer if there isn't one already (i.e., we're the</span>
04198 <span class="comment">           first record that hasn't been ACKed). */</span>
04199         <span class="keywordflow">if</span> (CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a> == NULL) {
04200             <a class="code" href="../../d2/dc9/_platform_8h.html#a9">Platform_RegisterTimer</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
04201                                    <a class="code" href="../../d5/db3/_exporter_8c.html#a44">Exporter_WindowSizeTimerCallback</a>, CS,
04202                                    E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o0">WindowTimeout</a>,
04203                                    &amp; (CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a>));
04204         }
04205         <span class="comment">/*FALLTHROUGH*/</span>
04206     <span class="keywordflow">case</span> <a class="code" href="../../db/d1e/_protocol_8h.html#a26">IPDR_MSG_DATA_ACK</a>:
04207         <span class="keywordflow">if</span> (<a class="code" href="../../da/df4/_log_8h.html#a15">Log_ShouldWrite</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>)) {
04208             <a class="code" href="../../de/da6/_protocol_debug_8c.html#a4">ProtocolDebug_PrintOutgoingMessage</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>, BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>);
04209         }
04210         <span class="keywordflow">break</span>;
04211     <span class="keywordflow">default</span>:
04212         <span class="keywordflow">if</span> (<a class="code" href="../../da/df4/_log_8h.html#a15">Log_ShouldWrite</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>)) {
04213             <a class="code" href="../../de/da6/_protocol_debug_8c.html#a4">ProtocolDebug_PrintOutgoingMessage</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>, BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>);
04214         }
04215     }
04216 
04217     Status = <a class="code" href="../../d5/d93/_transport_8h.html#a9">TL_Send</a>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>, BH, Immediate);
04218     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
04219         <span class="keywordflow">return</span> Status;
04220 
04221     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o21">Statistics</a>.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>++;
04222     CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o10">Statistics</a>.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>++;
04223 
04224     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o7">SyncNeeded</a> = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
04225 
04226     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04227 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="Exporter.h::Exporter_TriggerEvent"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Exporter_TriggerEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga6">IPDR_DebugLevel</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>loggingLevel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>EventData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Cause an event's triggers to be fired.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer) handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>loggingLevel</em>&nbsp;</td><td>logging level (debug, info, etc.) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>EventData</em>&nbsp;</td><td>data to be updated </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CS</em>&nbsp;</td><td>Collector session for record event in LastEvent -- NULL if you don't want it recorded </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Msg</em>&nbsp;</td><td>message to be put into the event data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>...</em>&nbsp;</td><td>parameters to Msg </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">03611 {
03612     <span class="keyword">const</span> <span class="keywordtype">char</span>* eventStr;
03613     va_list Args;
03614 
03615     eventStr = <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga2">IPDR_EventMsg</a>(EventData);
03616 
03617     <span class="keywordflow">if</span> (EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o0">EventID</a> == <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga4a152">IPDR_EVENT_RECORD_LOST</a>) {
03618         loggingLevel = <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>; <span class="comment">/* Prevent a flood of messages */</span>
03619     }
03620 
03621     va_start(Args, Msg);
03622     vsprintf(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o36">EventLine</a>, Msg, Args);
03623     va_end(Args);
03624 
03625     <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, loggingLevel,
03626                <span class="stringliteral">"Exporter_TriggerEvent"</span>,
03627                <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a29">MSG_EXPORTER_TRIGGER_EVENT</a>,
03628                eventStr, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o36">EventLine</a>);
03629 
03630     <span class="keywordflow">if</span> (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o23">EventCallbackDetailed</a> != NULL) {
03631         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o23">EventCallbackDetailed</a>(EventData, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o36">EventLine</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o24">EventCallbackDetailedArg</a>);
03632     }
03633 
03634     <span class="keywordflow">if</span> (CS) {
03635         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o13">LastEvent</a> = *EventData;
03636     }
03637 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="Exporter.h::Exporter_TriggeTemplateChangedCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_TriggeTemplateChangedCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>S</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a structure containing all currently enabled keys and trigger the templates change callback.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>exporter handle (pointer)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">03457 {
03458     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> NumTemplates;
03459     <a class="code" href="../../df/d3e/struct_i_p_d_r___template.html">IPDR_Template</a> *Tmpls;
03460     <a class="code" href="../../d9/d12/struct_i_p_d_r___key.html">IPDR_Key</a> *Keys;
03461     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl<span class="comment">/*, *Tmpl1*/</span>;
03462     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K<span class="comment">/*, K1*/</span>;
03463     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC;
03464         <a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TH;
03465     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, j, k<span class="comment">/*, m*/</span>;
03466 
03467     <span class="keywordflow">if</span> (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o21">TemplateChangedCallback</a> == NULL)
03468         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03469 
03470         TC = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>;
03471 
03472     <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a15">DynamicArray_CountObjects</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>, &amp; (TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>), &amp; NumTemplates);
03473 
03474     <a class="code" href="../../d2/dc9/_platform_8h.html#a30">Platform_Check_MEMORYALLOCATEVEC</a>(SESSION_PLATFORM, NumTemplates, Tmpls, {});
03475 
03476     <span class="keywordflow">for</span> (j = 0, i = 0; i &lt; TC-&gt;Templates.Length; i++) {
03477         Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03478         <span class="keywordflow">if</span> (Tmpl == NULL)
03479             <span class="keywordflow">continue</span>;
03480                 TH.<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a> = i;
03481                 TH.<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o1">s</a> = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>;
03482         Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o0">TemplateID</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a>;
03483         Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o1">SchemaName</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>;
03484                 Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o2">TypeName</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o2">TypeName</a>;
03485         Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o3">NumKeys</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>;
03486 
03487         <a class="code" href="../../d2/dc9/_platform_8h.html#a30">Platform_Check_MEMORYALLOCATEVEC</a>(SESSION_PLATFORM, Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>, Keys, {});
03488 
03489         <span class="keywordflow">for</span> (k = 0; k &lt; Tmpl-&gt;Keys.Length; k++) {
03490 
03491             K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[k];
03492             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o0">KeyID</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a>;
03493             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o1">KeyTypeID</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>;
03494             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o2">KeyName</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>;
03495             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o3">KeyLabel</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o3">Label</a>;
03496             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o4">KeyHelp</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o4">Help</a>;
03497             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o5">Enabled</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>;
03498             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o6">AccessType</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o6">AccessType</a>;
03499             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o7">ExtraData</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o7">ExtraData</a>;
03500             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o8">KeyAccessor</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>;
03501 
03502             <span class="comment">/*if (TC == NULL || j &gt;= TC-&gt;Templates.Length || TC-&gt;Templates.Data[j] == NULL)</span>
03503 <span class="comment">                                continue;</span>
03504 <span class="comment"></span>
03505 <span class="comment">                        Tmpl1 = (Template *) TC-&gt;Templates.Data[j];</span>
03506 <span class="comment"></span>
03507 <span class="comment">                        */</span><span class="comment">/* find the matching key */</span><span class="comment">/*</span>
03508 <span class="comment">                        for (m = 0; m &lt; Tmpl1-&gt;Keys.Length; m++) {</span>
03509 <span class="comment">                                K1 = (Key *) Tmpl1-&gt;Keys.Data[m];</span>
03510 <span class="comment">                                if (K1-&gt;KeyID == K-&gt;KeyID)</span>
03511 <span class="comment">                                        Keys[k].Enabled = K1-&gt;Enabled;</span>
03512 <span class="comment">                        }*/</span>
03513         }
03514         Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o4">Keys</a> = Keys;
03515         j++;
03516 
03517     }
03518 
03519         <span class="keywordflow">if</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o21">TemplateChangedCallback</a> != NULL)
03520         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o21">TemplateChangedCallback</a>(S, Tmpls, NumTemplates, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o22">TemplateChangedArg</a>);
03521 
03522         <span class="keywordflow">for</span> (j = 0, i = 0; i &lt; TC-&gt;Templates.Length; i++)
03523         {
03524                 Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03525                 <span class="keywordflow">if</span> (Tmpl == NULL)
03526             <span class="keywordflow">continue</span>;
03527                         
03528                 Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o1">SchemaName</a> = NULL ;
03529                 Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o2">TypeName</a> = NULL ;
03530                 <span class="keywordflow">for</span> (k = 0; k &lt; Tmpl-&gt;Keys.Length; k++)
03531                 {
03532                         K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[k];
03533                         <span class="keywordflow">if</span> (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a> == Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o4">Keys</a>[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o0">KeyID</a>)
03534                         {
03535                                 K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a> = Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o4">Keys</a>[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o5">Enabled</a>;
03536                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o2">KeyName</a> = NULL ;
03537                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o3">KeyLabel</a> = NULL ;
03538                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o4">KeyHelp</a> = NULL ;
03539                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o7">ExtraData</a> = NULL ;
03540                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o8">KeyAccessor</a> = NULL ;
03541                         }
03542                 }
03543                 j++;
03544         }
03545     <span class="keywordflow">for</span> (j = 0; j &lt; NumTemplates; j++)
03546         <a class="code" href="../../d2/dc9/_platform_8h.html#a20">Platform_MemoryFree</a>(SESSION_PLATFORM, Tmpls[j].Keys);
03547     <a class="code" href="../../d2/dc9/_platform_8h.html#a20">Platform_MemoryFree</a>(SESSION_PLATFORM, Tmpls);
03548 
03549     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03550 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="Exporter.h::Exporter_WindowSizeTimerCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Exporter_WindowSizeTimerCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Callback invoked upon data timeout with no ACK.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Arg</em>&nbsp;</td><td>callback argument (Server) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01185 {
01186     <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = (<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *) Arg;
01187     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a>;
01188     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
01189         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>;
01190         <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> Conn = NULL;
01191     <a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> eventData;
01192 
01193         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01194 
01195         <span class="keywordflow">if</span>(IC != NULL)
01196         {
01197                 Conn = IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>;
01198         }
01199 
01200 <span class="preprocessor">#if defined(DEBUG_PRINTF) &amp;&amp; defined(_VXWORKS_DEBUG)</span>
01201 <span class="preprocessor"></span>    countTick =  tickGet ();
01202     printf(<span class="stringliteral">"\n window size timer callback , ticks [%ld]"</span>, countTick);
01203 <span class="preprocessor">#endif</span>
01204 <span class="preprocessor"></span>
01205     <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a>);
01206 
01207     <a class="code" href="../../d5/db3/_exporter_8c.html#a98">EventDataInit</a>(&amp;eventData, <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga4a151">IPDR_EVENT_SERVER_DISCONNECTED</a>, E, CS, S);
01208     eventData.<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o13">Extra</a>.Disconnected.Reason = <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga5a160">IPDR_EVENT_DISCONNECTED_TIMEOUT</a>;
01209     eventData.<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o13">Extra</a>.Disconnected.TimeoutMillisec = E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o0">WindowTimeout</a>;
01210 
01211     <span class="keywordflow">if</span> (IC == NULL || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> == <a class="code" href="../../d5/d93/_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>) {
01212         eventData.<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o1">IC</a> = NULL;
01213         <a class="code" href="../../d5/db3/_exporter_8c.html#a99">Exporter_TriggerEvent</a>(E, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a170">IPDR_LEVEL_WARNING</a>, &amp;eventData, CS,
01214                             <span class="stringliteral">"Acknowledgment timeout (%d msec): Collector=none, outstanding=%lu, unACKed=%lu, Session=%u [%.40s] (%.80s)"</span>,
01215                             E-&gt;Parameters.WindowTimeout,
01216                             <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S),
01217                             <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UnacknowledgedDataCount(E, S),
01218                             S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o18">Description</a>);
01219     } <span class="keywordflow">else</span> {
01220         eventData.<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o1">IC</a> = IC;
01221         <a class="code" href="../../d5/db3/_exporter_8c.html#a99">Exporter_TriggerEvent</a>(E, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a170">IPDR_LEVEL_WARNING</a>, &amp;eventData, CS,
01222                             <span class="stringliteral">"Acknowledgment timeout (%d msec): %.98s, outstanding=%lu, unACKed=%lu, Session=%u [%.40s] (%.80s)"</span>,
01223                             E-&gt;Parameters.WindowTimeout,
01224                             <a class="code" href="../../d5/d93/_transport_8h.html#a14">TL_GetConnectionInfoStr</a>(Conn),
01225                             <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S),
01226                             <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UnacknowledgedDataCount(E, S),
01227                             S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o18">Description</a>);
01228     }
01229 <span class="preprocessor">#ifdef OBSOLETE</span>
01230 <span class="preprocessor"></span>    <span class="keywordflow">switch</span> (CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a>) {
01231     <span class="keywordflow">case</span> <a class="code" href="../../d5/d93/_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a>: <span class="comment">/* shouldn't happen, but let's be cautious */</span>
01232         <a class="code" href="../../da/df4/_log_8h.html#a27">Log_StateTransition</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
01233                             <span class="stringliteral">"Exporter_WindowSizeTimerCallback"</span>, Conn, CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a>, IPDR_SERVER_PAUSED,
01234                             <span class="stringliteral">"acknolwedgment timeout"</span>);
01235         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a52a26">IPDR_CS_READY</a>;
01236         <span class="keywordflow">break</span>;
01237     <span class="keywordflow">default</span>:
01238         <span class="keywordflow">break</span>;
01239     }
01240 <span class="preprocessor">#endif</span>
01241 <span class="preprocessor"></span>    <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01242 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="Exporter.h::IPDR_GetTemplateInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> IPDR_GetTemplateInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>TemplateID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>SchemaName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>TypeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>NumKeys</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>TH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">03011 {
03012         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = SessionHandle ;
03013     <span class="keywordtype">int</span> i;
03014     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl;
03015 
03016     <span class="keywordflow">if</span> (! S || ! TH) {
03017         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
03018     }
03019 
03020         TH-&gt;<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a> = 0xFFFFFFFFu;
03021     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>);
03022 
03023     <span class="keywordflow">for</span> (i = 0; i &lt; S-&gt;Templates.Length; i++) {
03024         Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03025         <span class="keywordflow">if</span> (Tmpl != NULL &amp;&amp; Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a> == TemplateID) {
03026             TH-&gt;<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a> = i;
03027                         TH-&gt;<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o1">s</a> = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>;
03028                         <span class="keywordflow">if</span> (SchemaName) (*SchemaName) = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>;
03029                         <span class="keywordflow">if</span> (TypeName) (*TypeName) = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o2">TypeName</a>;
03030                         <span class="keywordflow">if</span> (NumKeys) (*NumKeys) = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>;
03031             <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>);
03032             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03033         }
03034     }
03035 
03036     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>);
03037     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a197">IPDR_ERR_TEMPLATE_NOT_FOUND</a>;
03038 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="Exporter.h::Session_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Session_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete resources associated with a session. <dl compact><dt><b>Note:</b></dt><dd>not static </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Obj</em>&nbsp;</td><td>object to delete </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00817 {
00818     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) Obj;
00819     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
00820 
00821     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>, *NextTC;
00822 
00823     strncpy(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>, <span class="stringliteral">"Dsessio"</span>, <span class="keyword">sizeof</span> S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>);
00824 
00825         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>));
00826 
00827     <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;DeleteSession(E, S);
00828 
00829     <span class="keywordflow">while</span> (TC != NULL) {
00830         NextTC = TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o6">NextContext</a>;
00831         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, TC);
00832         TC = NextTC;
00833     }
00834 
00835     <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>);
00836     <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o18">Description</a>);
00837 
00838     strncpy(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>, <span class="stringliteral">"Xsessio"</span>, <span class="keyword">sizeof</span> S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>);
00839 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="Exporter.h::Session_HandleTemplateChanges"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Session_HandleTemplateChanges           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>NumChanges</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>TCBs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Force</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CopyFromExporter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Negotiable</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Apply template configuration changes to a session given an array of template change blocks (as defined in the IPDR protocol).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>Exporter owning the session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumChanges</em>&nbsp;</td><td>number of template change blocks </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TCBs</em>&nbsp;</td><td>array of template change blocks </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Force</em>&nbsp;</td><td>if true, a new context will be created even when no changes where supplied </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CopyFromExporter</em>&nbsp;</td><td>the existing configuration should be based on the client templates </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Negotiable</em>&nbsp;</td><td>indicates whether templates negotiation can take place on the session</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01346 {
01347 <span class="preprocessor">#ifdef NOTDONEYET</span>
01348 <span class="preprocessor"></span>    <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a>*        TC = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o4">WorkContext</a>;
01349     <span class="keywordtype">int</span>                                         i, j;
01350     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>                      TemplateID;
01351     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a>                            *Tmpl, *NewTmpl, *Tmpl1;
01352     <a class="code" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>                           TemplateChanged = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
01353     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>                         Status;
01354     <a class="code" href="../../db/dc0/struct_dynamic_array.html">DynamicArray</a>                        Tmpls, *Source;
01355     <span class="keyword">const</span> KeyBlock *            KB;
01356     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *                                       K;
01357     size_t                                      BlockLength;
01358 
01359         <span class="comment">/*const TemplateChangeBlockHeader *TCB = TCBs;*/</span>
01360 
01361     <span class="keywordflow">if</span> (! CopyFromExporter)
01362         Source = &amp; (TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>);
01363     <span class="keywordflow">else</span>
01364         Source = &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>);
01365 
01366     <span class="comment">/* check if something actually changed compared to the</span>
01367 <span class="comment">       current configuration */</span>
01368 
01369     <span class="keywordflow">if</span> (! Force) {
01370         <span class="keywordflow">for</span> (i = 0; i &lt; NumChanges; i++) {
01371 
01372             TemplateID = <a class="code" href="../../df/dde/_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;TemplateID);
01373 
01374             Tmpl = NULL;
01375             <span class="keywordflow">for</span> (j = 0; j &lt; Source-&gt;Length; j++) {
01376                 Tmpl1 = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Source-&gt;<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
01377                 <span class="keywordflow">if</span> (Tmpl1 != NULL &amp;&amp; Tmpl1-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a> == TemplateID) {
01378                     Tmpl = Tmpl1;
01379                     <span class="keywordflow">break</span>;
01380                 }
01381             }
01382 
01383             <span class="keywordflow">if</span> (Tmpl == NULL)
01384                 <span class="keywordflow">continue</span>;
01385 
01386             KB = (<span class="keyword">const</span> KeyBlock *) ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) TCB + <span class="keyword">sizeof</span>(TemplateChangeBlockHeader));
01387             <a class="code" href="../../dd/d68/_templates_8c.html#a7">Template_IsModified</a>(Tmpl, <a class="code" href="../../df/dde/_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;NumKeys), KB, &amp; TemplateChanged);
01388 
01389             <span class="keywordflow">if</span> (TemplateChanged) {
01390                 TemplateChanged = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
01391                 break ;
01392             }
01393 
01394             BlockLength =
01395                 <span class="keyword">sizeof</span>(TemplateChangeBlockHeader) +
01396                 <a class="code" href="../../df/dde/_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;NumKeys) * <span class="keyword">sizeof</span>(KeyBlock);
01397             TCB = (<span class="keyword">const</span> TemplateChangeBlockHeader *) ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) TCB + BlockLength);
01398         }
01399 
01400         <span class="comment">/* if nothing changed in the templates configuration, return */</span>
01401         <span class="keywordflow">if</span> (! TemplateChanged)
01402             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01403     }
01404 
01405     Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a2">DynamicArray_Create</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; Tmpls, 0);
01406     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01407         <span class="keywordflow">return</span> Status;
01408     Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a14">DynamicArray_Copy</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Source, &amp; Tmpls);
01409     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01410         <span class="keywordflow">return</span> Status;
01411 
01412     TCB = TCBs;
01413 
01414     <span class="comment">/* perform modifications to the needed keys */</span>
01415     <span class="keywordflow">for</span> (i = 0; i &lt; NumChanges; i++) {
01416 
01417         TemplateID = <a class="code" href="../../df/dde/_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;TemplateID);
01418 
01419         Tmpl = NULL;
01420         <span class="keywordflow">for</span> (j = 0; j &lt; Source-&gt;Length; j++) {
01421             Tmpl1 = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Source-&gt;<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
01422             <span class="keywordflow">if</span> (Tmpl1 != NULL &amp;&amp; Tmpl1-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a> == TemplateID) {
01423                 Tmpl = Tmpl1;
01424                 <span class="keywordflow">break</span>;
01425             }
01426         }
01427 
01428         <span class="keywordflow">if</span> (Tmpl != NULL) {
01429             KB = (<span class="keyword">const</span> KeyBlock *) ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) TCB + <span class="keyword">sizeof</span>(TemplateChangeBlockHeader));
01430             <a class="code" href="../../dd/d68/_templates_8c.html#a8">Template_ModifyTemplate</a>(S, Tmpl, <a class="code" href="../../df/dde/_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;NumKeys), KB, &amp; NewTmpl);
01431             Tmpls.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j] = NewTmpl;
01432             <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Tmpl);
01433         }
01434 
01435         BlockLength =
01436             <span class="keyword">sizeof</span>(TemplateChangeBlockHeader) +
01437             <a class="code" href="../../df/dde/_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;NumKeys) * <span class="keyword">sizeof</span>(KeyBlock);
01438         TCB = (<span class="keyword">const</span> TemplateChangeBlockHeader *) ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) TCB + BlockLength);
01439     }
01440 
01441     <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">"Session_HandleTemplateChanged"</span>,
01442                <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a16">MSG_EXPORTER_SESSION_TEMPLATES_CHANGED</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>);
01443     <span class="keywordflow">for</span> (i = 0; i &lt; Tmpls.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>; i++) {
01444         Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Tmpls.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
01445         <span class="keywordflow">if</span> (Tmpl == NULL)
01446             <span class="keywordflow">continue</span>;
01447         <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">"Session_HandleTemplateChanged"</span>,
01448                    <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a17">MSG_EXPORTER_TEMPLATE_INFO</a>, Tmpl-&gt;TemplateID, Tmpl-&gt;SchemaName);
01449         <span class="keywordflow">for</span> (j = 0; j &lt; Tmpl-&gt;Keys.Length; j++) {
01450             K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Tmpl-&gt;Keys.Data[j];
01451             <a class="code" href="../../da/df4/_log_8h.html#a31">Log_Write3</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>, <span class="stringliteral">"Session_HandleTemplateChanged"</span>,
01452                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a18">MSG_EXPORTER_KEY_INFO</a>, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a>, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>);
01453         }
01454     }
01455 
01456     Status = <a class="code" href="../../d5/db3/_exporter_8c.html#a45">Session_CreateNewWorkContext</a>(E, S, &amp; Tmpls, Negotiable);
01457     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01458         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; Tmpls);
01459         <span class="keywordflow">return</span> Status;
01460     }
01461 
01462     <span class="comment">/* trigger the templates change callback */</span>
01463     <a class="code" href="../../d5/db3/_exporter_8c.html#a97">Exporter_TriggeTemplateChangedCallback</a>(S);
01464 
01465     <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; Tmpls);
01466 <span class="preprocessor">#endif</span>
01467 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01468 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="Exporter.h::Session_SelectActiveCollector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Session_SelectActiveCollector           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Select a new active server for a given session.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>Exporter owning the session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01317 {
01318 
01319     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01320 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="Exporter.h::Session_SendOutstandingData"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Session_SendOutstandingData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send any outstanding (unacknowledged) data within a session.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>Exporter owning the session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01482 {
01483     <span class="comment">/* check if we've recursively been called. If we did don't do anything</span>
01484 <span class="comment">       since the caller will continue sending */</span>
01485         <span class="keywordflow">if</span>( S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> == <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>)
01486                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a177">IPDR_ERR_SESSION_LOGICALLY_STOPED</a>;
01487 
01488     <span class="keywordflow">if</span> (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o8">SendingData</a>)
01489         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01490 
01491     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o8">SendingData</a> = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
01492     <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;SendOutstandingData(E, S);
01493     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o8">SendingData</a> = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
01494 
01495     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01496 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="Exporter.h::TransmissionContext_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TransmissionContext_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete resources associated with a transmission context. <dl compact><dt><b>Note:</b></dt><dd>not static --- used by <a class="el" href="../../d5/d55/_memory_management_8c.html">MemoryManagement.c</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Obj</em>&nbsp;</td><td>object to delete </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00751 {
00752     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC = (<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *) Obj;
00753     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o5">SessionPtr</a>;
00754     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
00755 
00756     strncpy(TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>, <span class="stringliteral">"Dxmtctx"</span>, <span class="keyword">sizeof</span> TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>);
00757     <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>));
00758     <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;DeleteTransmissionContext(E, S, TC);
00759     strncpy(TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>, <span class="stringliteral">"Xxmtctx"</span>, <span class="keyword">sizeof</span> TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>);
00760 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a13" doxytag="Exporter.h::Exporter_DefaultHandlers"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/dcd/struct_i_p_d_r__tag___connection_handlers.html">ConnectionHandlers</a> <a class="el" href="../../d5/d93/_exporter_8h.html#a13">Exporter_DefaultHandlers</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handlers for transport layer connections, for initial connection.     </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="Exporter.h::ServerStateStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char* <a class="el" href="../../d5/d93/_exporter_8h.html#a12">ServerStateStr</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Vector of names of the enum ServerState.     </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 22:28:22 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
