<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: For Doxygen/src/Exporter/Exporter.c File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="../../dir_000000.html">For Doxygen</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000003.html">src</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000006.html">Exporter</a></div>
<h1>Exporter.c File Reference</h1><code>#include &lt;<a class="el" href="../../d4/d71/_config_8h.html">IPDR/Config.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d0/dc0/_exporter_msgs_8h.html">Exporter/ExporterMsgs.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d5/d93/_exporter_8h.html">Exporter/Exporter.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d9/d05/_exporter_m_i_b_8h.html">Exporter/ExporterMIB.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d8/d75/_exporter_protocol_8h.html">Exporter/ExporterProtocol.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../da/d39/_i_p_d_r_8h.html">IPDR/IPDR.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d0/dd7/_version_8h.html">Exporter/Version.h</a>&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;stddef.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;stdarg.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;time.h&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html">IPDR/CRANE.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d1/dc1/_templates_8h.html">Exporter/Templates.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../dd/d91/_exporter_console_8h.html">Exporter/ExporterConsole.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d9/d7b/_protocol_debug_8h.html">Exporter/ProtocolDebug.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../df/da9/_v_q_handler_8h.html">Exporter/VQHandler.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../db/d1e/_protocol_8h.html">Common/Protocol.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d5/d93/_transport_8h.html">Common/Transport.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d1/d4c/_common_util_8h.html">Common/CommonUtil.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../da/df4/_log_8h.html">Common/Log.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../de/d8d/_common_msgs_8h.html">Common/CommonMsgs.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../db/d48/_t_c_p_msgs_8h.html">Transports/TCP/TCPMsgs.h</a>&gt;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a0">INITIAL_SESSIONS_ARRAY_CAPACITY</a>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a1">INITIAL_TEMPLATES_ARRAY_CAPACITY</a>&nbsp;&nbsp;&nbsp;16</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a2">INITIAL_COLLECTORS_ARRAY_CAPACITY</a>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a3">INITIAL_COLLECTOR_CONNECTIONS_ARRAY_CAPACITY</a>&nbsp;&nbsp;&nbsp;256</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a4">INITIAL_COLLECTOR_COLLECTORSESSIONS_ARRAY_CAPACITY</a>&nbsp;&nbsp;&nbsp;256</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a14">Exporter_ConnectCallback</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr, unsigned short Port, void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a15">Exporter_DisconnectCallback</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C, void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a16">Exporter_DataCallback</a> (<a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, unsigned int MsgLen, void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a17">Exporter_InitializeProtocolInfo</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a18">Exporter_DeleteSessionInternal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a19">Exporter_RemoveCollectorInternal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *C)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a20">Exporter_RemoveCollectorFromSession_Internal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *C)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a21">Exporter_CreateTemplateInternal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, int TemplateID, const char *SchemaName, const char *TypeName, int NumKeys, const <a class="el" href="../../d9/d12/struct_i_p_d_r___key.html">IPDR_Key</a> *Keys, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> StatusFlag, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> *TH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a22">Exporter_AddKeyInternal</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TH, const <a class="el" href="../../d9/d12/struct_i_p_d_r___key.html">IPDR_Key</a> *CKey)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a23">Exporter_AddKeyInternal_All</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, int TemplateID, const <a class="el" href="../../d9/d12/struct_i_p_d_r___key.html">IPDR_Key</a> *CKey)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a24">IPDR_SendDataCompat</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TemplateHandle, const void *Data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a25">Exporter_AutoconnectCallback</a> (void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a26">ExporterProtocol_WaitConnectTimeoutCallback</a> (void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a27">Exporter_InitDebugLevels</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a28">ExporterMsgs_Initialize</a> (<a class="el" href="../../dc/d30/struct_i_p_d_r__tag___log.html">Log</a> *L)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a29">Exporter_InitializeParameters</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_StatusMsg</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga2">IPDR_EventMsg</a> (const <a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *Event)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a32">StatisticsInitialize</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> *Now, <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *PrevStatistics, <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *Statistics)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga6">IPDR_GetSessionStatistics</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> *Now, <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *Statistics, unsigned long *QueuedOutstandingRecords, unsigned long *QueuedUnacknowledgedRecords)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga7">IPDR_GetCollectorStatisticsAndState</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> CollectorHandle, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> *Now, <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *Statistics, <a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *LastEvent)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a35">StatisticsCalculateRates</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> PrevTime, const <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *Statistics, const <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *PrevStatistics, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> *Time, <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *IntervalStatistics, <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *Rate100)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a36">Exporter_StatisticsReportCallback</a> (void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a37">TransmissionContext_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a38">Exporter_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a39">Session_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a40">Collector_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a41">Connection_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a42">CollectorSession_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a43">Exporter_AddIPDRConnectionToCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll, <a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a44">Exporter_WindowSizeTimerCallback</a> (void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a45">Session_CreateNewWorkContext</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../db/dc0/struct_dynamic_array.html">DynamicArray</a> *Tmpls, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Negotiable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a46">Session_SelectActiveCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a47">Session_HandleTemplateChanges</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, int NumChanges, unsigned char *TCBs, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Force, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> CopyFromExporter, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Negotiable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a48">Session_SendOutstandingData</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a49">IPDR_InitExporter</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, const char *ExporterName, <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga0">IPDR_ParametersHandlerFunc</a> ParamsHandler, void *ParamsHandlerArg, <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga1">IPDR_LoadMIBFunc</a> LoadMIB, void *LoadMIBArg, <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga2">IPDR_SaveMIBFunc</a> SaveMIB, void *SaveMIBArg, <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> **CH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga4">IPDR_StartExporter</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga5">IPDR_IsRunning</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga8">IPDR_DeleteExporter</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga10">IPDR_DrainQueue</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> Timeout)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga0">IPDR_CreateSession</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *Name, unsigned char ID, const char *Description, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> *SH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga1">IPDR_DeleteSession</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga15">IPDR_SetDocumentID</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, char *DocumentID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga14">IPDR_SetSessionNegotiable</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Negotiable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga12">IPDR_StartSession</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Negotiate)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga13">IPDR_StopSession</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, enum <a class="el" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#ga33">IPDR_SessionStopReason</a> Reason, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> Timeout)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a60">IPDR_AddCollectorCompat</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, const char *Name, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr, unsigned short Port, int Priority)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db0/group___i_p_d_r__transmitter___m_i_b.html#ga9">IPDR_GetServerStatisticsAndState</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr, unsigned short Port, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> *Now, <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *Statistics, <a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *LastEvent)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a68">CRANE_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a62">CRANE_GetTemplate</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">CRANE_ClientHandle</a> ClientHandle, int TemplateID, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">CRANE_TemplateHandle</a> *TH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a68">CRANE_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a63">CRANE_CreateStatusTemplate</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">CRANE_ClientHandle</a> ClientHandle, int TemplateID, const char *Description, int NumKeys, const <a class="el" href="../../d9/d12/struct_i_p_d_r___key.html">CRANE_Key</a> *Keys, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">CRANE_TemplateHandle</a> *TH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a68">CRANE_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a64">CRANE_DeleteTemplate</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">CRANE_ClientHandle</a> ClientHandle, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">CRANE_TemplateHandle</a> TH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga5">IPDR_CreateCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *Name, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr, unsigned short Port, unsigned short NumberOfActive, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> *CH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga4">IPDR_AddCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *Name, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr, unsigned short Port, unsigned short NumberOfActive)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga6">IPDR_GetCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *Name, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> *CH, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> *Addr, unsigned short *Port, unsigned short *NumberOfActive)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga7">IPDR_AssocCollectorSession</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> CollectorHandle, int Priority)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga8">IPDR_RemoveCollectorFromSession</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> CollectorHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga9">IPDR_RemoveCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> CollectorHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga2">IPDR_GetSession</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, unsigned char ID, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> *SH, const char **Name, const char **Description)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga8">IPDR_AddKey</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TH, const <a class="el" href="../../d9/d12/struct_i_p_d_r___key.html">IPDR_Key</a> *CKey)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga10">IPDR_RemoveKey</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TH, unsigned int KeyID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga11">IPDR_RemoveKey_All</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, int TemplateID, unsigned int KeyID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga12">IPDR_EnableKey</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TH, unsigned int KeyID, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Enabled)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga3">IPDR_CreateTemplate</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, int TemplateID, const char *SchemaName, const char *TypeName, int NumKeys, const <a class="el" href="../../d9/d12/struct_i_p_d_r___key.html">IPDR_Key</a> *Keys, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> *TH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga4">IPDR_CreateTemplate_All</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, int TemplateID, const char *SchemaName, const char *TypeName, int NumKeys, const <a class="el" href="../../d9/d12/struct_i_p_d_r___key.html">IPDR_Key</a> *Keys)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga6">IPDR_DeleteTemplate</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga7">IPDR_DeleteTemplate_All</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, int TemplateID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/group___i_p_d_r__data__delivery.html#ga0">IPDR_SendData</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TemplateHandle, const void *Data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/group___i_p_d_r__data__delivery.html#ga1">IPDR_SendData_All</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, int TemplateID, const void *Data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga13">IPDR_EnableKey_All</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, int TemplateID, unsigned int KeyID, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Enabled)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga5">IPDR_GetTemplate</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, int TemplateID, char **SchemaName, char **TypeName, int *NumKeys, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> *TH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a84">IPDR_GetTemplateInternal</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, int TemplateID, char **SchemaName, char **TypeName, int *NumKeys, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> *TH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga14">IPDR_ApplyTemplates</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga15">IPDR_ApplyTemplates_All</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga3">IPDR_GetSessionsList</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, int *NumSessions, unsigned char **Sessions)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga11">IPDR_GetCollectorInSessionList</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, unsigned int *NumCollectors, <a class="el" href="../../d3/d18/struct_i_p_d_r___collector.html">IPDR_Collector</a> **Collectors)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga10">IPDR_GetCollectorList</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, unsigned int *NumCollectors, <a class="el" href="../../d3/d18/struct_i_p_d_r___collector.html">IPDR_Collector</a> **Collectors)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga3">IPDR_SetExporterEventHandlerDetailed</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga1">IPDR_EventCallbackDetailed</a> Callback, void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga17">IPDR_SetStartNegotiationCallback</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga1">IPDR_StartNegotiationCallback</a> Callback, void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga18">IPDR_SetFlowStartCallback</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga2">IPDR_FlowStartCallback</a> Callback, void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga16">IPDR_SetTemplateChangedCallback</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga0">IPDR_TemplateChangedCallback</a> Callback, void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga1">IPDR_SetModuleMoreDebugLevel</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *ModuleName, <a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga6">IPDR_DebugLevel</a> L)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga2">IPDR_CheckLogLevel</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *ModuleName, <a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga6">IPDR_DebugLevel</a> Lvl)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga3">IPDR_LogWrite</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *ModuleName, <a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga6">IPDR_DebugLevel</a> Level, const char *Func, const char *Str,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a97">Exporter_TriggeTemplateChangedCallback</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a98">EventDataInit</a> (<a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *EventData, enum <a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga4">IPDR_Event_t</a> EventID, <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *Sess)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a99">Exporter_TriggerEvent</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga6">IPDR_DebugLevel</a> loggingLevel, const <a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *EventData, <a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS, const char *Msg,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a100">Exporter_ProtocolInfoCallback</a> (<a class="el" href="../../db/d76/struct_i_p_d_r__tag___socket.html">IPDR_SocketHandle</a> S, void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a101">Exporter_Reconfigure</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga9">IPDR_ReconfigExporter</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a103">Exporter_GetCapabilities</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db0/group___i_p_d_r__transmitter___m_i_b.html#ga1">IPDR_MIBVersion</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db0/group___i_p_d_r__transmitter___m_i_b.html#ga5">IPDR_ParamGet</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *Name, const char *Value, int valueLen)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db0/group___i_p_d_r__transmitter___m_i_b.html#ga6">IPDR_GetFirstParam</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, unsigned long *Index, char **Name, int nameLen, char **Value, int valueLen, char **DefValue, int defValueLen)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db0/group___i_p_d_r__transmitter___m_i_b.html#ga7">IPDR_GetNextParam</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, unsigned long *Index, char **Name, int nameLen, char **Value, int valueLen, char **DefValue, int defValueLen)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db0/group___i_p_d_r__transmitter___m_i_b.html#ga8">IPDR_ParamSet</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *Name, const char *Value)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a109">Exporter_BuildRecord</a> (<a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *CMgr, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, struct <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">IPDR_tag_Template</a> *Tmpl, const void *Data, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, unsigned long *RecordSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a110">Exporter_PrepareToSend</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a111">Exporter_SendRecord</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> Immediate, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> duplicate)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a112">Exporter_CreateSessionInternal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, const char *Name, unsigned char ID, const char *Description, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> *SH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a113">Exporter_DeleteSessionInternal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a114">Exporter_AddCollectorInternal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, const char *Name, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr, unsigned short Port, unsigned short NumberOfActive, <a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> isDummy, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> *CH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a115">Exporter_AssocCollectorSession_Internal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *C, unsigned short Priority)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db0/group___i_p_d_r__transmitter___m_i_b.html#ga2">IPDR_MIB_Start</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db0/group___i_p_d_r__transmitter___m_i_b.html#ga3">IPDR_MIB_Stop</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/db0/group___i_p_d_r__transmitter___m_i_b.html#ga4">IPDR_MIB_IsRunning</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga5">IPDR_SetLogOutputAddress</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr, unsigned short Port, unsigned int Facility, const char *MachineName)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga4">IPDR_SetLogOutputCallbackDetailed</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga0">IPDR_LogCallbackDetailed</a> CB, void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga0">IPDR_MemoryAllocate</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, size_t Size, void **Buf)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga1">IPDR_MemoryFree</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, void *Buf)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga2">IPDR_MemoryStatistics</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, unsigned int *numAllocs, unsigned int *numFrees, size_t *bytesAllocated)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga3">IPDR_RegisterTimer</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d3/d9b/group___i_p_d_r__event__services.html#ga0">IPDR_TimerCallback_t</a> Callback, void *Arg, int Timeout, <a class="el" href="../../d7/d03/struct_i_p_d_r__tag___timer.html">IPDR_TimerID</a> *ID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga4">IPDR_ReregisterTimer</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d3/d9b/group___i_p_d_r__event__services.html#ga0">IPDR_TimerCallback_t</a> Callback, void *Arg, int Timeout, <a class="el" href="../../d7/d03/struct_i_p_d_r__tag___timer.html">IPDR_TimerID</a> *ID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga5">IPDR_RegisterPeriodicTimer</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d3/d9b/group___i_p_d_r__event__services.html#ga0">IPDR_TimerCallback_t</a> Callback, void *Arg, int Timeout, <a class="el" href="../../d7/d03/struct_i_p_d_r__tag___timer.html">IPDR_TimerID</a> *ID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga6">IPDR_UnregisterTimer</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d7/d03/struct_i_p_d_r__tag___timer.html">IPDR_TimerID</a> ID)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga7">IPDR_GetTime</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> *Time)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga8">IPDR_SleepMS</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, long Interval)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga9">IPDR_FormatTimeLocalNow</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, char *Buf)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga10">IPDR_FormatTimeGMTNow</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, char *Buf)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga11">IPDR_FormatTimeLocal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> Time, char *Buf)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d24/group___i_p_d_r__platform__calls.html#ga12">IPDR_FormatTimeGMT</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> Time, char *Buf)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a5">Exporter_rcsid</a> [] = "@(#) $Id: Exporter.c,v 1.104 2005/04/21 11:29:55 dmitryk Exp $" IPDR_COPYRIGHT_STR</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a6">Exporter_h_rcsid</a> [] = EXPORTER_H_RCSID</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a7">IPDR_h_rcsid</a> [] = IPDR_H_RCSID</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a8">Defs_h_rcsid</a> [] = IPDR_DEFS_H_RCSID</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a9">Config_h_rcsid</a> [] = IPDR_CONFIG_H_RCSID</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a10">Version_h_rcsid</a> [] = VERSION_H_RCSID " " IPDR_VER</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a11">ExporterMsgs_h_rcsid</a> [] = EXPORTER_MSGS_H_RCSID</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/dcd/struct_i_p_d_r__tag___connection_handlers.html">ConnectionHandlers</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a12">Exporter_DefaultHandlers</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/db3/_exporter_8c.html#a13">ServerStateStr</a> []</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Implementation of the IPDR client (transmitter) and initial communication with the server (collector).<p>
Copyright (2005) © Amdocs, All Rights Reserved<p>
This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY KIND either expresses or implied.<p>
<dl compact><dt><b>Id</b></dt><dd><a class="el" href="../../d5/db3/_exporter_8c.html">Exporter.c</a>,v 1.104 2005/04/21 11:29:55 dmitryk Exp </dd></dl>
<p>
All the API functions are here, plus the functions for handling initial communication with the server (collector) (they are set up by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga4">IPDR_StartExporter()</a>). Once communication is established, most of the processing is done by functions in Exporter/ExporterProtocol.c. WHen the connection is disconnected, processing uses functions in this module. <hr><h2>Define Documentation</h2>
<a class="anchor" name="a4" doxytag="Exporter.c::INITIAL_COLLECTOR_COLLECTORSESSIONS_ARRAY_CAPACITY"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define INITIAL_COLLECTOR_COLLECTORSESSIONS_ARRAY_CAPACITY&nbsp;&nbsp;&nbsp;256          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="Exporter.c::INITIAL_COLLECTOR_CONNECTIONS_ARRAY_CAPACITY"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define INITIAL_COLLECTOR_CONNECTIONS_ARRAY_CAPACITY&nbsp;&nbsp;&nbsp;256          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="Exporter.c::INITIAL_COLLECTORS_ARRAY_CAPACITY"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define INITIAL_COLLECTORS_ARRAY_CAPACITY&nbsp;&nbsp;&nbsp;3          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="Exporter.c::INITIAL_SESSIONS_ARRAY_CAPACITY"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define INITIAL_SESSIONS_ARRAY_CAPACITY&nbsp;&nbsp;&nbsp;4          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="Exporter.c::INITIAL_TEMPLATES_ARRAY_CAPACITY"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define INITIAL_TEMPLATES_ARRAY_CAPACITY&nbsp;&nbsp;&nbsp;16          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a40" doxytag="Exporter.c::Collector_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Collector_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00844 {
00845         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *C = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *)Obj;
00846 
00847         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o8">ExporterPtr</a>;
00848         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll;
00849         <span class="keywordtype">int</span> Index;
00850 
00851         strncpy(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>, <span class="stringliteral">"Dcollector"</span>, <span class="keyword">sizeof</span> C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>);
00852 
00853         <span class="comment">/* Remove the Collector from Exporter's Collector list */</span>
00854         <span class="keywordflow">for</span> (Index = 0; Index &lt; E-&gt;Collectors.Length; Index++)
00855         {
00856         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
00857         <span class="keywordflow">if</span> (Coll != NULL &amp;&amp; Coll == C &amp;&amp; Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a> == C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a> &amp;&amp; strcmp(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>) == 0)
00858                 {
00859                         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>), Index);
00860         }
00861     }
00862         
00863         <span class="keywordflow">for</span> (Index = 0; Index &lt; E-&gt;DummyCollectors.Length; Index++)
00864         {
00865         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o15">DummyCollectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
00866         <span class="keywordflow">if</span> (Coll == C)
00867                 {
00868                         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o15">DummyCollectors</a>), Index);
00869         }
00870     }
00871 
00872         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>));
00873         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>));
00874 
00875         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>);
00876 
00877         strncpy(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>, <span class="stringliteral">"Xcollector"</span>, <span class="keyword">sizeof</span> C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>);
00878 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="Exporter.c::CollectorSession_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void CollectorSession_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00917 {
00918         <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>*       CS = (<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *)Obj;
00919         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>*                        S = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a> ;
00920         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>*                       E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
00921         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>*                      C = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> ;
00922         <span class="keywordtype">int</span>                                     Index ;
00923 
00924 
00925         strncpy(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>, <span class="stringliteral">"Dcollsess"</span>, <span class="keyword">sizeof</span> CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>);
00926 
00927         <span class="keywordflow">if</span>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o8">TmplDataTimer</a> != NULL)
00928         <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o8">TmplDataTimer</a>);
00929 
00930         <span class="keywordflow">if</span>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a> != NULL)
00931         <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a>);
00932 
00933         <span class="comment">/* Remove the CollectorSession from Exporter's Collector list */</span>
00934         <span class="keywordflow">for</span> (Index = 0; Index &lt; E-&gt;CollectorSessions.Length; Index++)
00935                 <span class="keywordflow">if</span>( CS == E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index] )
00936                         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>), Index);
00937 
00938         <span class="comment">/* Remove the Collector Session from its  session */</span>
00939         <span class="keywordflow">for</span> (Index = 0; Index &lt; S-&gt;CollectorSessions.Length; Index++)
00940                 <span class="keywordflow">if</span>( CS == S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index] )
00941                         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>), Index);
00942 
00943         <span class="comment">/* Remove the Collector Session from its Collector */</span>
00944         <span class="keywordflow">for</span> (Index = 0; Index &lt; C-&gt;CollectorSessions.Length; Index++)
00945                 <span class="keywordflow">if</span>( CS == C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index] )
00946                         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>), Index);
00947 
00948         strncpy(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>, <span class="stringliteral">"Xcollsess"</span>, <span class="keyword">sizeof</span> CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>);
00949 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="Exporter.c::Connection_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Connection_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00883 {
00884         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *C = (<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *)Obj;
00885         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o10">ExporterPtr</a>;
00886 
00887         strncpy(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>, <span class="stringliteral">"Dconnect"</span>, <span class="keyword">sizeof</span>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>));
00888         
00889         <span class="keywordflow">if</span>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o7">KeepAliveOUTTimerID</a> != NULL)
00890         {
00891                 <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o7">KeepAliveOUTTimerID</a>);
00892                 C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o7">KeepAliveOUTTimerID</a> = NULL;
00893         }
00894         
00895         <span class="keywordflow">if</span>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o6">KeepAliveINTimerID</a> != NULL)
00896         {
00897                 <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o6">KeepAliveINTimerID</a>);
00898                 C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o6">KeepAliveINTimerID</a> = NULL;
00899         }
00900 
00901         <span class="keywordflow">if</span>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> != NULL)
00902         {
00903                 <a class="code" href="../../d5/d93/_transport_8h.html#a24">TL_HandleDisconnection</a>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>);
00904                 <span class="comment">/*Platform_SleepMS(PS, 1000);*/</span>
00905         }
00906         
00907         C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> = NULL ;
00908         C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o4">Owner</a> = NULL ;
00909         C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o10">ExporterPtr</a> = NULL ;
00910 
00911         C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o1">State</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a51a21">IPDR_CONNECTION_DISCONNECTED</a> ;
00912 
00913         strncpy(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>, <span class="stringliteral">"Xconnect"</span>, <span class="keyword">sizeof</span> C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>);
00914 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a63" doxytag="Exporter.c::CRANE_CreateStatusTemplate"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a68">CRANE_Status</a> CRANE_CreateStatusTemplate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">CRANE_ClientHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ClientHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>TemplateID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Description</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>NumKeys</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="../../d9/d12/struct_i_p_d_r___key.html">CRANE_Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Keys</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">CRANE_TemplateHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>TH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a new template within the transmitter (client), for status responses. See <a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a52">CRANE_CreateTemplate()</a> for more details. The only difference between this and <a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a52">CRANE_CreateTemplate()</a> is that templates created by this call are used for STATUS RSP messages. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ClientHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a38">CRANE_InitClient()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TemplateID</em>&nbsp;</td><td>ID of template. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Description</em>&nbsp;</td><td>Template description (an internal copy is made of this string). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumKeys</em>&nbsp;</td><td>Number of keys within the template (may be zero for an empty template). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Keys</em>&nbsp;</td><td>Array of keys associated with the template (an internal copy is made of this array and all its contents). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TH</em>&nbsp;</td><td>(output) Handle to the newly created template. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>#CRANE_OK on success; #CRANE_ERR_TEMPLATE_ALREADY_EXISTS or <a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a101">CRANE_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a53">CRANE_ApplyTemplates</a> <p>
CRANE_AddKey <p>
CRANE_DeleteKey </dd></dl>
<div class="fragment"><pre class="fragment">02249 {
02250         fprintf(stderr,<span class="stringliteral">"CRANE_CreateStatusTemplate NOT IMPLEMENTED"</span>);
02251         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a190">IPDR_ERR_NOT_IMPLEMENTED</a>;
02252 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a64" doxytag="Exporter.c::CRANE_DeleteTemplate"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a68">CRANE_Status</a> CRANE_DeleteTemplate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">CRANE_ClientHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ClientHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">CRANE_TemplateHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>TH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete a previously created template. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ClientHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a38">CRANE_InitClient()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TH</em>&nbsp;</td><td>Handle of template (created by <a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a52">CRANE_CreateTemplate()</a>) to remove. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>#CRANE_OK on success; #CRANE_ERR_TEMPLATE_NOT_FOUND or <a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a101">CRANE_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">02256 {
02257         fprintf(stderr,<span class="stringliteral">"CRANE_DeleteTemplate NOT IMPLEMENTED"</span>);
02258         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a190">IPDR_ERR_NOT_IMPLEMENTED</a>;
02259 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a62" doxytag="Exporter.c::CRANE_GetTemplate"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a68">CRANE_Status</a> CRANE_GetTemplate           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">CRANE_ClientHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ClientHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>TemplateID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">CRANE_TemplateHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>TH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Retrieve a template handle given a template ID. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ClientHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a38">CRANE_InitClient()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TemplateID</em>&nbsp;</td><td>ID of template. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TH</em>&nbsp;</td><td>(output) Handle to the found template. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>#CRANE_OK on success; #CRANE_ERR_TEMPLATE_NOT_FOUND or <a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a101">CRANE_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a52">CRANE_CreateTemplate</a> </dd></dl>
<div class="fragment"><pre class="fragment">02238 {
02239         fprintf(stderr,<span class="stringliteral">"CRANE_GetTemplate NOT IMPLEMENTED"</span>);
02240         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a190">IPDR_ERR_NOT_IMPLEMENTED</a>;
02241 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a98" doxytag="Exporter.c::EventDataInit"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void EventDataInit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>EventData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>enum <a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga4">IPDR_Event_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>EventID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Sess</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize an event structure.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>EventData</em>&nbsp;</td><td>structure to update </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>EventID</em>&nbsp;</td><td>ID to put into it </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer) (may be NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CS</em>&nbsp;</td><td>Collector Session handle (pointer) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Sess</em>&nbsp;</td><td>session (may be NULL) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">03568 {
03569     EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o0">EventID</a>                     = EventID;
03570     <span class="keywordflow">if</span> (CS) {
03571         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o1">IC</a>                  = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>;
03572     } <span class="keywordflow">else</span> {
03573         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o1">IC</a>                  = NULL;
03574     }
03575     <span class="keywordflow">if</span> (E &amp;&amp; Sess) {
03576         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o2">OutstandingDataCount</a>    = <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, Sess);
03577         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o3">UnacknowledgedDataCount</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UnacknowledgedDataCount(E, Sess);
03578     } <span class="keywordflow">else</span> {
03579         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o2">OutstandingDataCount</a>    = 0;
03580         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o3">UnacknowledgedDataCount</a> = 0;
03581     }
03582     <span class="keywordflow">if</span> (Sess) {
03583         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o4">SessionID</a>               = Sess-&gt;ID;
03584         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o5">SessionName</a>             = Sess-&gt;Name;
03585         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o6">SessionDescription</a>      = Sess-&gt;Description;
03586     } <span class="keywordflow">else</span> {
03587         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o4">SessionID</a>               = 0;
03588         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o5">SessionName</a>             = <span class="stringliteral">""</span>;
03589         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o6">SessionDescription</a>      = <span class="stringliteral">""</span>;
03590     }
03591 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a114" doxytag="Exporter.c::Exporter_AddCollectorInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_AddCollectorInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>Port</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>NumberOfActive</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>isDummy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add a collector to a list of servers (collectors) list. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga4">IPDR_AddCollector</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>handle to a previously created exporter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>name of server (collector) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>IP address of the server (collector) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Port</em>&nbsp;</td><td>port number of the server (collector) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumberOfActive</em>&nbsp;</td><td>number of active collectors to allow</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04430 {
04431     <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>*          Coll;
04432     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>         Status;
04433         <span class="keywordtype">int</span>                     Index;
04434     <a class="code" href="../../d5/d93/_transport_8h.html#a28">TL_PABuf</a>            paBuf;
04435 
04436     <span class="keywordflow">if</span> (!Name) {
04437         Name = <span class="stringliteral">""</span>;
04438     }
04439 
04440         <span class="keywordflow">if</span>(CH) *CH = NULL ;
04441 
04442     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04443 
04444         <span class="keywordflow">for</span> (Index = 0; isDummy == <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a> &amp;&amp; Index &lt; E-&gt;Collectors.Length; Index++) {
04445         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
04446         <span class="keywordflow">if</span> (Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a> == Addr || strcmp(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>, Name) == 0) {
04447                         <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04448                        <span class="stringliteral">"Exporter_AddCollectorInternal"</span>, <span class="stringliteral">"Collector '%s' already exists"</span>, Name);
04449 
04450                         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04451             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a194">IPDR_ERR_COLLECTOR_ALREADY_EXISTS</a>;
04452         }
04453     }
04454 
04455     Status = <a class="code" href="../../d5/d55/_memory_management_8c.html#a2">Object_Allocate</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>),
04456                              <a class="code" href="../../d5/db3/_exporter_8c.html#a40">Collector_Destructor</a>,
04457                              (<span class="keywordtype">void</span> **) &amp; Coll);
04458     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04459         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04460         <span class="keywordflow">return</span> Status;
04461     }
04462 
04463         Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a2">DynamicArray_Create</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>),
04464                                  <a class="code" href="../../d5/db3/_exporter_8c.html#a3">INITIAL_COLLECTOR_CONNECTIONS_ARRAY_CAPACITY</a>);
04465 
04466         <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04467         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
04468         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04469         <span class="keywordflow">return</span> Status;
04470     }
04471 
04472         Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a2">DynamicArray_Create</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>),
04473                                  <a class="code" href="../../d5/db3/_exporter_8c.html#a4">INITIAL_COLLECTOR_COLLECTORSESSIONS_ARRAY_CAPACITY</a>);
04474 
04475         <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04476         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
04477         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04478         <span class="keywordflow">return</span> Status;
04479     }
04480 
04481     strncpy(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>, <span class="stringliteral">"COLLECTOR"</span>, <span class="keyword">sizeof</span>(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>));
04482     {
04483         <span class="keywordtype">char</span>* tmpName;
04484         Status = <a class="code" href="../../d5/db5/_common_util_8c.html#a5">Util_StrDup</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Name, &amp;tmpName);
04485         Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a> = tmpName;
04486     }
04487     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04488         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
04489         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04490         <span class="keywordflow">return</span> Status;
04491     }
04492 
04493     Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a> = Addr;
04494     Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o5">Port</a> = Port;
04495     Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o6">NumOfConnections</a> = NumberOfActive;
04496         Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o8">ExporterPtr</a> = E;
04497         Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o9">isDummy</a> = isDummy ;
04498 
04499         <span class="keywordflow">for</span>(Index = 0; Index &lt; NumberOfActive; Index++)
04500         {
04501                 Status = <a class="code" href="../../d5/db3/_exporter_8c.html#a43">Exporter_AddIPDRConnectionToCollector</a>( E, Coll, NULL );
04502                 <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
04503                 {
04504                         <a class="code" href="../../da/df4/_log_8h.html#a28">Log_Write</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
04505                    <span class="stringliteral">"Exporter_AddCollectorInternal"</span>, <span class="stringliteral">"Failed To Add IPDRConnection To Collector"</span>);
04506                 }
04507         }
04508         
04509         <span class="keywordflow">if</span>(<a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a> == isDummy)
04510         {
04511                 Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a12">DynamicArray_AddElement</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, 
04512                                                                         &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o15">DummyCollectors</a>), Coll,
04513                                                                         &amp; Index);
04514         }
04515     <span class="keywordflow">else</span>
04516         {
04517                 Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a12">DynamicArray_AddElement</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, 
04518                                                                         &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>), Coll,
04519                                                                         &amp; Index);
04520         }
04521     
04522         <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04523         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
04524         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04525         <span class="keywordflow">return</span> Status;
04526     }
04527 
04528 
04529     <a class="code" href="../../da/df4/_log_8h.html#a32">Log_Write4</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04530                <span class="stringliteral">"Exporter_AddCollectorInternal"</span>,
04531                <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a11">MSG_EXPORTER_ADD_SERVER</a>, Name,
04532                <a class="code" href="../../d5/d93/_transport_8h.html#a16">TL_PrintAddressAndPort</a>(Addr, Port, paBuf),
04533                NumberOfActive,(<a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>==isDummy)?<span class="stringliteral">"Dummy"</span>:<span class="stringliteral">"Real"</span>);
04534 
04535         <span class="keywordflow">if</span>(CH) *CH = Coll ;
04536 
04537     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04538     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04539 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="Exporter.c::Exporter_AddIPDRConnectionToCollector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_AddIPDRConnectionToCollector           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Coll</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00954 {
00955         <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00956         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC;
00957         <span class="keywordtype">int</span> Index ;
00958         
00959         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00960 
00961 
00962         Status = <a class="code" href="../../d5/d55/_memory_management_8c.html#a2">Object_Allocate</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a>),
00963                                         <a class="code" href="../../d5/db3/_exporter_8c.html#a41">Connection_Destructor</a>,
00964                                         (<span class="keywordtype">void</span> **) &amp; IC);
00965         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00966         {
00967                 <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
00968                            <span class="stringliteral">"Exporter_ConnectCallback"</span>, <span class="stringliteral">"Object_Allocate Error, Status: %d"</span>,
00969                            Status);
00970                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00971                 <span class="keywordflow">return</span> Status ;
00972         }
00973 
00974         strncpy(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>, <span class="stringliteral">"CONNEC"</span>, <span class="keyword">sizeof</span>(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>));
00975         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o1">State</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a51a21">IPDR_CONNECTION_DISCONNECTED</a> ;
00976         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o2">Autoconnect</a> = (Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o6">NumOfConnections</a> == 0)?<a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>:<a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
00977         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> = C;
00978         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o4">Owner</a> = Coll;
00979         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o5">ConnectResponseTimerID</a> = NULL;
00980         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o6">KeepAliveINTimerID</a> = NULL;
00981         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o7">KeepAliveOUTTimerID</a> = NULL;
00982         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o8">RemoteKeepAliveInterval</a> = (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o4">KeepAliveInterval</a>)+500;
00983         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o9">isDummy</a> = Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o9">isDummy</a> ;
00984         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o10">ExporterPtr</a> = E;
00985 
00986         <span class="keywordflow">if</span>(C != NULL)
00987                 C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o11">Owner</a> = IC;
00988 
00989         Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, &amp;(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>), IC, &amp;Index);
00990         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00991         {
00992                 <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
00993                            <span class="stringliteral">"Exporter_ConnectCallback"</span>, <span class="stringliteral">"DynamicArray_AppendElement Error, Status: %d"</span>,
00994                            Status);
00995                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00996                 <span class="keywordflow">return</span> Status ;
00997         }
00998         
00999         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01000 
01001         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01002 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a22" doxytag="Exporter.c::Exporter_AddKeyInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_AddKeyInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>TH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="../../d9/d12/struct_i_p_d_r___key.html">IPDR_Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CKey</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">02436 {
02437     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = SessionHandle;
02438         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = NULL;
02439     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl;
02440     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
02441 
02442     <span class="keywordflow">if</span> (! S || ! CKey) {
02443         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
02444     }
02445 
02446         E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
02447 
02448     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>);
02449 
02450         <span class="keywordflow">if</span>(TH.<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o1">s</a> != S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a> || TH.<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a> &gt;= S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>){
02451         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>);
02452         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a197">IPDR_ERR_TEMPLATE_NOT_FOUND</a>;
02453     }
02454 
02455     Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[TH.<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a>];
02456     <span class="keywordflow">if</span> (Tmpl == NULL) {
02457         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>);
02458         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a197">IPDR_ERR_TEMPLATE_NOT_FOUND</a>;
02459     }
02460 
02461     Status = <a class="code" href="../../dd/d68/_templates_8c.html#a18">Template_AddKey</a>(S, Tmpl,
02462                              CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o0">KeyID</a>, CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o1">KeyTypeID</a>,
02463                              CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o2">KeyName</a>, CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o3">KeyLabel</a>,
02464                              CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o4">KeyHelp</a>, CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o5">Enabled</a>,
02465                              CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o6">AccessType</a>,
02466                              CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o7">ExtraData</a>,
02467                              CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o8">KeyAccessor</a>);
02468 
02469 <span class="preprocessor">#ifdef NOTDONEYET</span>
02470 <span class="preprocessor"></span>    ExporterMIB_UpdateTemplates(S);
02471 <span class="preprocessor">#endif</span>
02472 <span class="preprocessor"></span>    <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>);
02473     <span class="keywordflow">return</span> Status;
02474 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a23" doxytag="Exporter.c::Exporter_AddKeyInternal_All"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_AddKeyInternal_All           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>TemplateID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="../../d9/d12/struct_i_p_d_r___key.html">IPDR_Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CKey</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">02509 {
02510     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl;
02511         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S;
02512         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>* E = ExporterHandle;
02513     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status, Status1 = <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
02514         <span class="keywordtype">int</span> j;
02515         <a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TH;
02516 
02517     <span class="keywordflow">if</span> (! E || ! CKey) {
02518         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
02519     }
02520 
02521     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>);
02522 
02523         <span class="keywordflow">for</span> (j = 0; j &lt; E-&gt;Sessions.Length; j++) {
02524         S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
02525 
02526                 Status = <a class="code" href="../../d5/db3/_exporter_8c.html#a84">IPDR_GetTemplateInternal</a>(S, TemplateID, NULL, NULL, NULL, &amp;TH);
02527                 <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a17">SUCCESS</a>(Status))
02528                 {
02529                         Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[TH.<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a>];
02530                         <span class="keywordflow">if</span> (Tmpl == NULL) {
02531                                 Status1 = <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a197">IPDR_ERR_TEMPLATE_NOT_FOUND</a>;
02532                                 continue ;
02533                         }
02534 
02535                         Status = <a class="code" href="../../dd/d68/_templates_8c.html#a18">Template_AddKey</a>(S, Tmpl,
02536                                                                         CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o0">KeyID</a>, CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o1">KeyTypeID</a>,
02537                                                                         CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o2">KeyName</a>, CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o3">KeyLabel</a>,
02538                                                                         CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o4">KeyHelp</a>, CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o5">Enabled</a>,
02539                                                                         CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o6">AccessType</a>,
02540                                                                         CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o7">ExtraData</a>,
02541                                                                         CKey-&gt;<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o8">KeyAccessor</a>);
02542                         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
02543                                 Status1 = Status;
02544                 }
02545         }
02546 <span class="preprocessor">#ifdef NOTDONEYET</span>
02547 <span class="preprocessor"></span>    ExporterMIB_UpdateTemplates(S);
02548 <span class="preprocessor">#endif</span>
02549 <span class="preprocessor"></span>    <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>);
02550     <span class="keywordflow">return</span> Status1;
02551 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a115" doxytag="Exporter.c::Exporter_AssocCollectorSession_Internal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_AssocCollectorSession_Internal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>Priority</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Associates collector with the session <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga7">IPDR_AssocCollectorSession</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>- Exporter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>- Session to associate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>C</em>&nbsp;</td><td>- Collector to associate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Priority</em>&nbsp;</td><td>- Priority to associate</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04557 {
04558         <span class="keywordtype">int</span>                             Index, SIndex, CIndex ;
04559     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>                 Status;
04560         <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>*       CS = NULL ;
04561         <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>*       lookForCS = NULL ;
04562         <a class="code" href="../../d5/d93/_transport_8h.html#a28">TL_PABuf</a>                        paBuf;
04563 
04564         <span class="keywordflow">if</span> ( !E || !S || !C ) {
04565         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
04566     }
04567 
04568         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04569 
04570         <span class="keywordflow">if</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
04571         {
04572                 <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
04573                                 <span class="stringliteral">"Exporter_AssocCollectorSession_Internal"</span>,
04574                                 <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a121">MSG_EXPORTER_SESSION_MUST_STOP2</a>,
04575                                 S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>);
04576                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04577                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a214">IPDR_ERR_SESSION_IS_RUNNING</a>;
04578         }
04579 
04580 
04581         <span class="keywordflow">for</span>(Index = 0;Index &lt; E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a> ; Index++)
04582         {
04583                 lookForCS = E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
04584 
04585                 <span class="keywordflow">if</span>( (lookForCS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a> == S) &amp;&amp; (lookForCS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> == C) )
04586                 {
04587                         CS = lookForCS;
04588                 }
04589         }
04590 
04591         <span class="comment">/* Association exists, just change priority*/</span>
04592         <span class="keywordflow">if</span>( CS != NULL )
04593         {
04594                 <a class="code" href="../../da/df4/_log_8h.html#a32">Log_Write4</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04595                <span class="stringliteral">"Exporter_AssocCollectorSession_Internal"</span>,
04596                <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a31">MSG_EXPORTER_ASSOC_COLL_SESSION</a>,
04597                            C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>,
04598                <a class="code" href="../../d5/d93/_transport_8h.html#a15">TL_PrintAddress</a>(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>, paBuf),
04599                            S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>,
04600                Priority);
04601                 CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o6">Priority</a> = Priority;
04602                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04603                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a179">IPDR_ERR_COLLECTORSESSION_REASSOC</a>;
04604         }
04605 
04606         <span class="comment">/* Association does not exists yet. Need to make a new one*/</span>
04607         Status = <a class="code" href="../../d5/d55/_memory_management_8c.html#a2">Object_Allocate</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>),
04608                                                         <a class="code" href="../../d5/db3/_exporter_8c.html#a42">CollectorSession_Destructor</a>,
04609                                                         (<span class="keywordtype">void</span> **) &amp; CS);
04610         <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04611                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04612                 <span class="keywordflow">return</span> Status;
04613         }
04614 
04615         strncpy(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>, <span class="stringliteral">"COLLSESS"</span>, <span class="keyword">sizeof</span>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>));
04616 
04617         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>;
04618         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o2">ExporterPtr</a> = E;
04619         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a> = S;
04620         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> = C;
04621         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a> = NULL;
04622         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o6">Priority</a> = Priority;
04623 
04624     <span class="comment">/*</span>
04625 <span class="comment">        TODO:</span>
04626 <span class="comment">        TmplDataTimer;</span>
04627 <span class="comment">    WindowSizeTimer;</span>
04628 <span class="comment">          IPDR_Statistics Statistics;</span>
04629 <span class="comment">    IPDR_Time PrevStatisticsTime;</span>
04630 <span class="comment">            IPDR_Statistics PrevStatistics;</span>
04631 <span class="comment">            IPDR_EventData LastEvent;*/</span>
04632 
04633 
04634         Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>), CS, &amp;Index);
04635     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04636         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, CS);
04637         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04638         <span class="keywordflow">return</span> Status;
04639     }
04640 
04641 
04642     Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>), CS, &amp;SIndex);
04643     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04644                 <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, CS);
04645         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04646         <span class="keywordflow">return</span> Status;
04647     }
04648 
04649     Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>), CS, &amp;CIndex);
04650     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04651                 <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, CS);
04652         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04653         <span class="keywordflow">return</span> Status;
04654     }
04655 
04656         <a class="code" href="../../da/df4/_log_8h.html#a32">Log_Write4</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04657                <span class="stringliteral">"Exporter_AssocCollectorSession_Internal"</span>,
04658                <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a31">MSG_EXPORTER_ASSOC_COLL_SESSION</a>,
04659                            C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>,
04660                <a class="code" href="../../d5/d93/_transport_8h.html#a15">TL_PrintAddress</a>(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>, paBuf),
04661                            S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>,
04662                Priority);
04663 
04664 <span class="preprocessor">#ifdef NOTDONEYET</span>
04665 <span class="preprocessor"></span>    ExporterMIB_UpdateTemplates(S);
04666 <span class="preprocessor">#endif</span>
04667 <span class="preprocessor"></span>    <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04668 
04669         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04670 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a25" doxytag="Exporter.c::Exporter_AutoconnectCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void Exporter_AutoconnectCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Callback triggered in order to allow to connect to the configured collectors <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Arg</em>&nbsp;</td><td>callback argument (Exporter) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00688 {
00689     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = (<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *) Arg;
00690         <a class="code" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS = E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>;
00691     <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll;
00692         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *Conn ;
00693         <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C;
00694     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00695         <span class="keywordtype">int</span> Index, Index1 ;
00696 
00697     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00698 
00699         <span class="keywordflow">for</span> (Index = 0; Index &lt; E-&gt;Collectors.Length; Index++)
00700         {
00701                 Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
00702                 <span class="keywordflow">for</span> (Index1 = 0; Index1 &lt; Coll-&gt;IPDRConnections.Length; Index1++)
00703             {
00704                         Conn = (<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *)Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index1];
00705                         <span class="keywordflow">if</span>( (Conn-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o2">Autoconnect</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>) &amp;&amp; (Conn-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> == NULL) )
00706                         {
00707                                 Status = <a class="code" href="../../d5/d93/_transport_8h.html#a6">TL_CreateConnection</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o11">TransportHandle</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o5">LocalAddr</a>, Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>, Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o5">Port</a>, (<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> **)&amp;Conn-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>);
00708                             <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00709                                 {
00710                                         <a class="code" href="../../da/df4/_log_8h.html#a31">Log_Write3</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>, <span class="stringliteral">"Exporter_AutoconnectCallback"</span>,
00711                                                                 <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a56">MSG_EXPORTER_LOG_CONNECT_ERROR</a>,
00712                                                                 <span class="stringliteral">"TL_CreateConnection"</span>, <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_StatusMsg</a>(E,Status), <a class="code" href="../../d5/d93/_transport_8h.html#a14">TL_GetConnectionInfoStr</a>(C));
00713                                         <span class="keywordflow">continue</span>;
00714                                 }
00715                                 Conn-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o11">Owner</a> = Conn ;
00716                         }
00717                         C = Conn-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> ;
00718                         <span class="keywordflow">if</span>((Conn-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o2">Autoconnect</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>) &amp;&amp; (Conn-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o1">State</a> == <a class="code" href="../../d5/d93/_exporter_8h.html#a51a21">IPDR_CONNECTION_DISCONNECTED</a>))
00719                         {
00720                                 Status = <a class="code" href="../../d5/d93/_transport_8h.html#a7">TL_Connect</a>(PS, C);
00721                                 <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00722                                 {
00723                                         <a class="code" href="../../da/df4/_log_8h.html#a31">Log_Write3</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>, <span class="stringliteral">"Exporter_AutoconnectCallback"</span>,
00724                                                                 <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a56">MSG_EXPORTER_LOG_CONNECT_ERROR</a>,
00725                                                                 <span class="stringliteral">"TL_Connect"</span>, <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_StatusMsg</a>(E,Status), <a class="code" href="../../d5/d93/_transport_8h.html#a14">TL_GetConnectionInfoStr</a>(C));
00726                                         <a class="code" href="../../d5/d93/_transport_8h.html#a24">TL_HandleDisconnection</a>(C);
00727                                         <span class="keywordflow">continue</span>;
00728                                 }
00729                                 Status = <a class="code" href="../../dd/d44/_exporter_protocol_8c.html#a35">ExporterProtocol_AutoconnectCallback</a>(E, Coll, C);
00730                                 <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00731                                 {
00732                                         <a class="code" href="../../d5/d93/_transport_8h.html#a24">TL_HandleDisconnection</a>(C);
00733                                 }
00734                         }
00735             }
00736         }
00737 
00738         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00739 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a109" doxytag="Exporter.c::Exporter_BuildRecord"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_BuildRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CMgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">IPDR_tag_Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Tmpl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long *&nbsp;</td>
          <td class="mdname" nowrap> <em>RecordSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Given a chunks manager, session, template and raw data construct a new record in the chunks manager.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CMgr</em>&nbsp;</td><td>chunks manager. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>session handle (pointer). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Tmpl</em>&nbsp;</td><td>template. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Data</em>&nbsp;</td><td>the data to be output (as described by the template) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>buffer handle referencing the new record (output) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RecordSize</em>&nbsp;</td><td>size of generated record (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04083 {
04084     DataMessage *Header;
04085 
04086     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o8">BuildFunc</a>(CMgr, S, (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Tmpl,
04087                                           Data, BH, RecordSize);
04088     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
04089         <span class="keywordflow">return</span> Status;
04090 
04091     Header = (DataMessage *) BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>;
04092     <a class="code" href="../../dd/d44/_exporter_protocol_8c.html#a40">ExporterProtocol_FillHeader</a>(S, BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>, <a class="code" href="../../db/d1e/_protocol_8h.html#a39">IPDR_MSG_DATA</a>, (*RecordSize));
04093 
04094     <a class="code" href="../../df/dde/_defs_8h.html#a8">IPDR_SET_HTONS</a>(Header-&gt;TemplateID, Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a>);
04095         <a class="code" href="../../df/dde/_defs_8h.html#a8">IPDR_SET_HTONS</a>(Header-&gt;ConfigurationID, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o3">ConfigurationID</a>);
04096     <a class="code" href="../../df/dde/_defs_8h.html#a10">IPDR_SET_HTONLL</a>(Header-&gt;sequenceNum, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o6">DSN</a>);
04097         <a class="code" href="../../df/dde/_defs_8h.html#a9">IPDR_SET_HTONL</a>(Header-&gt;dataLength, (*RecordSize) - <span class="keyword">sizeof</span>(DataMessage));
04098     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04099 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="Exporter.c::Exporter_ConnectCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void Exporter_ConnectCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Conn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>Port</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Arg</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Callback invoked when a server (collector) connects. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Conn</em>&nbsp;</td><td>connected connection </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>remove address </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Port</em>&nbsp;</td><td>remove port </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Arg</em>&nbsp;</td><td>callback argument (Exporter) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01017 {
01018     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = (<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>*)Arg;
01019         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll = NULL;
01020         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC = NULL;
01021         <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
01022         <span class="comment">/*int Index ;*/</span>
01023         <a class="code" href="../../d5/d93/_transport_8h.html#a28">TL_PABuf</a> paBuf;
01024         
01025         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01026 
01027     <a class="code" href="../../da/df4/_log_8h.html#a27">Log_StateTransition</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>,
01028                         <span class="stringliteral">"Exporter_ConnectCallback"</span>, Conn,
01029                         <a class="code" href="../../d5/d93/_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>, <a class="code" href="../../d5/d93/_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>,
01030                         <a class="code" href="../../d5/d93/_transport_8h.html#a16">TL_PrintAddressAndPort</a>(Addr, Port, paBuf));
01031 
01032         <span class="comment">/*for (Index = 0; Index &lt; E-&gt;DummyCollectors.Length; Index++)</span>
01033 <span class="comment">        {</span>
01034 <span class="comment">        Coll = (Collector *) E-&gt;DummyCollectors.Data[Index];</span>
01035 <span class="comment">        if (Coll-&gt;Addr == Conn-&gt;RemoteAddr)</span>
01036 <span class="comment">                        break ;</span>
01037 <span class="comment">        </span>
01038 <span class="comment">                Coll = NULL ;</span>
01039 <span class="comment">    }*/</span>
01040 
01041         <span class="keywordflow">if</span>(Coll == NULL)
01042         {
01043                 <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(<a class="code" href="../../d5/db3/_exporter_8c.html#a114">Exporter_AddCollectorInternal</a>(E,
01044                                                                         <a class="code" href="../../d5/d93/_transport_8h.html#a16">TL_PrintAddressAndPort</a>(Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>, Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o2">RemotePort</a>, paBuf),
01045                                                                         Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>,
01046                                                                         Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o2">RemotePort</a>,
01047                                                                         0,<a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>,
01048                                                                         &amp;Coll)))
01049                 {
01050                         <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
01051                                         <span class="stringliteral">"Exporter_ConnectCallback"</span>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a19">MSG_EXPORTER_UNKNOWN_SERVER</a>,
01052                                         <a class="code" href="../../d5/d93/_transport_8h.html#a16">TL_PrintAddressAndPort</a>(Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a>, Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o2">RemotePort</a>, paBuf));
01053                         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01054                         return ;
01055                 }
01056                 
01057                 <span class="comment">/*for (Index = 0; Index &lt; E-&gt;DummyCollectors.Length; Index++)</span>
01058 <span class="comment">                {</span>
01059 <span class="comment">                        Coll = (Collector *) E-&gt;DummyCollectors.Data[Index];</span>
01060 <span class="comment">                        if (Coll-&gt;Addr == Conn-&gt;RemoteAddr &amp;&amp;</span>
01061 <span class="comment">                                Coll-&gt;Port == Conn-&gt;RemotePort &amp;&amp;</span>
01062 <span class="comment">                                strcmp(Coll-&gt;Name, TL_PrintAddressAndPort(Conn-&gt;RemoteAddr, Conn-&gt;RemotePort, paBuf)) == 0)</span>
01063 <span class="comment">                                break ;</span>
01064 <span class="comment">                        </span>
01065 <span class="comment">                        Coll = NULL ;</span>
01066 <span class="comment">                }*/</span>
01067         }
01068         
01069         <span class="keywordflow">if</span>(Coll == NULL)
01070         {
01071                 <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
01072                                 <span class="stringliteral">"Exporter_ConnectCallback"</span>, <span class="stringliteral">"Failed To Create Dummy Collector, Remote Addres: %.98s"</span>,
01073                                 <a class="code" href="../../d5/d93/_transport_8h.html#a14">TL_GetConnectionInfoStr</a>(Conn));
01074                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01075                 return ;        
01076         }
01077         
01078         Status = <a class="code" href="../../d5/db3/_exporter_8c.html#a43">Exporter_AddIPDRConnectionToCollector</a>( E, Coll, Conn );
01079         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01080         {
01081                 <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
01082                                 <span class="stringliteral">"Exporter_ConnectCallback"</span>, <span class="stringliteral">"Failed To Add IPDRConnection To Collector, Remote Addres: %.98s"</span>,
01083                                 <a class="code" href="../../d5/d93/_transport_8h.html#a14">TL_GetConnectionInfoStr</a>(Conn));
01084                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01085                 return ;
01086         }
01087         
01088         IC = (<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *)Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o11">Owner</a>;
01089         
01090         <span class="keywordflow">if</span>(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o5">ConnectResponseTimerID</a> != NULL)
01091                 <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o5">ConnectResponseTimerID</a>));
01092 
01093         <a class="code" href="../../d2/dc9/_platform_8h.html#a9">Platform_RegisterTimer</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
01094                                                 <a class="code" href="../../d5/db3/_exporter_8c.html#a26">ExporterProtocol_WaitConnectTimeoutCallback</a>,
01095                                                         IC,
01096                             E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o7">ConnectResponseTimeout</a>,
01097                             &amp; (IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o5">ConnectResponseTimerID</a>));
01098 
01099         <a class="code" href="../../dd/d44/_exporter_protocol_8c.html#a36">ExporterProtocol_ConnectCallback</a>(Conn, Addr, Port, Arg);
01100         
01101         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01102 
01103         return ;
01104 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a112" doxytag="Exporter.c::Exporter_CreateSessionInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_CreateSessionInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char&nbsp;</td>
          <td class="mdname" nowrap> <em>ID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Description</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>SH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a new session with the client. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga0">IPDR_CreateSession</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>handle to a previously created client </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>session name </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ID</em>&nbsp;</td><td>session ID </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Description</em>&nbsp;</td><td>session description </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SH</em>&nbsp;</td><td>handle to the newly created session</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04247 {
04248     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
04249     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S;
04250     <span class="keywordtype">int</span> Index;
04251     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
04252 
04253         <span class="keywordflow">if</span>(!ID || !E || !Name)
04254                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
04255 
04256     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04257 
04258     *SH = NULL; <span class="comment">/* what we return if there's an error */</span>
04259 
04260     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a17">SUCCESS</a>(<a class="code" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga2">IPDR_GetSession</a>(E, ID, SH, NULL, NULL))) {
04261         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04262         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a191">IPDR_ERR_SESSION_ALREADY_EXISTS</a>;
04263     }
04264 
04265 <span class="preprocessor">#if 0</span>
04266 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (0) {
04267         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numSessions;
04268         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a15">DynamicArray_CountObjects</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;C-&gt;Sessions, &amp;numSessions);
04269         <span class="keywordflow">if</span> (numSessions &gt; 0) {
04270             <span class="comment">/* XXX Restriction: only one session because the templates'</span>
04271 <span class="comment">             * data are "global" and not specialized to a single session</span>
04272 <span class="comment">             * (if desired). This will need to be fixed in the future; but</span>
04273 <span class="comment">             * for now, just document it and make sure that mistakes</span>
04274 <span class="comment">             * aren't made. */</span>
04275             <span class="keywordflow">return</span> IPDR_ERR_TOO_MANY_SESSIONS;
04276         }
04277     }
04278 <span class="preprocessor">#endif</span>
04279 <span class="preprocessor"></span>
04280     Status = <a class="code" href="../../d5/d55/_memory_management_8c.html#a2">Object_Allocate</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>),
04281                              <a class="code" href="../../d5/db3/_exporter_8c.html#a39">Session_Destructor</a>,
04282                              (<span class="keywordtype">void</span> **) &amp; S);
04283 
04284     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04285         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04286         <span class="keywordflow">return</span> Status;
04287     }
04288     strncpy(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>, <span class="stringliteral">"SESSION"</span>, <span class="keyword">sizeof</span> S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>);
04289 
04290 
04291     Status = <a class="code" href="../../d5/db5/_common_util_8c.html#a5">Util_StrDup</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Name, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>));
04292     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04293         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, S);
04294         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04295         <span class="keywordflow">return</span> Status;
04296     }
04297 
04298     Status = <a class="code" href="../../d5/db5/_common_util_8c.html#a5">Util_StrDup</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Description, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o18">Description</a>));
04299     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04300         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, S);
04301         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04302         <span class="keywordflow">return</span> Status;
04303     }
04304 
04305     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a> = ID;
04306     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a> = E;
04307     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a> = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o4">WorkContext</a> = NULL;
04308     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a> = NULL;
04309     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o6">DSN</a> = <a class="code" href="../../db/d1e/_protocol_8h.html#a4">IPDR_INITIAL_DSN</a>;
04310     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o7">SyncNeeded</a> = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
04311     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o8">SendingData</a> = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
04312         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o9">Retransmite</a> = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
04313         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>; <span class="comment">/*Platform_IsRunning(EXPORTER_PLATFORM);*/</span>
04314     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o1">CCollectors</a> = NULL;
04315         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o12">TemplatesChnged</a> = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
04316         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o11">Negotiable</a> = E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o1">TemplateNegotiation</a>;
04317         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o2">CCollectorsLength</a> = 0;
04318 
04319     <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;CreateSession(E, S);
04320 
04321     <a class="code" href="../../d5/db3/_exporter_8c.html#a32">StatisticsInitialize</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o22">PrevStatisticsTime</a>, &amp;S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o23">PrevStatistics</a>, &amp;S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o23">PrevStatistics</a>);
04322 
04323     Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a12">DynamicArray_AddElement</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>), S,
04324                                      &amp; Index);
04325     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04326         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, S);
04327         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04328         <span class="keywordflow">return</span> Status;
04329     }
04330 
04331     <span class="keywordflow">if</span> (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o1">Started</a>) {
04332                 <a class="code" href="../../d5/db3/_exporter_8c.html#a45">Session_CreateNewWorkContext</a>(E, S, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>), <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>);
04333     }
04334 
04335     *SH = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>) S;
04336 
04337     <a class="code" href="../../da/df4/_log_8h.html#a31">Log_Write3</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04338                <span class="stringliteral">"Exporter_CreateSessionInternal"</span>,
04339                <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a9">MSG_EXPORTER_ADD_SESSION</a>, ID, Name, Description);
04340 
04341     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04342     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04343 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a21" doxytag="Exporter.c::Exporter_CreateTemplateInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_CreateTemplateInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>TemplateID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>SchemaName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>TypeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>NumKeys</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="../../d9/d12/struct_i_p_d_r___key.html">IPDR_Key</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Keys</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>StatusFlag</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>TH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a template (internal).<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d1/dcc/group___i_p_d_r__templates.html#ga3">IPDR_CreateTemplate</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>client (transmitter) handle (pointer) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>session handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TemplateID</em>&nbsp;</td><td>template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SchemaName</em>&nbsp;</td><td>schema name of the template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TypeName</em>&nbsp;</td><td>type name of the template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumKeys</em>&nbsp;</td><td>number of @ Keys </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Keys</em>&nbsp;</td><td>keys in the template </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>StatusFlag</em>&nbsp;</td><td>true for Status template, false otherwise </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TH</em>&nbsp;</td><td>template handle (updated)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">02779 {
02780     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
02781     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl;
02782     <span class="keywordtype">int</span> i;
02783 
02784     <span class="keywordflow">if</span> ( !TemplateID || !E || !S || !TH || (NumKeys &gt; 0 &amp;&amp; !Keys)) {
02785         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
02786     }
02787 
02788     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02789 
02790     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a17">SUCCESS</a>(<a class="code" href="../../d1/dcc/group___i_p_d_r__templates.html#ga5">IPDR_GetTemplate</a>(S, TemplateID, NULL, NULL, NULL, TH))) {
02791         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02792         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a196">IPDR_ERR_TEMPLATE_ALREADY_EXISTS</a>;
02793     }
02794 
02795     <span class="comment">/* create a new template */</span>
02796     Status = <a class="code" href="../../dd/d68/_templates_8c.html#a19">Template_Create</a>(S, TemplateID,
02797                              SchemaName, TypeName, NumKeys, StatusFlag, &amp; Tmpl);
02798     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
02799         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02800         <span class="keywordflow">return</span> Status;
02801     }
02802 
02803     <span class="comment">/* add the requested keys to the template */</span>
02804     <span class="keywordflow">for</span> (i = 0; i &lt; NumKeys; i++) {
02805                 Status = <a class="code" href="../../dd/d68/_templates_8c.html#a18">Template_AddKey</a>(S,
02806                                                                 Tmpl,
02807                                                                 Keys[i].KeyID, Keys[i].KeyTypeID,
02808                                                                 Keys[i].KeyName, Keys[i].KeyLabel,
02809                                                                 Keys[i].KeyHelp, Keys[i].Enabled,
02810                                                                 Keys[i].AccessType,
02811                                                                 Keys[i].ExtraData,
02812                                                                 Keys[i].KeyAccessor);
02813         <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
02814             <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Tmpl);
02815             <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02816             <span class="keywordflow">return</span> Status ;
02817         }
02818     }
02819         <a class="code" href="../../dd/d68/_templates_8c.html#a20">Template_Reset</a>(S, Tmpl);
02820 
02821         TH-&gt;<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o1">s</a> = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>;
02822 
02823     Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a12">DynamicArray_AddElement</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>),
02824                                      Tmpl, &amp;TH-&gt;<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a>);
02825     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
02826         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Tmpl);
02827         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02828         <span class="keywordflow">return</span> Status;
02829     }
02830 <span class="preprocessor">#ifdef NOTDONEYET</span>
02831 <span class="preprocessor"></span>    ExporterMIB_UpdateTemplates(S);
02832 <span class="preprocessor">#endif</span>
02833 <span class="preprocessor"></span>    <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
02834     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
02835 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="Exporter.c::Exporter_DataCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void Exporter_DataCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Conn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned int&nbsp;</td>
          <td class="mdname" nowrap> <em>MsgLen</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Arg</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Callback invoked when data arrives on a connection or no data arrives within the timeout.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Conn</em>&nbsp;</td><td>connected connection </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>received buffer (NULL if timeout) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>MsgLen</em>&nbsp;</td><td>length of message in the buffer (0 if timeout) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Arg</em>&nbsp;</td><td>callback argument (Exporter) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01170 {
01171         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>                *E = (<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *) Arg;
01172         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01173         <a class="code" href="../../dd/d44/_exporter_protocol_8c.html#a38">ExporterProtocol_DataCallback</a>(Conn, BH, MsgLen, Arg);
01174         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01175         return ;
01176 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a113" doxytag="Exporter.c::Exporter_DeleteSessionInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_DeleteSessionInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete a previously created session. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga1">IPDR_DeleteSession</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>handle to a previously created client </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>handle to the session</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04358 {
04359     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
04360     <span class="keywordtype">int</span> i, j;
04361     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
04362 
04363         <span class="keywordflow">if</span>(!E || !S)
04364                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
04365 
04366         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04367         <span class="keywordflow">if</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a> != NULL || S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
04368         {
04369                 <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04370                            <span class="stringliteral">"Exporter_DeleteSessionInternal"</span>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a73">MSG_EXPORTER_ACTIVE_COLLECTOR_EXISTS</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>);
04371                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04372                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a211">IPDR_ERR_ACTIVE_COLLECTOR_EXISTS</a>;
04373         }
04374 
04375     <span class="keywordflow">for</span> (i = 0; i &lt; E-&gt;Sessions.Length; i++)
04376         {
04377         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S1 = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
04378         <span class="keywordflow">if</span> (S1 == S)
04379                 {
04380             <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04381                        <span class="stringliteral">"Exporter_DeleteSessionInternal"</span>,
04382                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a10">MSG_EXPORTER_REMOVE_SESSION</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>);
04383                         
04384                         <span class="keywordflow">for</span> (j = 0; j &lt; S-&gt;CollectorSessions.Length; j++)
04385                         {
04386                                 <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = (<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *)S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
04387                                 <span class="keywordflow">if</span>(CS != NULL &amp;&amp; CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> &amp;&amp; CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a> != NULL &amp;&amp;
04388                                         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>)
04389                                 {
04390                                         Status = <a class="code" href="../../dd/d44/_exporter_protocol_8c.html#a57">ExporterProtocol_SendError</a>(E, S, CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a>, CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>, <a class="code" href="../../db/d1e/_protocol_8h.html#a57a53">CollectorNotInSession</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a123">MSG_EXPORTER_COLLECTOR_NOT_IN_SESSION</a>);
04391                                         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
04392                                         {
04393                                                 <a class="code" href="../../d5/d93/_transport_8h.html#a24">TL_HandleDisconnection</a>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>);
04394                                         }
04395                                 }
04396                         }
04397 
04398             Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a9">DynamicArray_RemoveAndShift</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>), i);
04399 
04400                         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04401             <span class="keywordflow">return</span> Status;
04402         }
04403     }
04404 
04405     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04406     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a192">IPDR_ERR_UNABLE_TO_FIND_SESSION</a>;
04407 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="Exporter.c::Exporter_DeleteSessionInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_DeleteSessionInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="Exporter.c::Exporter_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Exporter_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete resources associated with a client. <dl compact><dt><b>Note:</b></dt><dd>not static --- used by <a class="el" href="../../d5/d55/_memory_management_8c.html">MemoryManagement.c</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Obj</em>&nbsp;</td><td>object to delete </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00773 {
00774 
00775     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = (<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *) Obj;
00776 
00777     strncpy(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o0">eyecatcher</a>, <span class="stringliteral">"Dclient"</span>, <span class="keyword">sizeof</span> E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o0">eyecatcher</a>);
00778 
00779     <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o3">VendorString</a>);
00780     <a class="code" href="../../d2/dc9/_platform_8h.html#a20">Platform_MemoryFree</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o34">CSessions</a>);
00781 
00782     <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(PS, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o17">StatisticsTimerID</a>);
00783         <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(PS, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o18">AutoconnectTimerID</a>);
00784 
00785     <a class="code" href="../../d2/dc9/_platform_8h.html#a17">Platform_UnregisterSocketAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o10">ProtocolInfoEvent</a>);
00786     <a class="code" href="../../d2/dc9/_platform_8h.html#a44">Platform_CloseAndInvalidate</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o9">ProtocolInfoSocket</a>);
00787 
00788     <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;Destroy(E);
00789 
00790         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>));
00791         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>));
00792         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>));
00793         <a class="code" href="../../d0/db6/_console_8c.html#a26">Console_Delete</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o12">ConsolePtr</a>));
00794 
00795     <a class="code" href="../../d5/d93/_transport_8h.html#a4">TL_Shutdown</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o11">TransportHandle</a>);
00796 
00797     <span class="comment">/* Templates_Finalize ... not needed and no such thing */</span>
00798     <a class="code" href="../../dd/d28/_log_8c.html#a22">Log_Disable</a>(&amp; E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>);
00799     <span class="comment">/* TCPMsgs_Remove     ... not needed */</span>
00800     <span class="comment">/* CommonMsgs_Remove  ... not needed */</span>
00801     <span class="comment">/* ExporterMsgs_Remove  ... not needed */</span>
00802 
00803     <a class="code" href="../../dd/d28/_log_8c.html#a15">Log_Finalize</a>(&amp; E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>);
00804     strncpy(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o0">eyecatcher</a>, <span class="stringliteral">"Xclient"</span>, <span class="keyword">sizeof</span> E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o0">eyecatcher</a>);
00805 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a15" doxytag="Exporter.c::Exporter_DisconnectCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void Exporter_DisconnectCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Conn</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Arg</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Callback invoked when a server (collector) disconnects. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Conn</em>&nbsp;</td><td>connected connection </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Arg</em>&nbsp;</td><td>callback argument (Exporter) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01143 {
01144     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = (<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>*)Arg;
01145 
01146     <a class="code" href="../../da/df4/_log_8h.html#a27">Log_StateTransition</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>,
01147                         <span class="stringliteral">"Exporter_DisconnectCallback"</span>, Conn,
01148                         <a class="code" href="../../d5/d93/_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>, <a class="code" href="../../d5/d93/_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>,
01149                         <a class="code" href="../../d5/d93/_transport_8h.html#a14">TL_GetConnectionInfoStr</a>(Conn));
01150 
01151         <span class="keywordflow">if</span>( Conn-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o11">Owner</a> != NULL )
01152                 <a class="code" href="../../dd/d44/_exporter_protocol_8c.html#a37">ExporterProtocol_DisconnectCallback</a>(Conn, E);
01153 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a103" doxytag="Exporter.c::Exporter_GetCapabilities"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int Exporter_GetCapabilities           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>E</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">03955 {
03956         <span class="keywordtype">int</span>  exporterCapabilities = 0;
03957         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o2">StructureSupport</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
03958                 exporterCapabilities = exporterCapabilities | 0x1u ;
03959         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o0">MultiSession</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
03960                 exporterCapabilities = exporterCapabilities | 0x2u ;
03961         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o1">TemplateNegotiation</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
03962                 exporterCapabilities = exporterCapabilities | 0x4u ;
03963         <span class="keywordflow">return</span> exporterCapabilities ;
03964 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a27" doxytag="Exporter.c::Exporter_InitDebugLevels"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_InitDebugLevels           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>E</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">01501 {
01502         <a class="code" href="../../dd/d28/_log_8c.html#a19">Log_SetModuleMoreDebugLevel</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>), <span class="stringliteral">"Exporter"</span>,
01503                                                                 <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a19">ParametersHandler_GetUShortParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
01504                                                                 <a class="code" href="../../de/d8f/_configuration_names_8h.html#a146">STR_configuration_logging_levels_moduleExporter</a>));
01505                                                                 
01506     <a class="code" href="../../dd/d28/_log_8c.html#a19">Log_SetModuleMoreDebugLevel</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>), <span class="stringliteral">"Platform"</span>, 
01507                                                                 <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a19">ParametersHandler_GetUShortParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
01508                                                                 <a class="code" href="../../de/d8f/_configuration_names_8h.html#a147">STR_configuration_logging_levels_modulePlatform</a>));
01509                                                                 
01510     <a class="code" href="../../dd/d28/_log_8c.html#a19">Log_SetModuleMoreDebugLevel</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>), <span class="stringliteral">"TCP"</span>,      
01511                                                                 <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a19">ParametersHandler_GetUShortParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
01512                                                                 <a class="code" href="../../de/d8f/_configuration_names_8h.html#a148">STR_configuration_logging_levels_moduleTCP</a>));
01513                                                                 
01514     <a class="code" href="../../dd/d28/_log_8c.html#a19">Log_SetModuleMoreDebugLevel</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>), <span class="stringliteral">"Host"</span>,     
01515                                                                 <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a19">ParametersHandler_GetUShortParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
01516                                                                 <a class="code" href="../../de/d8f/_configuration_names_8h.html#a149">STR_configuration_logging_levels_moduleHost</a>));
01517                                                                 
01518     <a class="code" href="../../dd/d28/_log_8c.html#a19">Log_SetModuleMoreDebugLevel</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>), <span class="stringliteral">"Queue"</span>,    
01519                                                                 <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a19">ParametersHandler_GetUShortParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
01520                                                                 <a class="code" href="../../de/d8f/_configuration_names_8h.html#a150">STR_configuration_logging_levels_moduleQueue</a>));
01521                                                                 
01522     <a class="code" href="../../dd/d28/_log_8c.html#a19">Log_SetModuleMoreDebugLevel</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>), <span class="stringliteral">"Memory"</span>,   
01523                                                                 <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a19">ParametersHandler_GetUShortParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
01524                                                                 <a class="code" href="../../de/d8f/_configuration_names_8h.html#a151">STR_configuration_logging_levels_moduleMemory</a>));
01525                                                                 
01526     <a class="code" href="../../dd/d28/_log_8c.html#a19">Log_SetModuleMoreDebugLevel</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>), <span class="stringliteral">"Protocol"</span>, 
01527                                                                 <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a19">ParametersHandler_GetUShortParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
01528                                                                 <a class="code" href="../../de/d8f/_configuration_names_8h.html#a152">STR_configuration_logging_levels_moduleProtocol</a>));
01529                                                                 
01530     <a class="code" href="../../dd/d28/_log_8c.html#a19">Log_SetModuleMoreDebugLevel</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>), <span class="stringliteral">"JNI"</span>,      
01531                                                                 <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a19">ParametersHandler_GetUShortParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
01532                                                                 <a class="code" href="../../de/d8f/_configuration_names_8h.html#a153">STR_configuration_logging_levels_moduleJNI</a>)); <span class="comment">// only on server</span>
01533                                                                 
01534     <a class="code" href="../../dd/d28/_log_8c.html#a19">Log_SetModuleMoreDebugLevel</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>), <span class="stringliteral">"SERVER"</span>,   
01535                                                                 <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a19">ParametersHandler_GetUShortParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
01536                                                                 <a class="code" href="../../de/d8f/_configuration_names_8h.html#a154">STR_configuration_logging_levels_moduleSERVER</a>)); <span class="comment">// only on server</span>
01537         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01538 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="Exporter.c::Exporter_InitializeParameters"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_InitializeParameters           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>E</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize the parameters for a client.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00168 {
00169 <span class="preprocessor">#if defined(USE_WINDOWSIZE)</span>
00170 <span class="preprocessor"></span>    E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.WindowSize =
00171         <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00172                                        <a class="code" href="../../de/d8f/_configuration_names_8h.html#a172">STR_configuration_windowSize</a>);
00173 <span class="preprocessor">#endif</span>
00174 <span class="preprocessor"></span>
00175     E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o0">WindowTimeout</a> =
00176         <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00177                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a173">STR_configuration_windowTimeout</a>);
00178 
00179     E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o1">ProtocolLevelAddr</a> =
00180         <a class="code" href="../../d5/d93/_transport_8h.html#a17">TL_ParseAddress</a>(<a class="code" href="../../de/d8a/_parameters_handler_8c.html#a15">ParametersHandler_GetStringParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00181                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a160">STR_configuration_protocolLevelAddr</a>));
00182                                                                           
00183     E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o2">StatisticsInterval</a> =
00184         <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00185                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a159">STR_configuration_statisticsInterval</a>);
00186 
00187     <a class="code" href="../../d5/db5/_common_util_8c.html#a6">Util_StrDupAndReplace</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
00188                           <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a15">ParametersHandler_GetStringParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00189                                                            <a class="code" href="../../de/d8f/_configuration_names_8h.html#a171">STR_configuration_vendorString</a>),
00190                           &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o3">VendorString</a>));
00191 
00192         <span class="comment">/* IPDR Parameters */</span>
00193     E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o4">KeepAliveInterval</a> =
00194         <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00195                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a161">STR_configuration_keepAliveInterval</a>);
00196 
00197     E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o5">AutoconnectInterval</a> =
00198         <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00199                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a162">STR_configuration_autoconnectInterval</a>);
00200 
00201     E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o6">TemplateAckTimeout</a> =
00202         <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00203                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a163">STR_configuration_templateAckTimeout</a>);
00204 
00205     E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o7">ConnectResponseTimeout</a> =
00206         <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00207                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a164">STR_configuration_connectResponseTimeout</a>);
00208 
00209     E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o8">WaitBestCollectorTimeout</a> =
00210         <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00211                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a165">STR_configuration_waitBestCollectorTimeout</a>);
00212 
00213         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o9">DataAckTimeInterval</a> =
00214                 <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00215                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a166">STR_configuration_dataAckTimeInterval</a>);
00216 
00217         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o10">DataAckSequenceInterval</a> =
00218                 <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00219                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a167">STR_configuration_dataAckSequenceInterval</a>);
00220 
00221     E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o0">MultiSession</a> =
00222         <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00223                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a168">STR_configuration_capabilities_multiSession</a>);
00224 
00225     E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o1">TemplateNegotiation</a> =
00226         <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00227                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a169">STR_configuration_capabilities_templateNegotiation</a>);
00228 
00229     E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o2">StructureSupport</a> =
00230         <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
00231                                       <a class="code" href="../../de/d8f/_configuration_names_8h.html#a170">STR_configuration_capabilities_structureSupport</a>);
00232 
00233     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
00234 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="Exporter.c::Exporter_InitializeProtocolInfo"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_InitializeProtocolInfo           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>E</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize a UDP socket which will listen for protocol info messages.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>- exporter handle (pointer)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">03726 {
03727     <span class="keyword">const</span> <span class="keywordtype">char</span> *Addr;
03728     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
03729 
03730     Addr = <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a15">ParametersHandler_GetStringParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
03731                                             <a class="code" href="../../de/d8f/_configuration_names_8h.html#a157">STR_configuration_protocolInfoAddr</a>);
03732     <span class="keywordflow">if</span> (Addr == NULL)
03733         Addr = <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a15">ParametersHandler_GetStringParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
03734                                                 <a class="code" href="../../de/d8f/_configuration_names_8h.html#a142">STR_configuration_exporterAddress</a>);
03735 
03736     <span class="keywordflow">if</span> (Addr == NULL)
03737         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o7">ProtocolInfoAddr</a> = <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga14">IPDR_DEFAULT_ADDRESS</a>;
03738     <span class="keywordflow">else</span>
03739         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o7">ProtocolInfoAddr</a> = <a class="code" href="../../d5/d93/_transport_8h.html#a17">TL_ParseAddress</a>(Addr);
03740 
03741     E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o8">ProtocolInfoPort</a> =
03742         (<span class="keywordtype">unsigned</span> short) <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
03743                                                        <a class="code" href="../../de/d8f/_configuration_names_8h.html#a158">STR_configuration_protocolInfoPort</a>);
03744     <span class="keywordflow">if</span> (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o8">ProtocolInfoPort</a> == 0) { <span class="comment">/* Documented convention in IPDR.h. */</span>
03745         <a class="code" href="../../dc/d2f/group___i_p_d_r__transitional__typedefs.html#ga1">IPDR_SetInvalidSocket</a>(&amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o9">ProtocolInfoSocket</a>);
03746         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03747     }
03748 
03749     <span class="comment">/* create a UDP socket which will listen to request on the info port */</span>
03750 
03751     Status = <a class="code" href="../../d2/dc9/_platform_8h.html#a40">Platform_CreateUDPSocket</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
03752                                       &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o9">ProtocolInfoSocket</a>));
03753     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
03754         <a class="code" href="../../dc/d2f/group___i_p_d_r__transitional__typedefs.html#ga1">IPDR_SetInvalidSocket</a>(&amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o9">ProtocolInfoSocket</a>);
03755         <span class="keywordflow">return</span> Status;
03756     }
03757 
03758     Status = <a class="code" href="../../d2/dc9/_platform_8h.html#a41">Platform_Bind</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o9">ProtocolInfoSocket</a>,
03759                            E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o7">ProtocolInfoAddr</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o8">ProtocolInfoPort</a>);
03760     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
03761         <a class="code" href="../../d2/dc9/_platform_8h.html#a44">Platform_CloseAndInvalidate</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o9">ProtocolInfoSocket</a>);
03762         <span class="keywordflow">return</span> Status;
03763     }
03764 
03765 <span class="preprocessor">#ifdef TRACE_MAINFUNC</span>
03766 <span class="preprocessor"></span>    fprintf(stderr, <span class="stringliteral">"RegisterReadSocket %d [UDP] ProtocolInfo\n"</span>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o9">ProtocolInfoSocket</a>); fflush(stderr);
03767 <span class="preprocessor">#endif</span>
03768 <span class="preprocessor"></span>    Status = <a class="code" href="../../d2/dc9/_platform_8h.html#a14">Platform_RegisterReadSocket</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
03769                                          E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o9">ProtocolInfoSocket</a>,
03770                                          <a class="code" href="../../d5/db3/_exporter_8c.html#a100">Exporter_ProtocolInfoCallback</a>,
03771                                          E,
03772                                          &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o10">ProtocolInfoEvent</a>));
03773     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
03774         <a class="code" href="../../d2/dc9/_platform_8h.html#a44">Platform_CloseAndInvalidate</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o9">ProtocolInfoSocket</a>);
03775     }
03776 
03777     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03778 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a110" doxytag="Exporter.c::Exporter_PrepareToSend"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_PrepareToSend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called before sending a record in order to validate the window size.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter hadle (pointer) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>session handle (pointer).</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise.</dd></dl>
Srv-&gt;Conn || <div class="fragment"><pre class="fragment">04114 {
04115     <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS;
04116     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>;
04117 
04118     <span class="keywordflow">if</span> (TC == NULL)
04119         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a205">IPDR_ERR_NO_ACTIVE_COLLECTOR</a>;
04120 
04121     CS = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a>;
04122     <span class="keywordflow">if</span> (CS == NULL || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> != <a class="code" href="../../d5/d93/_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a>) {
04123         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a205">IPDR_ERR_NO_ACTIVE_COLLECTOR</a>;
04124     }
04125 
04126     <span class="comment">/* The following if statement is wrong ... it sets the timeout</span>
04127 <span class="comment">       only when we exceed the window. But we should have the timer</span>
04128 <span class="comment">       going for all records, using the window to stop sending</span>
04129 <span class="comment">       anything more unless we have an acknowledgment. Instead, the</span>
04130 <span class="comment">       code is now in Exporter_SendRecord(). */</span>
04131 
04132     <span class="comment">/* if (EXPORTER_QHANDLER-&gt;OutstandingDataCount(C, S) &gt;</span>
04133 <span class="comment">       C-&gt;Parameters.WindowSize &amp;&amp;</span>
04134 <span class="comment">       Srv-&gt;WindowSizeTimer == NULL) {</span>
04135 <span class="comment">    */</span>
04136 
04137     <span class="comment">/* There is no good reason to check for window size ... the TCP buffer</span>
04138 <span class="comment">       will almost always fill up sooner unless something is awfully wrong</span>
04139 <span class="comment">       with the receiver (the TCP layer is ACKing but the collector can't</span>
04140 <span class="comment">       handle the records. So, don't bother doing this test. */</span>
04141 
04142 <span class="preprocessor">#if defined(USE_WINDOWSIZE)</span>
04143 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S) &gt;= E-&gt;Parameters.WindowSize) {
04144         <span class="comment">/* Window is full ... don't send anything.  Note that this isn't</span>
04145 <span class="comment">           an error in the normal sense ... it's just our way of</span>
04146 <span class="comment">           indicating the window is full and we're not sending anything</span>
04147 <span class="comment">           more. */</span>
04148                 <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04149                            <span class="stringliteral">"Exporter_PrepareToSend"</span>, <span class="stringliteral">"Sent Packets &lt;%lu&gt; and WindowSize is &lt;%li&gt; wait for next try..."</span> , <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S), E-&gt;Parameters.WindowSize);
04150         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a180">IPDR_ERR</a>;
04151     }
04152 <span class="preprocessor">#endif</span>
04153 <span class="preprocessor"></span>
04154     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04155 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a100" doxytag="Exporter.c::Exporter_ProtocolInfoCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void Exporter_ProtocolInfoCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/d76/struct_i_p_d_r__tag___socket.html">IPDR_SocketHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Arg</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Callback triggered whenever a protocol info request arrives.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>socket </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Arg</em>&nbsp;</td><td>additional argument (client) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">03649 {
03650     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> RemoteAddr;
03651     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> RemotePort;
03652     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
03653     <a class="code" href="../../d3/d0a/struct_protocol_info_request_message.html">ProtocolInfoRequestMessage</a> RequestMsg;
03654     ProtocolInfoResponseMessage ResponseMsg;
03655     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ReadBytes;
03656 
03657     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = (<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *) Arg;
03658 
03659     memset(&amp;ResponseMsg, <span class="keyword">sizeof</span> ResponseMsg, 0); <span class="comment">/* ensure zeros in padding areas */</span>
03660 
03661     Status = <a class="code" href="../../d2/dc9/_platform_8h.html#a50">Platform_RecvFrom</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, S,
03662                                (<span class="keywordtype">char</span> *) &amp; RequestMsg,
03663                                <span class="keyword">sizeof</span>(RequestMsg),
03664                                &amp; RemoteAddr,
03665                                &amp; RemotePort,
03666                                &amp; ReadBytes);
03667     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status) || ReadBytes == 0) <span class="comment">/* do nothing if it's just a timer going off */</span>
03668         return ;
03669 
03670     <span class="comment">/* Sanity check the remote message; but keep going even if it's</span>
03671 <span class="comment">     * suspcious (log a message, though). This is because the current</span>
03672 <span class="comment">     * server (collector) might not behaving properly; and we don want to get the</span>
03673 <span class="comment">     * connection going. */</span>
03674 
03675     <span class="keywordflow">if</span> (ReadBytes &lt; <span class="keyword">sizeof</span> (<a class="code" href="../../d3/d0a/struct_protocol_info_request_message.html">ProtocolInfoRequestMessage</a>)) {
03676         <a class="code" href="../../d5/d93/_transport_8h.html#a28">TL_PABuf</a> paBuf;
03677         <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a170">IPDR_LEVEL_WARNING</a>,
03678                    <span class="stringliteral">"Exporter_ProtocolInfoCallback"</span>,
03679                    <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a46">MSG_EXPORTER_BAD_PROTOCOL_REQUEST_LEN</a>,
03680                    <a class="code" href="../../d5/d93/_transport_8h.html#a16">TL_PrintAddressAndPort</a>(RemoteAddr, RemotePort, paBuf),
03681                    ReadBytes);
03682     } <span class="keywordflow">else</span> {
03683         <span class="keyword">const</span> ProtocolInfoRequestMessage* r = (<span class="keyword">const</span> ProtocolInfoRequestMessage*)&amp;RequestMsg;
03684         <span class="keywordtype">char</span> buf[<a class="code" href="../../d5/d74/group___i_p_d_r__time__services.html#ga8">IPDR_TIME_FORMAT_LENGTH</a>+1];
03685         <a class="code" href="../../d5/d93/_transport_8h.html#a28">TL_PABuf</a> paBuf1, paBuf2;
03686         <span class="keywordflow">if</span> (r-&gt;<a class="code" href="../../d3/d0a/struct_protocol_info_request_message.html#o2">MSG</a>[0] != <span class="charliteral">'I'</span> ||
03687             r-&gt;<a class="code" href="../../d3/d0a/struct_protocol_info_request_message.html#o2">MSG</a>[1] != <span class="charliteral">'P'</span> ||
03688             r-&gt;<a class="code" href="../../d3/d0a/struct_protocol_info_request_message.html#o2">MSG</a>[2] != <span class="charliteral">'D'</span> ||
03689             r-&gt;<a class="code" href="../../d3/d0a/struct_protocol_info_request_message.html#o2">MSG</a>[3] != <span class="charliteral">'R'</span>) {
03690             <a class="code" href="../../da/df4/_log_8h.html#a33">Log_Write5</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a170">IPDR_LEVEL_WARNING</a>,
03691                        <span class="stringliteral">"Exporter_ProtocolInfoCallback"</span>,
03692                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a47">MSG_EXPORTER_BAD_PROTOCOL_REQUEST</a>,
03693                        <a class="code" href="../../d5/d93/_transport_8h.html#a16">TL_PrintAddressAndPort</a>(RemoteAddr, RemotePort, paBuf1),
03694                        r-&gt;<a class="code" href="../../d3/d0a/struct_protocol_info_request_message.html#o2">MSG</a>[0], r-&gt;<a class="code" href="../../d3/d0a/struct_protocol_info_request_message.html#o2">MSG</a>[1], r-&gt;<a class="code" href="../../d3/d0a/struct_protocol_info_request_message.html#o2">MSG</a>[2], r-&gt;<a class="code" href="../../d3/d0a/struct_protocol_info_request_message.html#o2">MSG</a>[3]);
03695         }
03696 
03697         <a class="code" href="../../da/df4/_log_8h.html#a32">Log_Write4</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
03698                    <span class="stringliteral">"Exporter_ProtocolInfoCallback"</span>,
03699                    <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a26">MSG_EXPORTER_PROTOCOL_INFO</a>,
03700                    <a class="code" href="../../d5/d93/_transport_8h.html#a16">TL_PrintAddressAndPort</a>(RemoteAddr, RemotePort, paBuf1),
03701                    <a class="code" href="../../d5/d93/_transport_8h.html#a15">TL_PrintAddress</a>(<a class="code" href="../../df/dde/_defs_8h.html#a12">IPDR_NTOHL</a>(r-&gt;<a class="code" href="../../d3/d0a/struct_protocol_info_request_message.html#o0">ServerAddress</a>), paBuf2),
03702                    <a class="code" href="../../d2/dc9/_platform_8h.html#a60">Platform_FormatTimeGMT</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, <a class="code" href="../../df/dde/_defs_8h.html#a12">IPDR_NTOHL</a>(r-&gt;<a class="code" href="../../d3/d0a/struct_protocol_info_request_message.html#o1">ServerBootTime</a>), buf),
03703                    E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o6">LocalPort</a>);
03704     }
03705 
03706     <a class="code" href="../../df/dde/_defs_8h.html#a9">IPDR_SET_HTONL</a>(ResponseMsg.AdditionalProtocolsCount, 0);
03707     <a class="code" href="../../df/dde/_defs_8h.html#a9">IPDR_SET_HTONL</a>(ResponseMsg.DefaultProtocol.TransportType, <a class="code" href="../../db/d1e/_protocol_8h.html#a1">IPDR_TRANSPORT_TCP</a>);
03708     <a class="code" href="../../df/dde/_defs_8h.html#a9">IPDR_SET_HTONL</a>(ResponseMsg.DefaultProtocol.ProtocolVersion, <a class="code" href="../../db/d1e/_protocol_8h.html#a18">IPDR_PROTOCOL_VERSION</a>);
03709     <a class="code" href="../../df/dde/_defs_8h.html#a8">IPDR_SET_HTONS</a>(ResponseMsg.DefaultProtocol.PortNumber, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o6">LocalPort</a>);
03710     <a class="code" href="../../df/dde/_defs_8h.html#a8">IPDR_SET_HTONS</a>(ResponseMsg.DefaultProtocol.Reserved, 0);
03711 
03712     <a class="code" href="../../d2/dc9/_platform_8h.html#a51">Platform_SendTo</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, S, (<span class="keyword">const</span> <span class="keywordtype">char</span> *) &amp; ResponseMsg,
03713                     <span class="keyword">sizeof</span>(ResponseMsg), RemoteAddr, RemotePort);
03714 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a101" doxytag="Exporter.c::Exporter_Reconfigure"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_Reconfigure           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>E</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handle reconfiguration of the client (transmitter) due to changes in parameters (this may close the current connections open by the client (transmitter) to server (collector)s and open connections to the console).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer) to reconfigure</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">03792 {
03793     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S;
03794         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll;
03795         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC;
03796     <span class="keywordtype">int</span> i, j;
03797     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr;
03798     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> Port;
03799     <a class="code" href="../../db/d5a/struct_chunk_allocator.html">ChunkAllocator</a> Alloc;
03800     <span class="keyword">const</span> <span class="keywordtype">char</span> *LocalAddr;
03801         <a class="code" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> transportRestarted = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
03802 
03803     <span class="keywordflow">if</span> (! E) {
03804         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03805     }
03806 
03807         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03808         
03809 <span class="preprocessor">#if defined(SNMP_SUPPORT)</span>
03810 <span class="preprocessor"></span>        Platform_MIB_UnSetExporterHandle(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>);
03811 <span class="preprocessor">#endif</span>
03812 <span class="preprocessor"></span>
03813         <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o17">StatisticsTimerID</a>));
03814         <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o18">AutoconnectTimerID</a>));
03815 
03816     <span class="comment">/* reconfigure the console */</span>
03817     <a class="code" href="../../d0/db6/_console_8c.html#a24">Console_Reconfigure</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o12">ConsolePtr</a>), &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>));
03818 
03819     <span class="comment">/* reconfigure the transport layer - (used to reconfigure memory usage) */</span>
03820     <a class="code" href="../../d5/d93/_transport_8h.html#a23">TL_Reconfigure</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a2">EXPORTER_TRANSPORT</a>);
03821 
03822     <span class="comment">/* check if the client port / address have changed and recreate</span>
03823 <span class="comment">       the transport layer if needed */</span>
03824 
03825     LocalAddr = <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a15">ParametersHandler_GetStringParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
03826                                                  <a class="code" href="../../de/d8f/_configuration_names_8h.html#a142">STR_configuration_exporterAddress</a>);
03827     <span class="keywordflow">if</span> (LocalAddr == NULL || strlen(LocalAddr) == 0)
03828         Addr = <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga14">IPDR_DEFAULT_ADDRESS</a>;
03829     <span class="keywordflow">else</span>
03830         Addr = <a class="code" href="../../d5/d93/_transport_8h.html#a17">TL_ParseAddress</a>(LocalAddr);
03831 
03832     Port =
03833         (<span class="keywordtype">unsigned</span> short) <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
03834                                                        <a class="code" href="../../de/d8f/_configuration_names_8h.html#a143">STR_configuration_exporterPort</a>);
03835 
03836     <span class="keywordflow">if</span> (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o5">LocalAddr</a> != Addr || E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o6">LocalPort</a> != Port) {
03837 
03838                 transportRestarted = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a> ;
03839         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o5">LocalAddr</a> = Addr;
03840         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o6">LocalPort</a> = Port;
03841                 
03842                 <span class="keywordflow">for</span> ( i = 0 ; i &lt; E-&gt;Sessions.Length ; i++ )
03843                 {
03844                         S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *)E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03845                         <span class="keywordflow">if</span>(S != NULL)
03846                         {
03847                                 <a class="code" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga13">IPDR_StopSession</a>(S, <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga33a122">IPDR_STOP_REASON_EXIT</a>, 1000);
03848                         }
03849                 }
03850                 <span class="keywordflow">for</span> ( i = 0 ; i &lt; E-&gt;DummyCollectors.Length ; i++ )
03851                 {
03852                         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *)E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o15">DummyCollectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03853                         <span class="keywordflow">if</span>(Coll != NULL)
03854                         {
03855                                 <span class="keywordflow">for</span> ( j = 0 ; j &lt; Coll-&gt;IPDRConnections.Length ; j++ )
03856                                 {
03857                                         IC = (<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *)Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
03858                                         <span class="keywordflow">if</span>(IC &amp;&amp; IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>)
03859                                         {
03860                                                 <a class="code" href="../../d5/d93/_transport_8h.html#a24">TL_HandleDisconnection</a>(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>);
03861                                         }
03862                                 }
03863                         }
03864                 }
03865                 <span class="keywordflow">for</span> ( i = 0 ; i &lt; E-&gt;Collectors.Length ; i++ )
03866                 {
03867                         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *)E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03868                         <span class="keywordflow">if</span>(Coll != NULL)
03869                         {
03870                                 <span class="keywordflow">for</span> ( j = 0 ; j &lt; Coll-&gt;IPDRConnections.Length ; j++ )
03871                                 {
03872                                         IC = (<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *)Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
03873                                         <span class="keywordflow">if</span>(IC &amp;&amp; IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>)
03874                                         {
03875                                                 <a class="code" href="../../d5/d93/_transport_8h.html#a24">TL_HandleDisconnection</a>(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>);
03876                                         }
03877                                 }
03878                         }
03879                 }
03880 
03881         <span class="comment">/* shutdown the current client's transport layer */</span>
03882         <a class="code" href="../../d5/d93/_transport_8h.html#a4">TL_Shutdown</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a2">EXPORTER_TRANSPORT</a>);
03883 
03884         <span class="comment">/* recreate a new transport layer */</span>
03885         <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a15">ChunksManager_GetDefaultChunkAllocator</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, &amp; Alloc);
03886 
03887         <span class="comment">/* initialize the transport layer */</span>
03888         <span class="comment">/* We don't check the return code because what can we do</span>
03889 <span class="comment">           anyway if it's bad? But this is not good style ... */</span>
03890         (void)<a class="code" href="../../d5/d93/_transport_8h.html#a2">TL_InitializePassive</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>), Alloc, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o5">LocalAddr</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o6">LocalPort</a>,
03891                                    &amp; <a class="code" href="../../d5/db3/_exporter_8c.html#a12">Exporter_DefaultHandlers</a>, E,
03892                                    &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
03893                                    &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o11">TransportHandle</a>));
03894         }
03895 
03896     <span class="comment">/* reinitialize the client parameters */</span>
03897     <a class="code" href="../../d5/db3/_exporter_8c.html#a29">Exporter_InitializeParameters</a>(E);
03898 
03899         <a class="code" href="../../d5/db3/_exporter_8c.html#a27">Exporter_InitDebugLevels</a>(E);
03900 
03901     <span class="comment">/* reconfigure the current queues */</span>
03902     <span class="keywordflow">for</span> (i = 0; i &lt; E-&gt;Sessions.Length; i++) {
03903         S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03904         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>) {
03905             <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;Reconfigure(E, S);
03906         }
03907     }
03908 
03909         <span class="keywordflow">if</span> (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o2">StatisticsInterval</a>)
03910         {
03911                 <a class="code" href="../../d2/dc9/_platform_8h.html#a11">Platform_RegisterPeriodicTimer</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
03912                                                                         <a class="code" href="../../d5/db3/_exporter_8c.html#a36">Exporter_StatisticsReportCallback</a>, E,
03913                                                                         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o2">StatisticsInterval</a>,
03914                                                                         &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o17">StatisticsTimerID</a>));
03915     }
03916 
03917         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o5">AutoconnectInterval</a>)
03918         {
03919                 <a class="code" href="../../d2/dc9/_platform_8h.html#a11">Platform_RegisterPeriodicTimer</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
03920                                                                         <a class="code" href="../../d5/db3/_exporter_8c.html#a25">Exporter_AutoconnectCallback</a>, E,
03921                                                                         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o5">AutoconnectInterval</a>,
03922                                                                         &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o18">AutoconnectTimerID</a>));
03923         }
03924 
03925 <span class="preprocessor">#if defined(SNMP_SUPPORT)</span>
03926 <span class="preprocessor"></span>        Platform_MIB_SetExporterHandle(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, E);
03927 <span class="preprocessor">#endif</span>
03928 <span class="preprocessor"></span>
03929         <span class="keywordflow">if</span>(transportRestarted == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
03930         {
03931                 <span class="keywordflow">for</span> ( i = 0 ; i &lt; E-&gt;Sessions.Length ; i++ )
03932                 {
03933                         S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *)E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03934                         <span class="keywordflow">if</span>(S != NULL)
03935                         {
03936                                 <a class="code" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga12">IPDR_StartSession</a>( S, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o11">Negotiable</a> );
03937                         }
03938                 }
03939         }
03940 
03941         
03942         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03943         
03944     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03945 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="Exporter.c::Exporter_RemoveCollectorFromSession_Internal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_RemoveCollectorFromSession_Internal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">04675 {
04676     <span class="keywordtype">int</span> Index;
04677     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status = <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04678         <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = NULL ;
04679         <a class="code" href="../../d5/d93/_transport_8h.html#a28">TL_PABuf</a> paBuf;
04680 
04681         <span class="keywordflow">if</span>(!E || !S || !C)
04682                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
04683 
04684     <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04685                        <span class="stringliteral">"Exporter_RemoveCollectorFromSession_Internal"</span>,
04686                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a12">MSG_EXPORTER_REMOVE_SERVER</a>,
04687                        <a class="code" href="../../d5/d93/_transport_8h.html#a16">TL_PrintAddressAndPort</a>(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o5">Port</a>, paBuf));
04688 
04689         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04690 
04691         <span class="keywordflow">for</span> (Index = 0; Index &lt; S-&gt;CollectorSessions.Length; Index++)
04692         {
04693                 CS = (<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *)S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
04694                 <span class="keywordflow">if</span>(CS != NULL &amp;&amp; CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> == C )
04695                 {
04696                         <span class="keywordflow">if</span>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> == <a class="code" href="../../d5/d93/_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a> || S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
04697                         {
04698                                 <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>;
04699 
04700                                 <a class="code" href="../../da/df4/_log_8h.html#a31">Log_Write3</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
04701                                                 <span class="stringliteral">"Exporter_RemoveCollectorFromSession_Internal"</span>,
04702                                                 <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a120">MSG_EXPORTER_SESSION_MUST_STOP</a>,
04703                                                 S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>, <a class="code" href="../../d5/d93/_transport_8h.html#a14">TL_GetConnectionInfoStr</a>((IC!=NULL)?(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>):NULL));
04704 
04705                                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04706                                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a214">IPDR_ERR_SESSION_IS_RUNNING</a>;
04707                         }
04708                         break ;
04709                 }
04710                 CS = NULL;
04711         }
04712 
04713         <span class="keywordflow">if</span>( CS == NULL )
04714         {
04715                 <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
04716                                         <span class="stringliteral">"Exporter_RemoveCollectorFromSession_Internal"</span>,
04717                                         <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a19">MSG_EXPORTER_UNKNOWN_SERVER</a>,
04718                                         C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>);
04719 
04720                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04721                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a195">IPDR_ERR_COLLECTOR_NOT_FOUND</a>;
04722         }
04723 
04724         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>;
04725         <span class="keywordflow">if</span>(IC != NULL &amp;&amp; IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> != NULL)
04726         {
04727                 <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> Conn = IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>;
04728                 <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(<a class="code" href="../../dd/d44/_exporter_protocol_8c.html#a57">ExporterProtocol_SendError</a>(E, S, C, Conn, <a class="code" href="../../db/d1e/_protocol_8h.html#a57a53">CollectorNotInSession</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a123">MSG_EXPORTER_COLLECTOR_NOT_IN_SESSION</a>)))
04729                 {
04730                         <a class="code" href="../../d5/d93/_transport_8h.html#a24">TL_HandleDisconnection</a>(Conn);
04731                 }
04732         }
04733         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, CS);
04734 
04735     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04736 
04737     <span class="keywordflow">return</span> Status;
04738 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="Exporter.c::Exporter_RemoveCollectorInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_RemoveCollectorInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove a previously added collector) <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga9">IPDR_RemoveCollector</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>- Exporter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>C</em>&nbsp;</td><td>- Collector to remove</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04781 {
04782     <span class="keywordtype">int</span> Index;
04783 
04784         <a class="code" href="../../d5/d93/_transport_8h.html#a28">TL_PABuf</a> paBuf;
04785 
04786         <span class="keywordflow">if</span>(!E || !C)
04787                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
04788 
04789     <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
04790                        <span class="stringliteral">"Exporter_RemoveCollectorInternal"</span>,
04791                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a12">MSG_EXPORTER_REMOVE_SERVER</a>,
04792                        <a class="code" href="../../d5/d93/_transport_8h.html#a16">TL_PrintAddressAndPort</a>(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o5">Port</a>, paBuf));
04793 
04794     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04795 
04796         <span class="keywordflow">for</span> (Index = 0; Index &lt; E-&gt;Collectors.Length; Index++)
04797         {
04798                 <span class="keywordflow">if</span>( E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index] == C )
04799                         break ;
04800         }
04801 
04802         <span class="keywordflow">if</span>( Index &gt;= E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a> )
04803         {
04804                 <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
04805                 <span class="stringliteral">"Exporter_RemoveCollectorInternal"</span>,
04806                 <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a19">MSG_EXPORTER_UNKNOWN_SERVER</a>,
04807                 C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>);
04808                 <span class="comment">/* DONE: IPDR_LEVEL_ERROR because this function is called after "IPDR_GetCollector" returns IPDR_OK in "Exporter_DeleteCollectorCommand"*/</span>
04809                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04810                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a195">IPDR_ERR_COLLECTOR_NOT_FOUND</a>;
04811         }
04812 
04813         <span class="keywordflow">for</span> (Index = 0; Index &lt; C-&gt;CollectorSessions.Length; Index++)
04814         {
04815                 <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = (<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *)C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
04816                 <span class="keywordflow">if</span>( CS != NULL )
04817                 {
04818                         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a>;
04819                         <span class="keywordflow">if</span>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> == <a class="code" href="../../d5/d93/_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a> || S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> == <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>)
04820                         {
04821 
04822                                 <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>;
04823 
04824                                 <a class="code" href="../../da/df4/_log_8h.html#a31">Log_Write3</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
04825                                                 <span class="stringliteral">"Exporter_RemoveCollectorInternal"</span>,
04826                                                 <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a120">MSG_EXPORTER_SESSION_MUST_STOP</a>,
04827                                                 S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>, <a class="code" href="../../d5/d93/_transport_8h.html#a14">TL_GetConnectionInfoStr</a>((IC!=NULL)?(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>):NULL));
04828 
04829                                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04830                                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a214">IPDR_ERR_SESSION_IS_RUNNING</a>;
04831                         }
04832                 }
04833         }
04834 
04835         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, C);
04836         <span class="comment">//Status = DynamicArray_RemoveAndShift(EXPORTER_PLATFORM, &amp; (E-&gt;Collectors), Index);</span>
04837 
04838     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04839 
04840     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04841 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a111" doxytag="Exporter.c::Exporter_SendRecord"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_SendRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Immediate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>duplicate</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send a record to the currently active server.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>session handle (pointer). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>buffer handle referencing the record. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Immediate</em>&nbsp;</td><td>whether or not to send this immediately or try to delay it to get more into the buffer (recommended to leave this as TRUE because if we're outputting to TCP, the TCP stack will typically delay 200ms anyway).</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04177 {
04178     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
04179     <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a>;
04180 
04181     <span class="keywordflow">if</span> (CS == NULL
04182                 || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a> == NULL
04183                 || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> == NULL
04184                 || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> != <a class="code" href="../../d5/d93/_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a>) {
04185         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a205">IPDR_ERR_NO_ACTIVE_COLLECTOR</a>;
04186     }
04187 
04188         ((DataMessage *) BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>)-&gt;Flags = 0;
04189 
04190     <span class="keywordflow">if</span> (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o7">SyncNeeded</a>)
04191         ((DataMessage *) BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>)-&gt;Flags |= <a class="code" href="../../db/d1e/_protocol_8h.html#a16">IPDR_SYNC_FLAG</a>;
04192     <span class="keywordflow">if</span> (duplicate)
04193         ((DataMessage *) BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>)-&gt;Flags |= <a class="code" href="../../db/d1e/_protocol_8h.html#a17">IPDR_DUPLICATE_FLAG</a>;
04194 
04195     <span class="keywordflow">switch</span> (((MessageHeader*)(BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>))-&gt;MessageID) {
04196     <span class="keywordflow">case</span> <a class="code" href="../../db/d1e/_protocol_8h.html#a39">IPDR_MSG_DATA</a>:
04197         <span class="comment">/* Register a timer if there isn't one already (i.e., we're the</span>
04198 <span class="comment">           first record that hasn't been ACKed). */</span>
04199         <span class="keywordflow">if</span> (CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a> == NULL) {
04200             <a class="code" href="../../d2/dc9/_platform_8h.html#a9">Platform_RegisterTimer</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
04201                                    <a class="code" href="../../d5/db3/_exporter_8c.html#a44">Exporter_WindowSizeTimerCallback</a>, CS,
04202                                    E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o0">WindowTimeout</a>,
04203                                    &amp; (CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a>));
04204         }
04205         <span class="comment">/*FALLTHROUGH*/</span>
04206     <span class="keywordflow">case</span> <a class="code" href="../../db/d1e/_protocol_8h.html#a26">IPDR_MSG_DATA_ACK</a>:
04207         <span class="keywordflow">if</span> (<a class="code" href="../../da/df4/_log_8h.html#a15">Log_ShouldWrite</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>)) {
04208             <a class="code" href="../../de/da6/_protocol_debug_8c.html#a4">ProtocolDebug_PrintOutgoingMessage</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>, BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>);
04209         }
04210         <span class="keywordflow">break</span>;
04211     <span class="keywordflow">default</span>:
04212         <span class="keywordflow">if</span> (<a class="code" href="../../da/df4/_log_8h.html#a15">Log_ShouldWrite</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>)) {
04213             <a class="code" href="../../de/da6/_protocol_debug_8c.html#a4">ProtocolDebug_PrintOutgoingMessage</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>, BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>);
04214         }
04215     }
04216 
04217     Status = <a class="code" href="../../d5/d93/_transport_8h.html#a9">TL_Send</a>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>, BH, Immediate);
04218     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
04219         <span class="keywordflow">return</span> Status;
04220 
04221     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o21">Statistics</a>.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>++;
04222     CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o10">Statistics</a>.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>++;
04223 
04224     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o7">SyncNeeded</a> = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
04225 
04226     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
04227 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="Exporter.c::Exporter_StatisticsReportCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void Exporter_StatisticsReportCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Callback triggered in order to report statistics to the log..<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Arg</em>&nbsp;</td><td>callback argument (Exporter) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00558 {
00559         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = (<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *) Arg;
00560     <span class="keywordtype">int</span> i, j;
00561     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S;
00562 
00563     <span class="comment">/*NOTE: MIB default comes from ClientMIBConstants.c*/</span>
00564     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00565 
00566     <span class="keywordflow">for</span> (i = 0; i &lt; E-&gt;Sessions.Length; i++) {
00567         <span class="keywordtype">char</span> timeStrBuf[<a class="code" href="../../d5/d74/group___i_p_d_r__time__services.html#ga8">IPDR_TIME_FORMAT_LENGTH</a> + 1]; <span class="comment">/* +1 for "Z" */</span>
00568 
00569         <a class="code" href="../../d2/dc9/_platform_8h.html#a58">Platform_FormatTimeGMTNow</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, timeStrBuf);
00570         strcat(timeStrBuf, <span class="stringliteral">"Z"</span>); <span class="comment">/* mark it as "GMT" */</span>
00571         S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
00572 
00573         {
00574             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numAllocs;
00575             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> numFrees;
00576             size_t bytesAllocated;
00577             <a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> IntervalStatistics;
00578             <a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> Rate100;
00579             <a class="code" href="../../d2/dc9/_platform_8h.html#a33">Platform_MemoryStatistics</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;numAllocs, &amp;numFrees, &amp;bytesAllocated);
00580             <a class="code" href="../../d5/db3/_exporter_8c.html#a35">StatisticsCalculateRates</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
00581                                      S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o22">PrevStatisticsTime</a>, &amp;S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o21">Statistics</a>, &amp;S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o23">PrevStatistics</a>,
00582                                      &amp;S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o22">PrevStatisticsTime</a>, &amp;IntervalStatistics, &amp;Rate100);
00583 <span class="preprocessor">#ifdef DEBUG_MODE</span>
00584 <span class="preprocessor"></span>            <span class="comment">/* Note: IPDR_VER is provided by "-D" flag in compilation */</span>
00585             <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">""</span>,
00586                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a27">MSG_EXPORTER_BUILT_INFO</a>, timeStrBuf, IPDR_VER);
00587 <span class="preprocessor">#endif</span>
00588 <span class="preprocessor"></span>            <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">""</span>,
00589                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a21">MSG_EXPORTER_SESSION_STATISTICS1</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, timeStrBuf);
00590             <a class="code" href="../../da/df4/_log_8h.html#a34">Log_Write6</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">""</span>,
00591                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a22">MSG_EXPORTER_SESSION_STATISTICS2</a>,
00592                        <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S),
00593                        <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UnacknowledgedDataCount(E, S),
00594                        numAllocs, numFrees, (<span class="keywordtype">long</span> unsigned)bytesAllocated,
00595                        <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UsedMemory(E, S));
00596             <a class="code" href="../../da/df4/_log_8h.html#a33">Log_Write5</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">""</span>,
00597                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a23">MSG_EXPORTER_SESSION_STATISTICS3</a>,
00598                        <span class="stringliteral">"TX  :"</span>,
00599                        S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o21">Statistics</a>.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>,
00600                        IntervalStatistics.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>,
00601                        Rate100.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>/100, Rate100.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>%100);
00602             <a class="code" href="../../da/df4/_log_8h.html#a33">Log_Write5</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">""</span>,
00603                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a23">MSG_EXPORTER_SESSION_STATISTICS3</a>,
00604                        <span class="stringliteral">"ACK :"</span>,
00605                        S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o21">Statistics</a>.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a>,
00606                        IntervalStatistics.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a>,
00607                        Rate100.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a>/100, Rate100.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a>%100);
00608             <a class="code" href="../../da/df4/_log_8h.html#a33">Log_Write5</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">""</span>,
00609                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a23">MSG_EXPORTER_SESSION_STATISTICS3</a>,
00610                        <span class="stringliteral">"enq :"</span>,
00611                        S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o21">Statistics</a>.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o2">EnqueuedRecords</a>,
00612                        IntervalStatistics.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o2">EnqueuedRecords</a>,
00613                        Rate100.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o2">EnqueuedRecords</a>/100, Rate100.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o2">EnqueuedRecords</a>%100);
00614             <a class="code" href="../../da/df4/_log_8h.html#a33">Log_Write5</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">""</span>,
00615                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a23">MSG_EXPORTER_SESSION_STATISTICS3</a>,
00616                        <span class="stringliteral">"lost:"</span>,
00617                        S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o21">Statistics</a>.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o3">LostRecords</a>,
00618                        IntervalStatistics.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o3">LostRecords</a>,
00619                        Rate100.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o3">LostRecords</a>/100, Rate100.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o3">LostRecords</a>%100);
00620 
00621             S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o23">PrevStatistics</a> = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o21">Statistics</a>; <span class="comment">/* S-&gt;PrevStatisticsTime was set by StatisticsCalculateRates above */</span>
00622         }
00623 
00624         <span class="keywordflow">for</span> (j = 0; j &lt; S-&gt;CollectorSessions.Length; j++) {
00625             <a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> IntervalStatistics;
00626             <a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> Rate100;
00627             <a class="code" href="../../d5/d93/_transport_8h.html#a28">TL_PABuf</a> paBuf;
00628             <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = (<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *) S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
00629             <a class="code" href="../../d5/db3/_exporter_8c.html#a35">StatisticsCalculateRates</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
00630                                      CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o11">PrevStatisticsTime</a>, &amp;CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o10">Statistics</a>, &amp;CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o12">PrevStatistics</a>,
00631                                      &amp;CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o11">PrevStatisticsTime</a>, &amp;IntervalStatistics, &amp;Rate100);
00632                         <span class="keywordflow">if</span>( CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a> &amp;&amp; CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> &amp;&amp; CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> )
00633                 <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">""</span>,
00634                                <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a24">MSG_EXPORTER_SERVER_STATISTICS1</a>,
00635                            <a class="code" href="../../d5/d93/_transport_8h.html#a16">TL_PrintAddressAndPort</a>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a>-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>, CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a>-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o5">Port</a>, paBuf),
00636                                 <a class="code" href="../../d5/d93/_transport_8h.html#a14">TL_GetConnectionInfoStr</a>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>));
00637             <a class="code" href="../../da/df4/_log_8h.html#a33">Log_Write5</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">""</span>,
00638                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a25">MSG_EXPORTER_SERVER_STATISTICS2</a>,
00639                        <span class="stringliteral">"TX :"</span>,
00640                        CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o10">Statistics</a>.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>,
00641                        IntervalStatistics.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>,
00642                        Rate100.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>/100, Rate100.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>%100);
00643             <a class="code" href="../../da/df4/_log_8h.html#a33">Log_Write5</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">""</span>,
00644                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a25">MSG_EXPORTER_SERVER_STATISTICS2</a>,
00645                        <span class="stringliteral">"ACK:"</span>,
00646                        CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o10">Statistics</a>.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a>,
00647                        IntervalStatistics.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a>,
00648                        Rate100.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a>/100, Rate100.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a>%100);
00649             CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o12">PrevStatistics</a> = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o10">Statistics</a>; <span class="comment">/* Srv-&gt;PrevStatisticsTime was set by StatisticsCalculateRates above */</span>
00650         }
00651 
00652 <span class="preprocessor">#ifdef DEBUG_MEMORY</span>
00653 <span class="preprocessor"></span>        {
00654             dmalloc_message(<span class="stringliteral">"======================== %.40s"</span>, timeStrBuf);
00655             dmalloc_log_changed(dmalloc_markVal, 1, 1, 1);
00656             dmalloc_markVal = dmalloc_mark();
00657 <span class="preprocessor">#if 0</span>
00658 <span class="preprocessor"></span>            dmalloc_message(<span class="stringliteral">"===+==+==+==+==+==+===== %.40s"</span>, timeStrBuf);
00659             dmalloc_log_changed(dmalloc_markValInit, 1, 1, 1);
00660 <span class="preprocessor">#endif</span>
00661 <span class="preprocessor"></span>        }
00662 
00663         <span class="comment">/* This is a bit of a kludge: it outputs chunk information if</span>
00664 <span class="comment">         * an internal queue is being used (see IPDR_SetQueueHandler).</span>
00665 <span class="comment">         * For debugging only, of course.</span>
00666 <span class="comment">         */</span>
00667         <span class="keywordflow">if</span> (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>) {
00668             <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *ctxt = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>;
00669             <span class="keywordflow">for</span> (; ctxt; ctxt = ctxt-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o6">NextContext</a>) {
00670                 <span class="keywordflow">if</span> (E-&gt;QHandler == &amp;VQHandler) {
00671                     <a class="code" href="../../d8/d51/_chunks_manager_8c.html#a37">ChunksManager_Dump</a>(&amp;((<a class="code" href="../../d4/d66/struct_volatile_queue.html">VolatileQueue</a>*)ctxt-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o1">QueueHandlerData</a>)-&gt;ChunksMgr, <span class="stringliteral">""</span>);
00672                 }
00673             }
00674         }
00675 <span class="preprocessor">#endif</span>
00676 <span class="preprocessor"></span>    }
00677 
00678     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00679 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a99" doxytag="Exporter.c::Exporter_TriggerEvent"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Exporter_TriggerEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga6">IPDR_DebugLevel</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>loggingLevel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>EventData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Cause an event's triggers to be fired.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer) handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>loggingLevel</em>&nbsp;</td><td>logging level (debug, info, etc.) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>EventData</em>&nbsp;</td><td>data to be updated </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CS</em>&nbsp;</td><td>Collector session for record event in LastEvent -- NULL if you don't want it recorded </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Msg</em>&nbsp;</td><td>message to be put into the event data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>...</em>&nbsp;</td><td>parameters to Msg </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">03611 {
03612     <span class="keyword">const</span> <span class="keywordtype">char</span>* eventStr;
03613     va_list Args;
03614 
03615     eventStr = <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga2">IPDR_EventMsg</a>(EventData);
03616 
03617     <span class="keywordflow">if</span> (EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o0">EventID</a> == <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga4a152">IPDR_EVENT_RECORD_LOST</a>) {
03618         loggingLevel = <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>; <span class="comment">/* Prevent a flood of messages */</span>
03619     }
03620 
03621     va_start(Args, Msg);
03622     vsprintf(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o36">EventLine</a>, Msg, Args);
03623     va_end(Args);
03624 
03625     <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, loggingLevel,
03626                <span class="stringliteral">"Exporter_TriggerEvent"</span>,
03627                <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a29">MSG_EXPORTER_TRIGGER_EVENT</a>,
03628                eventStr, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o36">EventLine</a>);
03629 
03630     <span class="keywordflow">if</span> (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o23">EventCallbackDetailed</a> != NULL) {
03631         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o23">EventCallbackDetailed</a>(EventData, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o36">EventLine</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o24">EventCallbackDetailedArg</a>);
03632     }
03633 
03634     <span class="keywordflow">if</span> (CS) {
03635         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o13">LastEvent</a> = *EventData;
03636     }
03637 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a97" doxytag="Exporter.c::Exporter_TriggeTemplateChangedCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Exporter_TriggeTemplateChangedCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>S</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a structure containing all currently enabled keys and trigger the templates change callback.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>exporter handle (pointer)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">03457 {
03458     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> NumTemplates;
03459     <a class="code" href="../../df/d3e/struct_i_p_d_r___template.html">IPDR_Template</a> *Tmpls;
03460     <a class="code" href="../../d9/d12/struct_i_p_d_r___key.html">IPDR_Key</a> *Keys;
03461     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl<span class="comment">/*, *Tmpl1*/</span>;
03462     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K<span class="comment">/*, K1*/</span>;
03463     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC;
03464         <a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TH;
03465     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, j, k<span class="comment">/*, m*/</span>;
03466 
03467     <span class="keywordflow">if</span> (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o21">TemplateChangedCallback</a> == NULL)
03468         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03469 
03470         TC = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>;
03471 
03472     <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a15">DynamicArray_CountObjects</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>, &amp; (TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>), &amp; NumTemplates);
03473 
03474     <a class="code" href="../../d2/dc9/_platform_8h.html#a30">Platform_Check_MEMORYALLOCATEVEC</a>(SESSION_PLATFORM, NumTemplates, Tmpls, {});
03475 
03476     <span class="keywordflow">for</span> (j = 0, i = 0; i &lt; TC-&gt;Templates.Length; i++) {
03477         Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03478         <span class="keywordflow">if</span> (Tmpl == NULL)
03479             <span class="keywordflow">continue</span>;
03480                 TH.<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a> = i;
03481                 TH.<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o1">s</a> = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>;
03482         Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o0">TemplateID</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a>;
03483         Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o1">SchemaName</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>;
03484                 Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o2">TypeName</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o2">TypeName</a>;
03485         Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o3">NumKeys</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>;
03486 
03487         <a class="code" href="../../d2/dc9/_platform_8h.html#a30">Platform_Check_MEMORYALLOCATEVEC</a>(SESSION_PLATFORM, Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>, Keys, {});
03488 
03489         <span class="keywordflow">for</span> (k = 0; k &lt; Tmpl-&gt;Keys.Length; k++) {
03490 
03491             K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[k];
03492             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o0">KeyID</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a>;
03493             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o1">KeyTypeID</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>;
03494             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o2">KeyName</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>;
03495             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o3">KeyLabel</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o3">Label</a>;
03496             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o4">KeyHelp</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o4">Help</a>;
03497             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o5">Enabled</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>;
03498             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o6">AccessType</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o6">AccessType</a>;
03499             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o7">ExtraData</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o7">ExtraData</a>;
03500             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o8">KeyAccessor</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>;
03501 
03502             <span class="comment">/*if (TC == NULL || j &gt;= TC-&gt;Templates.Length || TC-&gt;Templates.Data[j] == NULL)</span>
03503 <span class="comment">                                continue;</span>
03504 <span class="comment"></span>
03505 <span class="comment">                        Tmpl1 = (Template *) TC-&gt;Templates.Data[j];</span>
03506 <span class="comment"></span>
03507 <span class="comment">                        */</span><span class="comment">/* find the matching key */</span><span class="comment">/*</span>
03508 <span class="comment">                        for (m = 0; m &lt; Tmpl1-&gt;Keys.Length; m++) {</span>
03509 <span class="comment">                                K1 = (Key *) Tmpl1-&gt;Keys.Data[m];</span>
03510 <span class="comment">                                if (K1-&gt;KeyID == K-&gt;KeyID)</span>
03511 <span class="comment">                                        Keys[k].Enabled = K1-&gt;Enabled;</span>
03512 <span class="comment">                        }*/</span>
03513         }
03514         Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o4">Keys</a> = Keys;
03515         j++;
03516 
03517     }
03518 
03519         <span class="keywordflow">if</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o21">TemplateChangedCallback</a> != NULL)
03520         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o21">TemplateChangedCallback</a>(S, Tmpls, NumTemplates, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o22">TemplateChangedArg</a>);
03521 
03522         <span class="keywordflow">for</span> (j = 0, i = 0; i &lt; TC-&gt;Templates.Length; i++)
03523         {
03524                 Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03525                 <span class="keywordflow">if</span> (Tmpl == NULL)
03526             <span class="keywordflow">continue</span>;
03527                         
03528                 Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o1">SchemaName</a> = NULL ;
03529                 Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o2">TypeName</a> = NULL ;
03530                 <span class="keywordflow">for</span> (k = 0; k &lt; Tmpl-&gt;Keys.Length; k++)
03531                 {
03532                         K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[k];
03533                         <span class="keywordflow">if</span> (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a> == Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o4">Keys</a>[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o0">KeyID</a>)
03534                         {
03535                                 K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a> = Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o4">Keys</a>[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o5">Enabled</a>;
03536                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o2">KeyName</a> = NULL ;
03537                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o3">KeyLabel</a> = NULL ;
03538                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o4">KeyHelp</a> = NULL ;
03539                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o7">ExtraData</a> = NULL ;
03540                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o8">KeyAccessor</a> = NULL ;
03541                         }
03542                 }
03543                 j++;
03544         }
03545     <span class="keywordflow">for</span> (j = 0; j &lt; NumTemplates; j++)
03546         <a class="code" href="../../d2/dc9/_platform_8h.html#a20">Platform_MemoryFree</a>(SESSION_PLATFORM, Tmpls[j].Keys);
03547     <a class="code" href="../../d2/dc9/_platform_8h.html#a20">Platform_MemoryFree</a>(SESSION_PLATFORM, Tmpls);
03548 
03549     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03550 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="Exporter.c::Exporter_WindowSizeTimerCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Exporter_WindowSizeTimerCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Callback invoked upon data timeout with no ACK.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Arg</em>&nbsp;</td><td>callback argument (Server) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01185 {
01186     <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = (<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *) Arg;
01187     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a>;
01188     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
01189         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>;
01190         <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> Conn = NULL;
01191     <a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> eventData;
01192 
01193         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01194 
01195         <span class="keywordflow">if</span>(IC != NULL)
01196         {
01197                 Conn = IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>;
01198         }
01199 
01200 <span class="preprocessor">#if defined(DEBUG_PRINTF) &amp;&amp; defined(_VXWORKS_DEBUG)</span>
01201 <span class="preprocessor"></span>    countTick =  tickGet ();
01202     printf(<span class="stringliteral">"\n window size timer callback , ticks [%ld]"</span>, countTick);
01203 <span class="preprocessor">#endif</span>
01204 <span class="preprocessor"></span>
01205     <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a>);
01206 
01207     <a class="code" href="../../d5/db3/_exporter_8c.html#a98">EventDataInit</a>(&amp;eventData, <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga4a151">IPDR_EVENT_SERVER_DISCONNECTED</a>, E, CS, S);
01208     eventData.<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o13">Extra</a>.Disconnected.Reason = <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga5a160">IPDR_EVENT_DISCONNECTED_TIMEOUT</a>;
01209     eventData.<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o13">Extra</a>.Disconnected.TimeoutMillisec = E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o0">WindowTimeout</a>;
01210 
01211     <span class="keywordflow">if</span> (IC == NULL || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> == <a class="code" href="../../d5/d93/_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>) {
01212         eventData.<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o1">IC</a> = NULL;
01213         <a class="code" href="../../d5/db3/_exporter_8c.html#a99">Exporter_TriggerEvent</a>(E, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a170">IPDR_LEVEL_WARNING</a>, &amp;eventData, CS,
01214                             <span class="stringliteral">"Acknowledgment timeout (%d msec): Collector=none, outstanding=%lu, unACKed=%lu, Session=%u [%.40s] (%.80s)"</span>,
01215                             E-&gt;Parameters.WindowTimeout,
01216                             <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S),
01217                             <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UnacknowledgedDataCount(E, S),
01218                             S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o18">Description</a>);
01219     } <span class="keywordflow">else</span> {
01220         eventData.<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o1">IC</a> = IC;
01221         <a class="code" href="../../d5/db3/_exporter_8c.html#a99">Exporter_TriggerEvent</a>(E, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a170">IPDR_LEVEL_WARNING</a>, &amp;eventData, CS,
01222                             <span class="stringliteral">"Acknowledgment timeout (%d msec): %.98s, outstanding=%lu, unACKed=%lu, Session=%u [%.40s] (%.80s)"</span>,
01223                             E-&gt;Parameters.WindowTimeout,
01224                             <a class="code" href="../../d5/d93/_transport_8h.html#a14">TL_GetConnectionInfoStr</a>(Conn),
01225                             <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S),
01226                             <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UnacknowledgedDataCount(E, S),
01227                             S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o18">Description</a>);
01228     }
01229 <span class="preprocessor">#ifdef OBSOLETE</span>
01230 <span class="preprocessor"></span>    <span class="keywordflow">switch</span> (CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a>) {
01231     <span class="keywordflow">case</span> <a class="code" href="../../d5/d93/_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a>: <span class="comment">/* shouldn't happen, but let's be cautious */</span>
01232         <a class="code" href="../../da/df4/_log_8h.html#a27">Log_StateTransition</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
01233                             <span class="stringliteral">"Exporter_WindowSizeTimerCallback"</span>, Conn, CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a>, IPDR_SERVER_PAUSED,
01234                             <span class="stringliteral">"acknolwedgment timeout"</span>);
01235         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> = <a class="code" href="../../d5/d93/_exporter_8h.html#a52a26">IPDR_CS_READY</a>;
01236         <span class="keywordflow">break</span>;
01237     <span class="keywordflow">default</span>:
01238         <span class="keywordflow">break</span>;
01239     }
01240 <span class="preprocessor">#endif</span>
01241 <span class="preprocessor"></span>    <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01242 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="Exporter.c::ExporterMsgs_Initialize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> ExporterMsgs_Initialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dc/d30/struct_i_p_d_r__tag___log.html">Log</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>L</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize the messages for "Exporter', "Queue", "Protocol" modules. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>L</em>&nbsp;</td><td>the log</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">00150 {
00151     <a class="code" href="../../dd/d28/_log_8c.html#a17">Log_RegisterModule</a>(L, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <span class="stringliteral">"Exporter"</span>);
00152     <a class="code" href="../../dd/d28/_log_8c.html#a17">Log_RegisterModule</a>(L, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a2">QUEUE_MODULE_ID</a>, <span class="stringliteral">"Queue"</span>);
00153     <a class="code" href="../../dd/d28/_log_8c.html#a17">Log_RegisterModule</a>(L, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <span class="stringliteral">"Protocol"</span>);
00154 
00155     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
00156 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a26" doxytag="Exporter.c::ExporterProtocol_WaitConnectTimeoutCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void ExporterProtocol_WaitConnectTimeoutCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">01108 {
01109         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC = (<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *)Arg ;
01110         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *)IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o4">Owner</a>;
01111         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o8">ExporterPtr</a>;
01112 
01113         <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01114         
01115         <span class="keywordflow">if</span>(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o5">ConnectResponseTimerID</a> != NULL)
01116                 <a class="code" href="../../d2/dc9/_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o5">ConnectResponseTimerID</a>));
01117 
01118         <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>, <span class="stringliteral">"ExporterProtocol_WaitConnectTimeoutCallback"</span>,
01119                                 <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a124">MSG_EXPORTER_NO_CONNECT_MESSAGE</a>, Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>);
01120 
01121         <span class="keywordflow">if</span>( IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> == NULL )
01122         {
01123                 <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>, <span class="stringliteral">"ExporterProtocol_WaitConnectTimeoutCallback"</span>,
01124                                 <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a112">MSG_EXPORTER__RESET_TIMER_NEEDED</a>, Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>);
01125                 <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01126                 <span class="keywordflow">return</span>;
01127         }
01128 
01129         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
01130 
01131         <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01132 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a60" doxytag="Exporter.c::IPDR_AddCollectorCompat"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_AddCollectorCompat           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>Port</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>Priority</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add a collector (server) to a session's collectors (servers) list, so that data can be sent to it.<p>
collectors (servers) are assigned a priority level. Data is always sent to the active collector (server) with the highest priority (if two collectors (servers) have the same priority, it is undefined which will be chosen to be active). Zero is highest priority.<p>
collectors (servers) can be added dynamically. Data will be sent to a collector (server) as soon as a (transport layer) connection has been established and the collector (server) has indicated that it is ready to receive data by sending a START message and there is no higher priority collector (server) active.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to a transmitter (client) previously created by <a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a38">CRANE_InitClient()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Handle to session to add collector (server) to. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>Name of collector (server) (an internal copy is made of this string). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>IP address of the collector (server). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Port</em>&nbsp;</td><td>Port number of the collector (server). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Priority</em>&nbsp;</td><td>collector's (server's) priority (0 - highest priority; behavior undefined for negative values). </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>#CRANE_OK on success; <a class="el" href="../../d9/d3e/_c_r_a_n_e_8h.html#a101">CRANE_STATUS_RETURN_CODE</a> otherwise.</dd></dl>
IPDR Compatibility: This function implemented as calling <div class="fragment"><pre class="fragment">02150 {
02151         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> CollectorHandle;
02152 
02153         <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status ;
02154         Status = <a class="code" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga5">IPDR_CreateCollector</a>(ExporterHandle,Name,Addr,Port,0, &amp;CollectorHandle);
02155         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status) || CollectorHandle == NULL)
02156         {
02157                 <span class="keywordflow">return</span> Status ;
02158         }
02159 
02160         <span class="comment">/*Status = IPDR_GetCollector(ExporterHandle, Name, &amp;CollectorHandle, NULL, NULL, NULL);</span>
02161 <span class="comment">        if(FAILURE(Status))</span>
02162 <span class="comment">        {</span>
02163 <span class="comment">                return Status ;</span>
02164 <span class="comment">        }*/</span>
02165 
02166         Status = <a class="code" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga7">IPDR_AssocCollectorSession</a>(ExporterHandle,SessionHandle,CollectorHandle,Priority);
02167         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
02168         {
02169                 <span class="keywordflow">return</span> Status ;
02170         }
02171         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
02172 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a84" doxytag="Exporter.c::IPDR_GetTemplateInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> IPDR_GetTemplateInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>TemplateID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>SchemaName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>TypeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>NumKeys</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>TH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">03011 {
03012         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = SessionHandle ;
03013     <span class="keywordtype">int</span> i;
03014     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl;
03015 
03016     <span class="keywordflow">if</span> (! S || ! TH) {
03017         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
03018     }
03019 
03020         TH-&gt;<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a> = 0xFFFFFFFFu;
03021     <a class="code" href="../../d2/dc9/_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>);
03022 
03023     <span class="keywordflow">for</span> (i = 0; i &lt; S-&gt;Templates.Length; i++) {
03024         Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03025         <span class="keywordflow">if</span> (Tmpl != NULL &amp;&amp; Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a> == TemplateID) {
03026             TH-&gt;<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a> = i;
03027                         TH-&gt;<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o1">s</a> = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>;
03028                         <span class="keywordflow">if</span> (SchemaName) (*SchemaName) = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>;
03029                         <span class="keywordflow">if</span> (TypeName) (*TypeName) = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o2">TypeName</a>;
03030                         <span class="keywordflow">if</span> (NumKeys) (*NumKeys) = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>;
03031             <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>);
03032             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
03033         }
03034     }
03035 
03036     <a class="code" href="../../d2/dc9/_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a5">SESSION_PLATFORM</a>);
03037     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a197">IPDR_ERR_TEMPLATE_NOT_FOUND</a>;
03038 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="Exporter.c::IPDR_InitExporter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> IPDR_InitExporter           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga0">IPDR_ParametersHandlerFunc</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ParamsHandler</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>ParamsHandlerArg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga1">IPDR_LoadMIBFunc</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>LoadMIB</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>LoadMIBArg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga2">IPDR_SaveMIBFunc</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SaveMIB</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>SaveMIBArg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> **&nbsp;</td>
          <td class="mdname" nowrap> <em>CH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">01555 {
01556     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
01557     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E;
01558     <span class="keyword">const</span> <span class="keywordtype">char</span> *LocalAddr;
01559         <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> IPAddr;
01560         <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> IPPort;
01561 
01562     <span class="keywordflow">if</span> (! PS || ! CH) {
01563         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a181">IPDR_ERR_INVALID_VALUE</a>;
01564     }
01565 
01566     *CH = NULL;
01567 
01568     <a class="code" href="../../dd/d68/_templates_8c.html#a15">Templates_Initialize</a>();
01569 
01570     Status = <a class="code" href="../../d5/d55/_memory_management_8c.html#a2">Object_Allocate</a>(PS, <span class="keyword">sizeof</span>(<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>), <a class="code" href="../../d5/db3/_exporter_8c.html#a38">Exporter_Destructor</a>,
01571                              (<span class="keywordtype">void</span> **) &amp; E);
01572     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01573     {
01574         <span class="keywordflow">return</span> Status;
01575     }
01576 
01577         memset(E, 0, <span class="keyword">sizeof</span>(Exporter));
01578 
01579     strncpy(E-&gt;eyecatcher, <span class="stringliteral">"EXPORTER "</span>, <span class="keyword">sizeof</span> E-&gt;eyecatcher);
01580 
01581     <span class="keywordflow">if</span> (ExporterName == NULL || strlen(ExporterName) == 0) {
01582         ExporterName = <span class="stringliteral">"IPDR"</span>;
01583     }
01584 
01585     <a class="code" href="../../d2/dc9/_platform_8h.html#a54">Platform_GetTime</a>(PS, &amp; E-&gt;ExporterStartTime); <span class="comment">/* Needed for START_ACK */</span>
01586 
01587     <a class="code" href="../../dd/d28/_log_8c.html#a14">Log_Initialize</a>(&amp; (E-&gt;ExporterLog), PS, ExporterName); <span class="comment">/* This also makes a copy of ExporterName */</span>
01588     <a class="code" href="../../d5/db3/_exporter_8c.html#a28">ExporterMsgs_Initialize</a>(&amp; (E-&gt;ExporterLog));
01589     <a class="code" href="../../de/d8d/_common_msgs_8h.html#a8">CommonMsgs_Initialize</a>(&amp; (E-&gt;ExporterLog));
01590     <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a18">TCPMsgs_Initialize</a>(&amp; (E-&gt;ExporterLog));
01591     <a class="code" href="../../dd/d28/_log_8c.html#a21">Log_Enable</a>(&amp; (E-&gt;ExporterLog));
01592 
01593     {
01594         <span class="keywordtype">char</span> buf1[<a class="code" href="../../d5/d74/group___i_p_d_r__time__services.html#ga8">IPDR_TIME_FORMAT_LENGTH</a> + 1];
01595         <span class="keywordtype">char</span> buf2[<a class="code" href="../../d5/d74/group___i_p_d_r__time__services.html#ga8">IPDR_TIME_FORMAT_LENGTH</a> + 1];
01596         <a class="code" href="../../da/df4/_log_8h.html#a32">Log_Write4</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>,
01597                    <span class="stringliteral">"IPDR_InitExporter"</span>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a52">MSG_EXPORTER_STARTED</a>,
01598                    E-&gt;ExporterStartTime, E-&gt;ExporterStartTime,
01599                    <a class="code" href="../../d2/dc9/_platform_8h.html#a59">Platform_FormatTimeLocal</a>(PS, E-&gt;ExporterStartTime, buf1),
01600                    <a class="code" href="../../d2/dc9/_platform_8h.html#a60">Platform_FormatTimeGMT</a>(PS, E-&gt;ExporterStartTime, buf2));
01601     }
01602 
01603     E-&gt;PS = PS;
01604     E-&gt;ParamsHandler.ParamsFunc = ParamsHandler;
01605     E-&gt;ParamsHandler.ParamsArg = ParamsHandlerArg;
01606 
01607 <span class="preprocessor">#ifdef VQ_HANDLER_SUPPORT</span>
01608 <span class="preprocessor"></span>    E-&gt;QHandler = &amp; VQHandler;
01609     E-&gt;QHandlerInitArg = NULL;
01610 <span class="preprocessor">#else</span>
01611 <span class="preprocessor"></span>    E-&gt;QHandler = NULL;
01612 <span class="preprocessor">#endif</span>
01613 <span class="preprocessor"></span>
01614     E-&gt;CSessions = NULL;
01615 
01616         E-&gt;IsInsideCallback = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
01617 
01618     *CH = E; <span class="comment">/* So that IPDR_ParamsHandler can use it for looking at the MIB contents. */</span>
01619 
01620         <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a5">ParametersHandler_ParametrsInit</a>(E, &amp; (E-&gt;ParamsHandler));
01621 
01622         <a class="code" href="../../d5/db3/_exporter_8c.html#a27">Exporter_InitDebugLevels</a>( E );
01623 
01624     LocalAddr = <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a15">ParametersHandler_GetStringParam</a>(&amp; (E-&gt;ParamsHandler),
01625                                                  <a class="code" href="../../de/d8f/_configuration_names_8h.html#a155">STR_configuration_logging_loggerAddress</a>);
01626     <span class="keywordflow">if</span> (LocalAddr == NULL || strlen(LocalAddr) == 0)
01627         IPAddr = <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga14">IPDR_DEFAULT_ADDRESS</a>;
01628     <span class="keywordflow">else</span>
01629         IPAddr = <a class="code" href="../../d5/d93/_transport_8h.html#a17">TL_ParseAddress</a>(LocalAddr);
01630 
01631         IPPort = <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a19">ParametersHandler_GetUShortParam</a>(&amp; (E-&gt;ParamsHandler),
01632                                                  <a class="code" href="../../de/d8f/_configuration_names_8h.html#a156">STR_configuration_logging_loggerPort</a>);
01633 
01634         <span class="comment">/* #define SYSLOG_FACILITY 184 */</span>
01635         <a class="code" href="../../dd/d28/_log_8c.html#a26">Log_SetLoggerAddress</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, IPAddr, IPPort, 184, <span class="stringliteral">""</span>);
01636 
01637     <a class="code" href="../../d2/dc9/_platform_8h.html#a7">Platform_SetExporterHandle</a>(PS, E); <span class="comment">/* So that Platform can write to log. */</span>
01638 
01639 <span class="preprocessor">#if defined(SNMP_SUPPORT)</span>
01640 <span class="preprocessor"></span>        Platform_MIB_SetExporterHandle(PS, E);
01641 <span class="preprocessor">#endif  </span>
01642 <span class="preprocessor"></span>
01643     Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a2">DynamicArray_Create</a>(PS, &amp; (E-&gt;Sessions),
01644                                  <a class="code" href="../../d5/db3/_exporter_8c.html#a0">INITIAL_SESSIONS_ARRAY_CAPACITY</a>);
01645     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01646         <a class="code" href="../../d2/dc9/_platform_8h.html#a8">Platform_UnsetExporterHandle</a>(PS);
01647         *CH = NULL;
01648         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, E);
01649         <span class="keywordflow">return</span> Status;
01650     }
01651     <span class="comment">/*Status = DynamicArray_Create(PS, &amp; (S-&gt;Templates),</span>
01652 <span class="comment">                                 INITIAL_TEMPLATES_ARRAY_CAPACITY);</span>
01653 <span class="comment">        */</span>
01654     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01655         <a class="code" href="../../d2/dc9/_platform_8h.html#a8">Platform_UnsetExporterHandle</a>(PS);
01656         *CH = NULL;
01657         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, E);
01658         <span class="keywordflow">return</span> Status;
01659     }
01660     LocalAddr = <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a15">ParametersHandler_GetStringParam</a>(&amp; (E-&gt;ParamsHandler),
01661                                                  <a class="code" href="../../de/d8f/_configuration_names_8h.html#a142">STR_configuration_exporterAddress</a>);
01662     <span class="keywordflow">if</span> (LocalAddr == NULL || strlen(LocalAddr) == 0)
01663         E-&gt;LocalAddr = <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga14">IPDR_DEFAULT_ADDRESS</a>;
01664     <span class="keywordflow">else</span>
01665         E-&gt;LocalAddr = <a class="code" href="../../d5/d93/_transport_8h.html#a17">TL_ParseAddress</a>(LocalAddr);
01666 
01667     E-&gt;LocalPort =
01668         (<span class="keywordtype">unsigned</span> short) <a class="code" href="../../de/d8a/_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;ParamsHandler),
01669                                                        <a class="code" href="../../de/d8f/_configuration_names_8h.html#a143">STR_configuration_exporterPort</a>);
01670 
01671     <a class="code" href="../../d5/db3/_exporter_8c.html#a29">Exporter_InitializeParameters</a>(E);
01672 
01673     <a class="code" href="../../d0/db6/_console_8c.html#a23">Console_Initialize</a>(PS, &amp; (E-&gt;ConsolePtr), &amp; (E-&gt;ParamsHandler),
01674                        &amp; (E-&gt;ExporterLog));
01675     <a class="code" href="../../dd/d28/_log_8c.html#a25">Log_RegisterConsoleCommands</a>(&amp; (E-&gt;ExporterLog), &amp; (E-&gt;ConsolePtr));
01676     <a class="code" href="../../d9/d0f/_exporter_console_8c.html#a24">ExporterConsole_RegisterConsoleCommands</a>(E, &amp; (E-&gt;ConsolePtr));
01677 <span class="preprocessor">#ifdef ENABLE_SIMULATOR</span>
01678 <span class="preprocessor"></span>    HApp_RegisterConsoleCommands(E, &amp; (E-&gt;ConsolePtr));
01679 <span class="preprocessor">#endif</span>
01680 <span class="preprocessor"></span>
01681     E-&gt;Started = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
01682     E-&gt;TemplateChangedCallback = NULL;
01683     E-&gt;FlowStartCallback = NULL;
01684         E-&gt;StartNegotiationCallback = NULL;
01685 
01686     *CH = E; <span class="comment">/* Should already be set, but let's be sure. */</span>
01687 
01688     <span class="comment">/* The following will be optimized away by any decent compiler. It</span>
01689 <span class="comment">     * is here because there are too many dependencies in the code on</span>
01690 <span class="comment">     * the sizes of short, int, long ... when these are removed, this</span>
01691 <span class="comment">     * test can be removed. */</span>
01692 
01693     <span class="keywordflow">if</span> (<span class="keyword">sizeof</span> (<span class="keywordtype">signed</span> <span class="keywordtype">char</span>)        != 1 ||
01694         <span class="keyword">sizeof</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>)      != 1 ||
01695         <span class="keyword">sizeof</span> (<span class="keywordtype">short</span> <span class="keywordtype">signed</span> <span class="keywordtype">int</span>)   != 2 ||
01696         <span class="keyword">sizeof</span> (<span class="keywordtype">short</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) != 2 ||
01697         <span class="keyword">sizeof</span> (<span class="keywordtype">signed</span> <span class="keywordtype">int</span>)         != 4 ||
01698         <span class="keyword">sizeof</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)       != 4 ||
01699         <span class="keyword">sizeof</span> (<span class="keywordtype">signed</span> <span class="keywordtype">long</span>)        != 4 ||
01700         <span class="keyword">sizeof</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)      != 4 ||
01701                 <span class="keyword">sizeof</span> (<span class="keywordtype">signed</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>)       != 8 ||
01702                 <span class="keyword">sizeof</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span>) != 8 ||
01703                 <span class="keyword">sizeof</span> (<a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a>)         != 4 ||
01704         <span class="keyword">sizeof</span> (<a class="code" href="../../d9/db3/struct_protocol_unsigned8.html">ProtocolUnsigned8</a>)  != 1 ||
01705         <span class="keyword">sizeof</span> (<a class="code" href="../../d6/d02/struct_protocol_signed8.html">ProtocolSigned8</a>)    != 1 ||
01706         <span class="keyword">sizeof</span> (<a class="code" href="../../d2/d98/struct_protocol_signed16.html">ProtocolSigned16</a>)   != 2 ||
01707         <span class="keyword">sizeof</span> (<a class="code" href="../../dc/d81/struct_protocol_unsigned16.html">ProtocolUnsigned16</a>) != 2 ||
01708         <span class="keyword">sizeof</span> (<a class="code" href="../../dc/d72/struct_protocol_signed32.html">ProtocolSigned32</a>)   != 4 ||
01709         <span class="keyword">sizeof</span> (<a class="code" href="../../d2/d1c/struct_protocol_unsigned32.html">ProtocolUnsigned32</a>) != 4 ||
01710                 <span class="keyword">sizeof</span> (<a class="code" href="../../d2/d51/struct_protocol_signed64.html">ProtocolSigned64</a>)       != 8 ||
01711                 <span class="keyword">sizeof</span> (<a class="code" href="../../d7/dcf/struct_protocol_unsigned64.html">ProtocolUnsigned64</a>)     != 8) {
01712 <span class="preprocessor">#if defined(STD_FILE_OPERATIONS_SUPPORT)</span>
01713 <span class="preprocessor"></span>        fprintf(stderr, <span class="stringliteral">"*** size of char/short/int/long not what was expected: %u/%u/%u/%u at %.200s:%d\n"</span>,
01714                 <span class="keyword">sizeof</span> (<span class="keywordtype">char</span>), <span class="keyword">sizeof</span> (<span class="keywordtype">short</span>), <span class="keyword">sizeof</span> (<span class="keywordtype">int</span>), <span class="keyword">sizeof</span> (<span class="keywordtype">long</span>), __FILE__, __LINE__);
01715 <span class="preprocessor">#endif</span>
01716 <span class="preprocessor"></span>        <a class="code" href="../../da/df4/_log_8h.html#a33">Log_Write5</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a168">IPDR_LEVEL_FATAL</a>,
01717                    <span class="stringliteral">"IPDR_InitExporter"</span>,
01718                    <span class="stringliteral">"size of char/short/int/long/long long - not what was expected: %u/%u/%u/%u/%u"</span>,
01719                    <span class="keyword">sizeof</span> (<span class="keywordtype">char</span>), <span class="keyword">sizeof</span> (<span class="keywordtype">short</span>), <span class="keyword">sizeof</span> (<span class="keywordtype">int</span>), <span class="keyword">sizeof</span> (<span class="keywordtype">long</span>), <span class="keyword">sizeof</span>(<span class="keywordtype">long</span> <span class="keywordtype">long</span>));
01720         abort();
01721         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a180">IPDR_ERR</a>;
01722     }
01723 
01724     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01725 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a24" doxytag="Exporter.c::IPDR_SendDataCompat"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_SendDataCompat           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>TemplateHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">02924 {
02925         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a180">IPDR_ERR</a>;
02926 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="Exporter.c::Session_CreateNewWorkContext"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Session_CreateNewWorkContext           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../db/dc0/struct_dynamic_array.html">DynamicArray</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Tmpls</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Negotiable</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a new work context within a session, which will be used to queue new records from now on.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>Exporter owning the session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Tmpls</em>&nbsp;</td><td>templates configuration associated with the context </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Negotiable</em>&nbsp;</td><td>indicates whether templates negotiation can take place on the session</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01262 {
01263     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
01264     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC;
01265 
01266     Status = <a class="code" href="../../d5/d55/_memory_management_8c.html#a2">Object_Allocate</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a>),
01267                              <a class="code" href="../../d5/db3/_exporter_8c.html#a37">TransmissionContext_Destructor</a>,
01268                              (<span class="keywordtype">void</span> **) &amp; TC);
01269     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01270         <span class="keywordflow">return</span> Status;
01271     strncpy(TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>, <span class="stringliteral">"XMTCTX"</span>, <span class="keyword">sizeof</span> TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>);
01272 
01273     Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a14">DynamicArray_Copy</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Tmpls, &amp; (TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>));
01274     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01275         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, TC);
01276         <span class="keywordflow">return</span> Status;
01277     }
01278 
01279     Status = <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;CreateTransmissionContext(E, S, TC);
01280     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01281         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, TC);
01282         <span class="keywordflow">return</span> Status;
01283     }
01284 
01285     TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o5">SessionPtr</a> = S;
01286     TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o6">NextContext</a> = NULL;
01287     TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o4">Negotiable</a> = Negotiable;
01288 
01289     <span class="keywordflow">if</span> (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o4">WorkContext</a> == NULL) {
01290         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o4">WorkContext</a> = TC;
01291         TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o3">ConfigurationID</a> = 1;
01292     } <span class="keywordflow">else</span> {
01293         TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o3">ConfigurationID</a> = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o4">WorkContext</a>-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o3">ConfigurationID</a> + 1;
01294         <span class="keywordflow">if</span> (TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o3">ConfigurationID</a> == 0)
01295             TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o3">ConfigurationID</a>++;
01296         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o4">WorkContext</a>-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o6">NextContext</a> = TC;
01297         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o4">WorkContext</a> = TC;
01298     }
01299 
01300     <span class="comment">/*if (S-&gt;ActiveContext == NULL)*/</span>
01301         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a> = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o4">WorkContext</a>;
01302 
01303     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01304 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="Exporter.c::Session_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Session_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete resources associated with a session. <dl compact><dt><b>Note:</b></dt><dd>not static </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Obj</em>&nbsp;</td><td>object to delete </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00817 {
00818     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) Obj;
00819     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
00820 
00821     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>, *NextTC;
00822 
00823     strncpy(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>, <span class="stringliteral">"Dsessio"</span>, <span class="keyword">sizeof</span> S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>);
00824 
00825         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>));
00826 
00827     <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;DeleteSession(E, S);
00828 
00829     <span class="keywordflow">while</span> (TC != NULL) {
00830         NextTC = TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o6">NextContext</a>;
00831         <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, TC);
00832         TC = NextTC;
00833     }
00834 
00835     <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>);
00836     <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(PS, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o18">Description</a>);
00837 
00838     strncpy(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>, <span class="stringliteral">"Xsessio"</span>, <span class="keyword">sizeof</span> S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>);
00839 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="Exporter.c::Session_HandleTemplateChanges"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Session_HandleTemplateChanges           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>NumChanges</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>TCBs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Force</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CopyFromExporter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Negotiable</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Apply template configuration changes to a session given an array of template change blocks (as defined in the IPDR protocol).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>Exporter owning the session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumChanges</em>&nbsp;</td><td>number of template change blocks </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TCBs</em>&nbsp;</td><td>array of template change blocks </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Force</em>&nbsp;</td><td>if true, a new context will be created even when no changes where supplied </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CopyFromExporter</em>&nbsp;</td><td>the existing configuration should be based on the client templates </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Negotiable</em>&nbsp;</td><td>indicates whether templates negotiation can take place on the session</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01346 {
01347 <span class="preprocessor">#ifdef NOTDONEYET</span>
01348 <span class="preprocessor"></span>    <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a>*        TC = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o4">WorkContext</a>;
01349     <span class="keywordtype">int</span>                                         i, j;
01350     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>                      TemplateID;
01351     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a>                            *Tmpl, *NewTmpl, *Tmpl1;
01352     <a class="code" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a>                           TemplateChanged = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
01353     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>                         Status;
01354     <a class="code" href="../../db/dc0/struct_dynamic_array.html">DynamicArray</a>                        Tmpls, *Source;
01355     <span class="keyword">const</span> KeyBlock *            KB;
01356     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *                                       K;
01357     size_t                                      BlockLength;
01358 
01359         <span class="comment">/*const TemplateChangeBlockHeader *TCB = TCBs;*/</span>
01360 
01361     <span class="keywordflow">if</span> (! CopyFromExporter)
01362         Source = &amp; (TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>);
01363     <span class="keywordflow">else</span>
01364         Source = &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>);
01365 
01366     <span class="comment">/* check if something actually changed compared to the</span>
01367 <span class="comment">       current configuration */</span>
01368 
01369     <span class="keywordflow">if</span> (! Force) {
01370         <span class="keywordflow">for</span> (i = 0; i &lt; NumChanges; i++) {
01371 
01372             TemplateID = <a class="code" href="../../df/dde/_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;TemplateID);
01373 
01374             Tmpl = NULL;
01375             <span class="keywordflow">for</span> (j = 0; j &lt; Source-&gt;Length; j++) {
01376                 Tmpl1 = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Source-&gt;<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
01377                 <span class="keywordflow">if</span> (Tmpl1 != NULL &amp;&amp; Tmpl1-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a> == TemplateID) {
01378                     Tmpl = Tmpl1;
01379                     <span class="keywordflow">break</span>;
01380                 }
01381             }
01382 
01383             <span class="keywordflow">if</span> (Tmpl == NULL)
01384                 <span class="keywordflow">continue</span>;
01385 
01386             KB = (<span class="keyword">const</span> KeyBlock *) ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) TCB + <span class="keyword">sizeof</span>(TemplateChangeBlockHeader));
01387             <a class="code" href="../../dd/d68/_templates_8c.html#a7">Template_IsModified</a>(Tmpl, <a class="code" href="../../df/dde/_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;NumKeys), KB, &amp; TemplateChanged);
01388 
01389             <span class="keywordflow">if</span> (TemplateChanged) {
01390                 TemplateChanged = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
01391                 break ;
01392             }
01393 
01394             BlockLength =
01395                 <span class="keyword">sizeof</span>(TemplateChangeBlockHeader) +
01396                 <a class="code" href="../../df/dde/_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;NumKeys) * <span class="keyword">sizeof</span>(KeyBlock);
01397             TCB = (<span class="keyword">const</span> TemplateChangeBlockHeader *) ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) TCB + BlockLength);
01398         }
01399 
01400         <span class="comment">/* if nothing changed in the templates configuration, return */</span>
01401         <span class="keywordflow">if</span> (! TemplateChanged)
01402             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01403     }
01404 
01405     Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a2">DynamicArray_Create</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; Tmpls, 0);
01406     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01407         <span class="keywordflow">return</span> Status;
01408     Status = <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a14">DynamicArray_Copy</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Source, &amp; Tmpls);
01409     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01410         <span class="keywordflow">return</span> Status;
01411 
01412     TCB = TCBs;
01413 
01414     <span class="comment">/* perform modifications to the needed keys */</span>
01415     <span class="keywordflow">for</span> (i = 0; i &lt; NumChanges; i++) {
01416 
01417         TemplateID = <a class="code" href="../../df/dde/_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;TemplateID);
01418 
01419         Tmpl = NULL;
01420         <span class="keywordflow">for</span> (j = 0; j &lt; Source-&gt;Length; j++) {
01421             Tmpl1 = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Source-&gt;<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
01422             <span class="keywordflow">if</span> (Tmpl1 != NULL &amp;&amp; Tmpl1-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a> == TemplateID) {
01423                 Tmpl = Tmpl1;
01424                 <span class="keywordflow">break</span>;
01425             }
01426         }
01427 
01428         <span class="keywordflow">if</span> (Tmpl != NULL) {
01429             KB = (<span class="keyword">const</span> KeyBlock *) ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) TCB + <span class="keyword">sizeof</span>(TemplateChangeBlockHeader));
01430             <a class="code" href="../../dd/d68/_templates_8c.html#a8">Template_ModifyTemplate</a>(S, Tmpl, <a class="code" href="../../df/dde/_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;NumKeys), KB, &amp; NewTmpl);
01431             Tmpls.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j] = NewTmpl;
01432             <a class="code" href="../../d5/d55/_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Tmpl);
01433         }
01434 
01435         BlockLength =
01436             <span class="keyword">sizeof</span>(TemplateChangeBlockHeader) +
01437             <a class="code" href="../../df/dde/_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;NumKeys) * <span class="keyword">sizeof</span>(KeyBlock);
01438         TCB = (<span class="keyword">const</span> TemplateChangeBlockHeader *) ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) TCB + BlockLength);
01439     }
01440 
01441     <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">"Session_HandleTemplateChanged"</span>,
01442                <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a16">MSG_EXPORTER_SESSION_TEMPLATES_CHANGED</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>);
01443     <span class="keywordflow">for</span> (i = 0; i &lt; Tmpls.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>; i++) {
01444         Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Tmpls.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
01445         <span class="keywordflow">if</span> (Tmpl == NULL)
01446             <span class="keywordflow">continue</span>;
01447         <a class="code" href="../../da/df4/_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">"Session_HandleTemplateChanged"</span>,
01448                    <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a17">MSG_EXPORTER_TEMPLATE_INFO</a>, Tmpl-&gt;TemplateID, Tmpl-&gt;SchemaName);
01449         <span class="keywordflow">for</span> (j = 0; j &lt; Tmpl-&gt;Keys.Length; j++) {
01450             K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Tmpl-&gt;Keys.Data[j];
01451             <a class="code" href="../../da/df4/_log_8h.html#a31">Log_Write3</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a172">IPDR_LEVEL_DEBUG</a>, <span class="stringliteral">"Session_HandleTemplateChanged"</span>,
01452                        <a class="code" href="../../d0/dc0/_exporter_msgs_8h.html#a18">MSG_EXPORTER_KEY_INFO</a>, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a>, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>);
01453         }
01454     }
01455 
01456     Status = <a class="code" href="../../d5/db3/_exporter_8c.html#a45">Session_CreateNewWorkContext</a>(E, S, &amp; Tmpls, Negotiable);
01457     <span class="keywordflow">if</span> (<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01458         <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; Tmpls);
01459         <span class="keywordflow">return</span> Status;
01460     }
01461 
01462     <span class="comment">/* trigger the templates change callback */</span>
01463     <a class="code" href="../../d5/db3/_exporter_8c.html#a97">Exporter_TriggeTemplateChangedCallback</a>(S);
01464 
01465     <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(<a class="code" href="../../d5/d93/_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; Tmpls);
01466 <span class="preprocessor">#endif</span>
01467 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01468 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a46" doxytag="Exporter.c::Session_SelectActiveCollector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Session_SelectActiveCollector           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Select a new active server for a given session.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>Exporter owning the session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01317 {
01318 
01319     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01320 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="Exporter.c::Session_SendOutstandingData"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Session_SendOutstandingData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send any outstanding (unacknowledged) data within a session.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>Exporter owning the session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01482 {
01483     <span class="comment">/* check if we've recursively been called. If we did don't do anything</span>
01484 <span class="comment">       since the caller will continue sending */</span>
01485         <span class="keywordflow">if</span>( S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> == <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>)
01486                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a177">IPDR_ERR_SESSION_LOGICALLY_STOPED</a>;
01487 
01488     <span class="keywordflow">if</span> (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o8">SendingData</a>)
01489         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01490 
01491     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o8">SendingData</a> = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
01492     <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;SendOutstandingData(E, S);
01493     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o8">SendingData</a> = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
01494 
01495     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
01496 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="Exporter.c::StatisticsCalculateRates"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void StatisticsCalculateRates           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>PrevTime</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Statistics</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PrevStatistics</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Time</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>IntervalStatistics</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Rate100</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00527 {
00528     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timeInterval;
00529     <a class="code" href="../../d2/dc9/_platform_8h.html#a54">Platform_GetTime</a>(PS, Time);
00530     timeInterval = *Time - PrevTime;
00531 
00532     IntervalStatistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>  = Statistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>  - PrevStatistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>;
00533     IntervalStatistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a> = Statistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a> - PrevStatistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a>;
00534     IntervalStatistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o2">EnqueuedRecords</a>     = Statistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o2">EnqueuedRecords</a>     - PrevStatistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o2">EnqueuedRecords</a>;
00535     IntervalStatistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o3">LostRecords</a>         = Statistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o3">LostRecords</a>         - PrevStatistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o3">LostRecords</a>;
00536 
00537     <span class="keywordflow">if</span> (timeInterval &gt; 0) {
00538         Rate100-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>  = IntervalStatistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>  * 100 / timeInterval;
00539         Rate100-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a> = IntervalStatistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a> * 100 / timeInterval;
00540         Rate100-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o2">EnqueuedRecords</a>     = IntervalStatistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o2">EnqueuedRecords</a>     * 100 / timeInterval;
00541         Rate100-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o3">LostRecords</a>         = IntervalStatistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o3">LostRecords</a>         * 100 / timeInterval;
00542     } <span class="keywordflow">else</span> {
00543         Rate100-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>  = 0;
00544         Rate100-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a> = 0;
00545         Rate100-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o2">EnqueuedRecords</a>     = 0;
00546         Rate100-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o3">LostRecords</a>         = 0;
00547     }
00548 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="Exporter.c::StatisticsInitialize"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">static void StatisticsInitialize           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga10">IPDR_Time</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Now</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PrevStatistics</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d7/d1e/struct_i_p_d_r___statistics.html">IPDR_Statistics</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Statistics</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [static]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize a statistics structure.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Now</em>&nbsp;</td><td>gets current time (may be NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>PrevStatistics</em>&nbsp;</td><td>old structure to zero out (may be NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Statistics</em>&nbsp;</td><td>structure to initialize (may be NULL) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00367 {
00368 <span class="preprocessor">#ifdef DEBUG_MEMORY</span>
00369 <span class="preprocessor"></span>    dmalloc_markVal = dmalloc_mark();    {
00370         <a class="code" href="../../df/dde/_defs_8h.html#a16">IPDR_BOOL</a> duplicateCX = <a class="code" href="../../df/dde/_defs_8h.html#a4">IPDR_FALSE</a>;
00371         <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *CX = T-&gt;Connections;
00372         <span class="keywordflow">while</span> (CX) {
00373             <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">TCPConnection</a> *nextCX = CX-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o12">NextConnection</a>; <span class="comment">/* save "next" because CX might be deallocated */</span>
00374             <span class="keywordflow">if</span> (CX != C &amp;&amp; CX-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o1">RemoteAddr</a> == RemoteAddr &amp;&amp; CX-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o2">RemotePort</a> == RemotePort) {
00375                 <span class="comment">/* XXX should signal error event */</span>
00376                 <a class="code" href="../../da/df4/_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a1">TRANSPORT_LOG</a>, <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a1">TCP_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga6a169">IPDR_LEVEL_ERROR</a>,
00377                            <span class="stringliteral">"TCP_AcceptCallback"</span>, <a class="code" href="../../db/d48/_t_c_p_msgs_8h.html#a16">MSG_TCP_DUPLICATE_ACCEPT</a>,
00378                            <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a40">TCP_GetConnectionInfoStr</a>(CX));
00379                 <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a27">TCP_HandleDisconnection</a>(CX); <span class="comment">/* destroy old connection */</span>
00380                 <a class="code" href="../../d2/dc9/_platform_8h.html#a56">Platform_SleepMS</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, 1000); <span class="comment">/* avoid rapid connect/disconnect loop */</span>
00381                 duplicateCX = <a class="code" href="../../df/dde/_defs_8h.html#a5">IPDR_TRUE</a>;
00382             }
00383             CX = nextCX;
00384         }
00385         <span class="keywordflow">if</span> (duplicateCX) {
00386             <a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a27">TCP_HandleDisconnection</a>(C); <span class="comment">/* and destroy the new connection as well */</span>
00387             <a class="code" href="../../d2/dc9/_platform_8h.html#a56">Platform_SleepMS</a>(<a class="code" href="../../d9/d9f/_t_c_p_transport_8c.html#a0">TRANSPORT_PLATFORM</a>, 1000); <span class="comment">/* avoid rapid connect/disconnect loop */</span>
00388         }
00389     }
00390     <span class="keywordflow">if</span> (dmalloc_markValInit == 0) {
00391         dmalloc_markValInit = dmalloc_markVal;
00392     }
00393 <span class="preprocessor">#endif</span>
00394 <span class="preprocessor"></span>
00395     <span class="keywordflow">if</span> (Now) {
00396         <a class="code" href="../../d2/dc9/_platform_8h.html#a54">Platform_GetTime</a>(PS, Now);
00397     }
00398     <span class="keywordflow">if</span> (Statistics) {
00399         Statistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>  = 0;
00400         Statistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o1">AcknowledgedRecords</a> = 0;
00401         Statistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o2">EnqueuedRecords</a>     = 0;
00402         Statistics-&gt;<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o3">LostRecords</a>         = 0;
00403     }
00404     <span class="keywordflow">if</span> (PrevStatistics) {
00405         PrevStatistics-&gt;TransmittedRecords  = 0;
00406         PrevStatistics-&gt;AcknowledgedRecords = 0;
00407         PrevStatistics-&gt;EnqueuedRecords     = 0;
00408         PrevStatistics-&gt;LostRecords         = 0;
00409     }
00410 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="Exporter.c::TransmissionContext_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TransmissionContext_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete resources associated with a transmission context. <dl compact><dt><b>Note:</b></dt><dd>not static --- used by <a class="el" href="../../d5/d55/_memory_management_8c.html">MemoryManagement.c</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Obj</em>&nbsp;</td><td>object to delete </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00751 {
00752     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC = (<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *) Obj;
00753     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o5">SessionPtr</a>;
00754     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
00755 
00756     strncpy(TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>, <span class="stringliteral">"Dxmtctx"</span>, <span class="keyword">sizeof</span> TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>);
00757     <a class="code" href="../../d3/d58/_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>));
00758     <a class="code" href="../../d5/d93/_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;DeleteTransmissionContext(E, S, TC);
00759     strncpy(TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>, <span class="stringliteral">"Xxmtctx"</span>, <span class="keyword">sizeof</span> TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>);
00760 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a9" doxytag="Exporter.c::Config_h_rcsid"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char <a class="el" href="../../d5/db3/_exporter_8c.html#a9">Config_h_rcsid</a>[] = IPDR_CONFIG_H_RCSID          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="Exporter.c::Defs_h_rcsid"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char <a class="el" href="../../d5/db3/_exporter_8c.html#a8">Defs_h_rcsid</a>[] = IPDR_DEFS_H_RCSID          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="Exporter.c::Exporter_DefaultHandlers"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/dcd/struct_i_p_d_r__tag___connection_handlers.html">ConnectionHandlers</a> <a class="el" href="../../d5/d93/_exporter_8h.html#a13">Exporter_DefaultHandlers</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    <a class="code" href="../../d5/db3/_exporter_8c.html#a14">Exporter_ConnectCallback</a>,
    <a class="code" href="../../d5/db3/_exporter_8c.html#a15">Exporter_DisconnectCallback</a>,
    <a class="code" href="../../d5/db3/_exporter_8c.html#a16">Exporter_DataCallback</a>,
}
</pre></div>Handlers for transport layer connections, for initial connection.     </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="Exporter.c::Exporter_h_rcsid"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char <a class="el" href="../../d5/db3/_exporter_8c.html#a6">Exporter_h_rcsid</a>[] = EXPORTER_H_RCSID          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="Exporter.c::Exporter_rcsid"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char <a class="el" href="../../d5/db3/_exporter_8c.html#a5">Exporter_rcsid</a>[] = "@(#) $Id: Exporter.c,v 1.104 2005/04/21 11:29:55 dmitryk Exp $" IPDR_COPYRIGHT_STR          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="Exporter.c::ExporterMsgs_h_rcsid"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char <a class="el" href="../../d5/db3/_exporter_8c.html#a11">ExporterMsgs_h_rcsid</a>[] = EXPORTER_MSGS_H_RCSID          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="Exporter.c::IPDR_h_rcsid"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char <a class="el" href="../../d5/db3/_exporter_8c.html#a7">IPDR_h_rcsid</a>[] = IPDR_H_RCSID          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a13" doxytag="Exporter.c::ServerStateStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char* <a class="el" href="../../d5/d93/_exporter_8h.html#a12">ServerStateStr</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment"> {
    <span class="stringliteral">"disconnected"</span>,
    <span class="stringliteral">"initiation"</span>,
    <span class="stringliteral">"ready"</span>,
    <span class="stringliteral">"active"</span>,
}
</pre></div>Vector of names of the enum ServerState.     </td>
  </tr>
</table>
<a class="anchor" name="a10" doxytag="Exporter.c::Version_h_rcsid"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char <a class="el" href="../../d5/db3/_exporter_8c.html#a10">Version_h_rcsid</a>[] = VERSION_H_RCSID " " IPDR_VER          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 22:28:22 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
