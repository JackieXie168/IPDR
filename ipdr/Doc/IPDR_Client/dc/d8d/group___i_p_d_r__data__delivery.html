<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: Data delivery</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<h1>Data delivery</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/group___i_p_d_r__data__delivery.html#ga0">IPDR_SendData</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TemplateHandle, const void *Data)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">IPDR_API&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d8d/group___i_p_d_r__data__delivery.html#ga1">IPDR_SendData_All</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a> ExporterHandle, int TemplateID, const void *Data)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Data is passed to the IPDR transmitter (client) in host-native format, i.e. either little- or big-endian depending on the platform. The collector (server) is notified of the format by a flag in the TMPL DATA message and if byte order swapping is required, it should occur in the collector (server) side. <hr><h2>Function Documentation</h2>
<a class="anchor" name="ga0" doxytag="IPDR.h::IPDR_SendData"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_SendData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>TemplateHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send data using the IPDR protocol.<p>
This function is called by the host application when the data to be delivered is ready to be transmitted. It copies data suitable to populate a specific template, to specific session which was configured to receive this template. (If all keys in the given template were disabled for a specific session, the record will not be sent in that session.) Once the data is enqueued it is sent over to the transport layer to the active collector the session with appropriate fail-over processing within sessions.<p>
The <a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga4a152">IPDR_EVENT_RECORD_LOST</a> event will be triggered for the session for which there is no space in the output queue (see IPDR_SetExporterEventHandler()). The record-lost event can occur even if a <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> return code is returned from this function. The record-lost event may also occur asynchornously from the <a class="el" href="../../dc/d8d/group___i_p_d_r__data__delivery.html#ga0">IPDR_SendData()</a> function.<p>
As with all other API functions, it is safe for multiple threads to call this function simultaneously; mutexes will ensure multi-thread safety. If the underlying platform supports non-blocking I/O, this function will not block on I/O: if the data cannot be sent immediately, it will be sent asynchronously later.<p>
can not be sent after swtop session<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to an exporter previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>SessionHandle</em>&nbsp;</td><td>Handle to session to send the data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TemplateHandle</em>&nbsp;</td><td>Handle of template to which the data comform. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Data</em>&nbsp;</td><td>Pointer to the actual data (which serves as the base address when using offsets or passed to accessor functions </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a182">IPDR_ERR_ALLOCATION_FAILED</a> (sometimes, when the queue is full), <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a200">IPDR_ERR_QUEUE_FULL</a>, or <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. This function will fail when StopSession was called and StopSession was not called yet. This is due to document ID, which may be unknown in this situation.Return code for this situation is TBD. </dd></dl>
<div class="fragment"><pre class="fragment">02915 {
02916     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>*   E = ExporterHandle;
02917         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>*        S = SessionHandle;
02918         <span class="keywordflow">return</span> <a class="code" href="../../dd/d44/_exporter_protocol_8c.html#a66">ExporterProtocol_SendData</a>(E, S, NULL, NULL, TemplateHandle, Data);
02919 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="ga1" doxytag="IPDR.h::IPDR_SendData_All"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">IPDR_API IPDR_SendData_All           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_ExporterHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>ExporterHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>TemplateID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function will attempt to send the data to each session available at the exporter This is mostly useful for compatibility purposes <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ExporterHandle</em>&nbsp;</td><td>Handle to an exporter previously created by <a class="el" href="../../d3/d96/group___i_p_d_r__initialization__starting__deletion.html#ga3">IPDR_InitExporter()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TemplateID</em>&nbsp;</td><td>ID of template to which the data comform. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Data</em>&nbsp;</td><td>Pointer to the actual data (which serves as the base address when using offsets or passed to accessor functions </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a182">IPDR_ERR_ALLOCATION_FAILED</a> (sometimes, when the queue is full), <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a200">IPDR_ERR_QUEUE_FULL</a>, or <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga15">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">02937 {
02938         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = ExporterHandle;
02939         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> * S = NULL;
02940         <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status, Status1 = <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga15a174">IPDR_OK</a>;
02941         <a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TemplateHandle;
02942         <span class="keywordtype">int</span> j ;
02943         <span class="keywordflow">for</span> (j = 0; j &lt; E-&gt;Sessions.Length; j++) {
02944         S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
02945 
02946                 Status = <a class="code" href="../../d5/db3/_exporter_8c.html#a84">IPDR_GetTemplateInternal</a>(S, TemplateID, NULL, NULL, NULL, &amp;TemplateHandle);
02947                 <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a17">SUCCESS</a>(Status))
02948                 {
02949                         Status = <a class="code" href="../../dc/d8d/group___i_p_d_r__data__delivery.html#ga0">IPDR_SendData</a>(ExporterHandle, S, TemplateHandle, Data);
02950 
02951                         <span class="keywordflow">if</span>(<a class="code" href="../../da/d39/_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
02952                                 Status1 = Status;
02953                 }
02954         }
02955         <span class="keywordflow">return</span> Status1;
02956 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 22:28:27 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
