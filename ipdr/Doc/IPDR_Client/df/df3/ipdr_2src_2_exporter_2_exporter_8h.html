<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: ipdr/src/Exporter/Exporter.h File Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<div class="nav">
<a class="el" href="../../dir_000003.html">ipdr</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000010.html">src</a>&nbsp;/&nbsp;<a class="el" href="../../dir_000013.html">Exporter</a></div>
<h1>Exporter.h File Reference</h1><code>#include &lt;<a class="el" href="../../d4/d3a/ipdr_2include_2_i_p_d_r_2_config_8h.html">IPDR/Config.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html">IPDR/Defs.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../de/d8c/ipdr_2include_2_i_p_d_r_2_i_p_d_r_8h.html">IPDR/IPDR.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../df/d5f/ipdr_2src_2_common_2_memory_management_8h.html">Common/MemoryManagement.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d0/dce/ipdr_2src_2_common_2_transport_8h.html">Common/Transport.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d5/da8/ipdr_2src_2_common_2_dynamic_array_8h.html">Common/DynamicArray.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d7/db1/ipdr_2src_2_common_2_console_8h.html">Common/Console.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d1/dcd/ipdr_2src_2_common_2_parameters_handler_8h.html">Common/ParametersHandler.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d4/df0/ipdr_2src_2_common_2_chunks_manager_8h.html">Common/ChunksManager.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d6/dbc/ipdr_2src_2_common_2_protocol_8h.html">Common/Protocol.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../d3/ddb/ipdr_2src_2_common_2_configuration_handler_8h.html">Common/ConfigurationHandler.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../da/d4a/ipdr_2src_2_common_2_configuration_names_8h.html">Common/ConfigurationNames.h</a>&gt;</code><br>
<code>#include &lt;<a class="el" href="../../dc/d6d/ipdr_2src_2_exporter_2_templates_8h.html">Exporter/Templates.h</a>&gt;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d7e/struct_exporter_capabilities.html">ExporterCapabilities</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dac/struct_exporter_parameters.html">ExporterParameters</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">IPDR_tag_TransmissionContext</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_tag_Collector</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDR_tag_Connection</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">IPDR_tag_CollectorSession</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_tag_Session</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_tag_Exporter</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da6/struct_i_p_d_r__tag___queue_handler.html">IPDR_tag_QueueHandler</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a0">EXPORTER_H_RCSID</a>&nbsp;&nbsp;&nbsp;"@(#) $Id: Exporter.h,v 1.53 2005/03/17 12:26:47 dmitryk Exp $" IPDR_COPYRIGHT_STR</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>&nbsp;&nbsp;&nbsp;(E-&gt;PS)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a2">EXPORTER_TRANSPORT</a>&nbsp;&nbsp;&nbsp;(E-&gt;TransportHandle)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>&nbsp;&nbsp;&nbsp;((<a class="el" href="../../db/da6/struct_i_p_d_r__tag___queue_handler.html">QueueHandler</a> *) E-&gt;QHandler)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>&nbsp;&nbsp;&nbsp;(&amp;(E-&gt;ExporterLog))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>&nbsp;&nbsp;&nbsp;(S-&gt;ExporterPtr-&gt;PS)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a6">SESSION_LOG</a>&nbsp;&nbsp;&nbsp;(&amp;(S-&gt;ExporterPtr-&gt;ExporterLog))</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a7">PRIORITY_MAX</a>&nbsp;&nbsp;&nbsp;2147483647</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a8">GetCSStateStr</a>(CSState)&nbsp;&nbsp;&nbsp;(((CSState) &gt;= IPDR_CS_DISCONNECTED &amp;&amp; (CSState) &lt;= IPDR_CS_ACTIVE) ? <a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a12">ServerStateStr</a>[CSState] : "unknown-state")</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a9">GetServerStateStr</a>(State)&nbsp;&nbsp;&nbsp;(((State) &gt;= IPDR_SERVER_DISCONNECTED &amp;&amp; (State) &lt;= IPDR_SERVER_UNPAUSED) ? <a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a12">ServerStateStr</a>[State] : "unknown-state")</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a10">CollectorCapabilities</a>&nbsp;&nbsp;&nbsp;<a class="el" href="../../d3/d7e/struct_exporter_capabilities.html">ExporterCapabilities</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a11">MAX_EVENT_MSG_LEN</a>&nbsp;&nbsp;&nbsp;512</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">IPDR_tag_TransmissionContext</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a14">TransmissionContext</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_tag_Collector</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a15">Collector</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDR_tag_Connection</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a16">IPDRConnection</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">IPDR_tag_CollectorSession</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a17">CollectorSession</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_tag_Session</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a18">Session</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_tag_Exporter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a19">Exporter</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef <a class="el" href="../../db/da6/struct_i_p_d_r__tag___queue_handler.html">IPDR_tag_QueueHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a20">QueueHandler</a></td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a51">ConnectionState</a> { <a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a51a21">IPDR_CONNECTION_DISCONNECTED</a> =  0, 
<a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a51a22">IPDR_CONNECTION_WAITRESPONSE</a> =  1, 
<a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a51a23">IPDR_CONNECTION_CONNECTED</a> =  2
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a52">CollectorSessionState</a> { <a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a> =  0, 
<a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a52a25">IPDR_CS_INITIATION</a> =  2, 
<a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a52a26">IPDR_CS_READY</a> =  3, 
<a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a> =  4
 }</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a28">Session_SelectActiveCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a29">Session_SendOutstandingData</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a30">Session_HandleTemplateChanges</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, int NumChanges, unsigned char *TCBs, <a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> Force, <a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> CopyFromExporter, <a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> Negotiable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a31">EventDataInit</a> (<a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *, enum <a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga9">IPDR_Event_t</a>, <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a32">Exporter_TriggerEvent</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga8">IPDR_DebugLevel</a> LoggingLevel, const <a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *EventData, <a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS, const char *Msg,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a33">Exporter_Reconfigure</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a34">Exporter_BuildRecord</a> (<a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *CMgr, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, struct <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">IPDR_tag_Template</a> *Tmpl, const void *Data, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, unsigned long *RecordSize)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a35">Exporter_SendRecord</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *BH, <a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> Immediate, <a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> duplicate)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a36">Exporter_PrepareToSend</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a37">Exporter_CreateSessionInternal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, const char *Name, unsigned char ID, const char *Description, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> *SH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a38">IPDR_GetTemplateInternal</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> SessionHandle, int TemplateID, char **SchemaName, char **TypeName, int *NumKeys, <a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> *TH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a39">Exporter_AddCollectorInternal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, const char *Name, <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga20">IPDR_IPAddress</a> Addr, unsigned short Port, unsigned short NumberOfActive, <a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> isDummy, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> *CH)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a40">Exporter_AssocCollectorSession_Internal</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *C, unsigned short Priority)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a41">Exporter_TriggeTemplateChangedCallback</a> (<a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a42">Exporter_AddIPDRConnectionToCollector</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E, <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll, <a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> C)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a43">TransmissionContext_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a44">Exporter_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a45">Session_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a46">Collector_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a47">CollectorSession_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a48">Connection_Destructor</a> (<a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *PS, void *Obj)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a49">Exporter_WindowSizeTimerCallback</a> (void *Arg)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a50">Exporter_GetCapabilities</a> (<a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a12">ServerStateStr</a> []</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/dcd/struct_i_p_d_r__tag___connection_handlers.html">ConnectionHandlers</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a13">Exporter_DefaultHandlers</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="a10" doxytag="Exporter.h::CollectorCapabilities"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define CollectorCapabilities&nbsp;&nbsp;&nbsp;<a class="el" href="../../d3/d7e/struct_exporter_capabilities.html">ExporterCapabilities</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a0" doxytag="Exporter.h::EXPORTER_H_RCSID"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define EXPORTER_H_RCSID&nbsp;&nbsp;&nbsp;"@(#) $Id: Exporter.h,v 1.53 2005/03/17 12:26:47 dmitryk Exp $" IPDR_COPYRIGHT_STR          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a4" doxytag="Exporter.h::EXPORTER_LOG"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define EXPORTER_LOG&nbsp;&nbsp;&nbsp;(&amp;(E-&gt;ExporterLog))          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a1" doxytag="Exporter.h::EXPORTER_PLATFORM"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define EXPORTER_PLATFORM&nbsp;&nbsp;&nbsp;(E-&gt;PS)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a3" doxytag="Exporter.h::EXPORTER_QHANDLER"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define EXPORTER_QHANDLER&nbsp;&nbsp;&nbsp;((<a class="el" href="../../db/da6/struct_i_p_d_r__tag___queue_handler.html">QueueHandler</a> *) E-&gt;QHandler)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a2" doxytag="Exporter.h::EXPORTER_TRANSPORT"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define EXPORTER_TRANSPORT&nbsp;&nbsp;&nbsp;(E-&gt;TransportHandle)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a8" doxytag="Exporter.h::GetCSStateStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define GetCSStateStr          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">CSState&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(((CSState) &gt;= IPDR_CS_DISCONNECTED &amp;&amp; (CSState) &lt;= IPDR_CS_ACTIVE) ? <a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a12">ServerStateStr</a>[CSState] : "unknown-state")</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the string for a particular state.     </td>
  </tr>
</table>
<a class="anchor" name="a9" doxytag="Exporter.h::GetServerStateStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define GetServerStateStr          </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">State&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;(((State) &gt;= IPDR_SERVER_DISCONNECTED &amp;&amp; (State) &lt;= IPDR_SERVER_UNPAUSED) ? <a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a12">ServerStateStr</a>[State] : "unknown-state")</td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a11" doxytag="Exporter.h::MAX_EVENT_MSG_LEN"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define MAX_EVENT_MSG_LEN&nbsp;&nbsp;&nbsp;512          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a7" doxytag="Exporter.h::PRIORITY_MAX"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define PRIORITY_MAX&nbsp;&nbsp;&nbsp;2147483647          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a6" doxytag="Exporter.h::SESSION_LOG"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define SESSION_LOG&nbsp;&nbsp;&nbsp;(&amp;(S-&gt;ExporterPtr-&gt;ExporterLog))          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a5" doxytag="Exporter.h::SESSION_PLATFORM"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">#define SESSION_PLATFORM&nbsp;&nbsp;&nbsp;(S-&gt;ExporterPtr-&gt;PS)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="a15" doxytag="Exporter.h::Collector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_tag_Collector</a>
 <a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Structure containing information about a collector.     </td>
  </tr>
</table>
<a class="anchor" name="a17" doxytag="Exporter.h::CollectorSession"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">IPDR_tag_CollectorSession</a>
 <a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Structure containing information about a server (collector).     </td>
  </tr>
</table>
<a class="anchor" name="a19" doxytag="Exporter.h::Exporter"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">IPDR_tag_Exporter</a>
 <a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Structure containing information about a IPDR exporter. Its purpose is to contain the fields specified above for use of     </td>
  </tr>
</table>
<a class="anchor" name="a16" doxytag="Exporter.h::IPDRConnection"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDR_tag_Connection</a>
 <a class="el" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Structure containing information about a ipdr connection.     </td>
  </tr>
</table>
<a class="anchor" name="a20" doxytag="Exporter.h::QueueHandler"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../db/da6/struct_i_p_d_r__tag___queue_handler.html">IPDR_tag_QueueHandler</a>
 <a class="el" href="../../db/da6/struct_i_p_d_r__tag___queue_handler.html">QueueHandler</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Structure containing callbacks for handling data queueing (actual implemtation may vary depending on the queuing model).     </td>
  </tr>
</table>
<a class="anchor" name="a18" doxytag="Exporter.h::Session"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_tag_Session</a>
 <a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Structure containing a set of redundent servers (collectors) plus a list of transmission contexts used to queue records. It represents Session entity as specified by IPDR-SP protocol     </td>
  </tr>
</table>
<a class="anchor" name="a14" doxytag="Exporter.h::TransmissionContext"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">typedef struct <a class="el" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">IPDR_tag_TransmissionContext</a>
 <a class="el" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Contains a specific templates configuration plus data attached to the context by the queue handler (for example a volatile queue).     </td>
  </tr>
</table>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="a52" doxytag="Exporter.h::CollectorSessionState"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a52">CollectorSessionState</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="a52a24" doxytag="IPDR_CS_DISCONNECTED"></a>IPDR_CS_DISCONNECTED</em>&nbsp;</td><td>
Initial </td></tr>
<tr><td valign="top"><em><a class="anchor" name="a52a25" doxytag="IPDR_CS_INITIATION"></a>IPDR_CS_INITIATION</em>&nbsp;</td><td>
Got flow start, sending template data </td></tr>
<tr><td valign="top"><em><a class="anchor" name="a52a26" doxytag="IPDR_CS_READY"></a>IPDR_CS_READY</em>&nbsp;</td><td>
Not active, but ready to have session </td></tr>
<tr><td valign="top"><em><a class="anchor" name="a52a27" doxytag="IPDR_CS_ACTIVE"></a>IPDR_CS_ACTIVE</em>&nbsp;</td><td>
In active session </td></tr>
</table>
</dl>
<div class="fragment"><pre class="fragment">00093 {
00094         <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>    = 0,    
00095         <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a52a25">IPDR_CS_INITIATION</a>              = 2,    
00096         <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a52a26">IPDR_CS_READY</a>                   = 3,    
00097         <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a>                  = 4             
00098 };
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a51" doxytag="Exporter.h::ConnectionState"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">enum <a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a51">ConnectionState</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Connection State <dl compact><dt><b>Enumeration values: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="a51a21" doxytag="IPDR_CONNECTION_DISCONNECTED"></a>IPDR_CONNECTION_DISCONNECTED</em>&nbsp;</td><td>
Initial state </td></tr>
<tr><td valign="top"><em><a class="anchor" name="a51a22" doxytag="IPDR_CONNECTION_WAITRESPONSE"></a>IPDR_CONNECTION_WAITRESPONSE</em>&nbsp;</td><td>
Connection is waiting for connect response message </td></tr>
<tr><td valign="top"><em><a class="anchor" name="a51a23" doxytag="IPDR_CONNECTION_CONNECTED"></a>IPDR_CONNECTION_CONNECTED</em>&nbsp;</td><td>
Connected </td></tr>
</table>
</dl>
<div class="fragment"><pre class="fragment">00086                      {
00087         <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a51a21">IPDR_CONNECTION_DISCONNECTED</a>    = 0,    
00088         <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a51a22">IPDR_CONNECTION_WAITRESPONSE</a>    = 1,    
00089         <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a51a23">IPDR_CONNECTION_CONNECTED</a>               = 2             
00090 };
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a46" doxytag="Exporter.h::Collector_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Collector_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00843 {
00844         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *C = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *)Obj;
00845 
00846         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o8">ExporterPtr</a>;
00847         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll;
00848         <span class="keywordtype">int</span> Index;
00849 
00850         strncpy(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>, <span class="stringliteral">"Dcollector"</span>, <span class="keyword">sizeof</span> C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>);
00851 
00852         <span class="comment">/* Remove the Collector from Exporter's Collector list */</span>
00853         <span class="keywordflow">for</span> (Index = 0; Index &lt; E-&gt;Collectors.Length; Index++)
00854         {
00855         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
00856         <span class="keywordflow">if</span> (Coll != NULL &amp;&amp; Coll == C &amp;&amp; Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a> == C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a> &amp;&amp; strcmp(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>) == 0)
00857                 {
00858                         <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>), Index);
00859         }
00860     }
00861         
00862         <span class="keywordflow">for</span> (Index = 0; Index &lt; E-&gt;DummyCollectors.Length; Index++)
00863         {
00864         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o15">DummyCollectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
00865         <span class="keywordflow">if</span> (Coll == C)
00866                 {
00867                         <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o15">DummyCollectors</a>), Index);
00868         }
00869     }
00870 
00871         <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>));
00872         <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>));
00873 
00874         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(PS, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>);
00875 
00876         strncpy(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>, <span class="stringliteral">"Xcollector"</span>, <span class="keyword">sizeof</span> C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>);
00877 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a47" doxytag="Exporter.h::CollectorSession_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void CollectorSession_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00916 {
00917         <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>*       CS = (<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *)Obj;
00918         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a>*                        S = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a> ;
00919         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a>*                       E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
00920         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>*                      C = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> ;
00921         <span class="keywordtype">int</span>                                     Index ;
00922 
00923 
00924         strncpy(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>, <span class="stringliteral">"Dcollsess"</span>, <span class="keyword">sizeof</span> CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>);
00925 
00926         <span class="keywordflow">if</span>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o8">TmplDataTimer</a> != NULL)
00927         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o8">TmplDataTimer</a>);
00928 
00929         <span class="keywordflow">if</span>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a> != NULL)
00930         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a>);
00931 
00932         <span class="comment">/* Remove the CollectorSession from Exporter's Collector list */</span>
00933         <span class="keywordflow">for</span> (Index = 0; Index &lt; E-&gt;CollectorSessions.Length; Index++)
00934                 <span class="keywordflow">if</span>( CS == E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index] )
00935                         <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>), Index);
00936 
00937         <span class="comment">/* Remove the Collector Session from its  session */</span>
00938         <span class="keywordflow">for</span> (Index = 0; Index &lt; S-&gt;CollectorSessions.Length; Index++)
00939                 <span class="keywordflow">if</span>( CS == S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index] )
00940                         <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>), Index);
00941 
00942         <span class="comment">/* Remove the Collector Session from its Collector */</span>
00943         <span class="keywordflow">for</span> (Index = 0; Index &lt; C-&gt;CollectorSessions.Length; Index++)
00944                 <span class="keywordflow">if</span>( CS == C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index] )
00945                         <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a10">DynamicArray_RemoveAndShiftNoFree</a>(PS, &amp; (C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>), Index);
00946 
00947         strncpy(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>, <span class="stringliteral">"Xcollsess"</span>, <span class="keyword">sizeof</span> CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>);
00948 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a48" doxytag="Exporter.h::Connection_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Connection_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00882 {
00883         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *C = (<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *)Obj;
00884         <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o10">ExporterPtr</a>;
00885 
00886         strncpy(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>, <span class="stringliteral">"Dconnect"</span>, <span class="keyword">sizeof</span>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>));
00887         
00888         <span class="keywordflow">if</span>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o7">KeepAliveOUTTimerID</a> != NULL)
00889         {
00890                 <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o7">KeepAliveOUTTimerID</a>);
00891                 C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o7">KeepAliveOUTTimerID</a> = NULL;
00892         }
00893         
00894         <span class="keywordflow">if</span>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o6">KeepAliveINTimerID</a> != NULL)
00895         {
00896                 <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o6">KeepAliveINTimerID</a>);
00897                 C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o6">KeepAliveINTimerID</a> = NULL;
00898         }
00899 
00900         <span class="keywordflow">if</span>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> != NULL)
00901         {
00902                 <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a24">TL_HandleDisconnection</a>(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>);
00903                 <span class="comment">/*Platform_SleepMS(PS, 1000);*/</span>
00904         }
00905         
00906         C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> = NULL ;
00907         C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o4">Owner</a> = NULL ;
00908         C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o10">ExporterPtr</a> = NULL ;
00909 
00910         C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o1">State</a> = <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a51a21">IPDR_CONNECTION_DISCONNECTED</a> ;
00911 
00912         strncpy(C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>, <span class="stringliteral">"Xconnect"</span>, <span class="keyword">sizeof</span> C-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>);
00913 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a31" doxytag="Exporter.h::EventDataInit"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void EventDataInit           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>EventData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>enum <a class="el" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga9">IPDR_Event_t</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>EventID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Sess</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize an event structure.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>EventData</em>&nbsp;</td><td>structure to update </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>EventID</em>&nbsp;</td><td>ID to put into it </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer) (may be NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CS</em>&nbsp;</td><td>Collector Session handle (pointer) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Sess</em>&nbsp;</td><td>session (may be NULL) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">03563 {
03564     EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o0">EventID</a>                     = EventID;
03565     <span class="keywordflow">if</span> (CS) {
03566         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o1">IC</a>                  = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>;
03567     } <span class="keywordflow">else</span> {
03568         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o1">IC</a>                  = NULL;
03569     }
03570     <span class="keywordflow">if</span> (E &amp;&amp; Sess) {
03571         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o2">OutstandingDataCount</a>    = <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, Sess);
03572         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o3">UnacknowledgedDataCount</a> = <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UnacknowledgedDataCount(E, Sess);
03573     } <span class="keywordflow">else</span> {
03574         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o2">OutstandingDataCount</a>    = 0;
03575         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o3">UnacknowledgedDataCount</a> = 0;
03576     }
03577     <span class="keywordflow">if</span> (Sess) {
03578         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o4">SessionID</a>               = Sess-&gt;ID;
03579         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o5">SessionName</a>             = Sess-&gt;Name;
03580         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o6">SessionDescription</a>      = Sess-&gt;Description;
03581     } <span class="keywordflow">else</span> {
03582         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o4">SessionID</a>               = 0;
03583         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o5">SessionName</a>             = <span class="stringliteral">""</span>;
03584         EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o6">SessionDescription</a>      = <span class="stringliteral">""</span>;
03585     }
03586 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a39" doxytag="Exporter.h::Exporter_AddCollectorInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Exporter_AddCollectorInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga20">IPDR_IPAddress</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Addr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>Port</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>NumberOfActive</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>isDummy</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">IPDR_CollectorHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add a collector to a list of servers (collectors) list. <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga4">IPDR_AddCollector</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>handle to a previously created exporter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Name</em>&nbsp;</td><td>name of server (collector) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Addr</em>&nbsp;</td><td>IP address of the server (collector) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Port</em>&nbsp;</td><td>port number of the server (collector) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumberOfActive</em>&nbsp;</td><td>number of active collectors to allow</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04423 {
04424     <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>*          Coll;
04425     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>         Status;
04426         <span class="keywordtype">int</span>                     Index;
04427     <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a28">TL_PABuf</a>            paBuf;
04428 
04429     <span class="keywordflow">if</span> (!Name) {
04430         Name = <span class="stringliteral">""</span>;
04431     }
04432 
04433         <span class="keywordflow">if</span>(CH) *CH = NULL ;
04434 
04435     <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04436 
04437         <span class="keywordflow">for</span> (Index = 0; isDummy == <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a> &amp;&amp; Index &lt; E-&gt;Collectors.Length; Index++) {
04438         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
04439         <span class="keywordflow">if</span> (Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a> == Addr || strcmp(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>, Name) == 0) {
04440                         <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a171">IPDR_LEVEL_INFO</a>,
04441                        <span class="stringliteral">"Exporter_AddCollectorInternal"</span>, <span class="stringliteral">"Collector '%s' already exists"</span>, Name);
04442 
04443                         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04444             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a194">IPDR_ERR_COLLECTOR_ALREADY_EXISTS</a>;
04445         }
04446     }
04447 
04448     Status = <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a2">Object_Allocate</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a>),
04449                              <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a40">Collector_Destructor</a>,
04450                              (<span class="keywordtype">void</span> **) &amp; Coll);
04451     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04452         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04453         <span class="keywordflow">return</span> Status;
04454     }
04455 
04456         Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a2">DynamicArray_Create</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>),
04457                                  <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a3">INITIAL_COLLECTOR_CONNECTIONS_ARRAY_CAPACITY</a>);
04458 
04459         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04460         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
04461         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04462         <span class="keywordflow">return</span> Status;
04463     }
04464 
04465         Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a2">DynamicArray_Create</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>),
04466                                  <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a4">INITIAL_COLLECTOR_COLLECTORSESSIONS_ARRAY_CAPACITY</a>);
04467 
04468         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04469         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
04470         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04471         <span class="keywordflow">return</span> Status;
04472     }
04473 
04474     strncpy(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>, <span class="stringliteral">"COLLECTOR"</span>, <span class="keyword">sizeof</span>(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o0">eyecatcher</a>));
04475     {
04476         <span class="keywordtype">char</span>* tmpName;
04477         Status = <a class="code" href="../../d0/dfd/_for_doxygen_2src_2_common_2_common_util_8c.html#a5">Util_StrDup</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Name, &amp;tmpName);
04478         Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a> = tmpName;
04479     }
04480     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04481         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
04482         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04483         <span class="keywordflow">return</span> Status;
04484     }
04485 
04486     Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a> = Addr;
04487     Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o5">Port</a> = Port;
04488     Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o6">NumOfConnections</a> = NumberOfActive;
04489         Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o8">ExporterPtr</a> = E;
04490         Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o9">isDummy</a> = isDummy ;
04491 
04492         <span class="keywordflow">for</span>(Index = 0; Index &lt; NumberOfActive; Index++)
04493         {
04494                 Status = <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a43">Exporter_AddIPDRConnectionToCollector</a>( E, Coll, NULL );
04495                 <span class="keywordflow">if</span>(<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
04496                 {
04497                         <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a28">Log_Write</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a169">IPDR_LEVEL_ERROR</a>,
04498                    <span class="stringliteral">"Exporter_AddCollectorInternal"</span>, <span class="stringliteral">"Failed To Add IPDRConnection To Collector"</span>);
04499                 }
04500         }
04501         
04502         <span class="keywordflow">if</span>(<a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a> == isDummy)
04503         {
04504                 Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a12">DynamicArray_AddElement</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, 
04505                                                                         &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o15">DummyCollectors</a>), Coll,
04506                                                                         &amp; Index);
04507         }
04508     <span class="keywordflow">else</span>
04509         {
04510                 Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a12">DynamicArray_AddElement</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, 
04511                                                                         &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>), Coll,
04512                                                                         &amp; Index);
04513         }
04514     
04515         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04516         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Coll);
04517         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04518         <span class="keywordflow">return</span> Status;
04519     }
04520 
04521 
04522     <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a32">Log_Write4</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a171">IPDR_LEVEL_INFO</a>,
04523                <span class="stringliteral">"Exporter_AddCollectorInternal"</span>,
04524                <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a11">MSG_EXPORTER_ADD_SERVER</a>, Name,
04525                <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a16">TL_PrintAddressAndPort</a>(Addr, Port, paBuf),
04526                NumberOfActive,(<a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>==isDummy)?<span class="stringliteral">"Dummy"</span>:<span class="stringliteral">"Real"</span>);
04527 
04528         <span class="keywordflow">if</span>(CH) *CH = Coll ;
04529 
04530     <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04531     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
04532 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a42" doxytag="Exporter.h::Exporter_AddIPDRConnectionToCollector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Exporter_AddIPDRConnectionToCollector           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Coll</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">00953 {
00954         <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
00955         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC;
00956         <span class="keywordtype">int</span> Index ;
00957         
00958         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00959 
00960 
00961         Status = <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a2">Object_Allocate</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a>),
00962                                         <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a41">Connection_Destructor</a>,
00963                                         (<span class="keywordtype">void</span> **) &amp; IC);
00964         <span class="keywordflow">if</span>(<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00965         {
00966                 <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a169">IPDR_LEVEL_ERROR</a>,
00967                            <span class="stringliteral">"Exporter_ConnectCallback"</span>, <span class="stringliteral">"Object_Allocate Error, Status: %d"</span>,
00968                            Status);
00969                 <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00970                 <span class="keywordflow">return</span> Status ;
00971         }
00972 
00973         strncpy(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>, <span class="stringliteral">"CONNEC"</span>, <span class="keyword">sizeof</span>(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o0">eyecatcher</a>));
00974         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o1">State</a> = <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a51a21">IPDR_CONNECTION_DISCONNECTED</a> ;
00975         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o2">Autoconnect</a> = (Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o6">NumOfConnections</a> == 0)?<a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a>:<a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>;
00976         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> = C;
00977         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o4">Owner</a> = Coll;
00978         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o5">ConnectResponseTimerID</a> = NULL;
00979         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o6">KeepAliveINTimerID</a> = NULL;
00980         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o7">KeepAliveOUTTimerID</a> = NULL;
00981         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o8">RemoteKeepAliveInterval</a> = (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o4">KeepAliveInterval</a>)+500;
00982         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o9">isDummy</a> = Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o9">isDummy</a> ;
00983         IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o10">ExporterPtr</a> = E;
00984 
00985         <span class="keywordflow">if</span>(C != NULL)
00986                 C-&gt;<a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html#o11">Owner</a> = IC;
00987 
00988         Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, &amp;(Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>), IC, &amp;Index);
00989         <span class="keywordflow">if</span>(<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
00990         {
00991                 <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a169">IPDR_LEVEL_ERROR</a>,
00992                            <span class="stringliteral">"Exporter_ConnectCallback"</span>, <span class="stringliteral">"DynamicArray_AppendElement Error, Status: %d"</span>,
00993                            Status);
00994                 <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00995                 <span class="keywordflow">return</span> Status ;
00996         }
00997         
00998         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
00999 
01000         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
01001 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a40" doxytag="Exporter.h::Exporter_AssocCollectorSession_Internal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Exporter_AssocCollectorSession_Internal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>C</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned short&nbsp;</td>
          <td class="mdname" nowrap> <em>Priority</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Associates collector with the session <dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga7">IPDR_AssocCollectorSession</a></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>- Exporter </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>- Session to associate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>C</em>&nbsp;</td><td>- Collector to associate </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Priority</em>&nbsp;</td><td>- Priority to associate</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04550 {
04551         <span class="keywordtype">int</span>                             Index, SIndex, CIndex ;
04552     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>                 Status;
04553         <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>*       CS = NULL ;
04554         <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>*       lookForCS = NULL ;
04555         <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a28">TL_PABuf</a>                        paBuf;
04556 
04557         <span class="keywordflow">if</span> ( !E || !S || !C ) {
04558         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a181">IPDR_ERR_INVALID_VALUE</a>;
04559     }
04560 
04561         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04562 
04563         <span class="keywordflow">if</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> == <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>)
04564         {
04565                 <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a169">IPDR_LEVEL_ERROR</a>,
04566                                 <span class="stringliteral">"Exporter_AssocCollectorSession_Internal"</span>,
04567                                 <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a121">MSG_EXPORTER_SESSION_MUST_STOP2</a>,
04568                                 S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>);
04569                 <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04570                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a214">IPDR_ERR_SESSION_IS_RUNNING</a>;
04571         }
04572 
04573 
04574         <span class="keywordflow">for</span>(Index = 0;Index &lt; E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a> ; Index++)
04575         {
04576                 lookForCS = E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[Index];
04577 
04578                 <span class="keywordflow">if</span>( (lookForCS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a> == S) &amp;&amp; (lookForCS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> == C) )
04579                 {
04580                         CS = lookForCS;
04581                 }
04582         }
04583 
04584         <span class="comment">/* Association exists, just change priority*/</span>
04585         <span class="keywordflow">if</span>( CS != NULL )
04586         {
04587                 <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a32">Log_Write4</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a171">IPDR_LEVEL_INFO</a>,
04588                <span class="stringliteral">"Exporter_AssocCollectorSession_Internal"</span>,
04589                <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a31">MSG_EXPORTER_ASSOC_COLL_SESSION</a>,
04590                            C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>,
04591                <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a15">TL_PrintAddress</a>(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>, paBuf),
04592                            S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>,
04593                Priority);
04594                 CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o6">Priority</a> = Priority;
04595                 <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04596                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a179">IPDR_ERR_COLLECTORSESSION_REASSOC</a>;
04597         }
04598 
04599         <span class="comment">/* Association does not exists yet. Need to make a new one*/</span>
04600         Status = <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a2">Object_Allocate</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a>),
04601                                                         <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a42">CollectorSession_Destructor</a>,
04602                                                         (<span class="keywordtype">void</span> **) &amp; CS);
04603         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04604                 <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04605                 <span class="keywordflow">return</span> Status;
04606         }
04607 
04608         strncpy(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>, <span class="stringliteral">"COLLSESS"</span>, <span class="keyword">sizeof</span>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o0">eyecatcher</a>));
04609 
04610         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> = <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>;
04611         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o2">ExporterPtr</a> = E;
04612         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a> = S;
04613         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o4">Collector</a> = C;
04614         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a> = NULL;
04615         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o6">Priority</a> = Priority;
04616 
04617     <span class="comment">/*</span>
04618 <span class="comment">        TODO:</span>
04619 <span class="comment">        TmplDataTimer;</span>
04620 <span class="comment">    WindowSizeTimer;</span>
04621 <span class="comment">          IPDR_Statistics Statistics;</span>
04622 <span class="comment">    IPDR_Time PrevStatisticsTime;</span>
04623 <span class="comment">            IPDR_Statistics PrevStatistics;</span>
04624 <span class="comment">            IPDR_EventData LastEvent;*/</span>
04625 
04626 
04627         Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>), CS, &amp;Index);
04628     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04629         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, CS);
04630         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04631         <span class="keywordflow">return</span> Status;
04632     }
04633 
04634 
04635     Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>), CS, &amp;SIndex);
04636     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04637                 <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, CS);
04638         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04639         <span class="keywordflow">return</span> Status;
04640     }
04641 
04642     Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a11">DynamicArray_AppendElement</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; (C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o1">CollectorSessions</a>), CS, &amp;CIndex);
04643     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
04644                 <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, CS);
04645         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04646         <span class="keywordflow">return</span> Status;
04647     }
04648 
04649         <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a32">Log_Write4</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a171">IPDR_LEVEL_INFO</a>,
04650                <span class="stringliteral">"Exporter_AssocCollectorSession_Internal"</span>,
04651                <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a31">MSG_EXPORTER_ASSOC_COLL_SESSION</a>,
04652                            C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o3">Name</a>,
04653                <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a15">TL_PrintAddress</a>(C-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o4">Addr</a>, paBuf),
04654                            S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>,
04655                Priority);
04656 
04657 <span class="preprocessor">#ifdef NOTDONEYET</span>
04658 <span class="preprocessor"></span>    ExporterMIB_UpdateTemplates(S);
04659 <span class="preprocessor">#endif</span>
04660 <span class="preprocessor"></span>    <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
04661 
04662         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
04663 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a34" doxytag="Exporter.h::Exporter_BuildRecord"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Exporter_BuildRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/d38/struct_i_p_d_r__tag___chunks_manager.html">ChunksManager</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CMgr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>struct <a class="el" href="../../da/d62/struct_i_p_d_r__tag___template.html">IPDR_tag_Template</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>Tmpl</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Data</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned long *&nbsp;</td>
          <td class="mdname" nowrap> <em>RecordSize</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Given a chunks manager, session, template and raw data construct a new record in the chunks manager.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>CMgr</em>&nbsp;</td><td>chunks manager. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>session handle (pointer). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Tmpl</em>&nbsp;</td><td>template. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Data</em>&nbsp;</td><td>the data to be output (as described by the template) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>buffer handle referencing the new record (output) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RecordSize</em>&nbsp;</td><td>size of generated record (output)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04078 {
04079     DataMessage *Header;
04080 
04081     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o8">BuildFunc</a>(CMgr, S, (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Tmpl,
04082                                           Data, BH, RecordSize);
04083     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
04084         <span class="keywordflow">return</span> Status;
04085 
04086     Header = (DataMessage *) BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>;
04087     <a class="code" href="../../dd/d0a/_for_doxygen_2src_2_exporter_2_exporter_protocol_8c.html#a40">ExporterProtocol_FillHeader</a>(S, BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>, <a class="code" href="../../d2/dda/_for_doxygen_2src_2_common_2_protocol_8h.html#a39">IPDR_MSG_DATA</a>, (*RecordSize));
04088 
04089     <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a8">IPDR_SET_HTONS</a>(Header-&gt;TemplateID, Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a>);
04090         <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a8">IPDR_SET_HTONS</a>(Header-&gt;ConfigurationID, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o3">ConfigurationID</a>);
04091     <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a10">IPDR_SET_HTONLL</a>(Header-&gt;sequenceNum, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o6">DSN</a>);
04092         <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a9">IPDR_SET_HTONL</a>(Header-&gt;dataLength, (*RecordSize) - <span class="keyword">sizeof</span>(DataMessage));
04093     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
04094 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a37" doxytag="Exporter.h::Exporter_CreateSessionInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Exporter_CreateSessionInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char&nbsp;</td>
          <td class="mdname" nowrap> <em>ID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Description</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>SH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a44" doxytag="Exporter.h::Exporter_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Exporter_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete resources associated with a client. <dl compact><dt><b>Note:</b></dt><dd>not static --- used by MemoryManagement.c</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Obj</em>&nbsp;</td><td>object to delete </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00772 {
00773 
00774     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = (<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *) Obj;
00775 
00776     strncpy(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o0">eyecatcher</a>, <span class="stringliteral">"Dclient"</span>, <span class="keyword">sizeof</span> E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o0">eyecatcher</a>);
00777 
00778     <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(PS, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o3">VendorString</a>);
00779     <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a20">Platform_MemoryFree</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o34">CSessions</a>);
00780 
00781     <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(PS, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o17">StatisticsTimerID</a>);
00782         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(PS, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o18">AutoconnectTimerID</a>);
00783 
00784     <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a17">Platform_UnregisterSocketAndClear</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o10">ProtocolInfoEvent</a>);
00785     <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a44">Platform_CloseAndInvalidate</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o9">ProtocolInfoSocket</a>);
00786 
00787     <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;Destroy(E);
00788 
00789         <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>));
00790         <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>));
00791         <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o16">CollectorSessions</a>));
00792         <a class="code" href="../../d6/d41/_for_doxygen_2src_2_common_2_console_8c.html#a26">Console_Delete</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o12">ConsolePtr</a>));
00793 
00794     <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a4">TL_Shutdown</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o11">TransportHandle</a>);
00795 
00796     <span class="comment">/* Templates_Finalize ... not needed and no such thing */</span>
00797     <a class="code" href="../../d9/dea/_for_doxygen_2src_2_common_2_log_8c.html#a22">Log_Disable</a>(&amp; E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>);
00798     <span class="comment">/* TCPMsgs_Remove     ... not needed */</span>
00799     <span class="comment">/* CommonMsgs_Remove  ... not needed */</span>
00800     <span class="comment">/* ExporterMsgs_Remove  ... not needed */</span>
00801 
00802     <a class="code" href="../../d9/dea/_for_doxygen_2src_2_common_2_log_8c.html#a15">Log_Finalize</a>(&amp; E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>);
00803     strncpy(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o0">eyecatcher</a>, <span class="stringliteral">"Xclient"</span>, <span class="keyword">sizeof</span> E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o0">eyecatcher</a>);
00804 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a50" doxytag="Exporter.h::Exporter_GetCapabilities"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int Exporter_GetCapabilities           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>E</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">03950 {
03951         <span class="keywordtype">int</span>  exporterCapabilities = 0;
03952         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o2">StructureSupport</a> == <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>)
03953                 exporterCapabilities = exporterCapabilities | 0x1u ;
03954         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o0">MultiSession</a> == <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>)
03955                 exporterCapabilities = exporterCapabilities | 0x2u ;
03956         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o11">caps</a>.<a class="code" href="../../d3/d7e/struct_exporter_capabilities.html#o1">TemplateNegotiation</a> == <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>)
03957                 exporterCapabilities = exporterCapabilities | 0x4u ;
03958         <span class="keywordflow">return</span> exporterCapabilities ;
03959 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a36" doxytag="Exporter.h::Exporter_PrepareToSend"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Exporter_PrepareToSend           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called before sending a record in order to validate the window size.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter hadle (pointer) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>session handle (pointer).</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise.</dd></dl>
Srv-&gt;Conn || <div class="fragment"><pre class="fragment">04109 {
04110     <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS;
04111     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>;
04112 
04113     <span class="keywordflow">if</span> (TC == NULL)
04114         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a205">IPDR_ERR_NO_ACTIVE_COLLECTOR</a>;
04115 
04116     CS = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a>;
04117     <span class="keywordflow">if</span> (CS == NULL || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> != <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a>) {
04118         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a205">IPDR_ERR_NO_ACTIVE_COLLECTOR</a>;
04119     }
04120 
04121     <span class="comment">/* The following if statement is wrong ... it sets the timeout</span>
04122 <span class="comment">       only when we exceed the window. But we should have the timer</span>
04123 <span class="comment">       going for all records, using the window to stop sending</span>
04124 <span class="comment">       anything more unless we have an acknowledgment. Instead, the</span>
04125 <span class="comment">       code is now in Exporter_SendRecord(). */</span>
04126 
04127     <span class="comment">/* if (EXPORTER_QHANDLER-&gt;OutstandingDataCount(C, S) &gt;</span>
04128 <span class="comment">       C-&gt;Parameters.WindowSize &amp;&amp;</span>
04129 <span class="comment">       Srv-&gt;WindowSizeTimer == NULL) {</span>
04130 <span class="comment">    */</span>
04131 
04132     <span class="comment">/* There is no good reason to check for window size ... the TCP buffer</span>
04133 <span class="comment">       will almost always fill up sooner unless something is awfully wrong</span>
04134 <span class="comment">       with the receiver (the TCP layer is ACKing but the collector can't</span>
04135 <span class="comment">       handle the records. So, don't bother doing this test. */</span>
04136 
04137 <span class="preprocessor">#if defined(USE_WINDOWSIZE)</span>
04138 <span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S) &gt; E-&gt;Parameters.WindowSize) {
04139         <span class="comment">/* Window is full ... don't send anything.  Note that this isn't</span>
04140 <span class="comment">           an error in the normal sense ... it's just our way of</span>
04141 <span class="comment">           indicating the window is full and we're not sending anything</span>
04142 <span class="comment">           more. */</span>
04143         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a180">IPDR_ERR</a>;
04144     }
04145 <span class="preprocessor">#endif</span>
04146 <span class="preprocessor"></span>
04147     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
04148 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a33" doxytag="Exporter.h::Exporter_Reconfigure"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Exporter_Reconfigure           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>E</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handle reconfiguration of the client (transmitter) due to changes in parameters (this may close the current connections open by the client (transmitter) to server (collector)s and open connections to the console).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer) to reconfigure</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">03787 {
03788     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S;
03789         <a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *Coll;
03790         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC;
03791     <span class="keywordtype">int</span> i, j;
03792     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga9">IPDR_IPAddress</a> Addr;
03793     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span> Port;
03794     <a class="code" href="../../db/d5a/struct_chunk_allocator.html">ChunkAllocator</a> Alloc;
03795     <span class="keyword">const</span> <span class="keywordtype">char</span> *LocalAddr;
03796         <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a> transportRestarted = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a>;
03797 
03798     <span class="keywordflow">if</span> (! E) {
03799         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
03800     }
03801 
03802         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03803         
03804 <span class="preprocessor">#if defined(SNMP_SUPPORT)</span>
03805 <span class="preprocessor"></span>        Platform_MIB_UnSetExporterHandle(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>);
03806 <span class="preprocessor">#endif</span>
03807 <span class="preprocessor"></span>
03808         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o17">StatisticsTimerID</a>));
03809         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o18">AutoconnectTimerID</a>));
03810 
03811     <span class="comment">/* reconfigure the console */</span>
03812     <a class="code" href="../../d6/d41/_for_doxygen_2src_2_common_2_console_8c.html#a24">Console_Reconfigure</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o12">ConsolePtr</a>), &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>));
03813 
03814     <span class="comment">/* reconfigure the transport layer - (used to reconfigure memory usage) */</span>
03815     <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a23">TL_Reconfigure</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a2">EXPORTER_TRANSPORT</a>);
03816 
03817     <span class="comment">/* check if the client port / address have changed and recreate</span>
03818 <span class="comment">       the transport layer if needed */</span>
03819 
03820     LocalAddr = <a class="code" href="../../d5/dd6/_for_doxygen_2src_2_common_2_parameters_handler_8c.html#a15">ParametersHandler_GetStringParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
03821                                                  <a class="code" href="../../d8/d8f/_for_doxygen_2src_2_common_2_configuration_names_8h.html#a142">STR_configuration_exporterAddress</a>);
03822     <span class="keywordflow">if</span> (LocalAddr == NULL || strlen(LocalAddr) == 0)
03823         Addr = <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga25">IPDR_DEFAULT_ADDRESS</a>;
03824     <span class="keywordflow">else</span>
03825         Addr = <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a17">TL_ParseAddress</a>(LocalAddr);
03826 
03827     Port =
03828         (<span class="keywordtype">unsigned</span> short) <a class="code" href="../../d5/dd6/_for_doxygen_2src_2_common_2_parameters_handler_8c.html#a17">ParametersHandler_GetIntParam</a>(&amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
03829                                                        <a class="code" href="../../d8/d8f/_for_doxygen_2src_2_common_2_configuration_names_8h.html#a143">STR_configuration_exporterPort</a>);
03830 
03831     <span class="keywordflow">if</span> (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o5">LocalAddr</a> != Addr || E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o6">LocalPort</a> != Port) {
03832 
03833                 transportRestarted = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a> ;
03834         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o5">LocalAddr</a> = Addr;
03835         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o6">LocalPort</a> = Port;
03836                 
03837                 <span class="keywordflow">for</span> ( i = 0 ; i &lt; E-&gt;Sessions.Length ; i++ )
03838                 {
03839                         S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *)E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03840                         <span class="keywordflow">if</span>(S != NULL)
03841                         {
03842                                 <a class="code" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga13">IPDR_StopSession</a>(S, <a class="code" href="../../df/dcb/group___i_p_d_r__key__type__attributes.html#gga66a122">IPDR_STOP_REASON_EXIT</a>, 1000);
03843                         }
03844                 }
03845                 <span class="keywordflow">for</span> ( i = 0 ; i &lt; E-&gt;DummyCollectors.Length ; i++ )
03846                 {
03847                         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *)E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o15">DummyCollectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03848                         <span class="keywordflow">if</span>(Coll != NULL)
03849                         {
03850                                 <span class="keywordflow">for</span> ( j = 0 ; j &lt; Coll-&gt;IPDRConnections.Length ; j++ )
03851                                 {
03852                                         IC = (<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *)Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
03853                                         <span class="keywordflow">if</span>(IC &amp;&amp; IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>)
03854                                         {
03855                                                 <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a24">TL_HandleDisconnection</a>(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>);
03856                                         }
03857                                 }
03858                         }
03859                 }
03860                 <span class="keywordflow">for</span> ( i = 0 ; i &lt; E-&gt;Collectors.Length ; i++ )
03861                 {
03862                         Coll = (<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html">Collector</a> *)E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o14">Collectors</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03863                         <span class="keywordflow">if</span>(Coll != NULL)
03864                         {
03865                                 <span class="keywordflow">for</span> ( j = 0 ; j &lt; Coll-&gt;IPDRConnections.Length ; j++ )
03866                                 {
03867                                         IC = (<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *)Coll-&gt;<a class="code" href="../../de/d0d/struct_i_p_d_r__tag___collector.html#o2">IPDRConnections</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
03868                                         <span class="keywordflow">if</span>(IC &amp;&amp; IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>)
03869                                         {
03870                                                 <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a24">TL_HandleDisconnection</a>(IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>);
03871                                         }
03872                                 }
03873                         }
03874                 }
03875 
03876         <span class="comment">/* shutdown the current client's transport layer */</span>
03877         <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a4">TL_Shutdown</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a2">EXPORTER_TRANSPORT</a>);
03878 
03879         <span class="comment">/* recreate a new transport layer */</span>
03880         <a class="code" href="../../d5/d9f/_for_doxygen_2src_2_common_2_chunks_manager_8c.html#a15">ChunksManager_GetDefaultChunkAllocator</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, &amp; Alloc);
03881 
03882         <span class="comment">/* initialize the transport layer */</span>
03883         <span class="comment">/* We don't check the return code because what can we do</span>
03884 <span class="comment">           anyway if it's bad? But this is not good style ... */</span>
03885         (void)<a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a2">TL_InitializePassive</a>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o29">ExporterLog</a>), Alloc, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o5">LocalAddr</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o6">LocalPort</a>,
03886                                    &amp; <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a12">Exporter_DefaultHandlers</a>, E,
03887                                    &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o19">ParamsHandler</a>),
03888                                    &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o11">TransportHandle</a>));
03889         }
03890 
03891     <span class="comment">/* reinitialize the client parameters */</span>
03892     <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a29">Exporter_InitializeParameters</a>(E);
03893 
03894         <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a27">Exporter_InitDebugLevels</a>(E);
03895 
03896     <span class="comment">/* reconfigure the current queues */</span>
03897     <span class="keywordflow">for</span> (i = 0; i &lt; E-&gt;Sessions.Length; i++) {
03898         S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03899         <span class="keywordflow">if</span> (<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>) {
03900             <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;Reconfigure(E, S);
03901         }
03902     }
03903 
03904         <span class="keywordflow">if</span> (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o2">StatisticsInterval</a>)
03905         {
03906                 <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a11">Platform_RegisterPeriodicTimer</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
03907                                                                         <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a36">Exporter_StatisticsReportCallback</a>, E,
03908                                                                         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o2">StatisticsInterval</a>,
03909                                                                         &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o17">StatisticsTimerID</a>));
03910     }
03911 
03912         <span class="keywordflow">if</span>(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o5">AutoconnectInterval</a>)
03913         {
03914                 <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a11">Platform_RegisterPeriodicTimer</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
03915                                                                         <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a25">Exporter_AutoconnectCallback</a>, E,
03916                                                                         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o5">AutoconnectInterval</a>,
03917                                                                         &amp; (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o18">AutoconnectTimerID</a>));
03918         }
03919 
03920 <span class="preprocessor">#if defined(SNMP_SUPPORT)</span>
03921 <span class="preprocessor"></span>        Platform_MIB_SetExporterHandle(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o3">PS</a>, E);
03922 <span class="preprocessor">#endif</span>
03923 <span class="preprocessor"></span>
03924         <span class="keywordflow">if</span>(transportRestarted == <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>)
03925         {
03926                 <span class="keywordflow">for</span> ( i = 0 ; i &lt; E-&gt;Sessions.Length ; i++ )
03927                 {
03928                         S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *)E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o13">Sessions</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03929                         <span class="keywordflow">if</span>(S != NULL)
03930                         {
03931                                 <a class="code" href="../../d3/d0a/group___i_p_d_r__sessions.html#ga12">IPDR_StartSession</a>( S, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o11">Negotiable</a> );
03932                         }
03933                 }
03934         }
03935 
03936         
03937         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
03938         
03939     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
03940 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a35" doxytag="Exporter.h::Exporter_SendRecord"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Exporter_SendRecord           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html">BufferHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>BH</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Immediate</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>duplicate</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send a record to the currently active server.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>session handle (pointer). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>BH</em>&nbsp;</td><td>buffer handle referencing the record. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Immediate</em>&nbsp;</td><td>whether or not to send this immediately or try to delay it to get more into the buffer (recommended to leave this as TRUE because if we're outputting to TCP, the TCP stack will typically delay 200ms anyway).</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">04170 {
04171     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a> Status;
04172     <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o13">ActiveCS</a>;
04173 
04174     <span class="keywordflow">if</span> (CS == NULL
04175                 || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a> == NULL
04176                 || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a> == NULL
04177                 || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> != <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a>) {
04178         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a205">IPDR_ERR_NO_ACTIVE_COLLECTOR</a>;
04179     }
04180 
04181         ((DataMessage *) BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>)-&gt;Flags = 0;
04182 
04183     <span class="keywordflow">if</span> (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o7">SyncNeeded</a>)
04184         ((DataMessage *) BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>)-&gt;Flags |= <a class="code" href="../../d2/dda/_for_doxygen_2src_2_common_2_protocol_8h.html#a16">IPDR_SYNC_FLAG</a>;
04185     <span class="keywordflow">if</span> (duplicate)
04186         ((DataMessage *) BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>)-&gt;Flags |= <a class="code" href="../../d2/dda/_for_doxygen_2src_2_common_2_protocol_8h.html#a17">IPDR_DUPLICATE_FLAG</a>;
04187 
04188     <span class="keywordflow">switch</span> (((MessageHeader*)(BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>))-&gt;MessageID) {
04189     <span class="keywordflow">case</span> <a class="code" href="../../d2/dda/_for_doxygen_2src_2_common_2_protocol_8h.html#a39">IPDR_MSG_DATA</a>:
04190         <span class="comment">/* Register a timer if there isn't one already (i.e., we're the</span>
04191 <span class="comment">           first record that hasn't been ACKed). */</span>
04192         <span class="keywordflow">if</span> (CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a> == NULL) {
04193             <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a9">Platform_RegisterTimer</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>,
04194                                    <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a44">Exporter_WindowSizeTimerCallback</a>, CS,
04195                                    E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o0">WindowTimeout</a>,
04196                                    &amp; (CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a>));
04197         }
04198         <span class="comment">/*FALLTHROUGH*/</span>
04199     <span class="keywordflow">case</span> <a class="code" href="../../d2/dda/_for_doxygen_2src_2_common_2_protocol_8h.html#a26">IPDR_MSG_DATA_ACK</a>:
04200         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a15">Log_ShouldWrite</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a172">IPDR_LEVEL_DEBUG</a>)) {
04201             <a class="code" href="../../d5/d59/_for_doxygen_2src_2_exporter_2_protocol_debug_8c.html#a4">ProtocolDebug_PrintOutgoingMessage</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>, BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a172">IPDR_LEVEL_DEBUG</a>);
04202         }
04203         <span class="keywordflow">break</span>;
04204     <span class="keywordflow">default</span>:
04205         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a15">Log_ShouldWrite</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a171">IPDR_LEVEL_INFO</a>)) {
04206             <a class="code" href="../../d5/d59/_for_doxygen_2src_2_exporter_2_protocol_debug_8c.html#a4">ProtocolDebug_PrintOutgoingMessage</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>, BH-&gt;<a class="code" href="../../d5/d08/struct_i_p_d_r__tag___buffer_handle.html#o1">Data</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a171">IPDR_LEVEL_INFO</a>);
04207         }
04208     }
04209 
04210     Status = <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a9">TL_Send</a>(CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>, BH, Immediate);
04211     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
04212         <span class="keywordflow">return</span> Status;
04213 
04214     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o21">Statistics</a>.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>++;
04215     CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o10">Statistics</a>.<a class="code" href="../../d7/d1e/struct_i_p_d_r___statistics.html#o0">TransmittedRecords</a>++;
04216 
04217     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o7">SyncNeeded</a> = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a>;
04218 
04219     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
04220 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a32" doxytag="Exporter.h::Exporter_TriggerEvent"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Exporter_TriggerEvent           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d9b/group___i_p_d_r__logging.html#ga8">IPDR_DebugLevel</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>loggingLevel</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const <a class="el" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>EventData</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>CS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>const char *&nbsp;</td>
          <td class="mdname" nowrap> <em>Msg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>&nbsp;</td>
          <td class="mdname" nowrap> <em>...</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Cause an event's triggers to be fired.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>exporter handle (pointer) handle </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>loggingLevel</em>&nbsp;</td><td>logging level (debug, info, etc.) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>EventData</em>&nbsp;</td><td>data to be updated </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CS</em>&nbsp;</td><td>Collector session for record event in LastEvent -- NULL if you don't want it recorded </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Msg</em>&nbsp;</td><td>message to be put into the event data </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>...</em>&nbsp;</td><td>parameters to Msg </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">03606 {
03607     <span class="keyword">const</span> <span class="keywordtype">char</span>* eventStr;
03608     va_list Args;
03609 
03610     eventStr = <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#ga4">IPDR_EventMsg</a>(EventData);
03611 
03612     <span class="keywordflow">if</span> (EventData-&gt;<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o0">EventID</a> == <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga6a152">IPDR_EVENT_RECORD_LOST</a>) {
03613         loggingLevel = <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a172">IPDR_LEVEL_DEBUG</a>; <span class="comment">/* Prevent a flood of messages */</span>
03614     }
03615 
03616     va_start(Args, Msg);
03617     vsprintf(E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o36">EventLine</a>, Msg, Args);
03618     va_end(Args);
03619 
03620     <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, loggingLevel,
03621                <span class="stringliteral">"Exporter_TriggerEvent"</span>,
03622                <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a29">MSG_EXPORTER_TRIGGER_EVENT</a>,
03623                eventStr, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o36">EventLine</a>);
03624 
03625     <span class="keywordflow">if</span> (E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o23">EventCallbackDetailed</a> != NULL) {
03626         E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o23">EventCallbackDetailed</a>(EventData, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o36">EventLine</a>, E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o24">EventCallbackDetailedArg</a>);
03627     }
03628 
03629     <span class="keywordflow">if</span> (CS) {
03630         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o13">LastEvent</a> = *EventData;
03631     }
03632 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a41" doxytag="Exporter.h::Exporter_TriggeTemplateChangedCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Exporter_TriggeTemplateChangedCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>S</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create a structure containing all currently enabled keys and trigger the templates change callback.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>exporter handle (pointer)</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">03456 {
03457     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> NumTemplates;
03458     <a class="code" href="../../df/d3e/struct_i_p_d_r___template.html">IPDR_Template</a> *Tmpls;
03459     <a class="code" href="../../d9/d12/struct_i_p_d_r___key.html">IPDR_Key</a> *Keys;
03460     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl, *Tmpl1;
03461     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *K, *K1;
03462     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC;
03463         <a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> TH;
03464     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, j, k, m;
03465 
03466     <span class="keywordflow">if</span> (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o21">TemplateChangedCallback</a> == NULL)
03467         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
03468 
03469     <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a15">DynamicArray_CountObjects</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>), &amp; NumTemplates);
03470 
03471     <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a30">Platform_Check_MEMORYALLOCATEVEC</a>(SESSION_PLATFORM, NumTemplates, Tmpls, {});
03472 
03473     <span class="keywordflow">for</span> (j = 0, i = 0; i &lt; S-&gt;Templates.Length; i++) {
03474         Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03475         <span class="keywordflow">if</span> (Tmpl == NULL)
03476             <span class="keywordflow">continue</span>;
03477                 TH.<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a> = i;
03478                 TH.<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o1">s</a> = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>;
03479         Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o0">TemplateID</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a>;
03480         Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o1">SchemaName</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>;
03481                 Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o2">TypeName</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o2">TypeName</a>;
03482         Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o3">NumKeys</a> = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>;
03483 
03484         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a30">Platform_Check_MEMORYALLOCATEVEC</a>(SESSION_PLATFORM, Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>, Keys, {});
03485 
03486         <span class="keywordflow">for</span> (k = 0; k &lt; Tmpl-&gt;Keys.Length; k++) {
03487 
03488             K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[k];
03489             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o0">KeyID</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a>;
03490             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o1">KeyTypeID</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o1">KeyTypeID</a>;
03491             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o2">KeyName</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>;
03492             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o3">KeyLabel</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o3">Label</a>;
03493             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o4">KeyHelp</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o4">Help</a>;
03494             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o5">Enabled</a> = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a>;
03495             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o6">AccessType</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o6">AccessType</a>;
03496             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o7">ExtraData</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o7">ExtraData</a>;
03497             Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o8">KeyAccessor</a> = K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o8">KeyAccessor</a>;
03498 
03499             TC = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>;
03500 
03501                 if (TC == NULL || j &gt;= TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a> || TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j] == NULL)
03502                                 <span class="keywordflow">continue</span>;
03503 
03504                         Tmpl1 = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
03505 
03506                         <span class="comment">/* find the matching key */</span>
03507                         for (m = 0; m &lt; Tmpl1-&gt;Keys.Length; m++) {
03508                                 K1 = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Tmpl1-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[m];
03509                                 if (K1-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a> == K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a>)
03510                                         Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o5">Enabled</a> = K1-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>;
03511                         }
03512         }
03513         Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o4">Keys</a> = Keys;
03514         j++;
03515 
03516     }
03517 
03518         <span class="keywordflow">if</span>(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o21">TemplateChangedCallback</a> != NULL)
03519         S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o21">TemplateChangedCallback</a>(S, Tmpls, NumTemplates, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o22">TemplateChangedArg</a>);
03520 
03521         <span class="keywordflow">for</span> (j = 0, i = 0; i &lt; TC-&gt;Templates.Length; i++)
03522         {
03523                 Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
03524                 Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o1">SchemaName</a> = NULL ;
03525                 Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o2">TypeName</a> = NULL ;
03526                 <span class="keywordflow">for</span> (k = 0; k &lt; Tmpl-&gt;Keys.Length; k++)
03527                 {
03528                         K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[k];
03529                         <span class="keywordflow">if</span> (K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a> == Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o4">Keys</a>[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o0">KeyID</a>)
03530                         {
03531                                 K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a> = Tmpls[j].<a class="code" href="../../df/d3e/struct_i_p_d_r___template.html#o4">Keys</a>[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o5">Enabled</a>;
03532                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o2">KeyName</a> = NULL ;
03533                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o3">KeyLabel</a> = NULL ;
03534                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o4">KeyHelp</a> = NULL ;
03535                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o7">ExtraData</a> = NULL ;
03536                                 Keys[k].<a class="code" href="../../d9/d12/struct_i_p_d_r___key.html#o8">KeyAccessor</a> = NULL ;
03537                         }
03538                 }
03539         }
03540     <span class="keywordflow">for</span> (j = 0; j &lt; NumTemplates; j++)
03541         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a20">Platform_MemoryFree</a>(SESSION_PLATFORM, Tmpls[j].Keys);
03542     <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a20">Platform_MemoryFree</a>(SESSION_PLATFORM, Tmpls);
03543 
03544     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
03545 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a49" doxytag="Exporter.h::Exporter_WindowSizeTimerCallback"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Exporter_WindowSizeTimerCallback           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>Arg</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Callback invoked upon data timeout with no ACK.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Arg</em>&nbsp;</td><td>callback argument (Server) </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">01184 {
01185     <a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *CS = (<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html">CollectorSession</a> *) Arg;
01186     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o3">SessionPtr</a>;
01187     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
01188         <a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html">IPDRConnection</a> *IC = CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o5">SessionConnection</a>;
01189         <a class="code" href="../../d4/d37/struct_i_p_d_r__tag___t_c_p_connection.html">Connection</a> Conn = NULL;
01190     <a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html">IPDR_EventData</a> eventData;
01191 
01192         <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01193 
01194         <span class="keywordflow">if</span>(IC != NULL)
01195         {
01196                 Conn = IC-&gt;<a class="code" href="../../db/d4f/struct_i_p_d_r__tag___connection.html#o3">TCPConnection</a>;
01197         }
01198 
01199 <span class="preprocessor">#if defined(DEBUG_PRINTF) &amp;&amp; defined(_VXWORKS_DEBUG)</span>
01200 <span class="preprocessor"></span>    countTick =  tickGet ();
01201     printf(<span class="stringliteral">"\n window size timer callback , ticks [%ld]"</span>, countTick);
01202 <span class="preprocessor">#endif</span>
01203 <span class="preprocessor"></span>
01204     <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a13">Platform_UnregisterTimerAndClear</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp;CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o9">WindowSizeTimer</a>);
01205 
01206     <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a98">EventDataInit</a>(&amp;eventData, <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga6a151">IPDR_EVENT_SERVER_DISCONNECTED</a>, E, CS, S);
01207     eventData.<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o13">Extra</a>.Disconnected.Reason = <a class="code" href="../../df/dd7/group___i_p_d_r__event__notification.html#gga7a160">IPDR_EVENT_DISCONNECTED_TIMEOUT</a>;
01208     eventData.<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o13">Extra</a>.Disconnected.TimeoutMillisec = E-&gt;<a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html#o4">Parameters</a>.<a class="code" href="../../d1/dac/struct_exporter_parameters.html#o0">WindowTimeout</a>;
01209 
01210     <span class="keywordflow">if</span> (IC == NULL || CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> == <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a52a24">IPDR_CS_DISCONNECTED</a>) {
01211         eventData.<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o1">IC</a> = NULL;
01212         <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a99">Exporter_TriggerEvent</a>(E, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a170">IPDR_LEVEL_WARNING</a>, &amp;eventData, CS,
01213                             <span class="stringliteral">"Acknowledgment timeout (%d msec): Collector=none, outstanding=%lu, unACKed=%lu, Session=%u [%.40s] (%.80s)"</span>,
01214                             E-&gt;Parameters.WindowTimeout,
01215                             <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S),
01216                             <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UnacknowledgedDataCount(E, S),
01217                             S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o18">Description</a>);
01218     } <span class="keywordflow">else</span> {
01219         eventData.<a class="code" href="../../d6/df8/struct_i_p_d_r___event_data.html#o1">IC</a> = IC;
01220         <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a99">Exporter_TriggerEvent</a>(E, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a170">IPDR_LEVEL_WARNING</a>, &amp;eventData, CS,
01221                             <span class="stringliteral">"Acknowledgment timeout (%d msec): %.98s, outstanding=%lu, unACKed=%lu, Session=%u [%.40s] (%.80s)"</span>,
01222                             E-&gt;Parameters.WindowTimeout,
01223                             <a class="code" href="../../db/d58/_for_doxygen_2src_2_common_2_transport_8h.html#a14">TL_GetConnectionInfoStr</a>(Conn),
01224                             <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;OutstandingDataCount(E, S),
01225                             <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;UnacknowledgedDataCount(E, S),
01226                             S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o18">Description</a>);
01227     }
01228 <span class="preprocessor">#ifdef OBSOLETE</span>
01229 <span class="preprocessor"></span>    <span class="keywordflow">switch</span> (CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a>) {
01230     <span class="keywordflow">case</span> <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a52a27">IPDR_CS_ACTIVE</a>: <span class="comment">/* shouldn't happen, but let's be cautious */</span>
01231         <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a27">Log_StateTransition</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a3">PROTOCOL_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a171">IPDR_LEVEL_INFO</a>,
01232                             <span class="stringliteral">"Exporter_WindowSizeTimerCallback"</span>, Conn, CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a>, IPDR_SERVER_PAUSED,
01233                             <span class="stringliteral">"acknolwedgment timeout"</span>);
01234         CS-&gt;<a class="code" href="../../d5/da9/struct_i_p_d_r__tag___collector_session.html#o1">CSState</a> = <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a52a26">IPDR_CS_READY</a>;
01235         <span class="keywordflow">break</span>;
01236     <span class="keywordflow">default</span>:
01237         <span class="keywordflow">break</span>;
01238     }
01239 <span class="preprocessor">#endif</span>
01240 <span class="preprocessor"></span>    <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>);
01241 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a38" doxytag="Exporter.h::IPDR_GetTemplateInternal"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> IPDR_GetTemplateInternal           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">IPDR_SessionHandle</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>SessionHandle</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>TemplateID</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>SchemaName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char **&nbsp;</td>
          <td class="mdname" nowrap> <em>TypeName</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int *&nbsp;</td>
          <td class="mdname" nowrap> <em>NumKeys</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html">IPDR_TemplateHandle</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>TH</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<div class="fragment"><pre class="fragment">03010 {
03011         <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = SessionHandle ;
03012     <span class="keywordtype">int</span> i;
03013     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *Tmpl;
03014 
03015     <span class="keywordflow">if</span> (! S || ! TH) {
03016         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a181">IPDR_ERR_INVALID_VALUE</a>;
03017     }
03018 
03019         TH-&gt;<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a> = 0xFFFFFFFFu;
03020     <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a34">Platform_Lock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>);
03021 
03022     <span class="keywordflow">for</span> (i = 0; i &lt; S-&gt;Templates.Length; i++) {
03023         Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
03024         <span class="keywordflow">if</span> (Tmpl != NULL &amp;&amp; Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a> == TemplateID) {
03025             TH-&gt;<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o0">i</a> = i;
03026                         TH-&gt;<a class="code" href="../../d4/dc8/struct_i_p_d_r__tag___template_handle.html#o1">s</a> = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o16">ID</a>;
03027                         <span class="keywordflow">if</span> (SchemaName) (*SchemaName) = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o1">SchemaName</a>;
03028                         <span class="keywordflow">if</span> (TypeName) (*TypeName) = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o2">TypeName</a>;
03029                         <span class="keywordflow">if</span> (NumKeys) (*NumKeys) = Tmpl-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o3">Keys</a>.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>;
03030             <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>);
03031             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
03032         }
03033     }
03034 
03035     <a class="code" href="../../d7/d54/_for_doxygen_2src_2_common_2_platform_8h.html#a35">Platform_Unlock</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a5">SESSION_PLATFORM</a>);
03036     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a197">IPDR_ERR_TEMPLATE_NOT_FOUND</a>;
03037 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a45" doxytag="Exporter.h::Session_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void Session_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete resources associated with a session. <dl compact><dt><b>Note:</b></dt><dd>not static </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Obj</em>&nbsp;</td><td>object to delete </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00816 {
00817     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = (<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *) Obj;
00818     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
00819 
00820     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o3">ActiveContext</a>, *NextTC;
00821 
00822     strncpy(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>, <span class="stringliteral">"Dsessio"</span>, <span class="keyword">sizeof</span> S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>);
00823 
00824         <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o14">CollectorSessions</a>));
00825 
00826     <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;DeleteSession(E, S);
00827 
00828     <span class="keywordflow">while</span> (TC != NULL) {
00829         NextTC = TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o6">NextContext</a>;
00830         <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(PS, TC);
00831         TC = NextTC;
00832     }
00833 
00834     <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(PS, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>);
00835     <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(PS, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o18">Description</a>);
00836 
00837     strncpy(S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>, <span class="stringliteral">"Xsessio"</span>, <span class="keyword">sizeof</span> S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o0">eyecatcher</a>);
00838 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a30" doxytag="Exporter.h::Session_HandleTemplateChanges"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Session_HandleTemplateChanges           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap> <em>NumChanges</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>unsigned char *&nbsp;</td>
          <td class="mdname" nowrap> <em>TCBs</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Force</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>CopyFromExporter</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../dc/d02/ipdr_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>Negotiable</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Apply template configuration changes to a session given an array of template change blocks (as defined in the IPDR protocol).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>Exporter owning the session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>NumChanges</em>&nbsp;</td><td>number of template change blocks </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>TCBs</em>&nbsp;</td><td>array of template change blocks </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Force</em>&nbsp;</td><td>if true, a new context will be created even when no changes where supplied </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>CopyFromExporter</em>&nbsp;</td><td>the existing configuration should be based on the client templates </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Negotiable</em>&nbsp;</td><td>indicates whether templates negotiation can take place on the session</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01345 {
01346 <span class="preprocessor">#ifdef NOTDONEYET</span>
01347 <span class="preprocessor"></span>    <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a>*        TC = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o4">WorkContext</a>;
01348     <span class="keywordtype">int</span>                                         i, j;
01349     <span class="keywordtype">unsigned</span> <span class="keywordtype">short</span>                      TemplateID;
01350     <a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a>                            *Tmpl, *NewTmpl, *Tmpl1;
01351     <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a16">IPDR_BOOL</a>                           TemplateChanged = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a>;
01352     <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga0">IPDR_Status</a>                         Status;
01353     <a class="code" href="../../db/dc0/struct_dynamic_array.html">DynamicArray</a>                        Tmpls, *Source;
01354     <span class="keyword">const</span> KeyBlock *            KB;
01355     <a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *                                       K;
01356     size_t                                      BlockLength;
01357 
01358         <span class="comment">/*const TemplateChangeBlockHeader *TCB = TCBs;*/</span>
01359 
01360     <span class="keywordflow">if</span> (! CopyFromExporter)
01361         Source = &amp; (TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>);
01362     <span class="keywordflow">else</span>
01363         Source = &amp; (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o15">Templates</a>);
01364 
01365     <span class="comment">/* check if something actually changed compared to the</span>
01366 <span class="comment">       current configuration */</span>
01367 
01368     <span class="keywordflow">if</span> (! Force) {
01369         <span class="keywordflow">for</span> (i = 0; i &lt; NumChanges; i++) {
01370 
01371             TemplateID = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;TemplateID);
01372 
01373             Tmpl = NULL;
01374             <span class="keywordflow">for</span> (j = 0; j &lt; Source-&gt;Length; j++) {
01375                 Tmpl1 = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Source-&gt;<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
01376                 <span class="keywordflow">if</span> (Tmpl1 != NULL &amp;&amp; Tmpl1-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a> == TemplateID) {
01377                     Tmpl = Tmpl1;
01378                     <span class="keywordflow">break</span>;
01379                 }
01380             }
01381 
01382             <span class="keywordflow">if</span> (Tmpl == NULL)
01383                 <span class="keywordflow">continue</span>;
01384 
01385             KB = (<span class="keyword">const</span> KeyBlock *) ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) TCB + <span class="keyword">sizeof</span>(TemplateChangeBlockHeader));
01386             <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a7">Template_IsModified</a>(Tmpl, <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;NumKeys), KB, &amp; TemplateChanged);
01387 
01388             <span class="keywordflow">if</span> (TemplateChanged) {
01389                 TemplateChanged = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>;
01390                 break ;
01391             }
01392 
01393             BlockLength =
01394                 <span class="keyword">sizeof</span>(TemplateChangeBlockHeader) +
01395                 <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;NumKeys) * <span class="keyword">sizeof</span>(KeyBlock);
01396             TCB = (<span class="keyword">const</span> TemplateChangeBlockHeader *) ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) TCB + BlockLength);
01397         }
01398 
01399         <span class="comment">/* if nothing changed in the templates configuration, return */</span>
01400         <span class="keywordflow">if</span> (! TemplateChanged)
01401             <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
01402     }
01403 
01404     Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a2">DynamicArray_Create</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; Tmpls, 0);
01405     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01406         <span class="keywordflow">return</span> Status;
01407     Status = <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a14">DynamicArray_Copy</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Source, &amp; Tmpls);
01408     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status))
01409         <span class="keywordflow">return</span> Status;
01410 
01411     TCB = TCBs;
01412 
01413     <span class="comment">/* perform modifications to the needed keys */</span>
01414     <span class="keywordflow">for</span> (i = 0; i &lt; NumChanges; i++) {
01415 
01416         TemplateID = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;TemplateID);
01417 
01418         Tmpl = NULL;
01419         <span class="keywordflow">for</span> (j = 0; j &lt; Source-&gt;Length; j++) {
01420             Tmpl1 = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Source-&gt;<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j];
01421             <span class="keywordflow">if</span> (Tmpl1 != NULL &amp;&amp; Tmpl1-&gt;<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html#o0">TemplateID</a> == TemplateID) {
01422                 Tmpl = Tmpl1;
01423                 <span class="keywordflow">break</span>;
01424             }
01425         }
01426 
01427         <span class="keywordflow">if</span> (Tmpl != NULL) {
01428             KB = (<span class="keyword">const</span> KeyBlock *) ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) TCB + <span class="keyword">sizeof</span>(TemplateChangeBlockHeader));
01429             <a class="code" href="../../d1/d2c/_for_doxygen_2src_2_exporter_2_templates_8c.html#a8">Template_ModifyTemplate</a>(S, Tmpl, <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;NumKeys), KB, &amp; NewTmpl);
01430             Tmpls.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[j] = NewTmpl;
01431             <a class="code" href="../../d5/d22/_for_doxygen_2src_2_common_2_memory_management_8c.html#a5">Object_Release</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, Tmpl);
01432         }
01433 
01434         BlockLength =
01435             <span class="keyword">sizeof</span>(TemplateChangeBlockHeader) +
01436             <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a11">IPDR_NTOHS</a>(TCB-&gt;NumKeys) * <span class="keyword">sizeof</span>(KeyBlock);
01437         TCB = (<span class="keyword">const</span> TemplateChangeBlockHeader *) ((<span class="keyword">const</span> <span class="keywordtype">char</span> *) TCB + BlockLength);
01438     }
01439 
01440     <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a29">Log_Write1</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">"Session_HandleTemplateChanged"</span>,
01441                <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a16">MSG_EXPORTER_SESSION_TEMPLATES_CHANGED</a>, S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o17">Name</a>);
01442     <span class="keywordflow">for</span> (i = 0; i &lt; Tmpls.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o1">Length</a>; i++) {
01443         Tmpl = (<a class="code" href="../../da/d62/struct_i_p_d_r__tag___template.html">Template</a> *) Tmpls.<a class="code" href="../../db/dc0/struct_dynamic_array.html#o0">Data</a>[i];
01444         <span class="keywordflow">if</span> (Tmpl == NULL)
01445             <span class="keywordflow">continue</span>;
01446         <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a30">Log_Write2</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a171">IPDR_LEVEL_INFO</a>, <span class="stringliteral">"Session_HandleTemplateChanged"</span>,
01447                    <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a17">MSG_EXPORTER_TEMPLATE_INFO</a>, Tmpl-&gt;TemplateID, Tmpl-&gt;SchemaName);
01448         <span class="keywordflow">for</span> (j = 0; j &lt; Tmpl-&gt;Keys.Length; j++) {
01449             K = (<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html">Key</a> *) Tmpl-&gt;Keys.Data[j];
01450             <a class="code" href="../../d1/d4e/_for_doxygen_2src_2_common_2_log_8h.html#a31">Log_Write3</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a4">EXPORTER_LOG</a>, <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a1">EXPORTER_MODULE_ID</a>, <a class="code" href="../../dc/d9b/group___i_p_d_r__logging.html#gga7a172">IPDR_LEVEL_DEBUG</a>, <span class="stringliteral">"Session_HandleTemplateChanged"</span>,
01451                        <a class="code" href="../../de/d4f/_for_doxygen_2src_2_exporter_2_exporter_msgs_8h.html#a18">MSG_EXPORTER_KEY_INFO</a>, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o0">KeyID</a>, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o2">Name</a>, K-&gt;<a class="code" href="../../de/d6f/struct_i_p_d_r__tag___key.html#o5">Enabled</a>);
01452         }
01453     }
01454 
01455     Status = <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a45">Session_CreateNewWorkContext</a>(E, S, &amp; Tmpls, Negotiable);
01456     <span class="keywordflow">if</span> (<a class="code" href="../../d0/d8b/_for_doxygen_2include_2_i_p_d_r_2_i_p_d_r_8h.html#a18">FAILURE</a>(Status)) {
01457         <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; Tmpls);
01458         <span class="keywordflow">return</span> Status;
01459     }
01460 
01461     <span class="comment">/* trigger the templates change callback */</span>
01462     <a class="code" href="../../dd/dd0/_for_doxygen_2src_2_exporter_2_exporter_8c.html#a97">Exporter_TriggeTemplateChangedCallback</a>(S);
01463 
01464     <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(<a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a1">EXPORTER_PLATFORM</a>, &amp; Tmpls);
01465 <span class="preprocessor">#endif</span>
01466 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
01467 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a28" doxytag="Exporter.h::Session_SelectActiveCollector"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Session_SelectActiveCollector           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Select a new active server for a given session.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>Exporter owning the session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01316 {
01317 
01318     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
01319 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a29" doxytag="Exporter.h::Session_SendOutstandingData"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga11">IPDR_Status</a> Session_SendOutstandingData           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>E</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>S</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Send any outstanding (unacknowledged) data within a session.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>E</em>&nbsp;</td><td>Exporter owning the session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>S</em>&nbsp;</td><td>Session</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga30a174">IPDR_OK</a> on success; <a class="el" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#ga30">IPDR_STATUS_RETURN_CODE</a> otherwise. </dd></dl>
<div class="fragment"><pre class="fragment">01481 {
01482     <span class="comment">/* check if we've recursively been called. If we did don't do anything</span>
01483 <span class="comment">       since the caller will continue sending */</span>
01484         <span class="keywordflow">if</span>( S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o10">Running</a> == <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a>)
01485                 <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a177">IPDR_ERR_SESSION_LOGICALLY_STOPED</a>;
01486 
01487     <span class="keywordflow">if</span> (S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o8">SendingData</a>)
01488         <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
01489 
01490     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o8">SendingData</a> = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a5">IPDR_TRUE</a>;
01491     <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;SendOutstandingData(E, S);
01492     S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o8">SendingData</a> = <a class="code" href="../../db/d2e/_for_doxygen_2include_2_i_p_d_r_2_defs_8h.html#a4">IPDR_FALSE</a>;
01493 
01494     <span class="keywordflow">return</span> <a class="code" href="../../d1/dc2/group___i_p_d_r__general__typedefs.html#gga29a174">IPDR_OK</a>;
01495 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<a class="anchor" name="a43" doxytag="Exporter.h::TransmissionContext_Destructor"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">void TransmissionContext_Destructor           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="../../dd/dc5/struct_i_p_d_r__tag___platform.html">IPDR_PlatformServices</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>PS</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap> <em>Obj</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Delete resources associated with a transmission context. <dl compact><dt><b>Note:</b></dt><dd>not static --- used by MemoryManagement.c</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>PS</em>&nbsp;</td><td>platform services </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Obj</em>&nbsp;</td><td>object to delete </td></tr>
  </table>
</dl>
<div class="fragment"><pre class="fragment">00750 {
00751     <a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *TC = (<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html">TransmissionContext</a> *) Obj;
00752     <a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html">Session</a> *S = TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o5">SessionPtr</a>;
00753     <a class="code" href="../../df/d71/struct_i_p_d_r__tag___exporter.html">Exporter</a> *E = S-&gt;<a class="code" href="../../d9/d35/struct_i_p_d_r__tag___session.html#o19">ExporterPtr</a>;
00754 
00755     strncpy(TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>, <span class="stringliteral">"Dxmtctx"</span>, <span class="keyword">sizeof</span> TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>);
00756     <a class="code" href="../../dd/d31/_for_doxygen_2src_2_common_2_dynamic_array_8c.html#a5">DynamicArray_Delete</a>(PS, &amp; (TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o2">Templates</a>));
00757     <a class="code" href="../../d6/dfc/_for_doxygen_2src_2_exporter_2_exporter_8h.html#a3">EXPORTER_QHANDLER</a>-&gt;DeleteTransmissionContext(E, S, TC);
00758     strncpy(TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>, <span class="stringliteral">"Xxmtctx"</span>, <span class="keyword">sizeof</span> TC-&gt;<a class="code" href="../../d1/d8c/struct_i_p_d_r__tag___transmission_context.html#o0">eyecatcher</a>);
00759 }
</pre></div>
<p>
    </td>
  </tr>
</table>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="a13" doxytag="Exporter.h::Exporter_DefaultHandlers"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="../../db/dcd/struct_i_p_d_r__tag___connection_handlers.html">ConnectionHandlers</a> <a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a13">Exporter_DefaultHandlers</a>          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handlers for transport layer connections, for initial connection.     </td>
  </tr>
</table>
<a class="anchor" name="a12" doxytag="Exporter.h::ServerStateStr"></a><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">const char* <a class="el" href="../../df/df3/ipdr_2src_2_exporter_2_exporter_8h.html#a12">ServerStateStr</a>[]          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Vector of names of the enum ServerState.     </td>
  </tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 09:26:27 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
