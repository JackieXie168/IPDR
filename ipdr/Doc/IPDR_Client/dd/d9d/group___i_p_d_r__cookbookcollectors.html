<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>IPDRAPI: Cookbook: Determine downstream processing needs</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="../../index.html">Main&nbsp;Page</a> | <a class="qindex" href="../../modules.html">Modules</a> | <a class="qindex" href="../../namespaces.html">Namespace List</a> | <a class="qindex" href="../../hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="../../annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="../../dirs.html">Directories</a> | <a class="qindex" href="../../files.html">File&nbsp;List</a> | <a class="qindex" href="../../functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="../../globals.html">Globals</a></div>
<h1>Cookbook: Determine downstream processing needs<br>
<small>
[<a class="el" href="../../da/d25/group___i_p_d_r__cookbook.html">Cookbook: How to build a IPDR Exporter</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
In an ideal world, you could just output your accounting data in the form that's most convenient for you. In reality, you need to think a bit about how the data will be used.<p>
If you're outputting multiple kinds of data, you must have some way of distinguishing one kind of data from another -- IPDR multiplexes all records into a single record, with unused data fields marked as "null".<p>
IPDR handles data with a variable number of fields the same way that a relational database handles data. For example, if you have master information and a list of details, you must instead send the master information by itself, with a separate record for each detail (and the detail records must have a field that allows matching them with the master record).<p>
For example, suppose a mail server wishes to output each message's sender and list of recipients. This can be done by defining two records: <dl>
<dt>message: </dt>
<dd>timestamp, msgID, sender, ... </dd>
<dt>recipientDetail: </dt>
<dd>msgID, receiver </dd>
</dl>
This has an obvious implementation in a SQL database, allowing a query to get the sender and all recipients for a message by doing a "join" on the msgID: <br>
<code>&nbsp;&nbsp;SELECT&nbsp;timestamp,&nbsp;sender,&nbsp;receiver <br>
&nbsp;&nbsp;FROM&nbsp;message,&nbsp;recipientDetail <br>
&nbsp;&nbsp;WHERE&nbsp;message.msgID&nbsp;=&nbsp;receipient.msgID</code><p>
Other processing needs include: <ul>
<li>
Whether to send timestamps in local time or UTC (GMT) ... UTC is usually better. </li>
<li>
How to identify the sender (e.g., the sender's IP address). </li>
<li>
Whether to send absolute values or deltas (if absolute values, how to handle overflow; if deltas, how to handle situations of data loss, as described in <a class="el" href="../../de/dcd/group___i_p_d_r__cookbook__events.html">Cookbook: Error and event handling</a>). </li>
<li>
How to describe missing data situations (e.g., zero-lengh string, a separate field that indicates missing data). </li>
<li>
How to uniquely identify a record, for deduplication. In general, this is not a problem because the IPDR protocol provides a transmitter (client) boot time and sequence number for each record. However, the sequence number can wrap around, so if deduplication is done over large sets of records, some additional field(s) must be used to uniquely identify records. </li>
<li>
If multiple records are output at one time (e.g., statistics tables), whether these must be locked from update while the data are being output. </li>
</ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Apr 25 22:28:26 2005 for IPDRAPI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
